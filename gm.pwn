
#pragma option -d2
#pragma option -(+
#pragma option -;+
#pragma warning disable 239
#pragma warning disable 213
#pragma warning disable 239
#pragma warning disable 214
#pragma warning disable 203
#pragma warning disable 204

AntiDeAMX() {
    new a[][] = {
        "Unarmed (Fist)",
        "Brass K"
    };
    #pragma unused a
}

const MAX_PLAYERS = 100;
#define MAX_PLAYERS 100

const MAX_VEHICLES = 2000;
#define MAX_VEHICLES 2000

#define SHA256_HASH_LENGTH 100

#define FOREACH_NO_ACTORS
#define FOREACH_NO_LOCALS

#include <a_samp>
#include <crashdetect>
#define YSI_NO_HEAP_MALLOC
#include <YSI_Coding\y_va>
#include <YSI_Coding\y_stringhash>
#include <YSI_Coding\y_timers>
#include <YSI_Game\y_vehicledata>
#include <YSI_Data\y_foreach>
#include <a_mysql>
#include <YSI_Coding\y_inline>
#include <YSI_Extra\y_inline_mysql>
#include <streamer>
#include <sscanf2>
#include <Pawn.CMD>
#include <Pawn.Regex>
#include <Pawn.RakNet>
#include <interpolate_weather>
#include <mapandreas>
#define PP_SYNTAX_FOR_LIST
#include <PawnPlus>
#include <progress2>
#include <mobile-checker>
#include <easyDialog>
//#include <YSF>

#define SERVER_NAME "(ES) Spain + Movil/PC"
#define SERVER_SHORT_NAME "Spain +"
#define SERVER_GAMEMODE "Main"
#define SERVER_LANGUAGE "Epañol"
#define SERVER_WEBSITE "xxz"
#define SERVER_DISCORD "xxz"
#define SERVER_HOSTNAME "(ES) Spain + Movil/PC"
#define SERVER_COIN "Gema"

#define MAX_BAD_LOGIN_ATTEMPS 3
#define TIME_FOR_REP 2400000 //40 minutos
#define LOGIN_TIME 180000
#define NEARS_PLAYERS_DISTANCE 4.0
#define NECESSARY_TIME_BETWEEN_WORKS 180 //segundos

/* Colores principales */
#define PRIMARY_COLOR "66c4e4"
#define RED_COLOR "ff0000"
#define YELLOW_COLOR "ffcd25"
#define GREEN_COLOR "00ee33"
#define BLUE_COLOR "239bff"
#define LIGHTBLUE_COLOR "41ff73"
#define ORANGE_COLOR "FF3300"

/* Colores trabajos */
#define MECHANIC_COLOR "999999"
#define MEDIC_COLOR "ff3200"
#define POLICE_COLOUR "0f4bff"

#define COLOR_FADE1 0xFFFFFFFF
#define COLOR_FADE2 0xC8C8C8C8
#define COLOR_FADE3 0xAAAAAAAA
#define COLOR_FADE4 0x8C8C8C8C
#define COLOR_FADE5 0x6E6E6E6E
#define PLAYER_COLOR 0xFFFFFF00

#define MAX_NU_VEHICLES 2
#define MAX_NU_PROPERTIES 1
#define MAX_NU_WORKS 1
#define MAX_NU_VOBJECTS 3

#define MAX_SU_VEHICLES 6
#define MAX_SU_PROPERTIES 3
#define MAX_SU_WORKS 3
#define MAX_SU_VOBJECTS 10

#define VIP_CASH_PRICE 1200000
#define VIP_BUY_COINS_PRICE 10
#define VIP_WORK_EXTRA_PAY 300
#define CNAME_COINS_PRICE 10

#define MAX_BANK_ATM 18

#define MIN_VEHICLE_INTERACTION_SPEED 20

new
	bool:server_loaded,
	bool:maintenance_mode,
	maintenance_mode_timer,
	MySQL:handle_db,
	QUERY_BUFFER[4096],
	Float:New_User_Pos[4] = {1773.307250, -1896.441040, 13.551166, 270.0},
	Mechanic_Areas[1],
	Lumberjack_Area,
	Farmer_Area,
	Harvest_Area,
	Jail_Areas[4],
	TOTAL_TERRITORIES;

new neccessary_rep[] =
{
	0, 6, 12, 24, 
	36, 48, 90, 
	108, 168, 192, 
	270, 300, 360
};

new const Float:Driving_School_Vehicle_Info[] = {1157.2443, -1744.3693, 13.1413, 270.2102};
new const Float:Driving_School_Points[][] = {
	{1173.5654, -1838.6954, 13.1505, 179.6818},
	{1117.4629, -1849.5853, 13.1249, 90.9242},
	{1067.8553, -1849.2181, 13.1392, 84.1699},
	{1047.1438, -1816.6072, 13.3249, 31.9435},
	{1038.9615, -1770.0331, 13.1250, 3.4684},
	{1050.5669, -1714.5780, 13.1250, 273.2703},
	{1127.0282, -1714.4247, 13.1323, 270.1867},
	{1215.4539, -1714.7606, 13.1247, 270.9952},
	{1285.1892, -1714.7253, 13.1249, 270.1736},
	{1295.4269, -1782.5415, 13.1249, 179.9132},
	{1295.3633, -1824.4071, 13.1249, 179.9140},
	{1307.5101, -1854.6200, 13.1249, 270.9500},
	{1358.8079, -1869.6903, 13.1248, 245.5889},
	{1405.8561, -1874.8981, 13.1249, 269.9672},
	{1460.7163, -1874.9333, 13.1293, 269.9697},
	{1551.2828, -1874.5294, 13.1252, 269.7504},
	{1630.5677, -1873.6995, 13.1248, 271.0040},
	{1686.0674, -1859.0458, 13.1293, 328.0030},
	{1691.4753, -1825.7904, 13.1249, 359.4805},
	{1733.6483, -1819.2463, 13.1088, 254.5583},
	{1807.6050, -1835.4460, 13.1249, 270.5257},
	{1824.0144, -1805.5756, 13.1370, 1.2400},
	{1824.2638, -1781.7540, 13.1250, 359.8499},
	{1824.3425, -1751.4971, 13.1249, 359.8484},
	{1787.3577, -1729.4019, 13.1247, 89.8491},
	{1729.5050, -1729.9780, 13.1338, 89.9082},
	{1679.8163, -1729.9008, 13.1312, 89.9106},
	{1558.1307, -1729.7064, 13.1249, 89.9092},
	{1505.0425, -1729.6230, 13.1254, 89.9070},
	{1462.1357, -1729.5529, 13.1249, 89.9077},
	{1416.8589, -1729.4766, 13.1291, 89.9092},
	{1332.8950, -1729.8567, 13.1248, 88.2593},
	{1314.8645, -1705.3495, 13.1250, 0.9783},
	{1314.6161, -1655.3479, 13.1249, 359.8525},
	{1314.9089, -1602.2675, 13.1248, 0.2342},
	{1316.3306, -1557.5502, 13.1336, 356.1893},
	{1344.6299, -1491.3746, 13.1281, 332.1178},
	{1353.9972, -1461.6753, 13.1249, 347.5490},
	{1359.0005, -1425.7623, 13.1289, 354.6941},
	{1351.2295, -1402.9755, 13.0587, 94.9718},
	{1339.4523, -1429.6808, 13.1249, 174.9771},
	{1321.8519, -1491.0463, 13.1248, 150.7598},
	{1295.7971, -1578.1471, 13.1248, 178.0028},
	{1295.2035, -1663.3915, 13.1249, 180.6773},
	{1295.6831, -1703.9310, 13.1248, 178.6104},
	{1253.6951, -1709.9597, 13.1248, 89.2675},
	{1197.2850, -1709.5896, 13.1249, 89.6573},
	{1171.6996, -1732.3020, 13.2678, 177.1493},
	{1149.7314, -1739.0100, 13.2158, 90.2542},
	{1119.2462, -1738.6248, 13.2308, 91.2352},
	{1098.1803, -1760.9052, 13.0947, 90.1577}
};

#define PRESSED(%0) (((newkeys & (%0)) == (%0)) && ((oldkeys & (%0)) != (%0)))
#define RELEASED(%0) (((newkeys & (%0)) != (%0)) && ((oldkeys & (%0)) == (%0)))

#define IsPlayerDriver(%0) GetPlayerState(%0) == PLAYER_STATE_DRIVER
#define IsPlayerOnFoot(%0) GetPlayerState(%0) == PLAYER_STATE_ONFOOT

main() {}

forward OnPlayerEnterInterior(playerid, index);
forward OnPlayerExitInterior(playerid, index);

enum {
	CHEAT_WEAPON,
	CHEAT_AMMO,
	CHEAT_CAR_MOD,
	CHEAT_VEHICLE_SPEED_HACK,
	CHEAT_POS,
	CHEAT_TEXT_SPAMMER,
	CHEAT_COMMAND_SPAMMER,
	CHEAT_DEATH_SPAMMER,
	CHEAT_STATE_SPAMMER,
	CHEAT_VEHICLE_ENTER_SPAMMER,
	CHEAT_JETPACK,
	CHEAT_PLAYER_SPEED,
	CHEAT_PLAYER_HEALTH,
	CHEAT_PLAYER_ARMOUR,
	CHEAT_VEHICLE_HEALTH,
	CHEAT_PLAYER_VEHICLE_WORK, //Entra a un vehiculo que no es de su trabajo
	CHEAT_PLAYER_VEHICLE_DOORS,
	CHEAT_VEHICLE_NOFUEL,
	CHEAT_SPECTATE,
	CHEAT_UNDETECTED_WEAPON,
	CHEAT_DRIVE_BY,
	CHEAT_UNOCCUPIED_VEHICLE_TP,
	CHEAT_HIGH_POS,
	CHEAT_CAR_JACKING,
	CHEAT_FAKE_TRAILER_SYNC,
	CHEAT_DESTROY_VEHICLE,
	CHEAT_CBUG,
	CHEAT_AFKPOS
}

enum e_ac_Info {
	ac_Name[24],
	bool:ac_Enabled,
	bool:ac_Kick, // 1 = kickea, 0 = avisa a admins
	ac_Detections, //enviar aviso cuando llege a este num en los seg de abajo
	ac_Interval,
}
new ac_Info[][e_ac_Info] = {
	{"armas",					true, true,		1, 0},
	{"municion",				true, true,		1, 0},
	{"mod car",					true, true,		1, 0},
	{"vehicle speed",			true, true,		1, 0},
	{"pos",						true, false,	3, 10},
	{"text spammer",			true, true,		10, 5},
	{"command spammer",			true, true,		5, 5},
	{"death spammer",			true, false,	1, 0},
	{"state change spammer",	true, false,	1, 0},
	{"vehicle enter spammer",	true, false,	1, 0},
	{"jetpack",					true, true,		1, 0},
	{"player speed",			true, false,	1, 0},
	{"player health",			true, true,		1, 0},
	{"player armour",			true, true,		1, 0},
	{"vehicle health",			true, true,		1, 0},
	{"pwork != vwork",			true, true,		1, 0},
	{"enter closed vehicle",	true, false,	1, 0},
	{"vehicle nofuel cs",		true, false,	50, 10},
	{"player spectate",			true, false,	1, 0},
	{"pweapon != sweapon",		true, false,	1, 0},
	{"drive by",				true, false,	1, 0},
	{"unoccupied veh tp",		true, true,		1, 0},
	{"high pos",				true, true,		1, 0},
	{"car jacking",				true, true,		1, 0},
	{"fake trailer sync",		true, true,		1, 0},
	{"destroy vehicle",			true, false,	1, 0},
	{"cbug",					true, false,	1, 0},
	{"afk pos",					true, true,		1, 0}
};

enum e_PLAYER_AC_INFO {
	p_ac_info_DETECTIONS,
	p_ac_info_LAST_DETECTION,
	p_ac_info_IMMUNITY, //gettime + seconds
}
new PLAYER_AC_INFO[MAX_PLAYERS][sizeof(ac_Info)][e_PLAYER_AC_INFO];

enum {
	TYPE_LEGAL,
	TYPE_ILLEGAL,
}

enum {
	DIALOG_REGISTER,
	DIALOG_REGISTER_EMAIL,
	DIALOG_LOGIN,
	DIALOG_INFO,
	DIALOG_CLOTHES,
	DIALOG_FOOD_PIZZA,
	DIALOG_FOOD_CLUCKIN,
	DIALOG_FOOD_BURGER,
	DIALOG_BANK,
	DIALOG_BANK_WITHDRAW,
	DIALOG_BANK_DEPOSIT,
	DIALOG_BANK_TRANSFER,
	DIALOG_BANK_TRANSFER_SEND,
	DIALOG_BANK_TRANSACTIONS,
	DIALOG_CREATE_BANK_ACCOUNT,
	DIALOG_247_LIST,
	DIALOG_PHONE,
	DIALOG_PHONE_BOOK,
	DIALOG_PHONE_BOOK_ADD_NUMBER,
	DIALOG_PHONE_BOOK_ADD_NAME,
	DIALOG_PHONE_BOOK_OPTIONS,
	DIALOG_PHONE_BOOK_CHANGE_NAME,
	DIALOG_PHONE_BOOK_CONFIRM_DELET,
	DIALOG_PHONE_BOOK_DELETE_ALL,
	DIALOG_PHONE_CALL_NUMBER,
	DIALOG_PHONE_SMS_NUMBER,
	DIALOG_PHONE_SMS_MESSAGE,
	DIALOG_PHONE_BOOK_SEND_MESSAGE,
	DIALOG_PHONE_SENT_MESSAGES,
	DIALOG_PHONE_RECEIVED_MESSAGES,
	DIALOG_CONFIRM_BUY_PROPERTY,
	DIALOG_PLAYER_GPS,
	DIALOG_PLAYER_GPS_PLAYER,
	DIALOG_PLAYER_GPS_PLAYER_ADD,
	DIALOG_PLAYER_GPS_PLAYER_OPTION,
	DIALOG_PLAYER_GPS_CHANGE_NAME,
	DIALOG_PLAYER_GPS_CONFIRM_DELET,
	DIALOG_PLAYER_GPS_SITES,
	DIALOG_PLAYER_GPS_WORKS,
	DIALOG_PLAYER_GPS_DELETE_ALL,
	DIALOG_PLAYER_GPS_SITE_0,
	DIALOG_PLAYER_GPS_SITE_1,
	DIALOG_PLAYER_GPS_SITE_2,
	DIALOG_PLAYER_GPS_SITE_3,
	DIALOG_PLAYER_GPS_SITE_4,
	DIALOG_PLAYER_GPS_SITE_5,
	DIALOG_PLAYER_GPS_SITE_6,
	DIALOG_PLAYER_GPS_SITE_7,
	DIALOG_PLAYER_GPS_SITE_8,
	DIALOG_PLAYER_GPS_SITE_9,
	DIALOG_PLAYER_GPS_SITE_10,
	DIALOG_PLAYER_GPS_PROPERTIES,
	DIALOG_PLAYER_GPS_VEHICLES,
	DIALOG_PROPERTY_OPTIONS,
	DIALOG_PROPERTY_NAME,
	DIALOG_PROPERTY_BANK_SELL,
	DIALOG_NOTARY,
	DIALOG_NOTARY_SELECT_PROPERTY,
	DIALOG_PROPERTY_SELL_PRICE,
	DIALOG_PROPERTY_SELL_TO_PLAYER,
	DIALOG_SELL_CONFIRM_PROPERTY,
	DIALOG_NOTARY_SELECT_VEHICLE,
	DIALOG_VEHICLE_BANK_SELL,
	DIALOG_VEHICLE_SELL_PRICE,
	DIALOG_VEHICLE_SELL_TO_PLAYER,
	DIALOG_SELL_CONFIRM_VEHICLE,
	DIALOG_SELECT_TRUCK_TYPE,
	DIALOG_TUNING_MENU_PART,
	DIALOG_TUNING_MENU_COMPONENT,
	DIALOG_MECHANIC_MENU,
	DIALOG_MECHANIC_REPAIR_PRICE,
	DIALOG_MECHANIC_COLOR_PRICE,
	DIALOG_MECHANIC_TUNING_PRICE,
	DIALOG_MECHANIC_PAINTJOB_PRICE,
	DIALOG_MECHANIC_REM_COM_PRICE,
	DIALOG_MECHANIC_ACCEPT,
	DIALOG_MECHANIC_SELECT_COL_SLOT,
	DIALOG_MECHANIC_SELECT_COLOR,
	DIALOG_MECHANIC_REMOVE_COMPONEN,
	DIALOG_TUNING_PAINTJOB,
	DIALOG_SEED_LIST,
	DIALOG_SEED_BUY,
	DIALOG_PLANT_PLANTS,
	DIALOG_ANIMS,
	DIALOG_TRICKS_FOOD,
	DIALOG_TRICKS_MEDICINE,
	DIALOG_TRICKS_CANNABIS,
	DIALOG_TRICKS_CRACK,
	DIALOG_TRICKS_SU,
	DIALOG_TRICKS_WEAPON,
	DIALOG_SELECT_POLICE_SKIN,
	DIALOG_POLICE_RADIOS,
	DIALOG_POLICE_LIST,
	DIALOG_POLICE_MODIFY,
	DIALOG_HELP,
	DIALOG_HELP_GENERAL,
	DIALOG_HELP_INFO,
	DIALOG_HELP_CHARACTER,
	DIALOG_HELP_PROPERTIES,
	DIALOG_HELP_REPORT,
	DIALOG_HELP_VEHICLES,
	DIALOG_HELP_WORKS,
	DIALOG_HELP_CREWS,
	DIALOG_HELP_SU,
	DIALOG_ADMIN_LIST,
	DIALOG_ADMIN_MODIFY,
	DIALOG_CHANGE_PASSWORD,
	DIALOG_CHANGE_PASSWORD_PASS,
	DIALOG_ANTI_CHEAT,
	DIALOG_ANTI_CHEAT_MODIFY,
	DIALOG_ANTI_CHEAT_MODIFY_DETECT,
	DIALOG_CREATE_CREW,
	DIALOG_CREATE_CREW_NAME,
	DIALOG_CREATE_CREW_COLOR,
	DIALOG_CREATE_CREW_CONFIRM,
	DIALOG_CREW_MENU,
	DIALOG_CREW_MEMBER_LIST,
	DIALOG_CREW_CHANGE_NAME,
	DIALOG_CREW_MEMBER_LIST_DELETE,
	DIALOG_CREW_CAST_MEMBER_CONFIRM,
	DIALOG_CREW_INVITE_RANK,
	DIALOG_CREW_INVITE_ACCEPT,
	DIALOG_CREW_RANKS,
	DIALOG_CREW_RANK_MODIFY,
	DIALOG_CREW_RANK_MODIFY_NAME,
	DIALOG_CREW_RANK_MODIFY_PERMISS,
	DIALOG_CREW_RANK_DELETE,
	DIALOG_CREW_RANK_DELETE_CONFIRM,
	DIALOG_CREW_RANK_CREATE,
	DIALOG_CREW_MODIFY_COLOR,
	DIALOG_CREW_DELETE,
	DIALOG_CREW_LEAVE,
	DIALOG_CREW_MODIFY_MEMBERS,
	DIALOG_CREW_MODIFY_MEMBER,
	DIALOG_CREW_PROPERTY_CONFIRM,
	DIALOG_CREW_LEAVE_TERRITORY,
	DIALOG_CREW_LEAVE_PROPERTY,
	DIALOG_POLICE_PENALTY,
	DIALOG_SU_BUY,
	DIALOG_SU,
	DIALOG_VOBJECT_MENU,
	DIALOG_VOBJECT_OBJECTS,
	DIALOG_VOBJECT_OBJECT,
	DIALOG_VOBJECT_OBJECT_CNAME,
	DIALOG_VOBJECT_OBJECT_COLORS,
	DIALOG_VOBJECT_OBJECT_COLOR,
	DIALOG_VOBJECT_OBJECT_COLOR_HEX,
	DIALOG_VOBJECT_OBJECT_CDELETE,
	DIALOG_VOBJECT_DELETE_ALL,
	DIALOG_VOBJECT_TEXT_MENU,
	DIALOG_VOBJECT_TEXT_TEXT,
	DIALOG_VOBJECT_TEXT_FONT,
	DIALOG_VOBJECT_TEXT_FONT_SIZE,
	DIALOG_VOBJECT_TEXT_FONT_COLOR,
	DIALOG_VOBJECT_COUNTRY,
	DIALOG_PLAYER_CONFIG,
	DIALOG_WORKS_TELEPORTS,
	DIALOG_CHANGE_NAME,
	DIALOG_CHANGE_NAME_NAME,
	DIALOG_CHANGE_EMAIL,
	DIALOG_CHANGE_EMAIL_EMAIL,
	DIALOG_PLANE_OPTIONS,
	DIALOG_PLANE_SELECT_COLOR,
	DIALOG_BOAT_OPTIONS,
	DIALOG_BOAT_SELECT_COLOR
}

enum {
    INVENTORY_NONE,

	/* Comidas */
    INVENTORY_TYPE_SPRUNK,
	INVENTORY_TYPE_SODA,
    INVENTORY_TYPE_BURGER,
    INVENTORY_TYPE_PIZZA,
    INVENTORY_TYPE_HOTDOG, //dejar hotdog de ultimo

	/* Armas */
	INVENTORY_TYPE_WEAPON_DK,
	INVENTORY_TYPE_WEAPON_M4,
	INVENTORY_TYPE_WEAPON_AK,
	INVENTORY_TYPE_WEAPON_CS, //edc
	INVENTORY_TYPE_WEAPON_SG, //escopeta
	INVENTORY_TYPE_WEAPON_9MM,
	INVENTORY_TYPE_WEAPON_9MMS,
	INVENTORY_TYPE_WEAPON_SWF, //escopeta recortada
	INVENTORY_TYPE_WEAPON_MP5,
	INVENTORY_TYPE_WEAPON_UZI,

	/* Armas Cuerpo a Cuerpo */
	INVENTORY_TYPE_WEAPON_KNIFE,

	/* Dinero Negro */
	INVENTORY_TYPE_BLACK_CASH,

	/* Paquetes de Drogas */
	INVENTORY_TYPE_MEDICINE_PACK,
	INVENTORY_TYPE_CANNABIS_PACK,
	INVENTORY_TYPE_CRACK_PACK,

	/* Armas L */
	INVENTORY_TYPE_WEAPON_DK_L,
	INVENTORY_TYPE_WEAPON_M4_L,
	INVENTORY_TYPE_WEAPON_AK_L,
	INVENTORY_TYPE_WEAPON_CS_L, //edc
	INVENTORY_TYPE_WEAPON_SG_L, //escopeta
	INVENTORY_TYPE_WEAPON_9MM_L,
	INVENTORY_TYPE_WEAPON_MP5_L,
	INVENTORY_TYPE_WEAPON_UZI_L,

	/* Armas policia */
	INVENTORY_TYPE_WEAPON_TASER,
	INVENTORY_TYPE_WEAPON_CLUB,

	/* Chaleco */
	INVENTORY_TYPE_VEST,
	INVENTORY_TYPE_POLICE_VEST,

	/* Cargadores */
	INVENTORY_TYPE_AMMO_DK,
	INVENTORY_TYPE_AMMO_M4,
	INVENTORY_TYPE_AMMO_AK,
	INVENTORY_TYPE_AMMO_CS, //edc
	INVENTORY_TYPE_AMMO_SG, //escopeta
	INVENTORY_TYPE_AMMO_9MM,
	INVENTORY_TYPE_AMMO_9MMS,
	INVENTORY_TYPE_AMMO_SWF, //escopeta recortada
	INVENTORY_TYPE_AMMO_MP5,
	INVENTORY_TYPE_AMMO_UZI,

	/* Cargadores L */
	INVENTORY_TYPE_AMMO_DK_L,
	INVENTORY_TYPE_AMMO_M4_L,
	INVENTORY_TYPE_AMMO_AK_L,
	INVENTORY_TYPE_AMMO_CS_L, //edc
	INVENTORY_TYPE_AMMO_SG_L, //escopeta
	INVENTORY_TYPE_AMMO_9MM_L,
	INVENTORY_TYPE_AMMO_MP5_L,
	INVENTORY_TYPE_AMMO_UZI_L,

	/* Accesorios < INVENTORY_TYPE_TOY_ > */
	INVENTORY_TYPE_TOY_DOLPHIN,
	INVENTORY_TYPE_TOY_TOTEM,
	INVENTORY_TYPE_TOY_CWB_HAT,
	INVENTORY_TYPE_TOY_PLANE,
	INVENTORY_TYPE_TOY_BACKPACK,
	INVENTORY_TYPE_TOY_GUITAR_1,
	INVENTORY_TYPE_TOY_GUITAR_2,
	INVENTORY_TYPE_TOY_GUITAR_3,
	INVENTORY_TYPE_TOY_BALLOON,
	INVENTORY_TYPE_TOY_WINGS,
	INVENTORY_TYPE_TOY_CWB_HAT_2,

	/* Otros */
	INVENTORY_TYPE_DYNAMITE,
	INVENTORY_TYPE_FUEL_DRUM,
	INVENTORY_TYPE_ANONYMOUS_MASK,
	INVENTORY_TYPE_PARTS_BOX,
	INVENTORY_TYPE_MEDICAL_KIT,
	INVENTORY_TYPE_SCREWDRIVER,
	INVENTORY_TYPE_CROWBAR
}

enum {
	ROLEPLAY_STATE_NORMAL,
	ROLEPLAY_STATE_HOSPITAL,
	ROLEPLAY_STATE_INTERIOR,
	ROLEPLAY_STATE_OWN_PROPERTY,
	ROLEPLAY_STATE_GUEST_PROPERTY,
	ROLEPLAY_STATE_ARRESTED,
	ROLEPLAY_STATE_JAIL,
	ROLEPLAY_STATE_CRACK,
}

enum {
	GAME_STATE_NONE,
	GAME_STATE_CONNECTED,
	GAME_STATE_DEAD, // Pantalla de la muerte solo (wasted)
	GAME_STATE_NORMAL,
}

#define MAX_TIMERS_PER_PLAYER 22

/* TUNING SYSTEM */
#define TOTAL_TUNING_PARTS	14
#define MAX_TUNING_PARTS_COMPONENTS	20
enum PLAYER_TUNING_MENU_Info
{
	tuning_menu_NAME[24], // o part
	tuning_menu_ID,
	tuning_menu_PIECES,
}
new PLAYER_TUNING_MENU[MAX_PLAYERS][MAX_TUNING_PARTS_COMPONENTS][PLAYER_TUNING_MENU_Info];

/* GLOBAL_VEHICLES */
#define MAX_VEHICLE_COMPONENTS	14
#define MIN_VEHICLE_HEALTH		350.0
forward Float:GetDistanceBetweenPoints3D(Float:x1, Float:y1, Float:z1, Float:x2, Float:y2, Float:z2);
forward Float:GetVehicleSpeed(vehicleid);
forward Float:GetVehicleAirSpeed(vehicleid);
forward Float:frandom(Float:max, Float:min, dp);
forward Float:CompressRotation(Float:rotation);

new VEHICLE_COLORS[256] = //SA-MP Wiki
{
	// The existing colours from San Andreas
	0x000000FF, 0xF5F5F5FF, 0x2A77A1FF, 0x840410FF, 0x263739FF, 0x86446EFF, 0xD78E10FF, 0x4C75B7FF, 0xBDBEC6FF, 0x5E7072FF,
	0x46597AFF, 0x656A79FF, 0x5D7E8DFF, 0x58595AFF, 0xD6DAD6FF, 0x9CA1A3FF, 0x335F3FFF, 0x730E1AFF, 0x7B0A2AFF, 0x9F9D94FF,
	0x3B4E78FF, 0x732E3EFF, 0x691E3BFF, 0x96918CFF, 0x515459FF, 0x3F3E45FF, 0xA5A9A7FF, 0x635C5AFF, 0x3D4A68FF, 0x979592FF,
	0x421F21FF, 0x5F272BFF, 0x8494ABFF, 0x767B7CFF, 0x646464FF, 0x5A5752FF, 0x252527FF, 0x2D3A35FF, 0x93A396FF, 0x6D7A88FF,
	0x221918FF, 0x6F675FFF, 0x7C1C2AFF, 0x5F0A15FF, 0x193826FF, 0x5D1B20FF, 0x9D9872FF, 0x7A7560FF, 0x989586FF, 0xADB0B0FF,
	0x848988FF, 0x304F45FF, 0x4D6268FF, 0x162248FF, 0x272F4BFF, 0x7D6256FF, 0x9EA4ABFF, 0x9C8D71FF, 0x6D1822FF, 0x4E6881FF,
	0x9C9C98FF, 0x917347FF, 0x661C26FF, 0x949D9FFF, 0xA4A7A5FF, 0x8E8C46FF, 0x341A1EFF, 0x6A7A8CFF, 0xAAAD8EFF, 0xAB988FFF,
	0x851F2EFF, 0x6F8297FF, 0x585853FF, 0x9AA790FF, 0x601A23FF, 0x20202CFF, 0xA4A096FF, 0xAA9D84FF, 0x78222BFF, 0x0E316DFF,
	0x722A3FFF, 0x7B715EFF, 0x741D28FF, 0x1E2E32FF, 0x4D322FFF, 0x7C1B44FF, 0x2E5B20FF, 0x395A83FF, 0x6D2837FF, 0xA7A28FFF,
	0xAFB1B1FF, 0x364155FF, 0x6D6C6EFF, 0x0F6A89FF, 0x204B6BFF, 0x2B3E57FF, 0x9B9F9DFF, 0x6C8495FF, 0x4D8495FF, 0xAE9B7FFF,
	0x406C8FFF, 0x1F253BFF, 0xAB9276FF, 0x134573FF, 0x96816CFF, 0x64686AFF, 0x105082FF, 0xA19983FF, 0x385694FF, 0x525661FF,
	0x7F6956FF, 0x8C929AFF, 0x596E87FF, 0x473532FF, 0x44624FFF, 0x730A27FF, 0x223457FF, 0x640D1BFF, 0xA3ADC6FF, 0x695853FF,
	0x9B8B80FF, 0x620B1CFF, 0x5B5D5EFF, 0x624428FF, 0x731827FF, 0x1B376DFF, 0xEC6AAEFF, 0x000000FF,
	// SA-MP extended colours (0.3x)
	0x177517FF, 0x210606FF, 0x125478FF, 0x452A0DFF, 0x571E1EFF, 0x010701FF, 0x25225AFF, 0x2C89AAFF, 0x8A4DBDFF, 0x35963AFF,
	0xB7B7B7FF, 0x464C8DFF, 0x84888CFF, 0x817867FF, 0x817A26FF, 0x6A506FFF, 0x583E6FFF, 0x8CB972FF, 0x824F78FF, 0x6D276AFF,
	0x1E1D13FF, 0x1E1306FF, 0x1F2518FF, 0x2C4531FF, 0x1E4C99FF, 0x2E5F43FF, 0x1E9948FF, 0x1E9999FF, 0x999976FF, 0x7C8499FF,
	0x992E1EFF, 0x2C1E08FF, 0x142407FF, 0x993E4DFF, 0x1E4C99FF, 0x198181FF, 0x1A292AFF, 0x16616FFF, 0x1B6687FF, 0x6C3F99FF,
	0x481A0EFF, 0x7A7399FF, 0x746D99FF, 0x53387EFF, 0x222407FF, 0x3E190CFF, 0x46210EFF, 0x991E1EFF, 0x8D4C8DFF, 0x805B80FF,
	0x7B3E7EFF, 0x3C1737FF, 0x733517FF, 0x781818FF, 0x83341AFF, 0x8E2F1CFF, 0x7E3E53FF, 0x7C6D7CFF, 0x020C02FF, 0x072407FF,
	0x163012FF, 0x16301BFF, 0x642B4FFF, 0x368452FF, 0x999590FF, 0x818D96FF, 0x99991EFF, 0x7F994CFF, 0x839292FF, 0x788222FF,
	0x2B3C99FF, 0x3A3A0BFF, 0x8A794EFF, 0x0E1F49FF, 0x15371CFF, 0x15273AFF, 0x375775FF, 0x060820FF, 0x071326FF, 0x20394BFF,
	0x2C5089FF, 0x15426CFF, 0x103250FF, 0x241663FF, 0x692015FF, 0x8C8D94FF, 0x516013FF, 0x090F02FF, 0x8C573AFF, 0x52888EFF,
	0x995C52FF, 0x99581EFF, 0x993A63FF, 0x998F4EFF, 0x99311EFF, 0x0D1842FF, 0x521E1EFF, 0x42420DFF, 0x4C991EFF, 0x082A1DFF,
	0x96821DFF, 0x197F19FF, 0x3B141FFF, 0x745217FF, 0x893F8DFF, 0x7E1A6CFF, 0x0B370BFF, 0x27450DFF, 0x071F24FF, 0x784573FF,
	0x8A653AFF, 0x732617FF, 0x319490FF, 0x56941DFF, 0x59163DFF, 0x1B8A2FFF, 0x38160BFF, 0x041804FF, 0x355D8EFF, 0x2E3F5BFF,
	0x561A28FF, 0x4E0E27FF, 0x706C67FF, 0x3B3E42FF, 0x2E2D33FF, 0x7B7E7DFF, 0x4A4442FF, 0x28344EFF
};

new Float:HARVEST_CHECKPOINTS[][] =
{
	{-328.332305, -1546.391357, 16.15409},
	{-250.803207, -1553.425415, 4.534295},
	{-224.260910, -1485.022827, 8.041003},
	{-308.437896, -1476.776977, 11.40934},
	{-283.487731, -1553.320068, 7.445997},
	{-258.756164, -1426.692993, 9.493670},
	{-178.887649, -1406.682250, 3.996473},
	{-177.676818, -1322.970581, 6.885325},
	{-305.899322, -1318.196533, 10.12089},
	{-325.471008, -1412.821777, 15.12606},
	{-191.962982, -1384.020019, 6.075732},
	{-214.637603, -1321.270507, 10.79362},
	{-263.975738, -1375.987426, 11.41642},
	{-308.705474, -1424.302001, 15.52844},
	{-287.710388, -1497.158325, 8.503927},
	{-372.0086, -1475.3842, 25.7209}
};

enum
{
	VEHICLE_TYPE_NONE,
	VEHICLE_TYPE_TEST,
	VEHICLE_TYPE_PERSONAL,
	VEHICLE_TYPE_WORK,
	VEHICLE_TYPE_DRIVING_SCHOOL
}

enum
{
	VEHICLE_STATE_NORMAL,
	VEHICLE_STATE_DAMAGED
}

enum Global_Vehicles_Info
{
	bool:gb_vehicle_VALID,
	bool:gb_vehicle_OCCUPIED,
	gb_vehicle_TYPE,
	gb_vehicle_MODELID,
	gb_vehicle_NUMBER_PLATE[32],
	gb_vehicle_NUMBER_PLATE_NAME[32],
	Float:gb_vehicle_POS[3],
	Float:gb_vehicle_SPAWN_X,
	Float:gb_vehicle_SPAWN_Y,
	Float:gb_vehicle_SPAWN_Z,
	Float:gb_vehicle_SPAWN_ANGLE,
	Float:gb_vehicle_HEALTH,
	gb_vehicle_DAMAGE_PANELS,
	gb_vehicle_DAMAGE_DOORS,
	gb_vehicle_DAMAGE_LIGHTS,
	gb_vehicle_DAMAGE_TIRES,
	gb_vehicle_COLOR_1,
	gb_vehicle_COLOR_2,
	gb_vehicle_PAINTJOB,
	Float:gb_vehicle_GAS,
	Float:gb_vehicle_MAX_GAS,
	gb_vehicle_COMPONENTS[MAX_VEHICLE_COMPONENTS],
	gb_vehicle_STATE,
	gb_vehicle_INTERIOR,
	gb_vehicle_WORLD,
	gb_vehicle_PARAMS_ENGINE,
	gb_vehicle_PARAMS_LIGHTS,
	gb_vehicle_PARAMS_ALARM,
	gb_vehicle_PARAMS_DOORS,
	gb_vehicle_PARAMS_WINDOWS,
	gb_vehicle_PARAMS_BONNET,
	gb_vehicle_PARAMS_BOOT,
	gb_vehicle_PARAMS_GLOVE,
	gb_vehicle_PARAMS_OBJECTIVE,
	gb_vehicle_DRIVER,
	gb_vehicle_LAST_DRIVER,
	gb_vehicle_LAST_CLOSED_TIME,
	gb_vehicle_LAST_REPAIR_TIME,
	
	bool:gb_vehicle_SPAWNED,
	gb_vehicle_TP_IMMUNITY,
	gb_vehicle_VIP,
	gb_vehicle_ATTACHED_TO,
	Text3D:gb_vehicle_LABEL,
	gb_vehicle_LANDING_GEAR_STATUS,
	bool:gb_vehicle_TEMP, //despawneable
	gb_vehicle_RESPAWN_TIME,
	gb_vehicle_RENT_DRIVER
}
new GLOBAL_VEHICLES[MAX_VEHICLES][Global_Vehicles_Info];

enum Player_Vehicles_Info
{
	bool:player_vehicle_VALID,
	player_vehicle_ID,
	player_vehicle_OWNER_ID,
	bool:player_vehicle_ACCESSIBLE,
	player_vehicle_CLAMP,
	player_vehicle_PARKING,
	player_vehicle_PLAYERID
};

new PLAYER_VEHICLES[MAX_VEHICLES][Player_Vehicles_Info];

#define MAX_VEHICLE_OBJECTS_INDEXS	5
enum
{
	VOBJECT_TYPE_OBJECT,
	VOBJECT_TYPE_TEXT,
	VOBJECT_TYPE_COUNTRY_FLAG,
	VOBJECT_TYPE_COUNTRY_PANEL,
}
enum e_VEHICLE_OBJECTS
{
	bool:vobject_VALID,
	vobject_TYPE,
	vobject_NAME[32],
	vobject_ID,
	vobject_OBJECT_ID,
	vobject_MODELID,
	Float:vobject_OFFSET[3],
	Float:vobject_ROT[3],
	vobject_ATTACHED,
	vobject_COLORS[MAX_VEHICLE_OBJECTS_INDEXS],
	
	vobject_text_TEXT[32],
	vobject_text_FONT[24],
	vobject_text_FONT_SIZE,
	vobject_text_BOLD,
	vobject_text_FONT_COLOR,
}
new VEHICLE_OBJECTS[MAX_VEHICLES][MAX_SU_VOBJECTS][e_VEHICLE_OBJECTS];

new male_medic_skins[] = {274, 275, 276};

enum
{
	WORK_TYPE_NONE,
	WORK_TYPE_NORMAL,
	WORK_TYPE_FAMILY,
}
enum _:E_WORKS
{
	WORK_NONE = 0,
	WORK_TAXI = 1,
	WORK_TRUCK = 2,
	WORK_MECHANIC = 3,
	WORK_HARVESTER = 4,
	WORK_TRASH = 5,
	WORK_LUMBERJACK = 6,
	WORK_FARMER = 7,
	WORK_POLICE = 8,
	WORK_PIZZA = 9,
	WORK_MEDIC = 10
};
enum work_info_info
{
	work_info_TYPE,
	work_info_LEVEL,
	work_info_NAME[24],
	bool:work_info_NEED_DUTY, 	//si este trabajo es normal y tiene vehiculos indica si es necesario que el jugador este de servicio para subirse
	work_info_EXTRA_PAY,		//dejar en 0 para no paga extra.......Paga extra de 'work_info_EXTRA_PAY' cada 'work_info_EXTRA_PAY_EXP' con un limite de 'work_info_EXTRA_PAY_LIMIT'
	work_info_EXTRA_PAY_EXP,
	work_info_EXTRA_PAY_LIMIT,
	work_info_COLOR[24]
}
new work_info[][work_info_info] =
{
	{WORK_TYPE_NONE, 0, "ninguno", false, 0, 0, 0, "000000"},
	{WORK_TYPE_NORMAL, 1, "conductor", false, 0, 0, 0, "ffff00"},
	{WORK_TYPE_NORMAL, 1, "camionero", false, 0, 0, 0, "e15f00"},
	{WORK_TYPE_NORMAL, 3, "mecanico", true, 0, 0, 0, ""#MECHANIC_COLOR""},
	{WORK_TYPE_NORMAL, 1, "cosechador", false, 0, 0, 0, ""#GREEN_COLOR""},
	{WORK_TYPE_NORMAL, 1, "basurero", true, 0, 0, 0, ""#GREEN_COLOR""},
	{WORK_TYPE_NORMAL, 1, "lecador", false, 0, 0, 0, ""#GREEN_COLOR""},
	{WORK_TYPE_NORMAL, 5, "agricultor", false, 0, 0, 0, "000000"},
	{WORK_TYPE_FAMILY, 0, "policia", true, 1000, 1, 0, "000000"},
	{WORK_TYPE_NORMAL, 1, "pizzero", true, 0, 0, 0, ""#RED_COLOR""},
	{WORK_TYPE_NORMAL, 5, "medico", true, 0, 0, 0, ""#MEDIC_COLOR""}
};

forward OnPlayerObtainWork(playerid, work);
enum enum_PLAYER_WORKS
{
	pwork_SET,
	pwork_LEVEL
};
new PLAYER_WORKS[MAX_PLAYERS][sizeof(work_info)][enum_PLAYER_WORKS];

/* Tuning Object System */
enum e_Tuning_Shop_Objects
{
	tuning_object_MODELID,
	tuning_object_NAME[24],
	tuning_object_PRICE,
}
new Tuning_Shop_Objects[][e_Tuning_Shop_Objects] =
{
	{1000, "spl_b_mar_m", 3000},
    {1001, "spl_b_bab_m", 3000},
    {1002, "spl_b_bar_m", 3000},
    {1003, "spl_b_mab_m", 3000},
    {1004, "bnt_b_sc_m", 9000},
    {1005, "bnt_b_sc_l", 3000},
    {1007, "wg_l_b_ssk", 2000},
    {1018, "exh_b_ts", 3500},
    {1019, "exh_b_t", 3500},
    {1021, "exh_b_m", 3500},
    {1024, "lgt_b_sspt", 2000},
    {1029, "exh_c_s", 3000},
    {1043, "exh_lr_br2", 3500},
    {1044, "exh_lr_br1", 3000},
    {1047, "wg_l_a_f", 2500},
    {1048, "wg_l_c_f", 2500},
    {1049, "spl_a_f_r", 3000},
    {1050, "spl_c_f_r", 3000},
    {1056, "wg_l_a_st", 2500},
    {1090, "wg_l_a_u", 2500},
    {19078, "TheParrot1", 8000},
    {19917, "CutsceneEngine1", 10500},
    {19893, "LaptopSAMP1", 6000},
    {2768, "CJ_CB_BURG", 1000},
    {19838, "CoffeeCup1", 1000},
    {11736, "MedicCase1", 3000},
    {1247, "bribe", 8000},
    {19147, "PinSpotLight5", 5000},
    {19148, "PinSpotLight6", 5000},
    {19149, "PinSpotLight7", 5000},
    {19151, "PinSpotLight9", 5000},
    {19153, "PinSpotLight11", 5000},
    {19580, "Pizza1", 1000},
    {2690, "CJ_FIRE_EXT", 5000},
    {19308, "taxi01", 3000},
    {1550, "CJ_MONEY_BAG", 4000},
    {19306, "kmb_goflag2", 5000},
    {19307, "kmb_goflag3", 5000},
    {18647, "RedNeonTube1", 6000},
    {18648, "BlueNeonTube1", 6000},
    {18649, "GreenNeonTube1", 6000},
    {18650, "YellowNeonTube1", 6000},
    {18651, "PinkNeonTube1", 6000},
    {18652, "WhiteNeonTube1", 6000},
    {18749, "SAMPLogoSmall", 5000},
    {19054, "XmasBox1", 3000},
    {19133, "ArrowType4", 5000},
    {19471, "forsale02", 3000},
    {19878, "Skateboard1", 2000},
    {19314, "bullhorns01", 5000},
    {2404, "CJ_SURF_BOARD", 3000},
    {2405, "CJ_SURF_BOARD2", 3000},
    {2406, "CJ_SURF_BOARD3", 3000},
    {19317, "bassguitar01", 2000},
    {19318, "flyingv01", 2000},
    {2232, "MED_SPEAKER_4", 3000},
    {1840, "speaker_2", 2000},
    {2229, "SWANK_SPEAKER", 4000},
	{1025, "wheel_or1", 2500},
	{1073, "wheel_sr6", 2500},
	{1074, "wheel_sr3", 2500},
	{1075, "wheel_sr2", 2500},
	{1076, "wheel_lr4", 2500},
	{1077, "wheel_lr1", 2500},
	{1078, "wheel_lr3", 2500},
	{1079, "wheel_sr1", 2500},
	{1080, "wheel_sr5", 2500},
	{1081, "wheel_sr4", 2500},
	{1082, "wheel_gn1", 2500},
	{1083, "wheel_lr2", 2500},
	{1084, "wheel_lr5", 2500},
	{1085, "wheel_gn2", 2500},
	{1096, "wheel_gn3", 2500},
	{1097, "wheel_gn4", 2500},
	{1098, "wheel_gn5", 2500},
	{19894, "laptop", 4500},
	{19873, "toiletpaperroll1", 200},
	{19874, "soapbar1", 200},
	{19624, "case1", 600},
	{19621, "obj1", 1500},
	{19620, "police", 10500}
};

//ZONAS
enum
{
	AREA_TYPE_NONE,
	AREA_TYPE_GANGZONE,
	AREA_TYPE_MECHANIC,
	AREA_TYPE_AIRPORT,
	AREA_TYPE_AIRVEH_FUEL,
	AREA_TYPE_WATERVEH_STATION
};

#define MAX_TERRITORIES	110
enum enum_TERRITORIES
{
	bool:territory_VALID,
	territory_ID,
	bool:territory_OCCUPIED,
	territory_CREW_ID,
	territory_CREW_INDEX,
	territory_COLOR,

	Float:territory_MIN_X,
	Float:territory_MIN_Y,

	Float:territory_MAX_X,
	Float:territory_MAX_Y,
	
	territory_AREA,
	territory_GANG_ZONE,
	
	bool:territory_WAR,
	territory_ATTACKER_CREW_INDEX,
	territory_WAR_TIME_LEFT,
	Text:territory_TEXTDRAW[2],
	territory_TIMER,
	territory_LAST_ATTACK,
}
new TERRITORIES[MAX_TERRITORIES][enum_TERRITORIES];
forward OnTerritoriesLoaded();

// Crews
#define MAX_CREWS 50
#define MAX_CREW_RANKS	4
#define MAX_CREW_MEMBERS 10
#define MAX_CREW_PC_MEMBERS 4

enum enum_CREW_INFO
{
	bool:crew_VALID,
	crew_ID,
	crew_NAME[32],
	crew_COLOR,
	
	bool:crew_FIGHTING,
	crew_LAST_ATTACK,
	crew_LAST_ROBBERY,
	
	crew_MEMBERS,
	crew_ONLINE_MEMBERS,
}
new CREW_INFO[MAX_CREWS][enum_CREW_INFO];
forward OnCrewDeleted(crewId);
forward OnCrewCaptureTerritory(crewId, crewIndex, territoryId, territoryIndex);
forward OnCrewLeftTerritory(crewId, crewIndex, territoryId, territoryIndex);


new RandomColors[] =
{
	0xFFFFFFFF,
	0x000000FF,
    0x99CC00FF,
    0xFF9900FF,
	0x6699CCFF,
	0x0099FFFF,
	0xCCCC99FF,
	
	0xFF8C13FF,	0xC715FFFF,	0x20B2AAFF,	0xDC143CFF,	0x6495EDFF,	0xf0e68cFF,	0x778899FF,	0xFF1493FF,	0xF4A460FF,
	0xEE82EEFF,	0xFFD720FF,	0x8b4513FF,	0x4949A0FF,	0x148b8bFF,	0x14ff7fFF,	0x556b2fFF,	0x0FD9FAFF,	0x10DC29FF,
	0x534081FF,	0x0495CDFF,	0xEF6CE8FF,	0xBD34DAFF,	0x247C1BFF,	0x0C8E5DFF,	0x635B03FF,	0xCB7ED3FF,	0x65ADEBFF,
	0x5C1ACCFF,	0xF2F853FF,	0x11F891FF,	0x7B39AAFF,	0x53EB10FF,	0x54137DFF,	0x275222FF,	0xF09F5BFF,	0x3D0A4FFF,
	0x22F767FF,	0xD63034FF,	0x9A6980FF,	0xDFB935FF,	0x3793FAFF,	0x90239DFF,	0xE9AB2FFF,	0xAF2FF3FF,	0x057F94FF,
	0xB98519FF,	0x388EEAFF,	0x028151FF,	0xA55043FF,	0x0DE018FF,	0x93AB1CFF,	0x95BAF0FF,	0x369976FF,	0x18F71FFF,
	0x4B8987FF,	0x491B9EFF,	0x829DC7FF,	0xBCE635FF,	0xCEA6DFFF,	0x20D4ADFF,	0x2D74FDFF,	0x3C1C0DFF,	0x12D6D4FF,
	0x48C000FF,	0x2A51E2FF,	0xE3AC12FF,	0xFC42A8FF,	0x2FC827FF,	0x1A30BFFF,	0xB740C2FF,	0x42ACF5FF,	0x2FD9DEFF,
	0xFAFB71FF,	0x05D1CDFF,	0xC471BDFF,	0x94436EFF,	0xC1F7ECFF,	0xCE79EEFF,	0xBD1EF2FF,	0x93B7E4FF,	0x3214AAFF,
	0x184D3BFF,	0xAE4B99FF,	0x7E49D7FF,	0x4C436EFF,	0xFA24CCFF,	0xCE76BEFF,	0xA04E0AFF,	0x9F945CFF,	0xDCDE3DFF,
	0x10C9C5FF,	0x70524DFF,	0x0BE472FF,	0x8A2CD7FF,	0x6152C2FF,	0xCF72A9FF,	0xE59338FF,	0xEEDC2DFF,	0xD8C762FF,
	0xD8C762FF,	0xFF8C13FF,	0xC715FFFF,	0x20B2AAFF,	0xDC143CFF,	0x6495EDFF,	0xf0e68cFF,	0x778899FF,	0xFF1493FF,
	0xF4A460FF,	0xEE82EEFF,	0xFFD720FF,	0x8b4513FF,	0x4949A0FF,	0x148b8bFF,	0x14ff7fFF,	0x556b2fFF,	0x0FD9FAFF,
	0x10DC29FF,	0x534081FF,	0x0495CDFF,	0xEF6CE8FF,	0xBD34DAFF,	0x247C1BFF,	0x0C8E5DFF,	0x635B03FF,	0xCB7ED3FF,
	0x65ADEBFF,	0x5C1ACCFF,	0xF2F853FF,	0x11F891FF,	0x7B39AAFF,	0x53EB10FF,	0x54137DFF,	0x275222FF,	0xF09F5BFF,
	0x3D0A4FFF,	0x22F767FF,	0xD63034FF,	0x9A6980FF,	0xDFB935FF,	0x3793FAFF,	0x90239DFF,	0xE9AB2FFF,	0xAF2FF3FF,
	0x057F94FF,	0xB98519FF,	0x388EEAFF,	0x028151FF,	0xA55043FF,	0x0DE018FF,	0x93AB1CFF,	0x95BAF0FF,	0x369976FF,
	0x18F71FFF,	0x4B8987FF,	0x491B9EFF,	0x829DC7FF,	0xBCE635FF,	0xCEA6DFFF,	0x20D4ADFF,	0x2D74FDFF,	0x3C1C0DFF,
	0x12D6D4FF,	0x48C000FF,	0x2A51E2FF,	0xE3AC12FF,	0xFC42A8FF,	0x2FC827FF,	0x1A30BFFF,	0xB740C2FF,	0x42ACF5FF,
	0x2FD9DEFF,	0xFAFB71FF,	0x05D1CDFF,	0xC471BDFF,	0x94436EFF,	0xC1F7ECFF,	0xCE79EEFF,	0xBD1EF2FF,	0x93B7E4FF,
	0x3214AAFF,	0x184D3BFF,	0xAE4B99FF,	0x7E49D7FF,	0x4C436EFF,	0xFA24CCFF,	0xCE76BEFF,	0xA04E0AFF,	0x9F945CFF,
	0xDCDE3DFF,	0x10C9C5FF,	0x70524DFF,	0x0BE472FF,	0x8A2CD7FF,	0x6152C2FF,	0xCF72A9FF,	0xE59338FF,	0xEEDC2DFF,
	0xD8C762FF,	0xD8C762FF
};


/* 
Permisos de rangos

0 - cambiar nombre
1 - invitar
2 - echar
3 - cambiar rango de miembros
4 - crear rangos y modificar rangos
5 - poner casas personales a casas de banda
6 - vender casas de banda
7 - cambiar color de la banda
8 - abandonar territorio
9 - destruir cbanda
*/

//permisos
enum
{
	CREW_RANK_CHANGE_NAME,
	CREW_RANK_INVITE,
	CREW_RANK_CAST_MEMBERS,
	CREW_RANK_MODIFY_MEMBERS,
	CREW_RANK_MODIFY_RANKS,
	CREW_RANK_ADD_PROPERTIES,
	CREW_RANK_DELETE_PROPERTIES,
	CREW_RANK_CHANGE_COLOR,
	CREW_RANK_LEAVE_TERRITORY,
	CREW_RANK_DELETE,
	
	CREW_RANK_SIZE, // dejar siempre el ultimo
}

new CREW_RANKS_PERMISSIONS[][] =
{
	"cambiar nombre de la banda",	//0
	"invitar jugadores",			//1
	"echar miembros",				//2
	"cambiar rangos de miembros",	//3
	"crear rangos o modificarlos",	//4
	"poner propiedades de banda",	//5
	"liberar propiedades de banda",	//6
	"cambiar color de la banda",	//7
	"abandonar territorios",		//8
	"eliminar banda"				//9
};

enum enum_CREW_RANK_INFO
{
	bool:crew_rank_VALID,
	crew_rank_ID,
	crew_rank_NAME[32],
	crew_rank_PERMISSION[CREW_RANK_SIZE],
}
new CREW_RANK_INFO[MAX_CREWS][MAX_CREW_RANKS][enum_CREW_RANK_INFO];

enum obtain_work_coords_info
{
	bool:obtain_work_AVAILABLE,
	bool:obtain_work_PICKUP,
	Float:obtain_work_X,
	Float:obtain_work_Y,
	Float:obtain_work_Z,
	obtain_work_INTERIOR,
	obtain_work_MAP_ICON,
	Float:obtain_work_MAP_ICON_X,
	Float:obtain_work_MAP_ICON_Y,
	Float:obtain_work_MAP_ICON_Z,
}
new Float:obtain_work_coords[][obtain_work_coords_info] =
{
	{false, false, 0.0, 0.0, 0.0, 0, -1, 0.0, 0.0, 0.0},
	{true, true, 1490.285766, 1305.699340, 1093.296386, 3, 61, 1752.603881, -1894.155883, 13.557376}, //taxista ls
	{true, true, 1297.107543, -65.027748, 1002.498046, 18, 61, -510.699890, -539.409118, 25.523437}, //caminero
	{true, true, 1562.2959, -2156.3030, 13.5711, 0, 27, 1562.2959, -2156.3030, 13.5711}, //mecanico
	{true, true, -372.126922, -1435.706298, 25.726562, 0, 61, -372.126922, -1435.706298, 25.726562}, //Cosechador
	{true, true, -1884.997314, -1636.733642, 21.750000, 0, 61, -1884.997314, -1636.733642, 21.750000}, //Basurero
	{true, true, -532.029846, -97.514228, 63.296875, 0, 61, -532.029846, -97.514228, 63.296875}, //lecador
	{true, true, 1564.864257, 23.255302, 24.164062, 0, 61, 1564.864257, 23.255302, 24.164062},
	{true, true, -510.972015, 324.242736, 2004.585937, 20, -1, 1480.966918, -1772.065673, 18.795755}, // policia
	{true, true, 377.902313, -119.416114, 1001.492187, 5, -1, 2105.485107, -1806.400878, 13.554687},
	{true, true, 2039.0780, -1390.6685, 942.9642, 3, -1, 0.0, 0.0, 0.0} //Medico
};

enum Work_Vehicles_Info
{
	bool:work_vehicle_VALID,
	work_vehicle_WORK,
	work_vehicle_EXP,
	bool:work_vehicle_NEED_DUTY,
}
new WORK_VEHICLES[MAX_VEHICLES][Work_Vehicles_Info];

new valid_work_vehicle_colors[] = {84, 63, 91, 63, 102, 65, 105, 72, 110, 93, 121, 93, 12, 95, 23, 1};

enum San_Andreas_Barriers_Info
{
	barrier_VEHICLE_TYPE,
	barrier_VEHICLE_TYPE_IN,
	barrier_VEHICLE_TYPE_IN2,
	Float:barrier_X,
	Float:barrier_Y,
	Float:barrier_Z,
	Float:barrier_ROTATION,
	barrier_INTERIOR,
	barrier_WORLD,
	barrier_OBJECT_ID,
	barrier_TIMER,
	bool:barrier_CLOSING,
	Float:barrier_DISTANCE,
	barrier_PRICE,
	Float:barrier_PLAYER_X,
	Float:barrier_PLAYER_Y,
	Float:barrier_PLAYER_Z
}
new San_Andreas_Barriers[][San_Andreas_Barriers_Info] = // usar VEHICLE_TYPE_NONE para que puedan pasar todos
{
	{VEHICLE_TYPE_WORK, WORK_TAXI, WORK_NONE, 1811.32373, -1886.26331, 12.36843, 90.00000, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,		0.0, 0.0, 0.0}, // barrera taxi ls
	{VEHICLE_TYPE_WORK, WORK_TAXI, WORK_NONE, 1717.0457, 1308.0387, 9.7157, 90.0, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,				0.0, 0.0, 0.0}, // barrera taxi lv
	{VEHICLE_TYPE_NONE, WORK_NONE, WORK_NONE, -495.0410, -562.1307, 24.4932, 180.0, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,				0.0, 0.0, 0.0}, // barrera camioneros TRUCK
	{VEHICLE_TYPE_WORK, WORK_POLICE, WORK_NONE, 1544.69629, -1630.79651, 12.31840, -90.0, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,		0.0, 0.0, 0.0}, // barrera POLICIA LS
	{VEHICLE_TYPE_WORK, WORK_POLICE, WORK_NONE, 2238.19897, 2450.41797, 9.80680, -90.0, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,			0.0, 0.0, 0.0}, // barrera POLICIA LV
	{VEHICLE_TYPE_WORK, WORK_POLICE, WORK_NONE, -1572.20313, 658.83588, 6.07810, -90.0, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,			0.0, 0.0, 0.0}, // barrera POLICIA SF 1
	{VEHICLE_TYPE_WORK, WORK_POLICE, WORK_NONE, -1701.42969, 687.59381, 23.88280, 90.0, 0, 0, INVALID_STREAMER_ID, -1, false, 15.0, 0,			0.0, 0.0, 0.0} // barrera POLICIA SF 2
};

#define MAX_BOOT_SLOTS 20 //--- Vehicle_Info

enum VEHICLE_INFO_enum
{
	bool:vehicle_info_LANDING_GEAR,
	bool:vehicle_info_AIR_ALARMS,
	bool:vehicle_info_NORMAL_SPEEDO,
	vehicle_info_NAME[24],
	Float:vehicle_info_MAX_GAS, // Por defecto
	Float:vehicle_info_MAX_VEL,
	vehicle_info_PRICE,
	vehicle_info_LEVEL,
	vehicle_info_EXTRA,
	vehicle_info_BOOT_SLOTS,
	vehicle_info_SEATS,
	bool:vehicle_info_ENGINE,
	bool:vehicle_info_DRIVER_DOOR,
	bool:vehicle_info_PASSENGER_DOOR,
	vehicle_info_VIP_LEVEL,
	vehicle_info_COINS
}
new VEHICLE_INFO[][VEHICLE_INFO_enum] =
{
	{false, false, true, "Landstalker", 80.0, 159.00, 125000, 6, 0, 10		, 4	, true, true, true, 0, 0},
	{false, false, true, "Bravura", 45.0, 148.00, 25000, 4, 0, 6			, 2	, true, true, true, 0, 0},
	{false, false, true, "Buffalo", 50.0, 188.00, 375000, 8, 0, 6			, 2	, true, true, true, 0, 0},
	{false, false, true, "Linerunner", 150.0, 110.00, 40000, 30, 0, 0	, 2	, true, true, true, 0, 0},
	{false, false, true, "Perrenial", 50.0, 134.00, 5000, 2, 0, 10		, 4	, true, true, true, 0, 0},
	{false, false, true, "Sentinel", 45.0, 165.00, 30000, 2, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "Dumper", 20.0, 111.00, 700000, 30, 0, 0			, 1	, true, true, true, 0, 0},
	{false, false, true, "Firetruck", 120.0, 149.00, 500000, 30, 0, 0		, 2	, true, true, true, 0, 0},
	{false, false, true, "Trashmaster", 80.0, 101.00, 300000, 30, 0, 0	, 2	, true, true, true, 0, 0},
	{false, false, true, "Stretch", 80.0, 159.00, 800000, 15, 0, 12		, 4	, true, true, true, 0, 0},
	{false, false, true, "Manana", 40.0, 131.00, 8000, 2, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "Infernus", 80.0, 223.00, 350000, 15, 0, 6		, 2	, true, true, true, 1, 15},
	{false, false, true, "Voodoo", 45.0, 170.00, 25000, 6, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "Pony", 60.0, 111.00, 30000, 6, 0, 12			, 4	, true, true, true, 0, 0},
	{false, false, true, "Mule", 60.0, 106.00, 30000, 8, 0, 0				, 2	, true, true, true, 0, 0},
	{false, false, true, "Cheetah", 65.0, 194.00, 2500000, 15, 0, 4		, 2	, true, true, true, 0, 0},
	{false, false, true, "Ambulance", 120.0, 155.00, 600000, 30, 0, 0		, 4	, true, true, true, 0, 0},
	{false, false, false, "Leviathan", 400.0, 1.00, 1500000, 30, 0, MAX_BOOT_SLOTS		, 2	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Moonbeam", 60.0, 116.00, 16000, 2, 0, 12		, 4	, true, true, true, 0, 0},
	{false, false, true, "Esperanto", 40.0, 150.00, 20000, 3, 0, 5		, 2	, true, true, true, 0, 0},
	{false, false, true, "Taxi", 60.0, 146.00, 80000, 8, 0, 8				, 4	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Washington", 50.0, 155.00, 15000, 2, 0, 6		, 4	, true, true, true, 0, 0},
	{false, false, true, "Bobcat", 70.0, 141.00, 20000, 6, 0, 8			, 2	, true, true, true, 0, 0},
	{false, false, true, "MrWhoopee", 60.0, 99.00, 30000, 15, 0, 0		, 2	, true, true, true, 0, 0},
	{false, false, true, "BFInjection", 30.0, 136.00, 20000, 12, 0, 4	, 2	, true, true, false, 1, 20},
	{false, false, false, "Hunter", 425.0, 1.00, 3000000, 30, 0, MAX_BOOT_SLOTS			, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Premier", 70.0, 175.00, 21000, 3, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "Enforcer", 120.0, 167.00, 200000, 16, 0, 0		, 4	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Securicar", 80.0, 158.00, 150000, 15, 0, 12		, 4	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Banshee", 65.0, 203.00, 20000, 15, 0, 4		, 2	, true, true, true, 1, 10},
	{false, false, false, "Predator", 1.0, 1.00, 80000, 10, 0, MAX_BOOT_SLOTS			, 1	, true, true, true, 0, 0},
	{false, false, true, "Bus", 180.0, 131.00, 500000, 20, 0, 20			, 500, true, true, true, 0, 0},
	{false, false, true, "Rhino", 200.0, 95.00, 10000000, 100, 0, 0		, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Barracks", 150.0, 111.00, 600000, 80, 0, 0		, 2	, true, true, true, 0, 0},
	{false, false, true, "Hotknife", 50.0, 168.00, 75000, 15, 0, 4		, 2	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Trailer1", 1.0, 1.00, 50000, 5, 0, 0			, 0	, false, false, false, 0, 0}, // >>>> No.
	{false, false, true, "Previon", 40.0, 150.00, 8000, 2, 0, 6			, 2	, true, true, true, 0, 0},
	{false, false, true, "Coach", 150.0, 159.00, 450000, 30, 0, 20		, 500, true, true, true, 0, 0},
	{false, false, true, "Cabbie", 80.0, 144.00, 54000, 5, 0, 6			, 4	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Stallion", 60.0, 170.00, 15000, 2, 0, 6			, 2	, true, true, true, 0, 0},
	{false, false, true, "Rumpo", 60.0, 137.00, 20000, 5, 0, 12			, 4	, true, true, true, 0, 0},
	{false, false, false, "RCBandit", 1.0, 1.00, 500, 1, 0, 0				, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Romero", 60.0, 140.00, 80000, 10, 0, 0			, 2	, true, true, true, 0, 0},
	{false, false, true, "Packer", 150.0, 127.00, 500000, 15, 0, 0		, 2	, true, true, true, 0, 0},
	{false, false, true, "Monster", 80.0, 111.00, 20000, 20, 0, 20		, 2	, true, true, true, 2, 50},
	{false, false, true, "Admiral", 65.0, 165.00, 5000, 1, 0, 4			, 4	, true, true, true, 0, 0},
	{false, false, false, "Squalo", 1.0, 1.00, 20000, 12, 0, MAX_BOOT_SLOTS			, 1	, true, true, true, 2, 23},
	{false, false, false, "Seasparrow", 120.0, 1.00, 500000, 16, 0, MAX_BOOT_SLOTS		, 2	, true, true, true, 2, 40}, 
	{false, false, true, "Pizzaboy", 20.0, 116.00, 1600, 1, 0, 0			, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Tram", 1.0, 1.00, 0, 0, 0, 0					, 0	, false, false, false, 0, 0}, // >>>> No.
	{false, false, false, "Trailer2", 1.0, 1.00, 0, 0, 0, 0				, 0	, false, false, false, 0, 0}, // >>>> No.
	{false, false, true, "Turismo", 80.0, 195.00, 20000, 15, 0, 6		, 2	, true, true, true, 1, 14},
	{false, false, false, "Speeder", 1.0, 1.00, 1500000, 15, 0, MAX_BOOT_SLOTS			, 1	, true, true, true, 0, 25},
	{false, false, false, "Reefer", 1.0, 1.00, 800000, 10, 0, MAX_BOOT_SLOTS			, 1	, true, true, true, 0, 10},
	{false, false, false, "Tropic", 1.0, 1.00, 1600000, 15, 0, MAX_BOOT_SLOTS			, 1	, true, true, true, 2, 18},
	{false, false, true, "Flatbed", 120.0, 159.00, 50000, 10, 0, 0		, 2	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Yankee", 50.0, 107.00, 80000, 8, 0, 15			, 2	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Caddy", 10.0, 96.00, 20000, 1, 0, 0				, 2	, true, true, false, 1, 30}, // >>>> No.
	{false, false, true, "Solair", 80.0, 158.00, 20000, 3, 0, 8			, 4	, true, true, true, 0, 0},
	{false, false, true, "BerkleyRCVan", 60.0, 137.00, 50000, 5, 0, 12	, 4	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Skimmer", 250.0, 1.00, 160000, 15, 0, MAX_BOOT_SLOTS			, 2	, true, true, true, 0, 0},
	{false, false, true, "PCJ-600", 45.0, 167.00, 40000, 5, 0, 0			, 2	, true, true, false, 0, 0},
	{false, false, true, "Faggio", 20.0, 107.00, 3750, 1, 0, 0			, 2	, true, true, false, 0, 0},
	{false, false, true, "Freeway", 60.0, 142.00, 30000, 6, 0, 0			, 2	, true, true, false, 0, 0},
	{false, false, false, "RCBaron", 1.0, 1.00, 500, 1, 0, 0				, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "RCRaider", 1.0, 1.00, 500, 1, 0, 0				, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Glendale", 50.0, 148.00, 3750, 1, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "Oceanic", 50.0, 141.00, 16000, 1, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "Sanchez", 40.0, 143.00, 50000, 2, 0, 0			, 2	, true, true, false, 0, 0},
	{false, false, false, "Sparrow", 140.0, 1.00, 500000, 30, 0, MAX_BOOT_SLOTS			, 2	, true, true, true, 2, 35}, // >>>> No.
	{false, false, true, "Patriot", 120.0, 158.00, 20000, 15, 0, 8		, 4	, true, true, true, 1, 40},
	{false, false, true, "Quad", 25.0, 111.00, 20000, 1, 0, 0				, 2	, true, true, false, 1, 10},
	{false, false, false, "Coastguard", 1.0, 1.00, 375000, 5, 0, MAX_BOOT_SLOTS		, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Dinghy", 1.0, 1.00, 25000, 5, 0, MAX_BOOT_SLOTS				, 1	, true, true, true, 0, 0},
	{false, false, true, "Hermes", 80.0, 150.00, 9000, 2, 0, 6			, 2	, true, true, true, 0, 0},
	{false, false, true, "Sabre", 45.0, 174.00, 12000, 2, 0, 6			, 2	, true, true, true, 0, 0},
	{true, false, false, "Rustler", 250.0, 1.00, 30000, 15, 0, MAX_BOOT_SLOTS			, 1	, true, true, true, 0, 0},
	{false, false, true, "ZR-350", 60.0, 188.00, 120000, 3, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "Walton", 50.0, 118.00, 3500, 1, 0, 6			, 2	, true, true, true, 0, 0},
	{false, false, true, "Regina", 80.0, 141.00, 10000, 5, 0, 10			, 4	, true, true, true, 0, 0},
	{false, false, true, "Comet", 45.0, 186.00, 130000, 6, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, false, "BMX", 1.0, 1.00, 150, 1, 0, 0					, 1	, false, true, true, 0, 0},
	{false, false, true, "Burrito", 60.0, 158.00, 40000, 6, 0, 12			, 4	, true, true, true, 0, 0},
	{false, false, true, "Camper", 50.0, 124.00, 60000, 9, 0, 10			, 3	, true, true, true, 0, 0},
	{false, false, false, "Marquis", 1.0, 1.00, 6000000, 20, 0, MAX_BOOT_SLOTS			, 1	, true, true, true, 0, 60},
	{false, false, true, "Baggage", 20.0, 100.00, 1000, 1, 0, 0			, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Dozer", 25.0, 65.00, 50000, 5, 0, 0				, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Maverick", 200.0, 1.00, 20000, 20, 0, MAX_BOOT_SLOTS			, 4	, true, true, true, 1, 60}, // >>>> No.
	{false, false, false, "NewsChopper", 200.0, 1.00, 500000, 20, 0, MAX_BOOT_SLOTS		, 2	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Rancher", 90.0, 140.00, 150000, 6, 0, 10			, 2	, true, true, true, 0, 0},
	{false, false, true, "FBIRancher", 90.0, 158.00, 80000, 8, 0, 12		, 4	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Virgo", 45.0, 150.00, 6000, 1, 0, 4				, 2	, true, true, true, 0, 0},
	{false, false, true, "Greenwood", 45.0, 141.00, 12000, 2, 0, 4		, 4	, true, true, true, 0, 0},
	{false, false, false, "Jetmax", 1.0, 1.00, 5000000, 20, 0, MAX_BOOT_SLOTS			, 1	, true, true, true, 1, 42},
	{false, false, true, "Hotring", 80.0, 216.00, 20000, 15, 0, 0		, 2	, true, true, true, 1, 35},
	{false, false, true, "Sandking", 60.0, 178.00, 20000, 15, 0, 10		, 2	, true, true, true, 1, 35},
	{false, false, true, "Blista Compact", 60.0, 164.00, 6500, 1, 0, 4	, 2	, true, true, true, 0, 0},
	{false, false, false, "Police Maverick", 200.0, 1.00, 600000, 20, 0, MAX_BOOT_SLOTS	, 4	, true, true, true, 0, 0},
	{false, false, true, "Boxville", 60.0, 109.00, 80000, 12, 0, 12		, 4	, true, true, true, 0, 0},
	{false, false, true, "Benson", 70.0, 124.00, 80000, 12, 0, 12			, 2	, true, true, true, 0, 0},
	{false, false, true, "Mesa", 60.0, 141.00, 75000, 5, 0, 2				, 2	, true, true, true, 0, 0},
	{false, false, false, "RCGoblin", 1.0, 1.00, 500, 1, 0, 0				, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "HotringRacer A", 80.0, 216.00, 20000, 20, 0, 0	, 2	, true, true, true, 1, 35},
	{false, false, true, "HotringRacer B", 80.0, 216.00, 20000, 20, 0, 0	, 2	, true, true, true, 1, 35},
	{false, false, true, "BloodringBanger", 40.0, 174.00, 80000, 15, 0, 0	, 2	, true, true, true, 1, 20},
	{false, false, true, "Rancher", 80.0, 140.00, 150000, 6, 0, 10			, 2	, true, true, true, 0, 0},
	{false, false, true, "SuperGT", 60.0, 180.00, 600000, 15, 0, 4		, 2	, true, true, true, 0, 0},
	{false, false, true, "Elegant", 65.0, 167.00, 35750, 1, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "Journey", 90.0, 108.00, 40000, 4, 0, 12			, 2	, true, true, true, 0, 0},
	{false, false, false, "Bike", 1.0, 1.00, 500, 1, 0, 0					, 1	, false, true, true, 0, 0}, // >>>> No.
	{false, false, false, "MountainBike", 1.0, 1.00, 500, 1, 0, 0			, 1	, false, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Beagle", 300.0, 1.00, 6000000, 16, 0, MAX_BOOT_SLOTS			, 2	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Cropdust", 150.0, 1.00, 1200000, 12, 0, MAX_BOOT_SLOTS		, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Stunt", 150.0, 1.00, 1200000, 12, 0, MAX_BOOT_SLOTS			, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Tanker", 130.0, 121.00, 500000, 20, 0, 0		, 2	, true, true, true, 0, 0},
	{false, false, true, "Roadtrain", 150.0, 143.00, 500000, 20, 0, 0		, 2	, true, true, true, 0, 0},
	{false, false, true, "Nebula", 60.0, 158.00, 10000, 1, 0, 4			, 4	, true, true, true, 0, 0},
	{false, false, true, "Majestic", 45.0, 158.00, 10000, 1, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "Buccaneer", 50.0, 165.00, 12500, 1, 0, 4			, 2	, true, true, true, 0, 0},
	{true, true, false, "Shamal", 3000.0, 1.00, 20000000, 30, 0, MAX_BOOT_SLOTS			, 1	, true, true, true, 0, 0},
	{true, false, false, "Hydra", 3000.0, 1.00, 50000000, 100, 0, MAX_BOOT_SLOTS		, 1	, true, true, true, 0, 0},
	{false, false, true, "FCR-900", 50.0, 169.00, 60000, 6, 0, 0			, 2	, true, true, false, 1, 9},
	{false, false, true, "NRG-500", 40.0, 190.00, 80000, 8, 0, 0			, 2	, true, true, false, 1, 16},
	{false, false, true, "HPV1000", 60.0, 168.00, 50000, 8, 0, 0			, 2	, true, true, false, 0, 0}, // >>>> No.
	{false, false, true, "CementTruck", 30.0, 131.00, 80000, 8, 0, 0		, 2	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "TowTruck", 60.0, 162.00, 30000, 3, 0, 4			, 2	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Fortune", 40.0, 159.00, 25000, 2, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "Cadrona", 45.0, 150.00, 10000, 2, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "FBITruck", 80.0, 178.00, 150000, 15, 0, 12		, 2	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Willard", 55.0, 150.00, 12500, 1, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "Forklift", 10.0, 61.00, 1500, 1, 0, 0			, 1	, true, true, true, 0, 0},
	{false, false, true, "Tractor", 30.0, 71.00, 2000, 1, 0, 0			, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Combine", 20.0, 111.00, 10000, 2, 0, 0			, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Feltzer", 50.0, 168.00, 32500, 3, 0, 6			, 2	, true, true, true, 0, 0},
	{false, false, true, "Remington", 60.0, 170.00, 37500, 3, 0, 4		, 2	, true, true, true, 0, 0},
	{false, false, true, "Slamvan", 60.0, 159.00, 50000, 8, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "Blade", 62.0, 174.00, 75000, 4, 0, 6			, 2	, true, true, true, 0, 0},
	{false, false, false, "Freight", 1.0, 1.00, 1000000, 100, 0, 0		, 500, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Streak", 1.0, 1.00, 1000000, 100, 0, 0			, 500, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Vortex", 20.0, 100.00, 2000, 20, 0, 0			, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Vincent", 40.0, 150.00, 12500, 1, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "Bullet", 60.0, 204.00, 20000, 15, 0, 4			, 2	, true, true, true, 1, 14},
	{false, false, true, "Clover", 45.0, 165.00, 15000, 1, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "Sadler", 60.0, 152.00, 12500, 1, 0, 8			, 2	, true, true, true, 0, 0},
	{false, false, true, "FiretruckLA", 120.0, 149.00, 2000000, 20, 0, 0	, 2	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Hustler", 80.0, 148.00, 545000, 25, 0, 6		, 2	, true, true, true, 0, 0},
	{false, false, true, "Intruder", 60.0, 150.00, 37500, 3, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "Primo", 55.0, 144.00, 7500, 1, 0, 6				, 4	, true, true, true, 0, 0},
	{false, false, false, "Cargobob", 400.0, 1.00, 3000000, 20, 0, MAX_BOOT_SLOTS		, 2	, true, true, true, 0, 0},
	{false, false, true, "Tampa", 60.0, 154.00, 30000, 2, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "Sunrise", 60.0, 146.00, 9000, 2, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "Merit", 55.0, 158.00, 20000, 2, 0, 6				, 4	, true, true, true, 0, 0},
	{false, false, true, "Utility", 60.0, 122.00, 30000, 3, 0, 6			, 2	, true, true, true, 0, 0}, // >>>> No.
	{true, true, false, "Nevada", 15000.0, 1.00, 2000000, 30, 0, MAX_BOOT_SLOTS			, 1	, true, true, true, 0, 0},
	{false, false, true, "Yosemite", 60.0, 145.00, 62500, 3, 0, 8			, 2	, true, true, true, 0, 0},
	{false, false, true, "Windsor", 45.0, 159.00, 33750, 3, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "MonsterA", 45.0, 111.00, 20000, 20, 0, 20		, 2	, true, true, true, 1, 50},
	{false, false, true, "MonsterB", 60.0, 111.00, 20000, 20, 0, 20		, 2	, true, true, true, 1, 50},
	{false, false, true, "Uranus", 80.0, 157.00, 162500, 3, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "Jester", 60.0, 179.00, 25000, 5, 0, 4			, 2	, true, true, true, 0, 8},
	{false, false, true, "Sultan", 60.0, 170.00, 362500, 5, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "Stratum", 60.0, 155.00, 132000, 4, 0, 8			, 4	, true, true, true, 0, 0},
	{false, false, true, "Elegy", 60.0, 179.00, 20000, 6, 0, 6			, 2	, true, true, true, 1, 9},
	{false, false, false, "Raindance", 400.0, 1.00, 500000, 15, 0, MAX_BOOT_SLOTS		, 2	, true, true, true, 0, 0},
	{false, false, false, "RC Tiger", 1.0, 1.00, 500, 1, 0, 0				, 1	, true, true, true, 0, 0},
	{false, false, true, "Flash", 60.0, 166.00, 150000, 6, 0, 8			, 2	, true, true, true, 0, 0},
	{false, false, true, "Tahoma", 40.0, 161.00, 37500, 1, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "Savanna", 50.0, 174.00, 75000, 5, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "Bandito", 30.0, 147.00, 30000, 5, 0, 0			, 1	, true, true, true, 0, 0},
	{false, false, false, "FreightFlat", 1.0, 1.00, 5000000, 50, 0, 0		, 0	, true, true, true, 0, 0},
	{false, false, false, "StreakCarriage", 1.0, 1.00, 5000000, 50, 0, 0	, 0	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Kart", 10.0, 94.00, 20000, 1, 0, 0				, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Mower", 15.0, 61.00, 1200, 1, 0, 0				, 1	, true, true, true, 0, 0},
	{false, false, true, "Duneride", 80.0, 111.00, 1000000, 20, 0, 20		, 2	, true, true, true, 2, 50},
	{false, false, true, "Sweeper", 20.0, 61.00, 4000, 1, 0, 2			, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Broadway", 45.0, 159.00, 20000, 6, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "Tornado", 40.0, 159.00, 15000, 1, 0, 4			, 2	, true, true, true, 0, 0},
	{true, true, false, "AT-400", 25000.0, 1.00, 10000000, 50, 0, MAX_BOOT_SLOTS			, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "DFT-30", 80.0, 131.00, 100000, 10, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "Huntley", 80.0, 159.00, 150000, 6, 0, 8			, 4	, true, true, true, 0, 0},
	{false, false, true, "Stafford", 60.0, 154.00, 225000, 2, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "BF-400", 35.0, 168.00, 13000, 2, 0, 0			, 2	, true, true, false, 0, 0},
	{false, false, true, "Newsvan", 60.0, 137.00, 30000, 3, 0, 10			, 4	, false, false, false, 0, 0},
	{false, false, true, "Tug", 15.0, 86.00, 2000, 1, 0, 0				, 1	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Trailer 3", 1.0, 1.00, 160000, 15, 0, 0		, 0	, true, true, true, 0, 0},
	{false, false, true, "Emperor", 60.0, 154.00, 15000, 1, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "Wayfarer", 50.0, 158.00, 8000, 2, 0, 0			, 2	, true, true, false, 0, 0},
	{false, false, true, "Euros", 50.0, 166.00, 20000, 3, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "Hotdog", 60.0, 109.00, 30000, 5, 0, 12			, 2	, true, true, true, 0, 0},
	{false, false, true, "Club", 65.0, 164.00, 50000, 10, 0, 6			, 2	, true, true, true, 0, 0},
	{false, false, false, "FreightCarriage", 1.0, 1.00, 1000000, 100, 0, 0, 0	, false, false, false, 0, 0}, // >>>> No.
	{false, false, false, "Trailer3", 1.0, 1.00, 1000000, 100, 0, 0		, 0	, false, false, false, 0, 0}, // >>>> No.
	{true, true, false, "Andromada", 30000.0, 1.00, 1000000, 100, 0, MAX_BOOT_SLOTS		, 500, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Dodo", 250.0, 1.00, 750000, 12, 0, MAX_BOOT_SLOTS				, 2	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "RCCam", 1.0, 1.00, 500, 1, 0, 0				, 2	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "Launch", 1.0, 1.00, 800000, 8, 0, MAX_BOOT_SLOTS			, 1	, true, true, true, 0, 13}, // >>>> No.
	{false, false, true, "LSPD", 60.0, 177.00, 50000, 10, 0, 8			, 4	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "SFPD", 60.0, 177.00, 50000, 10, 0, 8			, 4	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "LVPD", 60.0, 177.00, 50000, 10, 0, 8			, 4	, true, true, true, 0, 0},
	{false, false, true, "PoliceRanger", 90.0, 159.00, 70000, 10, 0, 12	, 2	, true, true, true, 0, 0}, // // >>>> No. >>>> No.
	{false, false, true, "Picador", 40.0, 152.00, 11500, 1, 0, 6			, 2	, true, true, true, 0, 0},
	{false, false, true, "S.W.A.T.Van", 30.0, 111.00, 4000000, 50, 0, 0	, 2	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Alpha", 60.0, 170.00, 1250000, 8, 0, 4			, 2	, true, true, true, 0, 0},
	{false, false, true, "Phoenix", 60.0, 172.00, 137500, 10, 0, 4		, 2	, true, true, true, 0, 0},
	{false, false, true, "Glendale", 30.0, 148.00, 1500, 1, 0, 6			, 4	, true, true, true, 0, 0},
	{false, false, true, "Sadler", 40.0, 152.00, 4000, 1, 0, 6			, 2	, true, true, true, 0, 0},
	{false, false, false, "LuggageTrailerA", 1.0, 1.00, 500, 1, 0, 0		, 0	, true, true, true, 0, 0},
	{false, false, false, "LuggageTrailerB", 1.0, 1.00, 500, 1, 0, 0		, 0	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "StairTrailer", 1.0, 1.00, 500, 1, 0, 0			, 0	, true, true, true, 0, 0}, // >>>> No.
	{false, false, true, "Boxville", 90.0, 108.00, 60000, 6, 0, 15		, 4	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "FarmPlow", 1.0, 1.00, 3000, 1, 0, 0			, 0	, true, true, true, 0, 0}, // >>>> No.
	{false, false, false, "UtilityTrailer", 1.0, 1.00, 1000, 1, 0, 0         , 0	, true, true, true, 0, 0} // >>>> No.
};

// AGRICULTOR
enum
{
	PLANT_TYPE_MEDICINE, 	// VIDA
	PLANT_TYPE_CANNABIS,	// YOKSETIOXD
	PLANT_TYPE_CRACK,		//CHALECO
}

enum seed_info_enum
{
	seed_info_TYPE,
	seed_info_PLANT_TYPE,
	seed_info_EXP,
	seed_info_NAME[24],
	seed_info_PRICE,
}
new seed_info[][seed_info_enum] =
{
	{TYPE_LEGAL, PLANT_TYPE_MEDICINE, 0, "Medicina", 50},
	{TYPE_ILLEGAL, PLANT_TYPE_CANNABIS, 50, "Marihuana", 150},
	{TYPE_ILLEGAL, PLANT_TYPE_CRACK, 100, "Coca", 300}
};

enum plant_info_enum
{
	plant_info_SEEDS,
	plant_info_NAME[24],
	plant_info_MODEL
}
new plant_info[][plant_info_enum] =
{
	{2, "Medicamento", 800},
	{4, "Marihuana", 824},
	{10, "Crack", 811}
};


#define MAX_PLANTS	500
enum PLANTS_ENUM
{
	bool:plant_VALID,
	bool:plant_GROWING,
	bool:plant_INVISIBLE,
	Float:plant_GROWING_PROGRESS,
	plant_TYPE,
	plant_PLANTED_BY_ACCOUNT_ID,
	plant_PLANTED_BY_NAME[24],
	plant_OBJECT_ID,
	Text3D:plant_LABEL_ID,
	plant_EXPIRE_TIME,
	plant_TIMER,
}
new PLANTS[MAX_PLANTS][PLANTS_ENUM];

enum
{
	OBJECT_TYPE_NONE,
	OBJECT_TYPE_PLANT,
	OBJECT_TYPE_POLICE,
	OBJECT_TYPE_TEST
}

/* SYSTEM - GPS */
enum 
{
	CHECKPOINT_TYPE_NONE,
	CHECKPOINT_TYPE_GPS,
	CHECKPOINT_TYPE_UNLOAD_TRUCK,
	CHECKPOINT_TYPE_FINISH_TRUCK,
	CHECKPOINT_TYPE_HARVEST,
	CHECKPOINT_TYPE_TRASH,
	CHECKPOINT_TYPE_FINISH_TRASH,
	CHECKPOINT_TYPE_LUMBERJACK,
	CHECKPOINT_TYPE_PIZZA_DEL,
	CHECKPOINT_TYPE_PIZZA_FINISH,
	CHECKPOINT_TYPE_DRIVING_SCHOOL
}

#define MAX_PLAYER_GPS_SAVES	10
#define MAX_LISTITEMS			35
enum Player_GPS_Enum
{
	player_gps_VALID,
	player_gps_ID,
	player_gps_NAME[24],
	Float:player_gps_X,
	Float:player_gps_Y,
	Float:player_gps_Z,
	player_gps_WORLD,
	player_gps_INTERIOR,
}
new PLAYER_GPS[MAX_PLAYERS][MAX_PLAYER_GPS_SAVES][Player_GPS_Enum];


/* SYSTEM - PHONE */
enum
{
	CALL_GAME_STATE_NONE,
	CALL_STATE_WAITING_RESPONSE,
	CALL_STATE_INCOMING_CALL,
	CALL_STATE_ESTABLISHED,
}

enum
{
	PHONE_STATE_ON,
	PHONE_STATE_OFF,
}

#define MAX_PHONE_CONTACTS	20
enum Phone_Book_Enum
{
	phone_book_contact_VALID,
	
	phone_book_contact_ID,
	phone_book_contact_NAME[24],
	phone_book_contact_PHONE_NUMBER,
}
new PLAYER_PHONE_BOOK[MAX_PLAYERS][MAX_PHONE_CONTACTS][Phone_Book_Enum]; //PB = PhoneBook

enum
{
	SEX_MALE,
	SEX_FEMALE,
}

enum e_ZONEINFO
{
	z_Name[45],
    Float:z_MinX,
    Float:z_MinY,
    Float:z_MinZ,
    Float:z_MaxX,
    Float:z_MaxY,
    Float:z_MaxZ,
}
new g_Zones[][e_ZONEINFO] =
{
	// Indoor zones
	{"Caligula's Palace",            2087.30,  1543.20,   900.00,  2437.30,  1703.20,   1200.90},
	{"The Four Dragons Casino",      1817.30,   863.20,   900.00,  2027.30,  1083.20,   1200.90},
	// Outdoor Zones list by mabako, from gta client files
	{"The Big Ear",                -410.00,  1403.30,    -3.00,  -137.90,  1681.20,   200.00},
	{"Aldea Malvada",               -1372.10,  2498.50,     0.00, -1277.50,  2615.30,   200.00},
	{"Angel Pine",                  -2324.90, -2584.20,    -6.10, -1964.20, -2212.10,   200.00},
	{"Arco del Oeste",               -901.10,  2221.80,     0.00,  -592.00,  2571.90,   200.00},
	{"Avispa Country Club",         -2646.40,  -355.40,     0.00, -2270.00,  -222.50,   200.00},
	{"Avispa Country Club",         -2831.80,  -430.20,    -6.10, -2646.40,  -222.50,   200.00},
	{"Avispa Country Club",         -2361.50,  -417.10,     0.00, -2270.00,  -355.40,   200.00},
	{"Avispa Country Club",         -2667.80,  -302.10,   -28.80, -2646.40,  -262.30,    71.10},
	{"Avispa Country Club",         -2470.00,  -355.40,     0.00, -2270.00,  -318.40,    46.10},
	{"Avispa Country Club",         -2550.00,  -355.40,     0.00, -2470.00,  -318.40,    39.70},
	{"Back o Beyond",               -1166.90, -2641.10,     0.00,  -321.70, -1856.00,   200.00},
	{"Battery Point",               -2741.00,  1268.40,    -4.50, -2533.00,  1490.40,   200.00},
	{"Bayside",                     -2741.00,  2175.10,     0.00, -2353.10,  2722.70,   200.00},
	{"Bayside Marina",              -2353.10,  2275.70,     0.00, -2153.10,  2475.70,   200.00},
	{"Beacon Hill",                  -399.60, -1075.50,    -1.40,  -319.00,  -977.50,   198.50},
	{"Blackfield",                    964.30,  1203.20,   -89.00,  1197.30,  1403.20,   110.90},
	{"Blackfield",                    964.30,  1403.20,   -89.00,  1197.30,  1726.20,   110.90},
	{"Blackfield Chapel",            1375.60,   596.30,   -89.00,  1558.00,   823.20,   110.90},
	{"Blackfield Chapel",            1325.60,   596.30,   -89.00,  1375.60,   795.00,   110.90},
	{"Blackfield Intersection",      1197.30,  1044.60,   -89.00,  1277.00,  1163.30,   110.90},
	{"Blackfield Intersection",      1166.50,   795.00,   -89.00,  1375.60,  1044.60,   110.90},
	{"Blackfield Intersection",      1277.00,  1044.60,   -89.00,  1315.30,  1087.60,   110.90},
	{"Blackfield Intersection",      1375.60,   823.20,   -89.00,  1457.30,   919.40,   110.90},
	{"Blueberry",                     104.50,  -220.10,     2.30,   349.60,   152.20,   200.00},
	{"Blueberry",                      19.60,  -404.10,     3.80,   349.60,  -220.10,   200.00},
	{"Blueberry Acres",              -319.60,  -220.10,     0.00,   104.50,   293.30,   200.00},
	{"Caligula's Palace",            2087.30,  1543.20,   -89.00,  2437.30,  1703.20,   110.90},
	{"Caligula's Palace",            2137.40,  1703.20,   -89.00,  2437.30,  1783.20,   110.90},
	{"Calton Heights",              -2274.10,   744.10,    -6.10, -1982.30,  1358.90,   200.00},
	{"Chinatown",                   -2274.10,   578.30,    -7.60, -2078.60,   744.10,   200.00},
	{"City Hall",                   -2867.80,   277.40,    -9.10, -2593.40,   458.40,   200.00},
	{"Come-A-Lot",                   2087.30,   943.20,   -89.00,  2623.10,  1203.20,   110.90},
	{"Commerce",                     1323.90, -1842.20,   -89.00,  1701.90, -1722.20,   110.90},
	{"Commerce",                     1323.90, -1722.20,   -89.00,  1440.90, -1577.50,   110.90},
	{"Commerce",                     1370.80, -1577.50,   -89.00,  1463.90, -1384.90,   110.90},
	{"Commerce",                     1463.90, -1577.50,   -89.00,  1667.90, -1430.80,   110.90},
	{"Commerce",                     1583.50, -1722.20,   -89.00,  1758.90, -1577.50,   110.90},
	{"Commerce",                     1667.90, -1577.50,   -89.00,  1812.60, -1430.80,   110.90},
	{"Conference Center",            1046.10, -1804.20,   -89.00,  1323.90, -1722.20,   110.90},
	{"Conference Center",            1073.20, -1842.20,   -89.00,  1323.90, -1804.20,   110.90},
	{"Cranberry Station",           -2007.80,    56.30,     0.00, -1922.00,   224.70,   100.00},
	{"Creek",                        2749.90,  1937.20,   -89.00,  2921.60,  2669.70,   110.90},
	{"Dillimore",                     580.70,  -674.80,    -9.50,   861.00,  -404.70,   200.00},
	{"Doherty",                     -2270.00,  -324.10,    -0.00, -1794.90,  -222.50,   200.00},
	{"Doherty",                     -2173.00,  -222.50,    -0.00, -1794.90,   265.20,   200.00},
	{"Downtown",                    -1982.30,   744.10,    -6.10, -1871.70,  1274.20,   200.00},
	{"Downtown",                    -1871.70,  1176.40,    -4.50, -1620.30,  1274.20,   200.00},
	{"Downtown",                    -1700.00,   744.20,    -6.10, -1580.00,  1176.50,   200.00},
	{"Downtown",                    -1580.00,   744.20,    -6.10, -1499.80,  1025.90,   200.00},
	{"Downtown",                    -2078.60,   578.30,    -7.60, -1499.80,   744.20,   200.00},
	{"Downtown",                    -1993.20,   265.20,    -9.10, -1794.90,   578.30,   200.00},
	{"Downtown Los Santos",          1463.90, -1430.80,   -89.00,  1724.70, -1290.80,   110.90},
	{"Downtown Los Santos",          1724.70, -1430.80,   -89.00,  1812.60, -1250.90,   110.90},
	{"Downtown Los Santos",          1463.90, -1290.80,   -89.00,  1724.70, -1150.80,   110.90},
	{"Downtown Los Santos",          1370.80, -1384.90,   -89.00,  1463.90, -1170.80,   110.90},
	{"Downtown Los Santos",          1724.70, -1250.90,   -89.00,  1812.60, -1150.80,   110.90},
	{"Downtown Los Santos",          1370.80, -1170.80,   -89.00,  1463.90, -1130.80,   110.90},
	{"Downtown Los Santos",          1378.30, -1130.80,   -89.00,  1463.90, -1026.30,   110.90},
	{"Downtown Los Santos",          1391.00, -1026.30,   -89.00,  1463.90,  -926.90,   110.90},
	{"Downtown Los Santos",          1507.50, -1385.20,   110.90,  1582.50, -1325.30,   335.90},
	{"East Beach",                   2632.80, -1852.80,   -89.00,  2959.30, -1668.10,   110.90},
	{"East Beach",                   2632.80, -1668.10,   -89.00,  2747.70, -1393.40,   110.90},
	{"East Beach",                   2747.70, -1668.10,   -89.00,  2959.30, -1498.60,   110.90},
	{"East Beach",                   2747.70, -1498.60,   -89.00,  2959.30, -1120.00,   110.90},
	{"East Los Santos",              2421.00, -1628.50,   -89.00,  2632.80, -1454.30,   110.90},
	{"East Los Santos",              2222.50, -1628.50,   -89.00,  2421.00, -1494.00,   110.90},
	{"East Los Santos",              2266.20, -1494.00,   -89.00,  2381.60, -1372.00,   110.90},
	{"East Los Santos",              2381.60, -1494.00,   -89.00,  2421.00, -1454.30,   110.90},
	{"East Los Santos",              2281.40, -1372.00,   -89.00,  2381.60, -1135.00,   110.90},
	{"East Los Santos",              2381.60, -1454.30,   -89.00,  2462.10, -1135.00,   110.90},
	{"East Los Santos",              2462.10, -1454.30,   -89.00,  2581.70, -1135.00,   110.90},
	{"Easter Basin",                -1794.90,   249.90,    -9.10, -1242.90,   578.30,   200.00},
	{"Easter Basin",                -1794.90,   -50.00,    -0.00, -1499.80,   249.90,   200.00},
	{"Easter Bay Airport",          -1499.80,   -50.00,    -0.00, -1242.90,   249.90,   200.00},
	{"Easter Bay Airport",          -1794.90,  -730.10,    -3.00, -1213.90,   -50.00,   200.00},
	{"Easter Bay Airport",          -1213.90,  -730.10,     0.00, -1132.80,   -50.00,   200.00},
	{"Easter Bay Airport",          -1242.90,   -50.00,     0.00, -1213.90,   578.30,   200.00},
	{"Easter Bay Airport",          -1213.90,   -50.00,    -4.50,  -947.90,   578.30,   200.00},
	{"Easter Bay Airport",          -1315.40,  -405.30,    15.40, -1264.40,  -209.50,    25.40},
	{"Easter Bay Airport",          -1354.30,  -287.30,    15.40, -1315.40,  -209.50,    25.40},
	{"Easter Bay Airport",          -1490.30,  -209.50,    15.40, -1264.40,  -148.30,    25.40},
	{"Easter Bay Chemicals",        -1132.80,  -768.00,     0.00,  -956.40,  -578.10,   200.00},
	{"Easter Bay Chemicals",        -1132.80,  -787.30,     0.00,  -956.40,  -768.00,   200.00},
	{"El Castillo del Diablo",       -464.50,  2217.60,     0.00,  -208.50,  2580.30,   200.00},
	{"El Castillo del Diablo",       -208.50,  2123.00,    -7.60,   114.00,  2337.10,   200.00},
	{"El Castillo del Diablo",       -208.50,  2337.10,     0.00,     8.40,  2487.10,   200.00},
	{"El Corona",                    1812.60, -2179.20,   -89.00,  1970.60, -1852.80,   110.90},
	{"El Corona",                    1692.60, -2179.20,   -89.00,  1812.60, -1842.20,   110.90},
	{"El Quebrados",                -1645.20,  2498.50,     0.00, -1372.10,  2777.80,   200.00},
	{"Esplanade East",              -1620.30,  1176.50,    -4.50, -1580.00,  1274.20,   200.00},
	{"Esplanade East",              -1580.00,  1025.90,    -6.10, -1499.80,  1274.20,   200.00},
	{"Esplanade East",              -1499.80,   578.30,   -79.60, -1339.80,  1274.20,    20.30},
	{"Esplanade North",             -2533.00,  1358.90,    -4.50, -1996.60,  1501.20,   200.00},
	{"Esplanade North",             -1996.60,  1358.90,    -4.50, -1524.20,  1592.50,   200.00},
	{"Esplanade North",             -1982.30,  1274.20,    -4.50, -1524.20,  1358.90,   200.00},
	{"Fallen Tree",                  -792.20,  -698.50,    -5.30,  -452.40,  -380.00,   200.00},
	{"Fallow Bridge",                 434.30,   366.50,     0.00,   603.00,   555.60,   200.00},
	{"Fern Ridge",                    508.10,  -139.20,     0.00,  1306.60,   119.50,   200.00},
	{"Financial",                   -1871.70,   744.10,    -6.10, -1701.30,  1176.40,   300.00},
	{"Fisher's Lagoon",              1916.90,  -233.30,  -100.00,  2131.70,    13.80,   200.00},
	{"Flint Intersection",           -187.70, -1596.70,   -89.00,    17.00, -1276.60,   110.90},
	{"Flint Range",                  -594.10, -1648.50,     0.00,  -187.70, -1276.60,   200.00},
	{"Fort Carson",                  -376.20,   826.30,    -3.00,   123.70,  1220.40,   200.00},
	{"Foster Valley",               -2270.00,  -430.20,    -0.00, -2178.60,  -324.10,   200.00},
	{"Foster Valley",               -2178.60,  -599.80,    -0.00, -1794.90,  -324.10,   200.00},
	{"Foster Valley",               -2178.60, -1115.50,     0.00, -1794.90,  -599.80,   200.00},
	{"Foster Valley",               -2178.60, -1250.90,     0.00, -1794.90, -1115.50,   200.00},
	{"Frederick Bridge",             2759.20,   296.50,     0.00,  2774.20,   594.70,   200.00},
	{"Gant Bridge",                 -2741.40,  1659.60,    -6.10, -2616.40,  2175.10,   200.00},
	{"Gant Bridge",                 -2741.00,  1490.40,    -6.10, -2616.40,  1659.60,   200.00},
	{"Ganton",                       2222.50, -1852.80,   -89.00,  2632.80, -1722.30,   110.90},
	{"Ganton",                       2222.50, -1722.30,   -89.00,  2632.80, -1628.50,   110.90},
	{"Garcia",                      -2411.20,  -222.50,    -0.00, -2173.00,   265.20,   200.00},
	{"Garcia",                      -2395.10,  -222.50,    -5.30, -2354.00,  -204.70,   200.00},
	{"Garver Bridge",               -1339.80,   828.10,   -89.00, -1213.90,  1057.00,   110.90},
	{"Garver Bridge",               -1213.90,   950.00,   -89.00, -1087.90,  1178.90,   110.90},
	{"Garver Bridge",               -1499.80,   696.40,  -179.60, -1339.80,   925.30,    20.30},
	{"Glen Park",                    1812.60, -1449.60,   -89.00,  1996.90, -1350.70,   110.90},
	{"Glen Park",                    1812.60, -1100.80,   -89.00,  1994.30,  -973.30,   110.90},
	{"Glen Park",                    1812.60, -1350.70,   -89.00,  2056.80, -1100.80,   110.90},
	{"Green Palms",                   176.50,  1305.40,    -3.00,   338.60,  1520.70,   200.00},
	{"Greenglass College",            964.30,  1044.60,   -89.00,  1197.30,  1203.20,   110.90},
	{"Greenglass College",            964.30,   930.80,   -89.00,  1166.50,  1044.60,   110.90},
	{"Hampton Barns",                 603.00,   264.30,     0.00,   761.90,   366.50,   200.00},
	{"Hankypanky Point",             2576.90,    62.10,     0.00,  2759.20,   385.50,   200.00},
	{"Harry Gold Parkway",           1777.30,   863.20,   -89.00,  1817.30,  2342.80,   110.90},
	{"Hashbury",                    -2593.40,  -222.50,    -0.00, -2411.20,    54.70,   200.00},
	{"Hilltop Farm",                  967.30,  -450.30,    -3.00,  1176.70,  -217.90,   200.00},
	{"Hunter Quarry",                 337.20,   710.80,  -115.20,   860.50,  1031.70,   203.70},
	{"Idlewood",                     1812.60, -1852.80,   -89.00,  1971.60, -1742.30,   110.90},
	{"Idlewood",                     1812.60, -1742.30,   -89.00,  1951.60, -1602.30,   110.90},
	{"Idlewood",                     1951.60, -1742.30,   -89.00,  2124.60, -1602.30,   110.90},
	{"Idlewood",                     1812.60, -1602.30,   -89.00,  2124.60, -1449.60,   110.90},
	{"Idlewood",                     2124.60, -1742.30,   -89.00,  2222.50, -1494.00,   110.90},
	{"Idlewood",                     1971.60, -1852.80,   -89.00,  2222.50, -1742.30,   110.90},
	{"Jefferson",                    1996.90, -1449.60,   -89.00,  2056.80, -1350.70,   110.90},
	{"Jefferson",                    2124.60, -1494.00,   -89.00,  2266.20, -1449.60,   110.90},
	{"Jefferson",                    2056.80, -1372.00,   -89.00,  2281.40, -1210.70,   110.90},
	{"Jefferson",                    2056.80, -1210.70,   -89.00,  2185.30, -1126.30,   110.90},
	{"Jefferson",                    2185.30, -1210.70,   -89.00,  2281.40, -1154.50,   110.90},
	{"Jefferson",                    2056.80, -1449.60,   -89.00,  2266.20, -1372.00,   110.90},
	{"Julius Thruway East",          2623.10,   943.20,   -89.00,  2749.90,  1055.90,   110.90},
	{"Julius Thruway East",          2685.10,  1055.90,   -89.00,  2749.90,  2626.50,   110.90},
	{"Julius Thruway East",          2536.40,  2442.50,   -89.00,  2685.10,  2542.50,   110.90},
	{"Julius Thruway East",          2625.10,  2202.70,   -89.00,  2685.10,  2442.50,   110.90},
	{"Julius Thruway North",         2498.20,  2542.50,   -89.00,  2685.10,  2626.50,   110.90},
	{"Julius Thruway North",         2237.40,  2542.50,   -89.00,  2498.20,  2663.10,   110.90},
	{"Julius Thruway North",         2121.40,  2508.20,   -89.00,  2237.40,  2663.10,   110.90},
	{"Julius Thruway North",         1938.80,  2508.20,   -89.00,  2121.40,  2624.20,   110.90},
	{"Julius Thruway North",         1534.50,  2433.20,   -89.00,  1848.40,  2583.20,   110.90},
	{"Julius Thruway North",         1848.40,  2478.40,   -89.00,  1938.80,  2553.40,   110.90},
	{"Julius Thruway North",         1704.50,  2342.80,   -89.00,  1848.40,  2433.20,   110.90},
	{"Julius Thruway North",         1377.30,  2433.20,   -89.00,  1534.50,  2507.20,   110.90},
	{"Julius Thruway South",         1457.30,   823.20,   -89.00,  2377.30,   863.20,   110.90},
	{"Julius Thruway South",         2377.30,   788.80,   -89.00,  2537.30,   897.90,   110.90},
	{"Julius Thruway West",          1197.30,  1163.30,   -89.00,  1236.60,  2243.20,   110.90},
	{"Julius Thruway West",          1236.60,  2142.80,   -89.00,  1297.40,  2243.20,   110.90},
	{"Juniper Hill",                -2533.00,   578.30,    -7.60, -2274.10,   968.30,   200.00},
	{"Juniper Hollow",              -2533.00,   968.30,    -6.10, -2274.10,  1358.90,   200.00},
	{"K.A.C.C. Military Fuels",      2498.20,  2626.50,   -89.00,  2749.90,  2861.50,   110.90},
	{"Kincaid Bridge",              -1339.80,   599.20,   -89.00, -1213.90,   828.10,   110.90},
	{"Kincaid Bridge",              -1213.90,   721.10,   -89.00, -1087.90,   950.00,   110.90},
	{"Kincaid Bridge",              -1087.90,   855.30,   -89.00,  -961.90,   986.20,   110.90},
	{"King's",                      -2329.30,   458.40,    -7.60, -1993.20,   578.30,   200.00},
	{"King's",                      -2411.20,   265.20,    -9.10, -1993.20,   373.50,   200.00},
	{"King's",                      -2253.50,   373.50,    -9.10, -1993.20,   458.40,   200.00},
	{"LVA Freight Depot",            1457.30,   863.20,   -89.00,  1777.40,  1143.20,   110.90},
	{"LVA Freight Depot",            1375.60,   919.40,   -89.00,  1457.30,  1203.20,   110.90},
	{"LVA Freight Depot",            1277.00,  1087.60,   -89.00,  1375.60,  1203.20,   110.90},
	{"LVA Freight Depot",            1315.30,  1044.60,   -89.00,  1375.60,  1087.60,   110.90},
	{"LVA Freight Depot",            1236.60,  1163.40,   -89.00,  1277.00,  1203.20,   110.90},
	{"Las Barrancas",                -926.10,  1398.70,    -3.00,  -719.20,  1634.60,   200.00},
	{"Las Brujas",                   -365.10,  2123.00,    -3.00,  -208.50,  2217.60,   200.00},
	{"Las Colinas",                  1994.30, -1100.80,   -89.00,  2056.80,  -920.80,   110.90},
	{"Las Colinas",                  2056.80, -1126.30,   -89.00,  2126.80,  -920.80,   110.90},
	{"Las Colinas",                  2185.30, -1154.50,   -89.00,  2281.40,  -934.40,   110.90},
	{"Las Colinas",                  2126.80, -1126.30,   -89.00,  2185.30,  -934.40,   110.90},
	{"Las Colinas",                  2747.70, -1120.00,   -89.00,  2959.30,  -945.00,   110.90},
	{"Las Colinas",                  2632.70, -1135.00,   -89.00,  2747.70,  -945.00,   110.90},
	{"Las Colinas",                  2281.40, -1135.00,   -89.00,  2632.70,  -945.00,   110.90},
	{"Las Payasadas",                -354.30,  2580.30,     2.00,  -133.60,  2816.80,   200.00},
	{"Las Venturas Airport",         1236.60,  1203.20,   -89.00,  1457.30,  1883.10,   110.90},
	{"Las Venturas Airport",         1457.30,  1203.20,   -89.00,  1777.30,  1883.10,   110.90},
	{"Las Venturas Airport",         1457.30,  1143.20,   -89.00,  1777.40,  1203.20,   110.90},
	{"Las Venturas Airport",         1515.80,  1586.40,   -12.50,  1729.90,  1714.50,    87.50},
	{"Last Dime Motel",              1823.00,   596.30,   -89.00,  1997.20,   823.20,   110.90},
	{"Leafy Hollow",                -1166.90, -1856.00,     0.00,  -815.60, -1602.00,   200.00},
	{"Lil' Probe Inn",                -90.20,  1286.80,    -3.00,   153.80,  1554.10,   200.00},
	{"Linden Side",                  2749.90,   943.20,   -89.00,  2923.30,  1198.90,   110.90},
	{"Linden Station",               2749.90,  1198.90,   -89.00,  2923.30,  1548.90,   110.90},
	{"Linden Station",               2811.20,  1229.50,   -39.50,  2861.20,  1407.50,    60.40},
	{"Little Mexico",                1701.90, -1842.20,   -89.00,  1812.60, -1722.20,   110.90},
	{"Little Mexico",                1758.90, -1722.20,   -89.00,  1812.60, -1577.50,   110.90},
	{"Los Flores",                   2581.70, -1454.30,   -89.00,  2632.80, -1393.40,   110.90},
	{"Los Flores",                   2581.70, -1393.40,   -89.00,  2747.70, -1135.00,   110.90},
	{"Los Santos International",     1249.60, -2394.30,   -89.00,  1852.00, -2179.20,   110.90},
	{"Los Santos International",     1852.00, -2394.30,   -89.00,  2089.00, -2179.20,   110.90},
	{"Los Santos International",     1382.70, -2730.80,   -89.00,  2201.80, -2394.30,   110.90},
	{"Los Santos International",     1974.60, -2394.30,   -39.00,  2089.00, -2256.50,    60.90},
	{"Los Santos International",     1400.90, -2669.20,   -39.00,  2189.80, -2597.20,    60.90},
	{"Los Santos International",     2051.60, -2597.20,   -39.00,  2152.40, -2394.30,    60.90},
	{"Marina",                        647.70, -1804.20,   -89.00,   851.40, -1577.50,   110.90},
	{"Marina",                        647.70, -1577.50,   -89.00,   807.90, -1416.20,   110.90},
	{"Marina",                        807.90, -1577.50,   -89.00,   926.90, -1416.20,   110.90},
	{"Market",                        787.40, -1416.20,   -89.00,  1072.60, -1310.20,   110.90},
	{"Market",                        952.60, -1310.20,   -89.00,  1072.60, -1130.80,   110.90},
	{"Market",                       1072.60, -1416.20,   -89.00,  1370.80, -1130.80,   110.90},
	{"Market",                        926.90, -1577.50,   -89.00,  1370.80, -1416.20,   110.90},
	{"Market Station",                787.40, -1410.90,   -34.10,   866.00, -1310.20,    65.80},
	{"Martin Bridge",                -222.10,   293.30,     0.00,  -122.10,   476.40,   200.00},
	{"Missionary Hill",             -2994.40,  -811.20,     0.00, -2178.60,  -430.20,   200.00},
	{"Montgomery",                   1119.50,   119.50,    -3.00,  1451.40,   493.30,   200.00},
	{"Montgomery",                   1451.40,   347.40,    -6.10,  1582.40,   420.80,   200.00},
	{"Montgomery Intersection",      1546.60,   208.10,     0.00,  1745.80,   347.40,   200.00},
	{"Montgomery Intersection",      1582.40,   347.40,     0.00,  1664.60,   401.70,   200.00},
	{"Mulholland",                   1414.00,  -768.00,   -89.00,  1667.60,  -452.40,   110.90},
	{"Mulholland",                   1281.10,  -452.40,   -89.00,  1641.10,  -290.90,   110.90},
	{"Mulholland",                   1269.10,  -768.00,   -89.00,  1414.00,  -452.40,   110.90},
	{"Mulholland",                   1357.00,  -926.90,   -89.00,  1463.90,  -768.00,   110.90},
	{"Mulholland",                   1318.10,  -910.10,   -89.00,  1357.00,  -768.00,   110.90},
	{"Mulholland",                   1169.10,  -910.10,   -89.00,  1318.10,  -768.00,   110.90},
	{"Mulholland",                    768.60,  -954.60,   -89.00,   952.60,  -860.60,   110.90},
	{"Mulholland",                    687.80,  -860.60,   -89.00,   911.80,  -768.00,   110.90},
	{"Mulholland",                    737.50,  -768.00,   -89.00,  1142.20,  -674.80,   110.90},
	{"Mulholland",                   1096.40,  -910.10,   -89.00,  1169.10,  -768.00,   110.90},
	{"Mulholland",                    952.60,  -937.10,   -89.00,  1096.40,  -860.60,   110.90},
	{"Mulholland",                    911.80,  -860.60,   -89.00,  1096.40,  -768.00,   110.90},
	{"Mulholland",                    861.00,  -674.80,   -89.00,  1156.50,  -600.80,   110.90},
	{"Mulholland Intersection",      1463.90, -1150.80,   -89.00,  1812.60,  -768.00,   110.90},
	{"North Rock",                   2285.30,  -768.00,     0.00,  2770.50,  -269.70,   200.00},
	{"Ocean Docks",                  2373.70, -2697.00,   -89.00,  2809.20, -2330.40,   110.90},
	{"Ocean Docks",                  2201.80, -2418.30,   -89.00,  2324.00, -2095.00,   110.90},
	{"Ocean Docks",                  2324.00, -2302.30,   -89.00,  2703.50, -2145.10,   110.90},
	{"Ocean Docks",                  2089.00, -2394.30,   -89.00,  2201.80, -2235.80,   110.90},
	{"Ocean Docks",                  2201.80, -2730.80,   -89.00,  2324.00, -2418.30,   110.90},
	{"Ocean Docks",                  2703.50, -2302.30,   -89.00,  2959.30, -2126.90,   110.90},
	{"Ocean Docks",                  2324.00, -2145.10,   -89.00,  2703.50, -2059.20,   110.90},
	{"Ocean Flats",                 -2994.40,   277.40,    -9.10, -2867.80,   458.40,   200.00},
	{"Ocean Flats",                 -2994.40,  -222.50,    -0.00, -2593.40,   277.40,   200.00},
	{"Ocean Flats",                 -2994.40,  -430.20,    -0.00, -2831.80,  -222.50,   200.00},
	{"Octane Springs",                338.60,  1228.50,     0.00,   664.30,  1655.00,   200.00},
	{"Old Venturas Strip",           2162.30,  2012.10,   -89.00,  2685.10,  2202.70,   110.90},
	{"Palisades",                   -2994.40,   458.40,    -6.10, -2741.00,  1339.60,   200.00},
	{"Palomino Creek",               2160.20,  -149.00,     0.00,  2576.90,   228.30,   200.00},
	{"Paradiso",                    -2741.00,   793.40,    -6.10, -2533.00,  1268.40,   200.00},
	{"Pershing Square",              1440.90, -1722.20,   -89.00,  1583.50, -1577.50,   110.90},
	{"Pilgrim",                      2437.30,  1383.20,   -89.00,  2624.40,  1783.20,   110.90},
	{"Pilgrim",                      2624.40,  1383.20,   -89.00,  2685.10,  1783.20,   110.90},
	{"Pilson Intersection",          1098.30,  2243.20,   -89.00,  1377.30,  2507.20,   110.90},
	{"Pirates in Men's Pants",       1817.30,  1469.20,   -89.00,  2027.40,  1703.20,   110.90},
	{"Playa del Seville",            2703.50, -2126.90,   -89.00,  2959.30, -1852.80,   110.90},
	{"Prickle Pine",                 1534.50,  2583.20,   -89.00,  1848.40,  2863.20,   110.90},
	{"Prickle Pine",                 1117.40,  2507.20,   -89.00,  1534.50,  2723.20,   110.90},
	{"Prickle Pine",                 1848.40,  2553.40,   -89.00,  1938.80,  2863.20,   110.90},
	{"Prickle Pine",                 1938.80,  2624.20,   -89.00,  2121.40,  2861.50,   110.90},
	{"Queens",                      -2533.00,   458.40,     0.00, -2329.30,   578.30,   200.00},
	{"Queens",                      -2593.40,    54.70,     0.00, -2411.20,   458.40,   200.00},
	{"Queens",                      -2411.20,   373.50,     0.00, -2253.50,   458.40,   200.00},
	{"Randolph Industrial Estate",   1558.00,   596.30,   -89.00,  1823.00,   823.20,   110.90},
	{"Redsands East",                1817.30,  2011.80,   -89.00,  2106.70,  2202.70,   110.90},
	{"Redsands East",                1817.30,  2202.70,   -89.00,  2011.90,  2342.80,   110.90},
	{"Redsands East",                1848.40,  2342.80,   -89.00,  2011.90,  2478.40,   110.90},
	{"Redsands West",                1236.60,  1883.10,   -89.00,  1777.30,  2142.80,   110.90},
	{"Redsands West",                1297.40,  2142.80,   -89.00,  1777.30,  2243.20,   110.90},
	{"Redsands West",                1377.30,  2243.20,   -89.00,  1704.50,  2433.20,   110.90},
	{"Redsands West",                1704.50,  2243.20,   -89.00,  1777.30,  2342.80,   110.90},
	{"Regular Tom",                  -405.70,  1712.80,    -3.00,  -276.70,  1892.70,   200.00},
	{"Richman",                       647.50, -1118.20,   -89.00,   787.40,  -954.60,   110.90},
	{"Richman",                       647.50,  -954.60,   -89.00,   768.60,  -860.60,   110.90},
	{"Richman",                       225.10, -1369.60,   -89.00,   334.50, -1292.00,   110.90},
	{"Richman",                       225.10, -1292.00,   -89.00,   466.20, -1235.00,   110.90},
	{"Richman",                        72.60, -1404.90,   -89.00,   225.10, -1235.00,   110.90},
	{"Richman",                        72.60, -1235.00,   -89.00,   321.30, -1008.10,   110.90},
	{"Richman",                       321.30, -1235.00,   -89.00,   647.50, -1044.00,   110.90},
	{"Richman",                       321.30, -1044.00,   -89.00,   647.50,  -860.60,   110.90},
	{"Richman",                       321.30,  -860.60,   -89.00,   687.80,  -768.00,   110.90},
	{"Richman",                       321.30,  -768.00,   -89.00,   700.70,  -674.80,   110.90},
	{"Robada Intersection",         -1119.00,  1178.90,   -89.00,  -862.00,  1351.40,   110.90},
	{"Roca Escalante",               2237.40,  2202.70,   -89.00,  2536.40,  2542.50,   110.90},
	{"Roca Escalante",               2536.40,  2202.70,   -89.00,  2625.10,  2442.50,   110.90},
	{"Rockshore East",               2537.30,   676.50,   -89.00,  2902.30,   943.20,   110.90},
	{"Rockshore West",               1997.20,   596.30,   -89.00,  2377.30,   823.20,   110.90},
	{"Rockshore West",               2377.30,   596.30,   -89.00,  2537.30,   788.80,   110.90},
	{"Rodeo",                          72.60, -1684.60,   -89.00,   225.10, -1544.10,   110.90},
	{"Rodeo",                          72.60, -1544.10,   -89.00,   225.10, -1404.90,   110.90},
	{"Rodeo",                         225.10, -1684.60,   -89.00,   312.80, -1501.90,   110.90},
	{"Rodeo",                         225.10, -1501.90,   -89.00,   334.50, -1369.60,   110.90},
	{"Rodeo",                         334.50, -1501.90,   -89.00,   422.60, -1406.00,   110.90},
	{"Rodeo",                         312.80, -1684.60,   -89.00,   422.60, -1501.90,   110.90},
	{"Rodeo",                         422.60, -1684.60,   -89.00,   558.00, -1570.20,   110.90},
	{"Rodeo",                         558.00, -1684.60,   -89.00,   647.50, -1384.90,   110.90},
	{"Rodeo",                         466.20, -1570.20,   -89.00,   558.00, -1385.00,   110.90},
	{"Rodeo",                         422.60, -1570.20,   -89.00,   466.20, -1406.00,   110.90},
	{"Rodeo",                         466.20, -1385.00,   -89.00,   647.50, -1235.00,   110.90},
	{"Rodeo",                         334.50, -1406.00,   -89.00,   466.20, -1292.00,   110.90},
	{"Royal Casino",                 2087.30,  1383.20,   -89.00,  2437.30,  1543.20,   110.90},
	{"San Andreas Sound",            2450.30,   385.50,  -100.00,  2759.20,   562.30,   200.00},
	{"Santa Flora",                 -2741.00,   458.40,    -7.60, -2533.00,   793.40,   200.00},
	{"Santa Maria Beach",             342.60, -2173.20,   -89.00,   647.70, -1684.60,   110.90},
	{"Santa Maria Beach",              72.60, -2173.20,   -89.00,   342.60, -1684.60,   110.90},
	{"Shady Cabin",                 -1632.80, -2263.40,    -3.00, -1601.30, -2231.70,   200.00},
	{"Shady Creeks",                -1820.60, -2643.60,    -8.00, -1226.70, -1771.60,   200.00},
	{"Shady Creeks",                -2030.10, -2174.80,    -6.10, -1820.60, -1771.60,   200.00},
	{"Sobell Rail Yards",            2749.90,  1548.90,   -89.00,  2923.30,  1937.20,   110.90},
	{"Spinybed",                     2121.40,  2663.10,   -89.00,  2498.20,  2861.50,   110.90},
	{"Starfish Casino",              2437.30,  1783.20,   -89.00,  2685.10,  2012.10,   110.90},
	{"Starfish Casino",              2437.30,  1858.10,   -39.00,  2495.00,  1970.80,    60.90},
	{"Starfish Casino",              2162.30,  1883.20,   -89.00,  2437.30,  2012.10,   110.90},
	{"Temple",                       1252.30, -1130.80,   -89.00,  1378.30, -1026.30,   110.90},
	{"Temple",                       1252.30, -1026.30,   -89.00,  1391.00,  -926.90,   110.90},
	{"Temple",                       1252.30,  -926.90,   -89.00,  1357.00,  -910.10,   110.90},
	{"Temple",                        952.60, -1130.80,   -89.00,  1096.40,  -937.10,   110.90},
	{"Temple",                       1096.40, -1130.80,   -89.00,  1252.30, -1026.30,   110.90},
	{"Temple",                       1096.40, -1026.30,   -89.00,  1252.30,  -910.10,   110.90},
	{"The Camel's Toe",              2087.30,  1203.20,   -89.00,  2640.40,  1383.20,   110.90},
	{"The Clown's Pocket",           2162.30,  1783.20,   -89.00,  2437.30,  1883.20,   110.90},
	{"The Emerald Isle",             2011.90,  2202.70,   -89.00,  2237.40,  2508.20,   110.90},
	{"The Farm",                    -1209.60, -1317.10,   114.90,  -908.10,  -787.30,   251.90},
	{"The Four Dragons Casino",      1817.30,   863.20,   -89.00,  2027.30,  1083.20,   110.90},
	{"The High Roller",              1817.30,  1283.20,   -89.00,  2027.30,  1469.20,   110.90},
	{"The Mako Span",                1664.60,   401.70,     0.00,  1785.10,   567.20,   200.00},
	{"The Panopticon",               -947.90,  -304.30,    -1.10,  -319.60,   327.00,   200.00},
	{"The Pink Swan",                1817.30,  1083.20,   -89.00,  2027.30,  1283.20,   110.90},
	{"The Sherman Dam",              -968.70,  1929.40,    -3.00,  -481.10,  2155.20,   200.00},
	{"The Strip",                    2027.40,   863.20,   -89.00,  2087.30,  1703.20,   110.90},
	{"The Strip",                    2106.70,  1863.20,   -89.00,  2162.30,  2202.70,   110.90},
	{"The Strip",                    2027.40,  1783.20,   -89.00,  2162.30,  1863.20,   110.90},
	{"The Strip",                    2027.40,  1703.20,   -89.00,  2137.40,  1783.20,   110.90},
	{"The Visage",                   1817.30,  1863.20,   -89.00,  2106.70,  2011.80,   110.90},
	{"The Visage",                   1817.30,  1703.20,   -89.00,  2027.40,  1863.20,   110.90},
	{"Unity Station",                1692.60, -1971.80,   -20.40,  1812.60, -1932.80,    79.50},
	{"Valle Ocultado",               -936.60,  2611.40,     2.00,  -715.90,  2847.90,   200.00},
	{"Verdant Bluffs",                930.20, -2488.40,   -89.00,  1249.60, -2006.70,   110.90},
	{"Verdant Bluffs",               1073.20, -2006.70,   -89.00,  1249.60, -1842.20,   110.90},
	{"Verdant Bluffs",               1249.60, -2179.20,   -89.00,  1692.60, -1842.20,   110.90},
	{"Verdant Meadows",                37.00,  2337.10,    -3.00,   435.90,  2677.90,   200.00},
	{"Verona Beach",                  647.70, -2173.20,   -89.00,   930.20, -1804.20,   110.90},
	{"Verona Beach",                  930.20, -2006.70,   -89.00,  1073.20, -1804.20,   110.90},
	{"Verona Beach",                  851.40, -1804.20,   -89.00,  1046.10, -1577.50,   110.90},
	{"Verona Beach",                 1161.50, -1722.20,   -89.00,  1323.90, -1577.50,   110.90},
	{"Verona Beach",                 1046.10, -1722.20,   -89.00,  1161.50, -1577.50,   110.90},
	{"Vinewood",                      787.40, -1310.20,   -89.00,   952.60, -1130.80,   110.90},
	{"Vinewood",                      787.40, -1130.80,   -89.00,   952.60,  -954.60,   110.90},
	{"Vinewood",                      647.50, -1227.20,   -89.00,   787.40, -1118.20,   110.90},
	{"Vinewood",                      647.70, -1416.20,   -89.00,   787.40, -1227.20,   110.90},
	{"Whitewood Estates",             883.30,  1726.20,   -89.00,  1098.30,  2507.20,   110.90},
	{"Whitewood Estates",            1098.30,  1726.20,   -89.00,  1197.30,  2243.20,   110.90},
	{"Willowfield",                  1970.60, -2179.20,   -89.00,  2089.00, -1852.80,   110.90},
	{"Willowfield",                  2089.00, -2235.80,   -89.00,  2201.80, -1989.90,   110.90},
	{"Willowfield",                  2089.00, -1989.90,   -89.00,  2324.00, -1852.80,   110.90},
	{"Willowfield",                  2201.80, -2095.00,   -89.00,  2324.00, -1989.90,   110.90},
	{"Willowfield",                  2541.70, -1941.40,   -89.00,  2703.50, -1852.80,   110.90},
	{"Willowfield",                  2324.00, -2059.20,   -89.00,  2541.70, -1852.80,   110.90},
	{"Willowfield",                  2541.70, -2059.20,   -89.00,  2703.50, -1941.40,   110.90},
	{"Yellow Bell Station",          1377.40,  2600.40,   -21.90,  1492.40,  2687.30,    78.00}
};

new g_Cities[][e_ZONEINFO] =
{
	// Main Zones
	{"Los Santos",                     44.60, -2892.90,  -242.90,  2997.00,  -768.00,   900.00},
	{"Las Venturas",                  869.40,   596.30,  -242.90,  2997.00,  2993.80,   900.00},
	{"Bone County",                  -480.50,   596.30,  -242.90,   869.40,  2993.80,   900.00},
	{"Tierra Robada",               -2997.40,  1659.60,  -242.90,  -480.50,  2993.80,   900.00},
	{"Tierra Robada",               -1213.90,   596.30,  -242.90,  -480.50,  1659.60,   900.00},
	{"San Fierro",                  -2997.40, -1115.50,  -242.90, -1213.90,  1659.60,   900.00},
	{"Red County",                  -1213.90,  -768.00,  -242.90,  2997.00,   596.30,   900.00},
	{"Flint County",                -1213.90, -2892.90,  -242.90,    44.60,  -768.00,   900.00},
	{"Whetstone",                   -2997.40, -2892.90,  -242.90, -1213.90, -1115.50,   900.00}
};

enum enum_SAFE_ZONES
{
	safe_zone_AREA_ID,
	Float:safe_zone_MIN_X,
	Float:safe_zone_MIN_Y,
	Float:safe_zone_MAX_X,
	Float:safe_zone_MAX_Y,
	safe_zone_INTERIOR,
	safe_zone_WORLD,
}
new SAFE_ZONES[][enum_SAFE_ZONES] =
{
	{INVALID_STREAMER_ID, 1996.91,	-1449.67,	2056.86,	-1350.719, 0, 0},
	{INVALID_STREAMER_ID, 1323.9,	-1842.27,	1701.9,	-1722.26, 0, 0},
	{INVALID_STREAMER_ID, 1440.9,	-1722.26,	1583.5,	-1577.589, 0, 0},
	{INVALID_STREAMER_ID, 1249.619,	-2394.33,	1852.0,	-2179.25, 0, 0},
	{INVALID_STREAMER_ID, 1382.729,	-2730.879,	2201.82,	-2394.33, 0, 0},
	{INVALID_STREAMER_ID, -2078.669,	578.395,	-1499.89,	744.267, 0, 0},
	{INVALID_STREAMER_ID, -2741.07,	458.411,	-2533.04,	793.411, 0, 0},
	{INVALID_STREAMER_ID, -1794.92,	-730.117,	-1213.91,	-50.096, 0, 0},
	{INVALID_STREAMER_ID, -792.254,	-698.554,	-452.403,	-380.042, 0, 0},
	{INVALID_STREAMER_ID, -594.19,	-1648.55,	-187.699,	-1276.599, 0, 0},
	{INVALID_STREAMER_ID, 2237.399,	2202.76,	2536.429,	2542.55, 0, 0},
	{INVALID_STREAMER_ID, 1236.63,	1203.28,	1457.369,	1883.109, 0, 0},
	{INVALID_STREAMER_ID, 1457.369,	1203.28,	1777.39,	1883.109, 0, 0},
	{INVALID_STREAMER_ID, -91.585,	1655.05,	421.234,	2123.01, 0, 0},
	{INVALID_STREAMER_ID, -613.953796, -209.777252, -381.961181, -6.355076, 0, 0},
	{INVALID_STREAMER_ID, -115.255050, -1211.812377, -54.539089, -1179.635253, 0, 0}
};

/* Rangos Policias */
enum enum_POLICE_SKINS
{
	police_skin_TYPE,
	police_skin_SKIN,
	police_skin_RANK,
}
new POLICE_SKINS[][enum_POLICE_SKINS] =
{
	{SEX_MALE, 71, 1},
	{SEX_MALE, 280, 2},
	{SEX_MALE, 281, 3},
	{SEX_MALE, 284, 4},
	{SEX_MALE, 303, 5},
	{SEX_MALE, 305, 6},
	{SEX_MALE, 283, 7},
	{SEX_MALE, 266, 8},
	{SEX_MALE, 265, 10},
	{SEX_MALE, 267, 11},
	{SEX_FEMALE, 306, 1}
};

new POLICE_RANKS[][] =
{
	/* 0 */ "Civil",
	/* 1 */ "Cadete",
	/* 2 */ "Oficial I",
	/* 3 */ "Oficial II",
	/* 4 */ "Oficial III",
	/* 5 */ "Detective",
	/* 6 */ "Sargento I",
	/* 7 */ "Sargento II",
	/* 8 */ "Teniente I",
	/* 9 */ "Teniente II",
	/* 10 */ "Capitan",
	/* 11 */ "Comisario"
};

enum E_L_WEAPONS
{
	wType,
	wExtra,
	wPrice,
	wRank
};
new pWeapon_Shop[][E_L_WEAPONS] =
{
	{INVENTORY_TYPE_WEAPON_CLUB, 1, 500, 1},
	{INVENTORY_TYPE_WEAPON_TASER, 100, 450, 1},
	{INVENTORY_TYPE_WEAPON_9MM_L, 0, 1600, 1},
	{INVENTORY_TYPE_WEAPON_DK_L, 0, 3600, 2},
	{INVENTORY_TYPE_WEAPON_SG_L, 0, 5800, 3},
	{INVENTORY_TYPE_WEAPON_CS_L, 0, 54000, 6},
	{INVENTORY_TYPE_WEAPON_UZI_L, 0, 7200, 3},
	{INVENTORY_TYPE_WEAPON_MP5_L, 0, 8750, 3},
	{INVENTORY_TYPE_WEAPON_AK_L, 0, 8800, 5},
	{INVENTORY_TYPE_WEAPON_M4_L, 0, 9000, 5}
};

enum E_L_AMMO
{
	aType,
	aPrice,
	aRank
};
new pAmmo_Shop[][E_L_AMMO] =
{
	{INVENTORY_TYPE_AMMO_9MM_L, 30, 1},
	{INVENTORY_TYPE_AMMO_DK_L, 80, 2},
	{INVENTORY_TYPE_AMMO_SG_L, 140, 3},
	{INVENTORY_TYPE_AMMO_CS_L, 500, 6},
	{INVENTORY_TYPE_AMMO_UZI_L, 162, 3},
	{INVENTORY_TYPE_AMMO_MP5_L, 237, 3},
	{INVENTORY_TYPE_AMMO_AK_L, 140, 5},
	{INVENTORY_TYPE_AMMO_M4_L, 150, 5}
};

enum E_POLICE_VEHICLES {
	vModel,
	vColor1,
	vColor2,
	vRank
};

new pVehicle_Spawn[][E_POLICE_VEHICLES] = {
	{523, 0, 1, 1},
	{596, 0, 1, 1},
	{599, 0, 1, 5},
	{427, 0, 1, 8},
	{528, 0, 1, 8}
};

#define MAX_POLICE_OBJECTS	300
enum enum_POLICE_OBJECTS
{
	bool:police_object_VALID,
	police_object_USER[24],
	police_object_OBJECT_ID,
}
new POLICE_OBJECTS[MAX_POLICE_OBJECTS][enum_POLICE_OBJECTS];

/* SYSTEM - PROPERTIES */
forward OnDefaultPFurChanged(index);
#define MAX_PROPERTIES	2000
enum Property_Info_Enum
{
	property_VALID,
	property_ID,
	Float:property_EXT_X,
	Float:property_EXT_Y,
	Float:property_EXT_Z,
	Float:property_EXT_ANGLE,
	property_EXT_INTERIOR,
	property_EXT_FREEZE,
	property_ID_INTERIOR,
	
	bool:property_SOLD,
	bool:property_CREW,
	property_OWNER_ID,
	property_CREW_ID,
	property_NAME[24],
	property_PRICE,
	property_LEVEL,
	property_EXTRA,
	property_VIP_LEVEL,
	
	Text3D:property_EXT_LABEL_ID,
	Text3D:property_INT_LABEL_ID,
	property_EXT_PICKUP_ID,
	property_INT_PICKUP_ID,
	
	property_PRICE_BASE
}
new PROPERTY_INFO[MAX_PROPERTIES][Property_Info_Enum];


/* PROPERTY CONSTRUCTOR */
new TOTAL_PROPERTIES_LOADED;
enum PROPERTY_INTERIOR_ENUM
{
	property_creator_LEVEL,
	property_creator_PRICE,
	Float:property_INT_X,
	Float:property_INT_Y,
	Float:property_INT_Z,
	Float:property_INT_ANGLE,
	property_INT_INTERIOR,
	bool:property_INT_FREEZE
}
new PROPERTY_INTERIORS[][PROPERTY_INTERIOR_ENUM] =
{
	{6, 180000, 140.249008, 1366.197509, 1083.859375, 0.0, 5, false},
	{6, 160000, 2324.530029, -1149.540039, 1050.710083, 0.0, 12, false},
	{6, 270000, 225.679992, 1021.450012, 1084.017700, 0.0, 7, false},
	{6, 190000, 234.190002, 1063.729980, 1084.212280, 0.0, 6, false},
	{6, 120000, 226.300003, 1114.239990, 1080.992919, 270.0, 5, false},
	{6, 180000, 2317.889892, -1026.760009, 1050.217773, 0.0, 9, false},
	{6, 120000, 2495.979980, -1692.079956, 1014.742187, 180.0, 3, false},
	{6, 90000,  2196.626464, -1204.321411, 1049.023437, 90.0, 6, false},
	{6, 105000, 2270.143554, -1210.490600, 1047.562500, 90.0, 10, false},
	{4, 90000,  2365.199951, -1135.595825, 1050.882568, 0.0, 8, false},
	{3, 75000,  2237.590087, -1081.640014, 1049.023437, 0.0, 2, false},
	{4, 65000,  2468.840087, -1698.239990, 1013.507812, 90.0, 2, false},
	{3, 45000,  2282.928955, -1140.004516, 1050.898437, 0.0, 11, false},
	{4, 50000,  2308.775878, -1212.731689, 1049.023437, 0.0, 6, false},
	{6, 135000, 2233.681396, -1114.973510, 1050.882812, 0.0, 5, false},
	{6, 230000, 2218.162597, -1076.148315, 1050.484375, 90.0, 1, false},
	{6, 220000, 266.654327, 304.961791, 999.148437, 270.0, 2, false},
	{6, 30000,  243.720001, 304.910003, 999.148437, 270.0, 1, false},
	{6, 65000,  2259.440673, -1135.905883, 1050.640258, 270.0, 10, false},
	{12, 3000000, 1260.910034, -785.320068, 1091.906250, 280.0, 5, false}
};

/*enum PROPERTY_CLOSET_POS_ENUM
{
	Float:property_closet_X,
	Float:property_closet_Y,
	Float:property_closet_Z
}
new PROPERTY_CLOSET_POS[][PROPERTY_CLOSET_POS_ENUM] = //de momento posicion de la puerte se cambiara porxiamn
{
	{145.103408, 1384.249877, 1088.367187},
	{2337.974609, -1141.684082, 1054.304687},
	{243.130554, 1046.244384, 1084.000000},
	{235.600509, 1079.485351, 1087.812622},
	{239.347656, 1116.808593, 1084.992187},
	{2326.974365, -1015.419189, 1054.711059},
	{2492.362060, -1708.568969, 1018.336791},
	{2198.682128, -1219.331787, 1049.023437},
	{2258.639892, -1220.260253, 1049.023437},
	{2363.767333, -1127.419433, 1050.882568},
	{2235.885986, -1073.944335, 1049.023437},
	{2450.338867, -1706.199340, 1013.507812},
	{2286.247314, -1137.693359, 1050.898437},
	{2319.417480, -1212.880981, 1049.023437},
	{2231.736328, -1112.198730, 1050.882812},
	{2215.857910, -1074.698974, 1050.484375},
	{270.320709, 303.413482, 999.155761},
	{248.817687, 303.795257, 999.148437},
	{2263.338378, -1132.665161, 1050.632812},
	{1271.444091, -822.371704, 1089.937500}
};*/

enum PLAYER_PROPERTY_CONSTRUCTOR_ENU
{
	bool:player_property_creator_ENABLED,
	player_property_creator_INTERIO,
	Float:player_property_creator_EXT_X,
	Float:player_property_creator_EXT_Y,
	Float:player_property_creator_EXT_Z,
	Float:player_property_creator_EXT_ANG,
	player_property_creator_EXT_INT,
}
new PLAYER_PROPERTY_CONSTRUCTOR[MAX_PLAYERS][PLAYER_PROPERTY_CONSTRUCTOR_ENU];

//Taxis
enum TAXI_METER_VEHICLE_Info
{
	bool:veh_taxi_meter_ENABLED,
	veh_taxi_meter_PRICE,
	veh_taxi_meter_PAYMENT,
	Float:veh_taxi_meter_OLD_X,
	Float:veh_taxi_meter_OLD_Y,
	Float:veh_taxi_meter_OLD_Z,
	Float:veh_taxi_meter_DISTANCE,
	veh_taxi_meter_TIMER,
}
new TAXI_METER_VEHICLE[MAX_VEHICLES][TAXI_METER_VEHICLE_Info];

//Pizzero
new Float:PIZZA_DELIVERY_POINT[][] = 
{
	{2232.147460, -1785.597656, 13.560449, 82.756179    },
	{2290.242675, -1796.022583, 13.546875, 267.344024   },
	{1739.314575, -1582.890747, 14.158246, 174.783370   },
	{1694.923339, -1583.478881, 13.546875, 179.829818   },
	{1241.816406, -2032.996093, 60.041099, 263.972076   },
	{1187.268798, -1666.487915, 13.634441, 172.332916   },
	{998.998962, -1868.162231, 12.820312, 333.677734    },
	{891.677551, -1695.211669, 13.546875, 182.046417    },
	{507.502838, -1606.101684, 16.247840, 359.563903    },
	{305.462341, -1748.736816, 4.546875, 356.093139     },
	{159.034683, -1906.259521, 3.773437, 0.044234       },
	{387.668762, -2083.981689, 7.835937, 11.638330      },
	{902.655456, -930.055786, 42.601562, 185.516662     },
	{1809.700439, -1166.832885, 24.226562, 168.451568   },
	{2007.953857, -985.501953, 33.888450, 203.231872    },
	{2580.753906, -969.438110, 81.363517, 50.412715     },
	{2796.151855, -1088.867187, 30.719810, 234.631011   },
	{2819.019287, -1614.678588, 11.079871, 245.630599   },
	{2756.354492, -1979.312011, 13.547579, 270.360687   },
	{931.654541, -1231.159545, 16.928218, 262.568939    },
	{952.439208, -913.921447, 45.729900, 180.787841     },
	{824.417663, -2031.578857, 12.867187, 331.166229    },
	{1714.394531, -1629.683593, 20.203384, 332.709594   }
};

enum PIZZA_VEHICLE_Info
{
	bool:pizza_vehicle_STARTED,
	pizza_vehicle_DRIVER_AID,
	pizza_vehicle_PIZZAS,
	pizza_vehicle_PIZZA_POINT,
	bool:pizza_vehicle_PIZZA_POINT_DELI,
}
new PIZZA_VEHICLE[MAX_VEHICLES][PIZZA_VEHICLE_Info];

enum TRUCK_VEHICLE_Info
{
	bool:truck_vehicle_LOADED,
	bool:truck_vehicle_LOADING,
	bool:truck_vehicle_UNLOADING,
	bool:truck_vehicle_DELIVERED,
	truck_vehicle_DRIVER_USER_ID,
	truck_vehicle_POINT,
	truck_vehicle_CURRENT_POINT,
	truck_vehicle_TOTAL_POINTS,
	Float:truck_vehicle_TOTAL_DISTANCE
}
new TRUCK_VEHICLE[MAX_VEHICLES][TRUCK_VEHICLE_Info];

new Float:Truck_Return_Positions[3] =
{
	-576.3120, -505.4122, 25.5234
};

enum Truck_Content_Info
{
	truck_content_EXP,
	truck_content_NAME[32],
	truck_content_MONEY,
	Float:truck_content_X,
	Float:truck_content_Y,
	Float:truck_content_Z
}
new Truck_Contents[][Truck_Content_Info] =
{
	{0, "Productos agrícolas", 950, -185.473693, -280.008880, 1.603357},
	{0, "Productos industriales", 1250, 2168.514404, -2275.264892, 13.128628},
	{0, "Madera y leca", 1700, -2096.593017, -2243.229492, 30.352083},
	{0, "Ropa y complementos", 1975, 2834.454833, 958.061462, 10.479191},
	{25, "Productos de limpieza", 2250, 2524.153076, 2816.919189, 10.547390},
	{50, "Productos de pesca", 2760, -1789.979858, 1421.842895, 6.914581},
	{50, "Productos químicos", 3560, -1862.919433, -202.232727, 18.125516},
	{80, "Productos tecnológicos", 3850, 1039.057983, 2132.961425, 10.547390}
};

/* Mecánico */
new Float:MechanicBuyPiecesCoords[1][3] = { {1565.6909, -2176.2927, 13.5797} };

/* Lecador */
enum
{
	LUMBER_TREE_STATE_NORMAL,
	LUMBER_TREE_STATE_CUTTING,
	LUMBER_TREE_STATE_CUTTED,
}
enum LUMBER_TREES_Info
{
	lumber_tree_MODELID,
	Float:lumber_tree_X,
	Float:lumber_tree_Y,
	Float:lumber_tree_Z,
	Float:lumber_tree_RX,
	Float:lumber_tree_RY,
	Float:lumber_tree_RZ,
	lumber_tree_OBJECT_ID,
	Text3D:lumber_tree_LABEL,
	lumber_tree_STATE,
	lumber_tree_GROW_TIMER,
	lumber_tree_GROW_COUNTER,
}
new LUMBER_TREES[][LUMBER_TREES_Info] =
{
	{657, -467.31256, -47.68515, 59.00023,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -480.88443, -53.57695, 59.39736,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -491.79199, -45.14817, 59.24156,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -493.84619, -54.35930, 59.48059,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -473.43958, -40.64830, 59.00023,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -468.32245, -61.54378, 58.98302,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -458.69937, -75.32365, 58.80302,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -453.17416, -65.31260, 58.98302,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -444.92609, -78.80465, 57.97836,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -465.78470, -85.49714, 58.96302,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -454.24377, -86.58199, 58.46635,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -440.20041, -92.70150, 57.60720,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -484.98972, -65.79082, 59.82284,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -460.57928, -95.55928, 59.25615,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -521.20569, -44.74903, 60.62712,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -534.94348, -50.98387, 61.66861,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -533.45081, -41.45306, 61.64992,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -495.74197, -64.77782, 59.94119,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -519.74005, -72.02750, 61.19377,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1},
	{657, -518.47144, -57.24505, 60.76774,   0.00000, 0.00000, 0.00000, INVALID_STREAMER_ID, Text3D:INVALID_3DTEXT_ID, LUMBER_TREE_STATE_NORMAL, -1, -1}
};

/* Basurero */

#define MAX_ROUTES	5
#define MAX_OBJECTS_PER_ROUTE	20

enum Trash_Object_Info
{
	bool:trash_route_VALID,
	trash_route_OBJECTS,
	Float:trash_route_DISTANCE,
	trash_route_MONEY,
	trash_route_VIP_MONEY,
	trash_object_MODELID[MAX_OBJECTS_PER_ROUTE],
	Float:trash_object_X[MAX_OBJECTS_PER_ROUTE],
	Float:trash_object_Y[MAX_OBJECTS_PER_ROUTE],
	Float:trash_object_Z[MAX_OBJECTS_PER_ROUTE],
	Float:trash_object_RX[MAX_OBJECTS_PER_ROUTE],
	Float:trash_object_RY[MAX_OBJECTS_PER_ROUTE],
	Float:trash_object_RZ[MAX_OBJECTS_PER_ROUTE],
}
new TRASH_OBJECTS[MAX_ROUTES][Trash_Object_Info];
new TRASH_PLAYER_OBJECTS[MAX_PLAYERS][MAX_OBJECTS_PER_ROUTE];

enum TRASH_VEHICLES_INFO
{
	bool:trash_vehicle_JOB_STARTED, 
	trash_vehicle_ROUTE,
	trash_vehicle_CP,
	trash_vehicle_DRIVER_ID,
	trash_vehicle_PASSENGER_ID,
}
new TRASH_VEHICLES[MAX_VEHICLES][TRASH_VEHICLES_INFO];

/* SYSTEM - PLAYERTEMP */
enum Temp_Enum
{
	pt_GAME_STATE,
	pt_NAME[24],
	pt_IP[16],
	bool:pt_USER_EXIST, // Esta registrado?
	bool:pt_USER_LOGGED, // 1 = ha cargado todos los datos del user
	pt_ANTIFLOOD_COMMANDS,
	pt_ANTIFLOOD_TALK,
	pt_TIMERS[MAX_TIMERS_PER_PLAYER],
	bool:pt_USER_VALID_NAME,
	pt_BAD_LOGIN_ATTEMP,
	pt_DOUBT_CHANNEL_TIME,
	pt_GLOBAL_CHANNEL_TIME,
	pt_LAST_PICKUP_ID,
	pt_LAST_AREA_ID,
	pt_HOSPITAL,
	Float:pt_HOSPITAL_LIFE,
	pt_TIME_PASSED_LAST_REP,
	pt_INTERIOR_INDEX,
	pt_CLOTHING_SHOP,
	pt_CLOTHING_SHOP_SELECTED_SKIN,
	bool:pt_SELECT_TEXTDRAW,
	bool:pt_HUD_TEXTDRAWS, // Barra de hambre y sed
	bool:pt_REGISTER_SELECTING_SKIN,
	pt_REGISTER_SELECTED_SKIN,
	bool:pt_REGISTER_SELECTING_STYLE,
	pt_REGISTER_SELECTED_STYLE,
	pt_REGISTER_ACTOR,
	bool:pt_THIRST_MESSAGE,
	bool:pt_HUNGRY_MESSAGE,
	bool:pt_TOYS_SHOP,
	pt_TOYS_SHOP_TOY_SELECTED,
	pt_SELECT_BANK_TRANSFER_ACCOUNT,
	pt_SELECT_BANK_TRANSFER_ID,
	bool:pt_PLAYER_IN_ATM,
	bool:pt_PLAYER_IN_CALL,
	pt_PLAYER_PHONE_CALL_STATE,
	pt_PLAYER_PHONE_CALL_PLAYERID,
	pt_PLAYER_LISTITEM[MAX_LISTITEMS],
	pt_PLAYER_LISTITEM_EX[MAX_LISTITEMS],
	pt_PLAYER_PHONE_BOOK_ADD_NUMBER,
	pt_PLAYER_PHONE_BOOK_SELECTED,
	pt_PLAYER_PHONE_NUMBER_SELECTED,
	pt_BUY_HOUSE_INDEX,
	bool:pt_PLAYER_FINISH_HOSPITAL,
	pt_ANTIFLOOD_KNOCK_PROPERTY,
	pt_KNOCK_PLAYER_ID,
	pt_GPS_CHECKPOINT,
	pt_GPS_PLAYER_SELECTED,
	pt_PLAYER_GPS_SELECTED_PROPERTY[MAX_SU_PROPERTIES],
	pt_PLAYER_PROPERTY_SELECTED,
	bool:pt_MUSIC_FOR_PROPERTY,
	bool:pt_MUSIC_FOR_VEHICLE,
	pt_SELECTED_BUY_VEHICLE_ID,
	pt_LAST_VEHICLE_ID,
	pt_NOTARY_OPTION, //0 al banco, 1 a persona
	pt_NOTARY_PRICE,
	pt_NOTARY_TO_PLAYER,
	pt_PLAYER_VEHICLE_SELECTED,
	bool:pt_TAXI_METER_ENABLED,
	bool:pt_WANT_TAXI,
	bool:pt_WANT_MECHANIC,
	Float:pt_TRUCK_LOADING_VALUE,
	pt_TRUCK_CHECKPOINT,
	pt_TUNING_SELECTED_PART[24],
	pt_TUNING_SELECTED_COMPONENT[24],
	pt_TUNING_SELECTED_COMPONENT_ID,
	pt_TUNING_SELECTED_PIECES,
	pt_PAINTJOB_SELECTED_ID,
	pt_WORKING_IN,
	pt_SELECTED_MECHANIC_VEHICLE_ID,
	pt_MECHANIC_COLOR_SLOT,
	pt_HARVERT_CHECKPOINT,
	pt_HARVERT_PROCCESS,
	pt_PIZZA_CHECKPOINT,
	bool:pt_TRASH_DRIVER,
	bool:pt_TRASH_PASSENGER,
	pt_TRASH_VEHICLE_ID,
	pt_TRASH_CHECKPOINT,
	Float:pt_RECYCLE_BIN_VALUE,
	pt_BUS_CHECKPOINT,
	bool:pt_PLAYER_CARRYING_TREE,
	pt_PLAYER_LUMBERJACK_TREE,
	Float:pt_PLAYER_LUMBERJACK_TREE_PROG,
	pt_LUMBERJACK_CHECKPOINT,
	pt_LAST_GOT_WORK_TIME,
	pt_LAST_GIVE_MONEY_TIME,
	pt_SELECTED_BUY_SEED_ID,
	bool:pt_PLANTING,
	pt_PLANTING_PLANT_SELECTED,
	bool:pt_GPS_MAP,
	pt_PROPERTY_INDEX,
	bool:pt_KICKED,
	pt_SELECTED_DIALOG_WEAPON_SLOT,
	pt_TRICK_SELLER_PID,
	pt_TRICK_SELLER_AID,
	pt_TRICK_SELLER_OBJECT_ID,
	pt_TRICK_SELLER_EXTRA,
	pt_TRICK_PRICE,
	pt_TRICK_TIME,
	pt_TRICK_COOLDOWN,
	pt_POLICE_RADIO,
	bool:pt_CUFFING,
	bool:pt_CUFFED,
	pt_CUFFED_TIMER,
	pt_ENTER_JAIL_TIME,
	pt_DIALOG_DB_LIMIT,
	pt_DIALOG_DB_PAGE,
	pt_SELECTED_DB_PID,
	bool:pt_POLICE_CALL_NAME,
	bool:pt_POLICE_CALL_DESCRIPTION,
	pt_POLICE_CALL_NAME_STR[24],
	pt_ANTIFLOOD_REPORT,
	bool:pt_SEE_ACMD_LOG,
	bool:pt_SEE_ADM_LOG,
	bool:pt_SEE_ADM_CHAT,
	pt_LAST_CHEAT_DETECTED_TIME,
	bool:pt_SEE_AC_LOG,
	pt_ANTIFLOOD_DEATH,
	pt_ANTIFLOOD_STATE,
	pt_ANTIFLOOD_ENTER_VEHICLE,
	pt_SELECTED_AC_LISTITEM,
	pt_ADMIN_PM_PID,
	pt_ADMIN_PM_AID,
	pt_ADMIN_PM_TIME,
	pt_MECHANIC_PID,
	pt_MECHANIC_AID,
	pt_MECHANIC_PRICE,
	pt_MECHANIC_TEXT[64],
	pt_MECHANIC_TYPE,
	pt_MECHANIC_EXTRA,
	pt_MECHANIC_VEHICLE_ID,
	pt_MECHANIC_PIECES,
	pt_MECHANIC_TIME,
	pt_MECHANIC_SELECTED_COLOR,
	pt_MECHANIC_SELECTED_COMPONENT,
	bool:pt_SHOP,
	pt_SHOP_STATE,
	pt_SHOP_ARTICLE_ID[6],
	pt_SHOP_SELECTED_ARTICLE_ID,
	bool:pt_SHOP_COME_FROM_MY_ADS,
	pt_ANTIFLOOD_SHOP,	
	pt_SHOP_ADD_TYPE,
	pt_SHOP_ADD_TEXT[24],
	pt_SHOP_ADD_MODELID,
	pt_SHOP_ADD_VCOL1,
	pt_SHOP_ADD_VCOL2,
	pt_VIRTUAL_WORLD,
	bool:pt_PLAYER_SPECTATE,
	pt_PIZZA_PROCCESS,
	pt_DELIVERED_PIZZAS,
	pt_PIZZA_ACTOR,
	pt_LAST_PLANT_TIME,
	Float:pt_PLANTING_PROGRESS,
	pt_LAST_SET_WANTED_LEVEL,
	pt_CREATE_CREW_NAME[32],
	pt_CREATE_CREW_COLOR,
	pt_CREW_INVITE_PID,
	pt_CREW_INVITE_AID,
	pt_CREW_INVITE_INFO[4],
	pt_CREW_SELECTED_RANK,
	pt_CREW_SELECTED_NEW_RANK,
	pt_LAST_TERRITORY,
	pt_PLAYER_TERRITORY_PRO,
	pt_PLAYER_COLOR,
	pt_LAST_GOT_CREW,
	pt_POLICE_PEN_PID,
	pt_POLICE_PEN_AID,
	pt_POLICE_PEN_IM,
	pt_POLICE_PEN_TIME,
	pt_DIALOG_ECO_SELECTED,
	pt_LAST_SU_CHECK,
	pt_PIVOT_OBJECT,
	pt_SELECT_TUNING_OBJECT,
	pt_TUNING_PICKUP,
	bool:pt_IN_TUNING_GARAGE,
	bool:pt_TUNING_GARAGE_SHOP,
	pt_TUNING_GARAGE_VEHICLEID,
	pt_TUNING_EDIT_SLOT,
	Float:pt_OLD_EDIT_VOBJECT_POS[6],
	pt_TUNING_EDIT_COLOR_SLOT,
	pt_COUNTRY_TYPE,
	pt_LAST_SHOT_ROBBERY,
	pt_PASSWD[24],
	bool:pt_CONTROL,
	pt_SELECTING_STYLE,
	pt_SELECTED_STYLE,
	pt_PROPERTY_CINFO[4],
	pt_CJ_WARNINGS,
	Text3D:pt_POLICE_LABEL,
	bool:pt_ADMIN_SERVICE,
	Text3D:pt_ADMIN_LABEL,
	pt_LAST_SAFE_ZONE_WARNING,
	pt_SELECTED_POLICE_OBJECT_INDEX,
	bool:pt_DIALOG_RESPONDED,
	pt_DIALOG_ID,
	bool:pt_DIALOG_SHOW,
	bool:pt_DL_EXAM,
	pt_DL_EXAM_CP,
	pt_DL_EXAM_PROCCESS,
	pt_COOLDOWN_CONSUMABLES,
	pt_SELECTED_OBJECT,
	bool:pt_CLASSED,
	pt_CREW_INDEX,
	bool:pt_REINFORCEMENT,
	pt_LAST_VEHICLE_DESTROY,
	pt_LOGIN_KICK_TIMER,
	pt_PICKUP_TIMER,
	bool:pt_PLAYER_PLAY_MENU,
	pt_PLAYER_PLATFORM, // 1 mobile - 0 pc
	pt_POCKET_INDEX,
	pt_POCKET_EXTRA,
	pt_PERFORMED_ENVIRONMET,
	pt_PERFORMED_ACTION,
	pt_BOOT_VEHICLE_ID,
	pt_WORK_VEHICLE_ID,
	pt_RENT_VEHICLE_ID,
	pt_WORK_VEHICLE_SPAWN_TIMER,
	Float:pt_DEATH_HEALTH,
	Float:pt_PASSIVE_HEALTH,
	Float:pt_ARRESTED_HEALTH,
	Float:pt_INJURED_POS[4],
	pt_POCKET_PLAYER[2],
	pt_PACK_SELECTION,
	pt_TASER_TIMER,
	pt_TASED,
	pt_MERCHANT_INDEX,
	pt_LAST_LOADED_VEHICLE,
	pt_CURRENT_PARKING_INDEX,
	pt_DEALER_INDEX,
	bool:pt_DEALER_SHOP,
	pt_VEHICLE_DEALER_INDEX,
	pt_VEHICLE_DEALER_SIZE,
	bool:pt_ADMIN_NAME,
	pt_THROW_TIMER,
	pt_SAVE_TIMER,
	pt_ARRESTED_JAIL_TIME,
	pt_LAST_SHOT_TICK,
	bool:pt_IN_VEHICLE_REPAIR,
	pt_VEHICLE_REPAIR_INDEX,
	pt_ADMIN_DBID,
	pt_UPDATE_ARMOUR_TIME
};
new PLAYER_TEMP[MAX_PLAYERS][Temp_Enum]; // PT (PlayerTemp), variables que no van a ser guardadas en base de datos.

enum E_PB
{
	PlayerBar:pbRep,
	PlayerBar:pbHungry,
	PlayerBar:pbThirst
}
new j_Pb[MAX_PLAYERS][E_PB];

enum
{
	MECHANIC_OPTION_REPAIR,
	MECHANIC_OPTION_COLOR_1,
	MECHANIC_OPTION_COLOR_2,
	MECHANIC_OPTION_TUNING,
	MECHANIC_OPTION_REMOVE_COMPONEN,
	MECHANIC_OPTION_PAINTJOB
}

//EnterExits
enum {
	INTERIOR_NO_INFO,
	INTERIOR_BINCO,
	INTERIOR_SUBURBAN,
	INTERIOR_PROLAPS,
	INTERIOR_DIDIER_SACHS,
	INTERIOR_VICTIM,
	INTERIOR_ZIP,
	INTERIOR_247,
	INTERIOR_PIZZA,
	INTERIOR_CLUCKIN_BELL,
	INTERIOR_BURGER_SHOT,
	INTERIOR_BANK_LS,
	INTERIOR_BANK_SF,
	INTERIOR_BANK_LV,
	INTERIOR_CITY_HALL_LS,
	INTERIOR_UNITY_STATION,
	INTERIOR_TRUCK,
	INTERIOR_POLICE_LS,
	INTERIOR_POLICE_GARAGE,
	INTERIOR_HOSPITAL,
	INTERIOR_DRIVING_SCHOOL,
	INTERIOR_BLACK_MARKET,
	INTERIOR_PHARMACY,
	INTERIOR_ADMIN_ZONE

}
enum Enter_Exits {
	ee_VISIBLE_ITEMS,
	ee_MAIN_ACTOR,
	ee_TIMER,
	ee_ID,
	ee_NAME[64],
	ee_INTERIOR_TYPE,
	
	ee_INT_MAPICON,
	ee_INT_FREEZE,
	ee_INT_WORLD,
	ee_INT_INTERIOR,

	Float:ee_INT_X,
	Float:ee_INT_Y,
	Float:ee_INT_Z,
	Float:ee_INT_ANGLE,
	
	ee_EXT_MAPICON,
	ee_EXT_FREEZE,
	ee_EXT_WORLD,
	ee_EXT_INTERIOR,

	Float:ee_EXT_X,
	Float:ee_EXT_Y,
	Float:ee_EXT_Z,
	Float:ee_EXT_ANGLE,
	
	ee_TIME_OPEN,
	ee_TIME_CLOSE,

	ee_INT_MAPICON_ID,
	ee_EXT_MAPICON_ID,

	Text3D:ee_INT_LABEL_ID,
	Text3D:ee_EXT_LABEL_ID,

	ee_INT_PICKUP_ID,
	ee_EXT_PICKUP_ID,

	ee_GPS_NAME[24]
}

new ENTER_EXIT[][Enter_Exits] = {
	{-1, INVALID_ACTOR_ID, -1, -1, "Binco", INTERIOR_BINCO, -1, false, 0, 15, 207.744949, -111.073318, 1005.132812, 0.0,	45, false, 0, 0, 2244.484863, -1665.223510, 15.476562, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Binco", INTERIOR_BINCO, -1, false, 1, 15, 207.744949, -111.073318, 1005.132812, 0.0,	45, false, 0, 0, -2374.125976, 910.103271, 45.433864, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Binco", INTERIOR_BINCO, -1, false, 2, 15, 207.744949, -111.073318, 1005.132812, 0.0,	45, false, 0, 0, 2101.902832, 2257.391845, 11.023437, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Binco", INTERIOR_BINCO, -1, false, 3, 15, 207.744949, -111.073318, 1005.132812, 0.0,	45, false, 0, 0, 1656.993408, 1733.450195, 10.828111, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "SubUrban", INTERIOR_SUBURBAN, -1, false, 0, 1, 203.906326, -50.494247, 1001.804687, 0.0,	45, false, 0, 0, 2112.835205, -1211.456665, 23.962865, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "SubUrban", INTERIOR_SUBURBAN, -1, false, 1, 1, 203.906326, -50.494247, 1001.804687, 0.0,	45, false, 0, 0, -2490.140869, -29.123632, 25.617187, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "SubUrban", INTERIOR_SUBURBAN, -1, false, 2, 1, 203.906326, -50.494247, 1001.804687, 0.0,	45, false, 0, 0, 2779.590087, 2453.658203, 11.062500, 136.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "ProLaps", INTERIOR_PROLAPS, -1, false, 0, 3, 206.995925, -140.021163, 1003.507812, 0.0,	45, false, 0, 0, 499.498168, -1360.616088, 16.368682, 340.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "ProLaps", INTERIOR_PROLAPS, -1, false, 1, 3, 206.995925, -140.021163, 1003.507812, 0.0,	45, false, 0, 0, 2825.891357, 2407.322265, 11.062500, 133.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Didier Sachs", INTERIOR_DIDIER_SACHS, -1, false, 0, 14, 204.348281, -168.678985, 1000.523437, 0.0,	45, false, 0, 0, 453.858032, -1478.098632, 30.813968, 111.110641, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Didier Sachs", INTERIOR_DIDIER_SACHS, -1, false, 1, 14, 204.348281, -168.678985, 1000.523437, 0.0,	45, false, 0, 0, 1642.838012, -2284.760742, -1.195312, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Victim", INTERIOR_VICTIM, -1, false, 0, 5, 227.350250, -8.188652, 1002.210937, 90.0,	45, false, 0, 0, 461.541320, -1500.892333, 31.049194, 98.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Victim", INTERIOR_VICTIM, -1, false, 1, 5, 227.350250, -8.188652, 1002.210937, 90.0,	45, false, 0, 0, -1694.747558, 951.613464, 24.890625, 135.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Victim", INTERIOR_VICTIM, -1, false, 2, 5, 227.350250, -8.188652, 1002.210937, 90.0,	45, false, 0, 0, 2802.926269, 2430.682861, 11.062500, 130.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "ZIP", INTERIOR_ZIP, -1, false, 0, 18, 161.401184, -96.887367, 1001.804687, 0.0,	45, false, 0, 0, 1456.611816, -1137.818969, 23.961400, 215.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "ZIP", INTERIOR_ZIP, -1, false, 1, 18, 161.401184, -96.887367, 1001.804687, 0.0,	45, false, 0, 0, -1882.421997, 866.394836, 35.171875, 138.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "ZIP", INTERIOR_ZIP, -1, false, 2, 18, 161.401184, -96.887367, 1001.804687, 0.0,	45, false, 0, 0, 2090.534667, 2224.481933, 11.023437, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "ZIP", INTERIOR_ZIP, -1, false, 3, 18, 161.401184, -96.887367, 1001.804687, 0.0,	45, false, 0, 0, 2572.074218, 1904.711181, 11.023437, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 0, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 2194.734130, 1991.022216, 12.296875, 90.0,	0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 1, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, -180.966003, 1034.823242, 19.742187, 90.0,	0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 2, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 1352.314941, -1758.961425, 13.507812, 0.0,	0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 3, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 1833.540771, -1842.542724, 13.578125, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 4, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 2884.694335, 2453.865478, 11.068956, 225.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 5, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 2097.616210, 2224.081298, 11.023437, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 6, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 2247.650146, 2396.417236, 10.820312, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 7, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 1315.453247, -897.967102, 39.578125, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 8, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 1000.317199, -919.933349, 42.328125, 105.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 9, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 2452.572021, 2064.924316, 10.820312, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 10, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 2546.502929, 1972.397338, 10.820312, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 11, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 1937.592773, 2307.269042, 10.820312, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 12, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, -1562.437744, -2733.189941, 48.743457, 234.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 13, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, -2442.718994, 755.316589, 35.171875, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 14, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 1605.3993, -2151.1086, 13.8141, 223.1830, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, //meca
	{-1, INVALID_ACTOR_ID, -1, -1, "24/7", INTERIOR_247, -1, false, 15, 18, -30.958774, -91.807441, 1003.546875, 0.0,	17, false, 0, 0, 1928.5833, -1776.2985, 13.5469, 261.4121, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, //gaso
	{-1, INVALID_ACTOR_ID, -1, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 0, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, 2105.234619, -1806.479614, 13.554687, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 1, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, -1721.211425, 1359.705932, 7.185316, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 2, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, 2756.652099, 2477.132812, 11.062500, 135.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 3, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, 2083.380615, 2224.687988, 11.023437, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 4, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, 2351.770996, 2533.328369, 10.820312, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 5, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, 2638.568847, 1849.818481, 11.023437, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 6, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, 372.310729, -133.246292, 1001.492187, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Well Stacked Pizza", INTERIOR_PIZZA, -1, false, 7, 5, 372.310729, -133.246292, 1001.492187, 0.0,	29, false, 0, 0, 375.114501, -117.272621, 1001.492187, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 0, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 2419.926025, -1509.024780, 24.000000, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 1, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 2397.772949, -1898.847778, 13.546875, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 2, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 928.553466, -1352.848876, 13.343750, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 3, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 2838.312011, 2407.552978, 11.068956, 225.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 4, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 2101.901367, 2228.776855, 11.023437, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 5, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 2393.372070, 2041.856323, 10.820312, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 6, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 2638.423828, 1671.904296, 11.023437, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 7, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, -1816.567382, 618.417419, 35.171875, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 8, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, -2671.401611, 257.927551, 4.632812, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 9, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 364.914093, -11.778851, 1001.851562, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Cluckin Bell", INTERIOR_CLUCKIN_BELL, -1, false, 10, 9, 364.914093, -11.778851, 1001.851562, 0.0,	14, false, 0, 0, 368.652679, -4.492218, 1001.851562, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 0, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, 810.715270, -1616.163330, 13.546875, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 1, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, 1199.272216, -918.372253, 43.121376, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 2, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, 2366.805419, 2071.106201, 10.820312, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 3, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, 2472.626464, 2034.173339, 11.062500, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 4, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, 1872.485351, 2071.812255, 11.062500, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 5, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, 2169.620117, 2795.799072, 10.820312, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 6, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, 1157.925659, 2072.159912, 11.062500, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 7, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, -2356.003173, 1008.051147, 50.898437, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 8, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, -2336.861816, -166.945022, 35.554687, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Burger Shot", INTERIOR_BURGER_SHOT, -1, false, 9, 10, 362.869354, -75.153747, 1001.507812, 315.0,	10, false, 0, 0, -1912.406860, 827.900634, 35.227863, 315.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Banco Los Santos", INTERIOR_BANK_LS, -1, false, 1, 3, 834.6652, 7.4803, 1004.1870, 79.0919, 52, false, 0, 0, 1477.583740, -1010.425170, 26.843750, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Banco San Fierro", INTERIOR_BANK_SF, -1, true, 10, 10, 1104.824462, 1515.503173, 1452.807128, 0.0, 52, false, 0, 0, -1961.384887, 441.804687, 35.171875, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Banco Las Venturas", INTERIOR_BANK_LV, -1, true, 15, 15, 2673.430908, -610.844604, -71.658203, 270.0, 52, false, 0, 0, 2474.557861, 1024.154052, 10.820312, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{1000, INVALID_ACTOR_ID, -1, -1, "Gobierno San Andreas", INTERIOR_CITY_HALL_LS, -1, true, 20, 20, -501.181243, 286.212188, 2001.094970, 0.0, 3, false, 0, 0, 1480.966918, -1772.065673, 18.795755, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Unity Station", INTERIOR_UNITY_STATION, -1, false, 0, 3, 1494.416015, 1303.681884, 1093.289062, 0.0, -1, false, 0, 0, 1752.603881, -1894.155883, 13.557376, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Camioneros", INTERIOR_TRUCK, -1, true, 25, 18, 1297.457031, -61.437820, 1002.498046, 180.0, -1, false, 0, 0, -510.699890, -539.409118, 25.523437, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Policia Los Santos", INTERIOR_POLICE_LS, -1, false, 0, 6, 1556.7482, -1675.5099, 916.2180, 268.2735, 30, false, 0, 0, 1555.400390, -1675.611694, 16.195312, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Policia Los Santos", INTERIOR_POLICE_GARAGE, -1, false, 0, 6, 1582.3214, -1675.1063, 916.2180, 89.7765, -1, false, 0, 0, 1583.3602, -1637.5106, 13.3905, 357.7427, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, // garaje lspd
	{-1, INVALID_ACTOR_ID, -1, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 1, 3, 2063.2744, -1405.9264, 942.9642, 90.0, 22, false, 0, 0, 2034.197875, -1403.040039, 17.294845, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 2, 3, 2063.2744, -1405.9264, 942.9642, 90.0, 22, false, 0, 0, 1172.832763, -1323.269531, 15.400051, 270.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 3, 3, 2063.2744, -1405.9264, 942.9642, 90.0, 22, false, 0, 0, 1242.235595, 328.113281, 19.755510, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 4, 3, 2063.2744, -1405.9264, 942.9642, 90.0, 22, false, 0, 0, -2201.566162, -2307.610839, 30.625000, 320.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 5, 3, 2063.2744, -1405.9264, 942.9642, 90.0, 22, false, 0, 0, -2655.108886, 639.278625, 14.453125, 180.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 6, 3, 2063.2744, -1405.9264, 942.9642, 90.0, 22, false, 0, 0, -318.812774, 1050.359130, 20.340259, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 7, 3, 2063.2744, -1405.9264, 942.9642, 90.0, 22, false, 0, 0, -1514.855590, 2520.366699, 55.909828, 0.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Hospital", INTERIOR_HOSPITAL, -1, false, 8, 3, 2063.2744, -1405.9264, 942.9642, 90.0, 22, false, 0, 0, 1583.311401, 1768.952758, 10.820312, 90.0, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Escuela de Conducir", INTERIOR_DRIVING_SCHOOL, -1, false, 1, 3, -2026.9093, -103.6266, 1035.1719, 178.9579, 36, false, 0, 0, 1153.9894, -1772.6492, 16.5992, 0.8853, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, "Licencia de Automovil"},
	{-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 1, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, 2494.0999, -1464.6708, 24.0254, 352.9490, 23, 24, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, 
    {-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 2, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, 2770.7004, -1628.7234, 12.1775, 355.2818, 05, 06, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, 
    {-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 3, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, 2323.7839, 13.0632, 26.4844, 170.8722, 13, 14, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, 
    {-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 4, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, 1297.0322, 353.3503, 19.5547, 249.4260, 23, 25, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, 
    {-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 5, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, 646.8146, -511.4411, 16.3359, 358.4639, 12, 13, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, 
    {-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 6, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, 255.4722, -158.1288, 1.5703, 84.7748, 09, 12, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, 
    {-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 7, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, 51.6686, 1222.1752, 18.9145, 85.4112, 19, 21, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, 
    {-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 8, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, 1679.9502, 1762.6923, 10.8291, 177.2893, 23, 24, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, 
    {-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 9, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, 1068.8927, 2383.2654, 10.8203, 349.4335, 21, 23, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, 
    {-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 10, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, 263.6038, 2895.4731, 10.5314, 27.7467, 08, 09, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, 
    {-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 11, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, -1463.1968, 2628.6160, 58.7734, 349.3821, 08, 09, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, 
    {-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 12, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, -1061.6124, 1562.1187, 33.4313, 34.3667, 22, 25, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, 
    {-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 13, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, -2446.8921, 2512.2158, 15.7003, 268.0068, 14, 16, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, 
    {-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 14, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, -2110.9207, -43.9475, 35.3203, 174.2830, 15, 17, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}, 
    {-1, INVALID_ACTOR_ID, -1, -1, "Mercado Negro", INTERIOR_BLACK_MARKET, -1, false, 15, 1, 1257.7573, 629.1966, -41.8727, 182.2564, 23, false, 0, 0, -2093.4341, -2417.6628, 30.6250, 321.0594, 3, 4, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Farmacia", INTERIOR_PHARMACY, -1, false, 4, 4, -27.2724, -31.4541, 1003.5573, 356.4702, 22, false, 0, 0, 2063.0342, -1897.2124, 13.5538, 176.6345, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Farmacia", INTERIOR_PHARMACY, -1, false, 5, 4, -27.2724, -31.4541, 1003.5573, 356.4702, 22, false, 0, 0, 694.9771, -500.1252, 16.3359, 1.9875, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""},
	{-1, INVALID_ACTOR_ID, -1, -1, "Logistica de Spain +", INTERIOR_ADMIN_ZONE, -1, false, 1, 0, 232.8765, 1822.7367, 7.4141, 91.4262, -1, false, 0, 0, 1410.7903, -1486.8801, 20.4355, 178.4441, 0, 0, -1, -1, Text3D:INVALID_3DTEXT_ID, Text3D:INVALID_3DTEXT_ID, -1, -1, ""}
};

enum enum_JAIL_POSITIONS
{
	jail_INT,
	Float:jail_X,
	Float:jail_Y,
	Float:jail_Z,
	Float:jail_ANGLE,
	jail_INTERIOR,
}
new JAIL_POSITIONS[][enum_JAIL_POSITIONS] = 
{
	{INTERIOR_POLICE_LS, 265.070129, 77.518280, 1001.039062, 270.0, 6} //jaills
};

enum BUY_PROPERTIES_SITES_INFO
{
	site_INTERIOR_TYPE,
	Float:site_X,
	Float:site_Y,
	Float:site_Z,
	site_WORLD,
	site_INTERIOR,
}
new BUY_PROPERTIES_SITES[][BUY_PROPERTIES_SITES_INFO] =
{
	{INTERIOR_BANK_LS, 822.0128, 6.3417, 1004.1797, 1, 3},
	{INTERIOR_BANK_SF, 1116.351684, 1540.468750, 1451.827148, 10, 10},
	{INTERIOR_BANK_LV, 2681.990966, -615.470520, -71.658203, 15, 15}
};



enum
{
	PRODUCT_TYPE_NONE,
	PRODUCT_TYPE_INVENTORY,
	PRODUCT_TYPE_PHONE,
	PRODUCT_TYPE_GPS,
	PRODUCT_TYPE_PHONE_RESOLVER,
}
enum Supermarket_Enum
{
	product_TYPE,
	product_NAME[24],
	product_PRICE,
	Float:product_HUNGRY,
	Float:product_THIRST,
	product_DRUNK,
	product_AMOUNT,
	product_EXTRA
}
new Supermarket_Product_List[][Supermarket_Enum] =  
{
	{PRODUCT_TYPE_PHONE, "Telefono", 350, 0.0, 0.0, 0, 0, 0},
	{PRODUCT_TYPE_PHONE_RESOLVER, "Guia telefónica", 200, 0.0, 0.0, 0, 0, 0},
	{PRODUCT_TYPE_GPS, "Localizador GPS", 300, 0.0, 0.0, 0, 0, 0},
	{PRODUCT_TYPE_INVENTORY, "Lata de refresco Sprunk", 80, 0.0, 0.0, 0, 3, INVENTORY_TYPE_SPRUNK},
	{PRODUCT_TYPE_INVENTORY, "Hamburguesa", 200, 0.0, 0.0, 0, 5, INVENTORY_TYPE_BURGER},
	{PRODUCT_TYPE_INVENTORY, "Caja de Herramientas", 1500, 0.0, 0.0, 0, 1, INVENTORY_TYPE_PARTS_BOX}
};

enum Clothing_Shop_Info
{
	clothing_shop_INTERIOR_TYPE,
	clothing_shop_NAME[24],
	Float:clothing_shop_X,
	Float:clothing_shop_Y,
	Float:clothing_shop_Z,
	Float:clothing_shop_ANGLE,
	clothing_shop_INTERIOR,
}
new Clothing_Shop_Positions[][Clothing_Shop_Info] =  
{ 
	{INTERIOR_BINCO, "Binco", 207.733657, -100.633468, 1005.257812, 180.0, 15}, //Binco
	{INTERIOR_SUBURBAN, "SubUrban", 203.905395, -43.450450, 1001.804687, 180.0, 1}, //SubUrban
	{INTERIOR_PROLAPS, "ProLaps", 207.049148, -129.177581, 1003.507812, 180.0, 3}, //prolaps
	{INTERIOR_DIDIER_SACHS, "Didier Sachs", 204.348281, -159.493728, 1000.523437, 180.0, 14}, //Didier
	{INTERIOR_VICTIM, "Victim", 206.374328, -7.241514, 1001.210937, 270.0, 5}, //Victim
	{INTERIOR_ZIP, "ZIP", 161.443634, -83.589271, 1001.804687, 180.0, 18} //Zip
};


enum Fast_Food_Info
{
	fast_food_INTERIOR_TYPE,
	fast_food_NAME[24],
	Float:fast_food_X,
	Float:fast_food_Y,
	Float:fast_food_Z,
	fast_food_INTERIOR,
}
new Fast_Food_Positions[][Fast_Food_Info] =
{
	{INTERIOR_BURGER_SHOT, "Burger Shot", 375.913238, -67.435272, 1001.507812, 10}, // BurgerShot
	{INTERIOR_PIZZA, "Well Stacked Pizza", 375.254730, -118.804710, 1001.499511, 5}, //Pizza
	{INTERIOR_CLUCKIN_BELL, "Cluckin Bell", 368.757904, -6.018908, 1001.851562, 9} //Cluckin Bell
};

enum atm_bank_info
{
	atm_modelid,
	Float:atm_X,
	Float:atm_Y,
	Float:atm_Z,
	Float:atm_RX,
	Float:atm_RY,
	Float:atm_RZ
}
new ATM_BANK[MAX_BANK_ATM][atm_bank_info] = 
{
	{2754, 2833.38672, 2402.91553, 10.93546,   0.00000, 0.00000, 131.44171},
	{2754, 2088.78442, 1510.00574, 10.69234,   0.00000, 0.00000, 45.39682},
	{2754, 1662.92346, 1723.03162, 10.53258,   0.00000, 0.00000, 90.27153},
	{2754, -16.17070, 1219.33813, 19.17369,   0.00000, 0.00000, 179.53238},
	{2754, -1505.91687, 2612.09058, 55.63910,   0.00000, 0.00000, 178.85609},
	{2754, -2540.67188, 2340.96143, 4.79166,   0.00000, 0.00000, 90.97625},
	{2754, -1690.23547, 1327.11902, 7.04427,   0.00000, 0.00000, 43.44909},
	{2754, -1980.48608, 155.24883, 27.49554,   0.00000, 0.00000, 359.06995},
	{2754, -2631.60693, -6.86652, 5.97444,   0.00000, 0.00000, 181.99303},
	{2754, -2146.54395, -2332.90283, 30.43888,   0.00000, 0.00000, 232.48808},
	{2754, 574.90155, -1419.96509, 14.22211,   0.00000, 0.00000, 283.89526},
	{2754, 1227.24524, -1428.54846, 13.29063,   0.00000, 0.00000, 269.20294},
	{2754, 1810.57153, -1873.97852, 13.38759,   0.00000, 0.00000, 180.44339},
	{2754, 1493.07471, -1022.08618, 23.63997,   0.00000, 0.00000, 91.19178},
	{2754, 2330.78149, 81.79469, 26.33336,   0.00000, 0.00000, 269.20883},
	{2754, 711.71503, -542.69287, 16.04271,   0.00000, 0.00000, 180.17184},
	{2754, 242.68755, -54.72442, 1.31352,   0.00000, 0.00000, 0.00000},
	{2754, 1381.12219, 233.81693, 19.28907,   0.00000, 0.00000, 154.79193}
};

#define MAX_BANK_TRANSACTIONS_DIALOG	20
enum
{
	BANK_TRANSACTION_WITHDRAW,
	BANK_TRANSACTION_DEPOSIT,
	BANK_TRANSACTION_TRANSFER,
	BANK_TRANSACTION_CREATE_ACCOUNT,
	BANK_TRANSACTION_BUY_PROPERTY,
	BANK_TRANSACTION_SOLD_PROPERTY,
	BANK_TRANSACTION_BUY_VEHICLE,
	BANK_TRANSACTION_SOLD_VEHICLE
};

new Float:Bank_Interior_Positions[][] =
{
	{822.1514, 1.7898, 1004.1797},
	{1105.033935, 1529.565795, 1452.480957},
	{2690.869628, -610.943664, -71.658203}
};

enum Food_Info
{
	food_NAME[24],
	food_PRICE,
	Float:food_HUNGRY,
	Float:food_THIRST,
}
new PIZZA_FOOD[][Food_Info] =
{
	{"Pizza de verduras", 25, 10.0, -0.1},
	{"Pizza de jamón y queso", 60, 16.0, -0.1},
	{"Pizza barbacoa", 40, 15.0, -0.1},
	{"Pizza 4 quesos", 55, 14.0, -0.1},
	{"Ensalada", 20, 10.0, 5.0},
	{"Refresco de Sprunk", 30, 0.0, 12.0},
	{"Refresco de Cola", 50, 0.0, 13.5},
	{"Agua mineral", 30, 0.0, 19.0}
};
new BURGER_SHOT_FOOD[][Food_Info] =
{
	{"Hamburguesa de ternera", 60, 16.0, -0.1},
	{"Hamburguesa de pollo", 80, 10.0, -0.1},
	{"Hamburguesa especial", 60, 12.0, -3.0},
	{"Ensalada", 20, 10.0, 5.0},
	{"Refresco de Sprunk", 30, 0.0, 12.0},
	{"Refresco de Cola", 50, 0.0, 13.5},
	{"Agua mineral", 30, 0.0, 19.0}
};
new CLUCKIN_BELL_FOOD[][Food_Info] =
{
	{"Alitas de pollo", 60, 16.0, -0.1},
	{"Plato especial", 80, 18.0, -2.0},
	{"Ensalada", 20, 10.0, 5.0},
	{"Refresco de Sprunk", 30, 0.0, 12.0},
	{"Refresco de Cola", 50, 0.0, 13.5},
	{"Agua mineral", 30, 0.0, 19.0}
};

enum Toys_Info
{
	shop_toy_type,
	shop_toy_price,
	shop_toy_price_coin,
}
new Toys_Shop[][Toys_Info] =
{
	{INVENTORY_TYPE_TOY_DOLPHIN, 0, 5},
	{INVENTORY_TYPE_TOY_TOTEM, 0, 16},
	{INVENTORY_TYPE_TOY_CWB_HAT, 0, 2},
	{INVENTORY_TYPE_TOY_PLANE, 0, 7},
	{INVENTORY_TYPE_TOY_BACKPACK, 0, 4},
	{INVENTORY_TYPE_TOY_GUITAR_1, 350000, 0},
	{INVENTORY_TYPE_TOY_GUITAR_2, 0, 4},
	{INVENTORY_TYPE_TOY_GUITAR_3, 0, 8},
	{INVENTORY_TYPE_TOY_CWB_HAT_2, 0, 2}
};

new 
Binco_Shop_Male_Skins[][] =  
{
	/* BINCO - HOMBRE */
	{4, 75      , 0},
	{5, 75      , 0},
	{6, 90      , 0},
	{7, 80      , 0},
	{21, 121    , 0},
	{44, 65     , 0},
	{47, 119    , 0},
	{101, 149   , 0},
	{127, 89    , 0},
	{128, 25    , 0},
	{134, 25    , 0},
	{135, 25    , 0},
	{137, 19    , 0},
	{160, 55    , 0},
	{161, 68    , 0},
	{168, 39    , 0},
	{176, 79    , 0},
	{177, 65    , 0},
	{179, 110   , 0},
	{184, 150   , 0},
	{188, 160   , 0},
	{200, 15    , 0},
	{212, 30    , 0},
	{230, 10    , 0},
	{258, 69    , 0},
	{259, 69    , 0},
	{262, 50, 0},
	{86, 70	, 0},
	{102, 100, 0},
	{103, 100, 0},
	{104, 100, 0},
	{105, 100, 0},
	{106, 100, 0},
	{107, 100, 0},
	{108, 100, 0},
	{109, 100, 0},
	{110, 100, 0},
	{111, 100, 0},
	{112, 100, 0},
	{113, 100, 0},
	{114, 100, 0},
	{115, 100, 0},
	{116, 100, 0},
	{117, 100, 0},
	{118, 100, 0},
	{119, 100, 0},
	{120, 100, 0},
	{121, 100, 0},
	{122, 100, 0},
	{123, 100, 0},
	{124, 100, 0},
	{125, 100, 0},
	{126, 100, 0}
},

Binco_Shop_Female_Skins[][] =  
{
	/* BINCO - MUJER */
	{13, 120   , 0},
	{41, 59    , 0},
	{56, 190   , 0},
	{65, 110   , 0},
	{69, 100   , 0},
	{75, 50    , 0},
	{89, 69    , 0},
	{151, 89   , 0},
	{152, 3000 , 0},
	{207, 500  , 0},
	{226, 120  , 0},
	{298, 900  , 0}
},

Suburban_Shop_Male_Skins[][] =  
{
	/* SUBURBAN - HOMBRE */
	{2, 100   , 0},
	{3, 140   , 0},
	{20, 190  , 0},
	{43, 180  , 0},
	{48, 145  , 0},
	{60, 250  , 0},
	{100, 300 , 0},
	{112, 200 , 0},
	{119, 49  , 0},
	{143, 199 , 0},
	{180, 150 , 0},
	{183, 100 , 0},
	{184, 140 , 0},
	{241, 200 , 0},
	{242, 190 , 0},
	{247, 450 , 0},
	{248, 499 , 0},
	{249, 650 , 0},
	{264, 5   , 0}
},

Suburban_Shop_Female_Skins[][] =  
{
	/* SUBURBAN - MUJER */
	{39, 109  , 0},
	{56, 100  , 0},
	{88, 140  , 0},
	{131, 200 , 0},
	{195, 199 , 0}
},

Prolaps_Shop_Male_Skins[][] =  
{
	/* PROLAPS - HOMBRE */
	{29, 129  , 0},
	{36, 140  , 0},
	{37, 150  , 0},
	{51, 160  , 0},
	{52, 170  , 0},
	{96, 200  , 0},
	{99, 700  , 0},
	{206, 499 , 0},
	{154, 199 , 0}
},

Prolaps_Shop_Female_Skins[][] =  
{
	/* PROLAPS - MUJER */
	{41, 199 , 0},
	{90, 250 , 0},
	{92, 860 , 0},
	{138, 150, 0},
	{139, 150, 0},
	{140, 159, 0},
	{190, 150, 0},
	{192, 180, 0},
	{193, 195, 0}
},

Didier_Shop_Male_Skins[][] =  
{
	/* DIDIER - HOMBRE */
	{17, 1500  , 0},
	{46, 1900  , 0},
	{57, 1220  , 0},
	{82, 3400  , 0},
	{83, 3400  , 0},
	{84, 3400  , 0},
	{124, 3500 , 0},
	{147, 6000 , 0},
	{163, 3000 , 0},
	{166, 3000 , 0},
	{171, 4000 , 0},
	{187, 4500 , 0},
	{223, 3100 , 0},
	{240, 1500 , 0},
	{295, 3000 , 0}
},

Didier_Shop_Female_Skins[][] =  
{
	/* DIDIER - MUJER */
	{11, 1500  , 0},
	{12, 3000  , 0},
	{40, 2500  , 0},
	{91, 8000  , 0},
	{141, 3500 , 0},
	{169, 4000 , 0},
	{172, 2100 , 0},
	{194, 2000 , 0},
	{214, 25000, 0},
	{215, 3200 , 0},
	{216, 10500, 0},
	{219, 9500 , 0}
},

Victim_Shop_Male_Skins[][] =  
{
	/* VICTIM - HOMBRE */
	{19, 400   , 0},
	{46, 1200  , 0},
	{59, 900   , 0},
	{72, 599   , 0},
	{73, 699   , 0},
	{98, 339   , 0},
	{121, 200  , 0},
	{170, 500  , 0},
	{185, 400  , 0},
	{186, 900  , 0},
	{188, 350  , 0},
	{221, 700  , 0},
	{223, 1200 , 0},
	{250, 50000, 0},
	{289, 699  , 0},
	{299, 700  , 0},
	{303, 500  , 0},
	{304, 700  , 0}
},

Victim_Shop_Female_Skins[][] =  
{
	/* VICTIM - MUJER */
	{12, 2900  , 0},
	{40, 3000  , 0},
	{55, 1010  , 0},
	{56, 400   , 0},
	{192, 3000 , 0},
	{211, 3500 , 0},
	{226, 600  , 0},
	{233, 900  , 0}
},

Zip_Shop_Male_Skins[][] =  
{
	/* ZIP - HOMBRE */
	{121, 190  , 0},
	{170, 500  , 0},
	{185, 400  , 0},
	{186, 900  , 0},
	{19, 400   , 0},
	{46, 1200  , 0},
	{59, 905   , 0},
	{72, 400   , 0},
	{73, 650   , 0},
	{98, 320   , 0},
	{250, 49999, 0},
	{289, 622  , 0},
	{299, 730  , 0},
	{303, 550  , 0},
	{188, 350  , 0},
	{221, 700  , 0},
	{223, 1200 , 0},
	{304, 700  , 0}
},

Zip_Shop_Female_Skins[][] =  
{
	/* ZIP - MUJER */
	{56, 405    , 0},
	{192, 3010  , 0},
	{211, 3520  , 0},
	{226, 620   , 0},
	{233, 950   , 0},
	{12, 2904   , 0},
	{40, 3002   , 0},
	{55, 1011   , 0}
};

enum
{
	PICKUP_TYPE_NONE = 0,
	PICKUP_TYPE_ENTER_EXIT,
	PICKUP_TYPE_ATM,
	PICKUP_TYPE_PROPERTY,
	PICKUP_TYPE_WORK,
	PICKUP_TYPE_VEHICLE_SPAWN,
	PICKUP_TYPE_START_END_WORK,
	PICKUP_TYPE_MECHANIC_PIECES,
	PICKUP_TYPE_247,
	PICKUP_TYPE_FARMER_SEEDS,
	PICKUP_TYPE_PACK_DRUGS,
	PICKUP_TYPE_BUY_DRUGS_PACK,
	PICKUP_TYPE_BUY_POLICE_WEAPONS,
	PICKUP_TYPE_BUY_POLICE_ARMOUR,
	PICKUP_TYPE_SPAWN_POLICE_VEHICL,
	PICKUP_TYPE_ONFOOT_PARKING_SLO,
	PICKUP_TYPE_DRIVER_PARKING_SLO,
	PICKUP_TYPE_CENTRAL_PARKING_SL,
	PICKUP_TYPE_MERCHANTS,
	PICKUP_TYPE_HEALTH_UP,
	PICKUP_TYPE_TRUCK_LOAD,
	PICKUP_TYPE_MEDIC_MEDICINE_BUY,
	PICKUP_TYPE_FUEL_STATION,
	PICKUP_TYPE_DEALER_SHIP,
	PICKUP_TYPE_BLACK_MARKET_BUY,
	PICKUP_TYPE_PHARMACY,
	PICKUP_TYPE_BANK,
	PICKUP_TYPE_REPAIR_VEHICLE,
	PICKUP_TYPE_RENT,
	PICKUP_TYPE_DRIVING_LICENSE
};

new Intro_Skins[][] =
{
	{ // HOMBRE 	
		170,
		158,
		184,
		220,
		183,
		73
	},
	
	{ // MUJER
		192,
		40, 
		226,
		41, 
		13, 
		298,
	}
};

enum Fuel_Stations_Info
{
	Float:fs_X,
	Float:fs_Y,
	Float:fs_Z,
	bool:fs_GPS_SHOW
};
new Fuel_Stations[][Fuel_Stations_Info] =
{
	{1942.679443, -1771.374511, 13.390598, true},
	{654.678710, -570.627807, 16.335937, true},
	{1384.011962, 457.825012, 19.995258, true},
	{-1669.027221, 411.541076, 7.179687, true},
	{-2409.644042, 976.147644, 45.307708, true},
	{-1328.633666, 2675.913818, 50.062500, true},
	{612.890563, 1692.938720, 6.992187, true},
	{-1607.715820, -2717.499023, 48.539062, true},
	{2146.831542, 2743.855224, 10.820312, true},
	{2197.993408, 2475.015625, 10.820312, true},
	{2115.124267, 926.094909, 10.960937, true},
	{1595.974731, 2193.016845, 10.820312, true},
	{-1477.559326, 1858.962524, 32.639846, true},
	{-98.757804, -1172.726440, 2.428447, true},
	{1601.9781, -2165.6926, 13.5797, true}, // Meca gaso1
	{1602.0916, -2181.1082, 13.5797, false} // Meca gaso2
};

enum E_HOSPITAL_SPAWN_INFO
{
	Float:hspi_X,
	Float:hspi_Y,
	Float:hspi_Z,
	Float:hspi_ANGLE,
}

new Hospital_Spawn_Positions[][E_HOSPITAL_SPAWN_INFO] =  
{ 
	{2034.197875, -1403.040039, 17.294845, 180.0},
	{1172.832763, -1323.269531, 15.400051, 270.0},
	{1242.235595, 328.113281, 19.755510, 0.0},
	{-2201.566162, -2307.610839, 30.625000, 320.0},
	{-2655.108886, 639.278625, 14.453125, 180.0},
	{-318.812774, 1050.359130, 20.340259, 0.0},
	{-1514.855590, 2520.366699, 55.909828, 0.0},
	{1583.311401, 1768.952758, 10.820312, 90.0}
};

new Float:Hospital_Cameras_Positions[][] =
{
	{2007.3301, -1442.3809, 26.7332, 2008.0043, -1441.6445, 26.4982},
	{1209.2427, -1314.4705, 23.4945, 1208.5284, -1315.1681, 23.3195},
	{1260.2025, 342.6251, 22.3913, 1259.4681, 341.9478, 22.2512},
	{-2200.5859, -2316.3057, 31.7932, -2200.8340, -2315.3367, 31.6932},
	{-2530.8450, 568.0942, 29.4603, -2531.6973, 568.6146, 29.4553},
	{-305.5014, 1068.6696, 24.2657, -306.1943, 1067.9514, 24.0607},
	{-1504.2892, 2553.1243, 61.1113, -1504.5568, 2552.1619, 60.8414},
	{1624.5881, 1837.4691, 12.5740, 1623.9382, 1836.7124, 12.4690}
};

/* TEXTDRAWS */
#define MAX_PLAYER_MAP_GPS_POINTS 20
#define HUD_PTEXTDRAWS_SIZE 2
enum Player_Textdraws_Enum
{
	PlayerText:ptextdraw_HOSPITAL[3], //Barra recuperando vida despues de morir
	PlayerText:ptextdraw_CLOTHING_SHOP[6], //Tiendas de ropas
	PlayerText:ptextdraw_REGISTER_SKIN[10],
	PlayerText:ptextdraw_TOYS_SHOP[10],
	PlayerText:ptextdraw_PROPERTY_CONSTRUCTOR[6],
	PlayerText:ptextdraw_RECYCLE_TRASH[3],
	PlayerText:ptextdraw_PLANT_PLANT[4],
	PlayerText:ptextdraw_PLAYER_GPS_MAP[MAX_PLAYER_MAP_GPS_POINTS],
	PlayerText:ptextdraw_TUNING_SHOP,
	PlayerText:ptextdraw_MESSAGE,
	PlayerText:ptextdraw_HUD[HUD_PTEXTDRAWS_SIZE],
	PlayerText:ptextdraw_TERRITORY_BOX
}
new PlayerTextdraws[MAX_PLAYERS][Player_Textdraws_Enum];

#define map_td_X 3.0
#define map_td_Y 134.0
#define map_td_SIZE_X 175.0
#define map_td_SIZE_Y 190.0

#define HUD_TEXTDRAWS_SIZE 3
#define LOAD_SCREEN_TEXTDRAWS_SIZE 4
enum Textdraws_Enum
{
	Text:textdraw_PLAYER_REP_BACK[2],
	Text:textdraw_LOAD_SCREEN[LOAD_SCREEN_TEXTDRAWS_SIZE],
	Text:textdraw_SERVER_TIME,
	Text:textdraw_GPS_MAP[4],
	Text:textdraw_SHOP_TUNING[5],
	Text:textdraw_HUD[HUD_TEXTDRAWS_SIZE],
	Text:textdraw_PLAY_MENU[4]
}
new Textdraws[Textdraws_Enum];

#define MIN_PASS_LENGTH	6
#define MAX_PASS_LENGTH	18

enum enum_PI
{
	pi_ID,
	pi_NAME[24],
	pi_IP[16],
	pi_EMAIL[32],
	pi_PASS[SHA256_HASH_LENGTH],
	pi_SALT[16],
	pi_REG_DATE[24],
	pi_LAST_CONNECTION[24],
	pi_LAST_CONNECTION_TIMESTAMP,
	pi_TIME_PLAYING,
	pi_LEVEL,
	pi_REP,
	pi_CONNECTED,
	pi_PLAYERID,
	pi_DOUBT_CHANNEL,
	pi_GLOBAL_CHANNEL,
	pi_SELL_CHANNEL,
	pi_TIME_FOR_REP,
	pi_ADMIN_LEVEL,
	pi_PAYDAY_REP,
	pi_VIP,
	pi_VIP_EXPIRE_DATE[24],
	pi_COINS,
	pi_SKIN,
	pi_CASH,
	Float:pi_POS_X,
	Float:pi_POS_Y,
	Float:pi_POS_Z,
	Float:pi_ANGLE,
	pi_STATE,
	pi_INTERIOR,
	pi_LOCAL_INTERIOR,
	pi_FIGHT_STYLE,
	Float:pi_HEALTH,
	Float:pi_ARMOUR,
	pi_GENDER,
	Float:pi_HUNGRY,
	Float:pi_THIRST,
	pi_WANTED_LEVEL,
	pi_POLICE_JAIL_TIME,
	pi_POLICE_DUTY,
	pi_POLICE_JAIL_ID,
	pi_DRIVE_LICENSE,
	pi_BANK_ACCOUNT,
	pi_BANK_MONEY,
	pi_PHONE_NUMBER,
	pi_PHONE_STATE,
	pi_PHONE_VISIBLE_NUMBER,
	pi_GPS,
	pi_PHONE_RESOLVER,
	pi_MECHANIC_PIECES,
	pi_SEED_MEDICINE,
	pi_SEED_CANNABIS,
	pi_SEED_CRACK,
	pi_MEDICINE,
	pi_CANNABIS,
	pi_CRACK,
	pi_CONFIG_SOUNDS,
	pi_CONFIG_AUDIO,
	pi_CONFIG_TIME,
	pi_CONFIG_HUD,
	pi_CONFIG_ADMIN,
	pi_MUTE,
	pi_CREW,
	pi_CREW_RANK,
	pi_PLAYER_PLATFORM,
	pi_PASSIVE_MODE,
	pi_PASSIVE_MODE_TIMER,
	pi_REFERRED,
	pi_WANTED_JAIL_TIMER[24]
};
new PI[MAX_PLAYERS][enum_PI];

forward OnPlayerRegister(playerid);
forward OnPlayerLogin(playerid);

new 
	DIALOG_FOOD_PIZZA_String[800],
	DIALOG_FOOD_CLUCKIN_String[800],
	DIALOG_FOOD_BURGER_String[800],
	DIALOG_247_LIST_String[34 + 55 * sizeof Supermarket_Product_List],
	DIALOG_ANIMS_String[1000],
	DIALOG_PLAYER_GPS_SITE_7_String[5000],
	DIALOG_CREATE_CREW_COLOR_String[4200],
	DIALOG_CREDIT_String[2000]
;


#define HidePlayerDialog(%1)		ShowPlayerDialog(%1, -1, 0, " ", " ", " ", " ")


// PLAYER WEAPONS
#define NO_WEAPON 0
enum enum_WEAPON_INFO
{
	bool:weapon_info_SPECIAL,
	bool:weapon_info_AC_CBUG,
	bool:weapon_info_ANTI_CHEAT,
	bool:weapon_info_AMMO,
	weapon_info_TYPE,
	weapon_info_NAME[32],
	weapon_info_SLOT,
	weapon_info_SHOT_TIME,
	weapon_info_MODEL
}
new WEAPON_INFO[][enum_WEAPON_INFO] = 
{
	{false, false, false, false, NO_WEAPON, "Puño", 0, 250, -1},
	{false, false, true, false, WEAPON_BRASSKNUCKLE, "Manopla", 0, 250, 331},
	{false, false, true, false, WEAPON_GOLFCLUB, "Palo de golf", 1, 250, 333},
	{false, false, true, false, WEAPON_NITESTICK, "Porra", 1, 250, 334},
	{false, false, true, false, WEAPON_KNIFE, "Cuchillo", 1, 250, 335},
	{false, false, true, false, WEAPON_BAT, "Bate", 1, 250, 336},
	{false, false, true, false, WEAPON_SHOVEL, "Pala", 1, 250, 337},
	{false, false, true, false, WEAPON_POOLSTICK, "Taco", 1, 250, 338},
	{false, false, true, false, WEAPON_KATANA, "Katana", 1, 250, 339},
	{false, false, true, false, WEAPON_CHAINSAW, "Motosierra", 1, 30, 341},
	{false, false, true, false, WEAPON_DILDO, "Dildo morado", 10, 250, 321},
	{false, false, true, false, WEAPON_DILDO2, "Dildo", 10, 250, 322},
	{false, false, true, false, WEAPON_VIBRATOR, "Vibrador", 10, 250, 323},
	{false, false, true, false, WEAPON_VIBRATOR2, "Vibrador plateado", 10, 250, 324},
	{false, false, true, false, WEAPON_FLOWER, "Flores", 10, 250, 325},
	{false, false, true, false, WEAPON_CANE, "Bastón", 10, 250, 326},
	{false, false, true, true, WEAPON_GRENADE, "Granada", 8, 500, 342},
	{false, false, true, true, WEAPON_TEARGAS, "Gas lacrimógeno", 8, 500, 343},
	{false, false, true, true, WEAPON_MOLTOV, "Cocktail Molotov", 8, 500, 344},
	{false, false, false, false, NO_WEAPON, "", 0, 0, -1},
	{false, false, false, false, NO_WEAPON, "", 0, 0, -1},
	{false, false, false, false, NO_WEAPON, "", 0, 0, -1},
	{false, true, true, true, WEAPON_COLT45, "9mm", 2, 160, 346},
	{false, true, true, true, WEAPON_SILENCED, "9mm silenciada", 2, 120, 347},
	{false, true, true, true, WEAPON_DEAGLE, "Desert Eagle", 2, 950, 348},
	{false, true, true, true, WEAPON_SHOTGUN, "Escopeta", 3, 800, 349},
	{false, true, true, true, WEAPON_SAWEDOFF, "Escopeta recortada", 3, 120, 350},
	{false, true, true, true, WEAPON_SHOTGSPA, "Escopeta de combate", 3, 120, 351},
	{false, true, true, true, WEAPON_UZI, "Micro UZI", 4, 70, 352},
	{false, true, true, true, WEAPON_MP5, "MP5", 4, 70, 353},
	{false, true, true, true, WEAPON_AK47, "Ak-47", 5, 80, 355},
	{false, true, true, true, WEAPON_M4, "M4", 5, 80, 356},
	{false, true, true, true, WEAPON_TEC9, "TEC-9", 4, 70, 372},
	{false, true, true, true, WEAPON_RIFLE, "Rifle", 6, 1000, 357},
	{false, true, true, true, WEAPON_SNIPER, "Sniper", 6, 1000, 358},
	{false, true, true, true, WEAPON_ROCKETLAUNCHER, "Lanzacohetes RPG", 7, 1000, 359},
	{false, true, true, true, WEAPON_HEATSEEKER, "Lanzacohetes HS", 7, 1000, 360},
	{false, true, true, true, WEAPON_FLAMETHROWER, "Lanzallamas", 7, 500, 361},
	{false, true, true, true, WEAPON_MINIGUN, "Minigun", 7, 0, 362},
	{false, false, true, true, WEAPON_SATCHEL, "Bomba detonadora", 8, 500, 363},
	{false, false, false, false, WEAPON_BOMB, "Detonador", 12, 500, 364},
	{false, false, true, true, WEAPON_SPRAYCAN, "Bote de spray", 9, 10, 365},
	{false, false, true, true, WEAPON_FIREEXTINGUISHER, "Extintor", 9, 10, 366},
	{false, false, true, false, WEAPON_CAMERA, "Cámara", 9, 500, 367},
	{false, false, true, false, NO_WEAPON, "Gafas de visión nocturna", 11, 0, 368},
	{false, false, true, false, NO_WEAPON, "Gafas térmicas", 11, 0, 369},
	{false, false, false, false, WEAPON_PARACHUTE, "Paracaídas", 11, 0, 371}
};

enum
{
	TYPE_WARNING,
	TYPE_KICK,
	TYPE_BAN,
	TYPE_TEMP_BAN,
	TYPE_UNBAN
}

enum
{
	CMD_USER,
	CMD_HELPER,
	CMD_MODERATOR,
	CMD_GLOBAL_MODERATOR,
	CMD_ADMINISTRATOR,
	CMD_DISABLED,
}
new ADMIN_LEVELS[][] = 
{
	"Ciudadano",
	"Ayudante",
	"Moderador",
	"Moderador Global",
	"Administrador"
};

new ADMIN_COLOURS[][] =
{
	"cccccc",
	"f88888",
	"f15151",
	"f22222",
	"ff0000"
};

new Float:TruckLoadPoint[][] =
{
	{-520.48822, -502.04059, 25.26037, 0.0},
	{-529.98822, -502.04059, 25.26040, 0.0},
	{-557.48822, -502.04059, 25.26040, 0.0},
	{4471.7319, 5898.2646, 44.1051, 180.0},
	{4477.1011, 5898.2646, 44.1051, 180.0},
	{4481.8916, 5898.2646, 44.1051, 180.0}
};


//extras 

#include "core/pockets_header.pwn"
#include "core/parking_slot_header.pwn"
#include "core/discord_tasks_header.pwn"

DEFINE_HOOK_REPLACEMENT(DynamicPickup, DP);

public OnIncomingConnection(playerid, ip_address[], port) {
	if (!server_loaded) BlockIpAddress(ip_address, 20 * 1000);
	return 1;
}

public OnPlayerConnect(playerid) {
	PLAYER_TEMP[playerid][pt_GAME_STATE] = GAME_STATE_CONNECTED;
	PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] = -1;
	PLAYER_TEMP[playerid][pt_PROPERTY_INDEX] = -1;
	PLAYER_TEMP[playerid][pt_CLOTHING_SHOP] = -1;
	PLAYER_TEMP[playerid][pt_HUD_TEXTDRAWS] = false;
	PLAYER_TEMP[playerid][pt_SEE_ACMD_LOG] = true;
	PLAYER_TEMP[playerid][pt_SEE_AC_LOG] = true;
	PLAYER_TEMP[playerid][pt_SEE_ADM_LOG] = true;
	PLAYER_TEMP[playerid][pt_SEE_ADM_CHAT] = true;
	PLAYER_TEMP[playerid][pt_REGISTER_ACTOR] = INVALID_ACTOR_ID;
	PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] = INVALID_PLAYER_ID;
	PLAYER_TEMP[playerid][pt_KNOCK_PLAYER_ID] = INVALID_PLAYER_ID;
	PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT] = INVALID_STREAMER_ID;
	PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
	PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT] = INVALID_STREAMER_ID;
	PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT] = INVALID_STREAMER_ID;
	PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT] = INVALID_STREAMER_ID;
	PLAYER_TEMP[playerid][pt_PIZZA_ACTOR] = INVALID_STREAMER_ID;
	PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER] = INVALID_PLAYER_ID;
	PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] = INVALID_VEHICLE_ID;
	PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] = INVALID_VEHICLE_ID;
	PLAYER_TEMP[playerid][pt_PIVOT_OBJECT] = INVALID_OBJECT_ID;
	PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] = -1;
	PLAYER_TEMP[playerid][pt_REINFORCEMENT] = false;
	PLAYER_TEMP[playerid][pt_DIALOG_ID] = -1;
	PLAYER_TEMP[playerid][pt_LOGIN_KICK_TIMER] = -1;
	PLAYER_TEMP[playerid][pt_PLAYER_PLATFORM] = IsPlayerUsingSampMobile(playerid);
	PLAYER_TEMP[playerid][pt_PERFORMED_ENVIRONMET] = 0;
    PLAYER_TEMP[playerid][pt_PERFORMED_ACTION] = 0;
	PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] = INVALID_VEHICLE_ID;
	PLAYER_TEMP[playerid][pt_RENT_VEHICLE_ID] = INVALID_VEHICLE_ID;
	PLAYER_TEMP[playerid][pt_ADMIN_NAME] = false;
	PLAYER_TEMP[playerid][pt_IN_VEHICLE_REPAIR] = false;
	for (new i = 0; i != MAX_OBJECTS_PER_ROUTE; i ++) TRASH_PLAYER_OBJECTS[playerid][i] = INVALID_STREAMER_ID;

	GetPlayerName(playerid, PLAYER_TEMP[playerid][pt_NAME], 24);

	new bool:using_account = false;
	foreach (new connected_pid : Player) {
		if (IsPlayerConnected(connected_pid)) {
			if (connected_pid != playerid) {
				if (!strcmp(PLAYER_TEMP[playerid][pt_NAME], PI[connected_pid][pi_NAME], true)) {
					ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Cuenta en uso", "{f5f5f5}Esta {ff0000}cuenta{f5f5f5} ya esta conectada en el servidor{f5f5f5}.", "xSalir", "");
					using_account = true;
					KickEx(playerid, 500);
					break;
				}
			}
		}
	}

	if (!using_account) {
		GetPlayerIp(playerid, PLAYER_TEMP[playerid][pt_IP], 16);
		
		EnablePlayerCameraTarget(playerid, true);
		SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
		TogglePlayerControllableEx(playerid, true);
		HidePlayerDialog(playerid);
		ResetPlayerMoney(playerid);
		CancelSelectTextDrawEx(playerid);
		SetPlayerScore(playerid, 0);
		ResetPlayerWeapons(playerid);
		SetPlayerColorEx(playerid, PLAYER_COLOR);
		CancelEdit(playerid);
		ClearPlayerParkingVehicles(playerid);

		if (!IsValidRPName(PLAYER_TEMP[playerid][pt_NAME])) {
			PLAYER_TEMP[playerid][pt_USER_VALID_NAME] = false;
			ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Nombre no permitido", "{f5f5f5}Tu {ff0000}nombre de usuario{f5f5f5} no cumple con los requisitos de el servidor{f5f5f5}.", "xSalir", "");
			KickEx(playerid, 500);
		} else {
			PLAYER_TEMP[playerid][pt_USER_VALID_NAME] = true;

			if (GetNumberOfPlayersOnThisIP(PLAYER_TEMP[playerid][pt_IP]) > 3) {
				ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Aviso", "{d1d1d1}Ha sido expulsado por exceder el máximo de conexiones desde una IP.", "xSalir", "");
				KickEx(playerid, 500);
			} else {
				PLAYER_TEMP[playerid][pt_LOGIN_KICK_TIMER] = SetTimerEx("KickPlayer", LOGIN_TIME, false, "i", playerid);
				CreatePlayerTextDraws(playerid);
				CreatePlayerBars(playerid);
				SetPiDefaultValues(playerid);
			}
		}
	}
	return 1;
}

public OnPlayerDisconnect(playerid, reason)
{
	for (new i = 0; i != MAX_TIMERS_PER_PLAYER; i++) KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][i]);

	foreach (new seller_playerid : Player) {
		if (PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] == seller_playerid) {
			PLAYER_TEMP[seller_playerid][pt_TRICK_SELLER_PID] = -1;
			PLAYER_TEMP[seller_playerid][pt_TRICK_SELLER_AID] = -1;
			PLAYER_TEMP[seller_playerid][pt_TRICK_SELLER_OBJECT_ID] = -1;
			PLAYER_TEMP[seller_playerid][pt_TRICK_SELLER_EXTRA] = -1;
			PLAYER_TEMP[seller_playerid][pt_TRICK_PRICE] = -1;
			PLAYER_TEMP[seller_playerid][pt_TRICK_TIME] = -1;
			PLAYER_TEMP[seller_playerid][pt_TRICK_COOLDOWN] = -1;

			if (gettime() < PLAYER_TEMP[playerid][pt_TRICK_TIME] + 20) {
				HidePlayerDialog(playerid);
			}
			break;
		}
	}

	PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] = -1;
	PLAYER_TEMP[playerid][pt_TRICK_SELLER_AID] = -1;
	PLAYER_TEMP[playerid][pt_TRICK_SELLER_OBJECT_ID] = -1;
	PLAYER_TEMP[playerid][pt_TRICK_SELLER_EXTRA] = -1;
	PLAYER_TEMP[playerid][pt_TRICK_PRICE] = -1;
	PLAYER_TEMP[playerid][pt_TRICK_TIME] = -1;
	PLAYER_TEMP[playerid][pt_TRICK_COOLDOWN] = -1;

	ExitPlayerVehicleRepair(playerid);
	
	if (PLAYER_TEMP[playerid][pt_LOGIN_KICK_TIMER] != -1) {
		KillTimer(PLAYER_TEMP[playerid][pt_LOGIN_KICK_TIMER]);
		PLAYER_TEMP[playerid][pt_LOGIN_KICK_TIMER] = -1;
	}

	if (PLAYER_TEMP[playerid][pt_REGISTER_ACTOR] != INVALID_ACTOR_ID)
	{
		DestroyActor(PLAYER_TEMP[playerid][pt_REGISTER_ACTOR]);
		PLAYER_TEMP[playerid][pt_REGISTER_ACTOR] = INVALID_ACTOR_ID;
	}

	if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
		new vehicleid = GetPlayerVehicleID(playerid);
		if (vehicleid)
		{
			GLOBAL_VEHICLES[ vehicleid ][gb_vehicle_TP_IMMUNITY] = gettime() + 5;
			GLOBAL_VEHICLES[ vehicleid ][gb_vehicle_DRIVER] = INVALID_PLAYER_ID;
			GLOBAL_VEHICLES[ vehicleid ][gb_vehicle_LAST_DRIVER] = INVALID_PLAYER_ID;
			GLOBAL_VEHICLES[ vehicleid ][gb_vehicle_OCCUPIED] = false;
		}
	}
	if (PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] != INVALID_VEHICLE_ID)
	{
		if (GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_LAST_DRIVER] == playerid) GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_LAST_DRIVER] = INVALID_PLAYER_ID;
	}

	PLAYER_TEMP[playerid][pt_TIME_PASSED_LAST_REP] = gettime() * 1000 - PLAYER_TEMP[playerid][pt_TIME_PASSED_LAST_REP];
	PI[playerid][pi_TIME_FOR_REP] -= PLAYER_TEMP[playerid][pt_TIME_PASSED_LAST_REP];
	if (PI[playerid][pi_CREW]) CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_ONLINE_MEMBERS] --;
	if (PLAYER_TEMP[playerid][pt_PIVOT_OBJECT] != INVALID_OBJECT_ID) DestroyPlayerObject(playerid, PLAYER_TEMP[playerid][pt_PIVOT_OBJECT]);
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL) PI[playerid][pi_POLICE_JAIL_TIME] -= gettime() - PLAYER_TEMP[playerid][pt_ENTER_JAIL_TIME];
	if (PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL]) EndPhoneCall(playerid);

	DestroyPlayerCheckpoints(playerid);
	DestroyPlayerTextDraws(playerid);
	CallLocalFunction("EndPlayerJob", "iib", playerid, PLAYER_TEMP[playerid][pt_WORKING_IN], false);

	if (PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] != INVALID_VEHICLE_ID) DestroyVehicleEx(PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID]);
    PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] = INVALID_VEHICLE_ID;

	if (PLAYER_TEMP[playerid][pt_RENT_VEHICLE_ID] != INVALID_VEHICLE_ID) DestroyVehicleEx(PLAYER_TEMP[playerid][pt_RENT_VEHICLE_ID]);
    PLAYER_TEMP[playerid][pt_RENT_VEHICLE_ID] = INVALID_VEHICLE_ID;

	if (PI[playerid][pi_WANTED_LEVEL] > 0) {
		new polices_count = 0;
		foreach (new i : Player) {
			if (IsPlayerConnected(i) && PLAYER_TEMP[i][pt_USER_LOGGED]) {
				if (PLAYER_WORKS[i][WORK_POLICE][pwork_SET] && PLAYER_TEMP[i][pt_WORKING_IN] == WORK_POLICE) {
					if (IsPlayerInRangeOfPoint(i, 100.0, PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z])) {
						polices_count ++;
					}
				}
			}
		}

		if (polices_count <= 0) {
			getDateTime(PI[playerid][pi_WANTED_JAIL_TIMER], 5);
		} else {
			PI[playerid][pi_WANTED_JAIL_TIMER][0] = EOS;
		}
	}

	//db
	if (PI[playerid][pi_ID] != 0)
	{
		if (PLAYER_TEMP[playerid][pt_USER_LOGGED]) //guardar datos solo si ha logeado
		{
			if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK && PI[playerid][pi_WANTED_LEVEL] > 0) {
				PI[playerid][pi_STATE] = ROLEPLAY_STATE_HOSPITAL;
			}

			PI[playerid][pi_CONNECTED] = 0;
			PI[playerid][pi_PLAYERID] = 0;
			UpdatePlayerWorldInfo(playerid);

			getDateTime(PI[playerid][pi_LAST_CONNECTION]);
			SavePlayerData(playerid);
			SavePlayerVehicles(playerid, true);
			SavePlayerWorkLevels(playerid);
			SavePlayerInventory(playerid);
			
			//msg
			new disconnect_message[128];
			switch(reason)
			{
				case 0: format(disconnect_message, sizeof disconnect_message, "{909D95}%s se ha desconectado por error (crash).", PLAYER_TEMP[playerid][pt_NAME]);
				case 1: format(disconnect_message, sizeof disconnect_message, "{909D95}%s se ha desconectado.", PLAYER_TEMP[playerid][pt_NAME]);
				case 2: format(disconnect_message, sizeof disconnect_message, "{909D95}%s se ha desconectado porque fue expulsado del servidor.", PLAYER_TEMP[playerid][pt_NAME]);
			}
			NearbyMessage(PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z], PI[playerid][pi_INTERIOR], GetPlayerVirtualWorld(playerid), 15.0, disconnect_message);
		
			CreateDisconnectInfo(playerid, reason);
		}
		else {
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET connected = 0, playerid = 0 WHERE id = %d;", PI[playerid][pi_ID]);
			mysql_tquery(handle_db, QUERY_BUFFER);
		}
	}

	//reset
	ClearPlayerParkingVehicles(playerid);
	ResetPlayerVariables(playerid);
	ClearPlayerInventory(playerid);
	return 1;
}

ResetPlayerVariables(playerid)
{
	new tmp_PI[enum_PI]; PI[playerid] = tmp_PI;

	new temp_PLAYER_TEMP[Temp_Enum]; PLAYER_TEMP[playerid] = temp_PLAYER_TEMP;
	
	new temp_PLAYER_PHONE_BOOK[Phone_Book_Enum]; 
	for (new i = 0; i != MAX_PHONE_CONTACTS; i ++) PLAYER_PHONE_BOOK[playerid][i] = temp_PLAYER_PHONE_BOOK;
	
	new temp_PLAYER_GPS[Player_GPS_Enum]; 
	for (new i = 0; i != MAX_PLAYER_GPS_SAVES; i ++) PLAYER_GPS[playerid][i] = temp_PLAYER_GPS;
	
	new tmp_PLAYER_WORKS[enum_PLAYER_WORKS];
	for (new i = 0; i != sizeof(PLAYER_WORKS[]); i ++) PLAYER_WORKS[playerid][i] = tmp_PLAYER_WORKS;
	
	new temp_PLAYER_PROPERTY_CONSTRUCTO[PLAYER_PROPERTY_CONSTRUCTOR_ENU]; PLAYER_PROPERTY_CONSTRUCTOR[playerid] = temp_PLAYER_PROPERTY_CONSTRUCTO;
	
	PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER] = INVALID_PLAYER_ID;
	PLAYER_TEMP[playerid][pt_ADMIN_SERVICE] = false;

	new tmp_PLAYER_AC_INFO[e_PLAYER_AC_INFO];
	for (new i = 0; i != sizeof(ac_Info); i ++) PLAYER_AC_INFO[playerid][i] = tmp_PLAYER_AC_INFO;
	return 1;
}

DestroyPlayerCheckpoints(playerid)
{
	if (IsValidDynamic3DTextLabel(PLAYER_TEMP[playerid][pt_POLICE_LABEL]))
	{
		DestroyDynamic3DTextLabel(PLAYER_TEMP[playerid][pt_POLICE_LABEL]);
		PLAYER_TEMP[playerid][pt_POLICE_LABEL] = Text3D:INVALID_STREAMER_ID;
	}
	if (IsValidDynamic3DTextLabel(PLAYER_TEMP[playerid][pt_ADMIN_LABEL]))
	{
		DestroyDynamic3DTextLabel(PLAYER_TEMP[playerid][pt_ADMIN_LABEL]);
		PLAYER_TEMP[playerid][pt_ADMIN_LABEL] = Text3D:INVALID_STREAMER_ID;
	}
	if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT]))
	{
		DestroyDynamicCP(PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT]);
		PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT]))
	{
		DestroyDynamicCP(PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT]);
		PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_TRASH_CHECKPOINT]))
	{
		DestroyDynamicCP(PLAYER_TEMP[playerid][pt_TRASH_CHECKPOINT]);
		PLAYER_TEMP[playerid][pt_TRASH_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	if (IsValidDynamicRaceCP(PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT]))
	{
		DestroyDynamicRaceCP(PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT]);
		PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT]))
	{
		DestroyDynamicCP(PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT]);
		PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT]))
	{
		DestroyDynamicCP(PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT]);
		PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	if (IsValidDynamicActor(PLAYER_TEMP[playerid][pt_PIZZA_ACTOR]))
	{
		DestroyDynamicActor(PLAYER_TEMP[playerid][pt_PIZZA_ACTOR]);
		PLAYER_TEMP[playerid][pt_PIZZA_ACTOR] = INVALID_STREAMER_ID;
	}
	if (IsValidDynamicRaceCP(PLAYER_TEMP[playerid][pt_DL_EXAM_CP]))
	{
		DestroyDynamicRaceCP(PLAYER_TEMP[playerid][pt_DL_EXAM_CP]);
		PLAYER_TEMP[playerid][pt_DL_EXAM_CP] = INVALID_STREAMER_ID;
	}
	return 1;
}

GetEnterExitIndexById(id)
{
	for (new i = 0; i != sizeof ENTER_EXIT; i ++)
	{
		if (ENTER_EXIT[i][ee_ID] == 0) continue;
		if (ENTER_EXIT[i][ee_ID] == id) return i;
	}
	return -1;
}

public OnRconLoginAttempt(ip[], password[], success)
{
	if (!success) BlockIpAddress(ip, 12000);
    return 1;
}

public OnPlayerSpawn(playerid)
{
	if (!PLAYER_TEMP[playerid][pt_USER_LOGGED]) return Kick(playerid);

	if (PLAYER_TEMP[playerid][pt_GAME_STATE] == GAME_STATE_CONNECTED) // Primer spawn
	{
		if (PLAYER_TEMP[playerid][pt_LOGIN_KICK_TIMER] != -1)
		{
			KillTimer(PLAYER_TEMP[playerid][pt_LOGIN_KICK_TIMER]);
			PLAYER_TEMP[playerid][pt_LOGIN_KICK_TIMER] = -1;
		}

		new now = gettime();
		PLAYER_TEMP[playerid][pt_LAST_PLANT_TIME] = now;
		format(PI[playerid][pi_IP], 16, "%s", PLAYER_TEMP[playerid][pt_IP]);
		
		if (PI[playerid][pi_CREW]) SetPlayerGangZones(playerid);
		SetPlayerSkillLevels(playerid);
		ApplyAnimation(playerid,"SWAT","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"MEDIC","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"SHOP","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"BOMBER","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"FOOD","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"CHAINSAW","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"ROB_BANK","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"CARRY","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"PED","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"SWEET","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"CRACK","null",0.0,0,0,0,0,0);
		ApplyAnimation(playerid,"POLICE","null",0.0,0,0,0,0,0);

		PLAYER_TEMP[playerid][pt_WORK_VEHICLE_SPAWN_TIMER] = gettime() + 15;

		if (PI[playerid][pi_POLICE_DUTY] != 0)
		{
			if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_POLICE, INVALID_VEHICLE_ID);
			else PI[playerid][pi_POLICE_DUTY] = 0;
		}
		switch(PI[playerid][pi_STATE])
		{
			case ROLEPLAY_STATE_NORMAL:
			{
				SetPlayerHud(playerid);
				SetCameraBehindPlayer(playerid);
				TogglePlayerControllableEx(playerid, false);
				KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][3]);
				PLAYER_TEMP[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", 2000, false, "ib", playerid, true);

				SetPlayerVirtualWorld(playerid, 0);

				CheckPlayerJail(playerid);
			}
			case ROLEPLAY_STATE_JAIL:
			{
				PI[playerid][pi_STATE] = ROLEPLAY_STATE_JAIL;
				if (PI[playerid][pi_POLICE_JAIL_TIME] < 5) PI[playerid][pi_POLICE_JAIL_TIME] = 5;
				KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][15]);
				PLAYER_TEMP[playerid][pt_TIMERS][15] = SetTimerEx("UnjailPlayer", PI[playerid][pi_POLICE_JAIL_TIME] * 1000, false, "i", playerid);
				
				PLAYER_TEMP[playerid][pt_ENTER_JAIL_TIME] = gettime();
				SetPlayerPosEx(playerid, JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID] ][jail_X], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_Y], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_Z], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_ANGLE], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_INTERIOR], 0, true);
				
				new time = PI[playerid][pi_POLICE_JAIL_TIME] - (gettime() - PLAYER_TEMP[playerid][pt_ENTER_JAIL_TIME]);
				SendPlayerClientMessage(playerid, "Te quedan %s minutos de condena.", TimeConvert(time));
				
				SetPlayerHud(playerid);
				SetCameraBehindPlayer(playerid);
				TogglePlayerControllableEx(playerid, false);
				KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][3]);
				PLAYER_TEMP[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", 2000, false, "ib", playerid, true);

				GetPlayerHealth(playerid, PLAYER_TEMP[playerid][pt_ARRESTED_HEALTH]);
			}
			case ROLEPLAY_STATE_ARRESTED:
			{
				if (PI[playerid][pi_VIP]) PI[playerid][pi_POLICE_JAIL_TIME] = 150 * PI[playerid][pi_WANTED_LEVEL];
				else PI[playerid][pi_POLICE_JAIL_TIME] = 300 * PI[playerid][pi_WANTED_LEVEL];
				
				PI[playerid][pi_WANTED_LEVEL] = 0;
				
				PI[playerid][pi_STATE] = ROLEPLAY_STATE_JAIL;
				if (PI[playerid][pi_POLICE_JAIL_TIME] < 5) PI[playerid][pi_POLICE_JAIL_TIME] = 5;
				KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][15]);
				PLAYER_TEMP[playerid][pt_TIMERS][15] = SetTimerEx("UnjailPlayer", PI[playerid][pi_POLICE_JAIL_TIME] * 1000, false, "i", playerid);
				
				PLAYER_TEMP[playerid][pt_ENTER_JAIL_TIME] = gettime();
				SetPlayerPosEx(playerid, JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID] ][jail_X], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_Y], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_Z], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_ANGLE], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_INTERIOR], 0, true);
				
				new time = PI[playerid][pi_POLICE_JAIL_TIME] - (gettime() - PLAYER_TEMP[playerid][pt_ENTER_JAIL_TIME]);
				SendPlayerClientMessage(playerid, "Te quedan %s minutos de condena.", TimeConvert(time));
				
				SetPlayerHud(playerid);
				SetCameraBehindPlayer(playerid);
				TogglePlayerControllableEx(playerid, false);
				KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][3]);
				PLAYER_TEMP[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", 2000, false, "ib", playerid, true);
			}
			case ROLEPLAY_STATE_OWN_PROPERTY:
			{
				new index = GetPropertyIndexByID(PI[playerid][pi_LOCAL_INTERIOR]);
				if (index == -1)
				{
					PI[playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
					PI[playerid][pi_LOCAL_INTERIOR] = 0;
					PI[playerid][pi_POS_X] = New_User_Pos[0];
					PI[playerid][pi_POS_Y] = New_User_Pos[1];
					PI[playerid][pi_POS_Z] = New_User_Pos[2];
					PI[playerid][pi_ANGLE] = New_User_Pos[3];
					PI[playerid][pi_INTERIOR] = 0;
					
					SetPlayerPosEx(playerid, PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z], PI[playerid][pi_ANGLE], PI[playerid][pi_INTERIOR], 0);
				}
				else
				{
					if (PROPERTY_INFO[index][property_OWNER_ID] == PI[playerid][pi_ID])
					{
						SetPlayerInterior(playerid, PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_INTERIOR]);
						SetPlayerVirtualWorld(playerid, PROPERTY_INFO[index][property_ID]);
					}
					else
					{
						PI[playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
						PI[playerid][pi_LOCAL_INTERIOR] = 0;
						PI[playerid][pi_POS_X] = PROPERTY_INFO[index][property_EXT_X];
						PI[playerid][pi_POS_Y] = PROPERTY_INFO[index][property_EXT_Y];
						PI[playerid][pi_POS_Z] = PROPERTY_INFO[index][property_EXT_Z];
						PI[playerid][pi_ANGLE] = PROPERTY_INFO[index][property_EXT_ANGLE];
						PI[playerid][pi_INTERIOR] = PROPERTY_INFO[index][property_EXT_INTERIOR];
						
						SetPlayerPosEx(playerid, PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z], PI[playerid][pi_ANGLE], PI[playerid][pi_INTERIOR], 0);
					}
				}
					
				SetPlayerHud(playerid);
				SetCameraBehindPlayer(playerid);
				TogglePlayerControllableEx(playerid, false);
				KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][3]);
				PLAYER_TEMP[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", 2000, false, "ib", playerid, true);
			}
			case ROLEPLAY_STATE_HOSPITAL: {
				SendPlayerToHospital(playerid);
			}
		}
		
		for (new i = 0; i < LOAD_SCREEN_TEXTDRAWS_SIZE; i ++) {
			TextDrawHideForPlayer(playerid, Textdraws[textdraw_LOAD_SCREEN][i]);
		}

		if (PI[playerid][pi_TIME_FOR_REP] > TIME_FOR_REP) PI[playerid][pi_TIME_FOR_REP] = TIME_FOR_REP;
		if (PI[playerid][pi_TIME_FOR_REP] <= 900) PI[playerid][pi_TIME_FOR_REP] = 3000;
		
		SendPlayerClientMessage(playerid, "Eres {"#PRIMARY_COLOR"}nivel %d, {F5F5F5}te quedan {"#PRIMARY_COLOR"}%s minutos {F5F5F5}para la siguiente reputación.", PI[playerid][pi_LEVEL], TimeConvert(PI[playerid][pi_TIME_FOR_REP] / 1000));

		PLAYER_TEMP[playerid][pt_TIME_PASSED_LAST_REP] = gettime() * 1000;
		PLAYER_TEMP[playerid][pt_TIMERS][2] = SetTimerEx("AddPlayerReputation", PI[playerid][pi_TIME_FOR_REP], false, "i", playerid);

		if (PI[playerid][pi_PHONE_NUMBER])
		{
			inline OnOfflineMessagesChecked()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					if (rows)
					{
						new unreaded_messages;
						cache_get_value_index_int(0, 0, unreaded_messages);
						if (unreaded_messages > 0) SendPlayerClientMessage(playerid, "Tienes {f1f442}%d {F5F5F5}mensajes nuevos en tu /movil desde tu última conexión.", unreaded_messages);
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pmessages SET offline = 0 WHERE to_id = %d;", PI[playerid][pi_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM pmessages WHERE to_id = %d AND offline = 1;", PI[playerid][pi_ID]);
			MySQL_TQueryInline(handle_db, using inline OnOfflineMessagesChecked, QUERY_BUFFER);

		}
	}
	else if (PLAYER_TEMP[playerid][pt_GAME_STATE] == GAME_STATE_DEAD) // Viene de morir
	{
		if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_HOSPITAL)
		{
			if (!PLAYER_TEMP[playerid][pt_PLAYER_FINISH_HOSPITAL])
			{
				TogglePlayerSpectatingEx(playerid, true);
				SetPlayerInterior(playerid, 0);
				SetPlayerVirtualWorld(playerid, 0);
				PLAYER_TEMP[playerid][pt_PLAYER_FINISH_HOSPITAL] = false;
				PI[playerid][pi_STATE] = ROLEPLAY_STATE_HOSPITAL;
				PI[playerid][pi_LOCAL_INTERIOR] = 0;
				if (PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] != -1) {
					CallLocalFunction("OnPlayerExitInterior", "ii", playerid, PLAYER_TEMP[playerid][pt_INTERIOR_INDEX]);
				}
				PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] = -1;
				PLAYER_TEMP[playerid][pt_PROPERTY_INDEX] = -1;
				
				PLAYER_TEMP[playerid][pt_HOSPITAL_LIFE] = 35.0;
				UpdateHospitalSizeTextdrawLife(playerid);
				KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][4]);
				PLAYER_TEMP[playerid][pt_TIMERS][4] = SetTimerEx("HealthUp", 1000, false, "i", playerid);

				DeleteIlegalInv(playerid);
				PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0]);
				PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1]);
				PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2]);
				
				ClearPlayerChat(playerid);
				if (PI[playerid][pi_WANTED_LEVEL] > 0 || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED)
				{
					SendPlayerClientMessage(playerid, "Fuiste ingresado en el centro médico más cercano.");
					SendPlayerClientMessage(playerid, "Cuando te recuperes serás llevado a la cárcel.");
				}
				else
				{
					SendPlayerClientMessage(playerid, "Fuiste ingresado en el centro médico más cercano.");
					SendPlayerClientMessage(playerid, "Espera mientras te recuperas.");
				}
				
				InterpolateCameraPos(playerid, Hospital_Cameras_Positions[PLAYER_TEMP[playerid][pt_HOSPITAL]][0], Hospital_Cameras_Positions[PLAYER_TEMP[playerid][pt_HOSPITAL]][1], Hospital_Cameras_Positions[PLAYER_TEMP[playerid][pt_HOSPITAL]][2], Hospital_Cameras_Positions[PLAYER_TEMP[playerid][pt_HOSPITAL]][0], Hospital_Cameras_Positions[PLAYER_TEMP[playerid][pt_HOSPITAL]][1], Hospital_Cameras_Positions[PLAYER_TEMP[playerid][pt_HOSPITAL]][2], 1000, CAMERA_CUT);
				InterpolateCameraLookAt(playerid, Hospital_Cameras_Positions[PLAYER_TEMP[playerid][pt_HOSPITAL]][3], Hospital_Cameras_Positions[PLAYER_TEMP[playerid][pt_HOSPITAL]][4], Hospital_Cameras_Positions[PLAYER_TEMP[playerid][pt_HOSPITAL]][5], Hospital_Cameras_Positions[PLAYER_TEMP[playerid][pt_HOSPITAL]][3], Hospital_Cameras_Positions[PLAYER_TEMP[playerid][pt_HOSPITAL]][4], Hospital_Cameras_Positions[PLAYER_TEMP[playerid][pt_HOSPITAL]][5], 1000, CAMERA_CUT);
			}
		}
	}

	if (PLAYER_TEMP[playerid][pt_PLAYER_FINISH_HOSPITAL])
	{
		if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL)
		{
			KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][15]);
			PLAYER_TEMP[playerid][pt_TIMERS][15] = SetTimerEx("UnjailPlayer", PI[playerid][pi_POLICE_JAIL_TIME] * 1000, false, "i", playerid);
		}
		SetPlayerInterior(playerid, PI[playerid][pi_INTERIOR]);
		SetPlayerVirtualWorld(playerid, 0);
		SetPlayerHud(playerid);
		TogglePlayerControllableEx(playerid, false);
		PLAYER_TEMP[playerid][pt_PLAYER_FINISH_HOSPITAL] = false;
		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][3]);
		SetCameraBehindPlayer(playerid);
		PLAYER_TEMP[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", 2000, false, "ib", playerid, true);
	}
	
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) SetPlayerSkin(playerid, PI[playerid][pi_SKIN]);
	else SetPlayerSkin(playerid, PI[playerid][pi_POLICE_DUTY]);

	PLAYER_TEMP[playerid][pt_GAME_STATE] = GAME_STATE_NORMAL;

	if (PI[playerid][pi_STATE] != ROLEPLAY_STATE_HOSPITAL) SetPlayerWantedLevelEx(playerid, PI[playerid][pi_WANTED_LEVEL]);
	SetPlayerArmedWeapon(playerid, 0);
	SetPlayerNormalColor(playerid);
	//SetPlayerCityWeatherr(playerid);
	GameTextForPlayer(playerid, "_", 500, 3);
	PLAYER_TEMP[playerid][pt_CONTROL] = false;

	SetTimerEx("UpdateAllPlayerInventoryData", 500, false, "dbb", playerid, false, false);
	
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_PLAYER_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_IMMUNITY] = gettime() + 5;
	return 1;
}

CMD:gpos(playerid, params[])
{
	new Float:pos[3], Float:angle;
	if (IsPlayerInAnyVehicle(playerid)) {
		new vehicleId = GetPlayerVehicleID(playerid);
		GetVehiclePos(vehicleId, pos[0], pos[1], pos[2]);
		GetVehicleZAngle(vehicleId, angle);
	}
	else {
		GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
		GetPlayerFacingAngle(playerid, angle);
	}

	if (isnull(params)) printf("%f, %f, %f, %f, %d", pos[0], pos[1], pos[2], angle, GetPlayerInterior(playerid));
	else printf("%f, %f, %f, %f, %d //%s", pos[0], pos[1], pos[2], angle, GetPlayerInterior(playerid), params);
	return 1;
}

CMD:cpos(playerid, params[])
{
	new Float:pos[3], Float:at[3];
	GetPlayerCameraPos(playerid, pos[0], pos[1], pos[2]);
	GetPlayerCameraLookAt(playerid, at[0], at[1], at[2]);

	printf("{%f, %f, %f, %f, %f, %f}", pos[0], pos[1], pos[2], at[0], at[1], at[2]);
	return 1;
}

public OnPlayerDeath(playerid, killerid, reason) {
	if (PLAYER_TEMP[playerid][pt_KICKED] || !PLAYER_TEMP[playerid][pt_USER_LOGGED]) return 0;

	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][16]);
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_PLAYER_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_IMMUNITY] = gettime() + 15;

	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK && PLAYER_TEMP[playerid][pt_DEATH_HEALTH] > 10 && killerid != INVALID_PLAYER_ID) {
		PLAYER_AC_INFO[playerid][CHEAT_HIGH_POS][p_ac_info_IMMUNITY] = gettime() + 3;
		PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;

		GetPlayerPos(playerid, PLAYER_TEMP[playerid][pt_INJURED_POS][0], PLAYER_TEMP[playerid][pt_INJURED_POS][1], PLAYER_TEMP[playerid][pt_INJURED_POS][2]);
		GetPlayerFacingAngle(playerid, PLAYER_TEMP[playerid][pt_INJURED_POS][3]);
		SetPlayerPosEx(playerid, PLAYER_TEMP[playerid][pt_INJURED_POS][0], PLAYER_TEMP[playerid][pt_INJURED_POS][1], PLAYER_TEMP[playerid][pt_INJURED_POS][2], PLAYER_TEMP[playerid][pt_INJURED_POS][3], GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid), false);

		SetPlayerHealthEx(playerid, PLAYER_TEMP[playerid][pt_DEATH_HEALTH]);

		SetSpawnInfo(playerid, NO_TEAM, PI[playerid][pi_SKIN], PLAYER_TEMP[playerid][pt_INJURED_POS][0], PLAYER_TEMP[playerid][pt_INJURED_POS][1], PLAYER_TEMP[playerid][pt_INJURED_POS][2], PLAYER_TEMP[playerid][pt_INJURED_POS][3], 0, 0, 0, 0, 0, 0);
		//SpawnPlayer(playerid);
		return 0;
	}

	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED || PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL) {
		PLAYER_AC_INFO[playerid][CHEAT_HIGH_POS][p_ac_info_IMMUNITY] = gettime() + 3;
		PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;

		GetPlayerPos(playerid, PLAYER_TEMP[playerid][pt_INJURED_POS][0], PLAYER_TEMP[playerid][pt_INJURED_POS][1], PLAYER_TEMP[playerid][pt_INJURED_POS][2]);
		GetPlayerFacingAngle(playerid, PLAYER_TEMP[playerid][pt_INJURED_POS][3]);
		SetPlayerPosEx(playerid, PLAYER_TEMP[playerid][pt_INJURED_POS][0], PLAYER_TEMP[playerid][pt_INJURED_POS][1], PLAYER_TEMP[playerid][pt_INJURED_POS][2], PLAYER_TEMP[playerid][pt_INJURED_POS][3], GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid), false);

		if (PLAYER_TEMP[playerid][pt_ARRESTED_HEALTH] <= 0) PLAYER_TEMP[playerid][pt_ARRESTED_HEALTH] = 25.0;
		SetPlayerHealthEx(playerid, PLAYER_TEMP[playerid][pt_ARRESTED_HEALTH]);

		SetSpawnInfo(playerid, NO_TEAM, PI[playerid][pi_SKIN], PLAYER_TEMP[playerid][pt_INJURED_POS][0], PLAYER_TEMP[playerid][pt_INJURED_POS][1], PLAYER_TEMP[playerid][pt_INJURED_POS][2], PLAYER_TEMP[playerid][pt_INJURED_POS][3], 0, 0, 0, 0, 0, 0);
		//SpawnPlayer(playerid);
		return 0;
	}

	if (PI[playerid][pi_PASSIVE_MODE]) {
		PLAYER_AC_INFO[playerid][CHEAT_HIGH_POS][p_ac_info_IMMUNITY] = gettime() + 3;
		PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;

		GetPlayerPos(playerid, PLAYER_TEMP[playerid][pt_INJURED_POS][0], PLAYER_TEMP[playerid][pt_INJURED_POS][1], PLAYER_TEMP[playerid][pt_INJURED_POS][2]);
		GetPlayerFacingAngle(playerid, PLAYER_TEMP[playerid][pt_INJURED_POS][3]);
		SetPlayerPosEx(playerid, PLAYER_TEMP[playerid][pt_INJURED_POS][0], PLAYER_TEMP[playerid][pt_INJURED_POS][1], PLAYER_TEMP[playerid][pt_INJURED_POS][2], PLAYER_TEMP[playerid][pt_INJURED_POS][3], GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid), false);

		if (PLAYER_TEMP[playerid][pt_PASSIVE_HEALTH] <= 0) PLAYER_TEMP[playerid][pt_PASSIVE_HEALTH] = 25.0;
		SetPlayerHealthEx(playerid, PLAYER_TEMP[playerid][pt_PASSIVE_HEALTH]);

		SetSpawnInfo(playerid, NO_TEAM, PI[playerid][pi_SKIN], PLAYER_TEMP[playerid][pt_INJURED_POS][0], PLAYER_TEMP[playerid][pt_INJURED_POS][1], PLAYER_TEMP[playerid][pt_INJURED_POS][2], PLAYER_TEMP[playerid][pt_INJURED_POS][3], 0, 0, 0, 0, 0, 0);
		//SpawnPlayer(playerid);
		return 0;
	}

	if (!PI[playerid][pi_VIP]) SetPlayerArmourEx(playerid, 0.0);

	foreach (new i : Player)  {
	    if (IsPlayerConnected(i) && PLAYER_TEMP[i][pt_USER_LOGGED]) {
	        if (PI[i][pi_ADMIN_LEVEL] >= CMD_MODERATOR) {
				SendDeathMessageToPlayer(i, killerid, playerid, reason);
			}
		}
	}

	if(playerid != INVALID_PLAYER_ID && killerid != INVALID_PLAYER_ID) ShowPlayerMessage(playerid, "~b~%s~w~ te ha herido.", PLAYER_TEMP[killerid][pt_NAME]);
	if(playerid != INVALID_PLAYER_ID && killerid != INVALID_PLAYER_ID) ShowPlayerMessage(killerid, "Has herido a ~b~%s~w~.", PLAYER_TEMP[playerid][pt_NAME]);
	
	if (ac_Info[CHEAT_DEATH_SPAMMER][ac_Enabled]) {
		if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_DEATH_SPAMMER][p_ac_info_IMMUNITY]) {
			new interval = GetTickDiff(GetTickCount(), PLAYER_TEMP[playerid][pt_ANTIFLOOD_DEATH]);
			if (interval < 50) {
				if (!ac_Info[CHEAT_DEATH_SPAMMER][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_DEATH_SPAMMER, float(interval));
				else {
					if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_DEATH_SPAMMER][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_DEATH_SPAMMER][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_DEATH_SPAMMER][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_DEATH_SPAMMER][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_DEATH_SPAMMER][p_ac_info_LAST_DETECTION] = gettime();
					if (PLAYER_AC_INFO[playerid][CHEAT_DEATH_SPAMMER][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_DEATH_SPAMMER][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_DEATH_SPAMMER, float(interval));
				}
			}
			PLAYER_TEMP[playerid][pt_ANTIFLOOD_DEATH] = GetTickCount();
		}
	}
	
	HidePlayerMessage(playerid);
	
	if (IsPlayerConnected(killerid) && PI[killerid][pi_STATE] == ROLEPLAY_STATE_NORMAL && PI[playerid][pi_STATE] == ROLEPLAY_STATE_NORMAL) {
		if (!PLAYER_WORKS[killerid][WORK_POLICE][pwork_SET]) {
			if (IsPlayerInSafeZone(killerid)) {
				SendPlayerClientMessage(killerid, "Estás en una zona segura, la policia ha sido avisada del homicidio.");
				
				new level = PI[killerid][pi_WANTED_LEVEL] + 3;
				if (level > 6) level = 6;

				SetPlayerWantedLevelEx(killerid, level);
				
				new city[45], zone[45];
				GetPlayerZones(killerid, city, zone);

				new message[145];
				format(message, sizeof message, "{"#POLICE_COLOUR"}[Central policia] {F5F5F5}%s ha causado un asesinato en {"#PRIMARY_COLOR"}%s, %s.", PLAYER_TEMP[killerid][pt_NAME], city, zone);
				SendPoliceRadioMessage(-1, message);
				
				PLAYER_TEMP[killerid][pt_LAST_SAFE_ZONE_WARNING] = gettime();
			}
		}
	}
	
	if (PLAYER_TEMP[playerid][pt_SELECT_TEXTDRAW]) {
		if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP] != -1) ClosePlayerClothingMenu(playerid);
		if (PLAYER_TEMP[playerid][pt_TOYS_SHOP]) ClosePlayerToysMenu(playerid);
	}
	
	StopAudioStreamForPlayer(playerid);
	SetPlayerDrunkLevel(playerid, 0);
	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][3]);
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	GetPlayerPos(playerid, PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z]);
	GetPlayerFacingAngle(playerid, PI[playerid][pi_ANGLE]);
	PI[playerid][pi_INTERIOR] = GetPlayerInterior(playerid);
	HidePlayerHud(playerid);
	CancelEdit(playerid);
	HidePlayerDialog(playerid);
	SetNormalPlayerMarkers(playerid);
	DisablePlayerTaxiMark(playerid);
	RemovePlayerFromVehicle(playerid);
	HidePlayerWorkContract(playerid);

	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) CallLocalFunction("EndPlayerJob", "iib", playerid, PLAYER_TEMP[playerid][pt_WORKING_IN], false);
	PLAYER_TEMP[playerid][pt_HUNGRY_MESSAGE] = false;
	PLAYER_TEMP[playerid][pt_THIRST_MESSAGE] = false;
	PLAYER_TEMP[playerid][pt_PLAYER_IN_ATM] = false;
	PLAYER_TEMP[playerid][pt_CUFFED] = false;
	PLAYER_TEMP[playerid][pt_CUFFING] = false;

	if (PLAYER_TEMP[playerid][pt_WANT_TAXI]) {
		PLAYER_TEMP[playerid][pt_WANT_TAXI] = false;
	}

	if (PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL]) EndPhoneCall(playerid);
	if (PLAYER_TEMP[playerid][pt_GPS_MAP]) HidePlayerGpsMap(playerid);
	if (PI[playerid][pi_WANTED_LEVEL] > 0) DisablePlayerPoliceMark(playerid);
	if (PLAYER_TEMP[playerid][pt_TUNING_GARAGE_SHOP]) CancelPlayerTuningShop(playerid);

	if (PLAYER_TEMP[playerid][pt_IN_TUNING_GARAGE]) {
		PLAYER_TEMP[playerid][pt_IN_TUNING_GARAGE] = false;
		SetVehicleVirtualWorldEx(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], 0);
		SetVehiclePosEx(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], 246.551910, 17.474195, 2.363841);
		SetVehicleZAngle(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], 0.0);
	}

	ExitPlayerVehicleRepair(playerid);

	if (PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] != INVALID_VEHICLE_ID) {
		if (TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_JOB_STARTED]) {
			if (PLAYER_TEMP[playerid][pt_TRASH_DRIVER]) {
				SendPlayerClientMessage(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], "{f5f5f5}El trabajo se ha cancelado porque tu compañero ha dejado de trabajar.");
				CancelTrashWork(playerid, TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID]);
			}
			if (PLAYER_TEMP[playerid][pt_TRASH_PASSENGER]) {
				SendPlayerClientMessage(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], "{f5f5f5}El trabajo se ha cancelado porque tu compañero ha dejado de trabajar.");
				CancelTrashWork(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], playerid, PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID]);
			}
		}
	}
	
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL) {
		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][15]);
		PLAYER_TEMP[playerid][pt_PLAYER_FINISH_HOSPITAL] = true;
		PI[playerid][pi_POLICE_JAIL_TIME] -= gettime() - PLAYER_TEMP[playerid][pt_ENTER_JAIL_TIME];
		if (PI[playerid][pi_POLICE_JAIL_TIME] < 5) PI[playerid][pi_POLICE_JAIL_TIME] = 5;
		PLAYER_TEMP[playerid][pt_ENTER_JAIL_TIME] = gettime();
		SetSpawnInfo(playerid, NO_TEAM, PI[playerid][pi_SKIN], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID] ][jail_X], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_Y], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_Z], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_ANGLE], 0, 0, 0, 0, 0, 0);
		PI[playerid][pi_INTERIOR] = JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_INTERIOR];
		SetPlayerVirtualWorld(playerid, 0);
	} else {
		static const go_to_hospital_fix = false;
		if (go_to_hospital_fix || PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || GetPlayerInterior(playerid) != 0 || GetPlayerVirtualWorld(playerid) != 0) {
			DisablePlayerInjuredMark(playerid);
			PLAYER_TEMP[playerid][pt_HOSPITAL] = GetNearestHospitalForPlayer(playerid);
			PI[playerid][pi_STATE] = ROLEPLAY_STATE_HOSPITAL;
			PLAYER_TEMP[playerid][pt_PLAYER_FINISH_HOSPITAL] = false;
			KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][16]);
			SetSpawnInfo(playerid, NO_TEAM, PI[playerid][pi_SKIN], PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z], PI[playerid][pi_ANGLE], 0, 0, 0, 0, 0, 0);
		} else {
			PLAYER_AC_INFO[playerid][CHEAT_HIGH_POS][p_ac_info_IMMUNITY] = gettime() + 3;
			PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;

			GetPlayerPos(playerid, PLAYER_TEMP[playerid][pt_INJURED_POS][0], PLAYER_TEMP[playerid][pt_INJURED_POS][1], PLAYER_TEMP[playerid][pt_INJURED_POS][2]);
			GetPlayerFacingAngle(playerid, PLAYER_TEMP[playerid][pt_INJURED_POS][3]);
			SetPlayerPosEx(playerid, PLAYER_TEMP[playerid][pt_INJURED_POS][0], PLAYER_TEMP[playerid][pt_INJURED_POS][1], PLAYER_TEMP[playerid][pt_INJURED_POS][2], PLAYER_TEMP[playerid][pt_INJURED_POS][3], GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid), false);

			SetPlayerHealthEx(playerid, 100.0);
			PLAYER_TEMP[playerid][pt_DEATH_HEALTH] = 100.0;

			PI[playerid][pi_STATE] = ROLEPLAY_STATE_CRACK;
			SetSpawnInfo(playerid, NO_TEAM, PI[playerid][pi_SKIN], PLAYER_TEMP[playerid][pt_INJURED_POS][0], PLAYER_TEMP[playerid][pt_INJURED_POS][1], PLAYER_TEMP[playerid][pt_INJURED_POS][2], PLAYER_TEMP[playerid][pt_INJURED_POS][3], 0, 0, 0, 0, 0, 0);
		}
	}

    PLAYER_TEMP[playerid][pt_GAME_STATE] = GAME_STATE_DEAD;
    return 1;
}

public OnPlayerRequestClass(playerid, classid)
{
	if (PLAYER_TEMP[playerid][pt_GAME_STATE] == GAME_STATE_CONNECTED) // Recién conectado
	{
		if (!PLAYER_TEMP[playerid][pt_USER_VALID_NAME] || PLAYER_TEMP[playerid][pt_KICKED] || PLAYER_TEMP[playerid][pt_CLASSED]) Kick(playerid);
		else
		{
			KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][0]);
			PLAYER_TEMP[playerid][pt_CLASSED] = true;

			TogglePlayerSpectatingEx(playerid, true);
			ClearPlayerChat(playerid);

			InterpolateCameraPos(playerid, -1379.475219, 579.017211, 37.774154, -1347.782592, 635.937011, 56.924133, LOGIN_TIME, CAMERA_MOVE);
			InterpolateCameraLookAt(playerid, -1502.364990, 527.097290, 32.364120, -1522.885620, 520.877441, 28.584123, LOGIN_TIME, CAMERA_MOVE);

			//check ban
			inline OnPlayerBannedCheck()
			{
				new rows, bool:continue_proccess;
				if (cache_get_row_count(rows))
				{
					if (rows)
					{
						InterpolateCameraPos(playerid, 953.785705, -1103.128906, 25.369543, 953.785705, -1103.128906, 25.369543, 1000, CAMERA_CUT);
						InterpolateCameraLookAt(playerid, 932.075439, -1103.348876, 23.919542, 932.075439, -1103.348876, 23.919542, 1000, CAMERA_CUT);

						new name[24], expire_date[24], id_player, by[24], text[128], date[24], expire_date_ts, now[24], now_ts, bool:isnull_name, bool:isnull_by, bool:isnull_expire_date_ts;
						cache_is_value_name_null(0, "name", isnull_name);
						if (!isnull_name) cache_get_value_name(0, "name", name, 24);
						cache_get_value_name(0, "expire_date", expire_date, 24);
						cache_get_value_name_int(0, "id_player", id_player);
						cache_is_value_name_null(0, "pname", isnull_by);
						if (!isnull_by) cache_get_value_name(0, "pname", by, 24);
						cache_get_value_name(0, "text", text, 128);
						cache_get_value_name(0, "date", date, 24);
						cache_is_value_name_null(0, "expire_date_ts", isnull_expire_date_ts);
						if (!isnull_expire_date_ts) cache_get_value_name_int(0, "expire_date_ts", expire_date_ts);
						cache_get_value_name(0, "now", now, 24);
						cache_get_value_name_int(0, "now_ts", now_ts);

						if (expire_date_ts)
						{
							//temporal
							if (now_ts >= expire_date_ts)
							{
								continue_proccess = true;
								mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM bans WHERE name = '%e' OR ip = '%e';", PLAYER_TEMP[playerid][pt_NAME], PLAYER_TEMP[playerid][pt_IP]);
								mysql_tquery(handle_db, QUERY_BUFFER);

								if (id_player) AddPlayerBadHistory(id_player, -1, TYPE_UNBAN, "Readmitido (de tban)");
							}
							else
							{
								new dialog[600];
								format(dialog, sizeof dialog, 
									
									"\
										{f5f5f5}Esta IP o cuenta está expulsada, detalles:\n\
										\n\
										Tu nombre: %s\n\
										\n\
										Nombre: %s\n\
										Expulsado por: %s\n\
										Fecha expulsión: %s\n\
										Razón: %s\n\
										\n\
										Fecha actual: %s\n\
										Fecha readmisión: %s\n\
										\n\
									",
									
									PLAYER_TEMP[playerid][pt_NAME],
									name, by, date, text, now, expire_date
								);

								ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "{ff0000}[BAN]{f5f5f5} Aviso", dialog, "xSalir", "");
								KickEx(playerid, 500);
							}

						}
						else
						{
							//permanente
							new dialog[480];
							format(dialog, sizeof dialog, 
								
								"\
									{f5f5f5}Esta IP o cuenta está expulsada, detalles:\n\
									\n\
									Tu nombre: %s\n\
									\n\
									Nombre: %s\n\
									Expulsado por: %s\n\
									Fecha expulsión: %s\n\
									Razón: %s\n\
									\n\
								",
								
								PLAYER_TEMP[playerid][pt_NAME],
								name, by, date, text
							);
								
							ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "{ff0000}[BAN]{f5f5f5} Aviso", dialog, "xSalir", "");
							KickEx(playerid, 500);
						}
					}
					else continue_proccess = true;

					if (continue_proccess)
					{
						inline OnPlayerCheck()
						{
							if (cache_get_row_count(rows))
							{
								if (rows)
								{
									cache_get_value_name_int(0, "id", PI[playerid][pi_ID]);
									cache_get_value_name(0, "ip", PI[playerid][pi_IP], 16);
									cache_get_value_name(0, "email", PI[playerid][pi_EMAIL], 32);
									cache_get_value_name(0, "pass", PI[playerid][pi_PASS], SHA256_HASH_LENGTH);
									cache_get_value_name(0, "salt", PI[playerid][pi_SALT], 16);
									cache_get_value_name_int(0, "admin_level", PI[playerid][pi_ADMIN_LEVEL]);

									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET connected = 1, playerid = %d WHERE id = %d;", playerid, PI[playerid][pi_ID]);
									mysql_tquery(handle_db, QUERY_BUFFER);
									PLAYER_TEMP[playerid][pt_USER_EXIST] = true;
								}
								else PLAYER_TEMP[playerid][pt_USER_EXIST] = false;

								GameTextForPlayer(playerid, "_", 500, 3);

								if (maintenance_mode && PI[playerid][pi_ADMIN_LEVEL] < 3) {
									Maintenance_Dialog(playerid);
									KickEx(playerid, 500);
								} else {
									TextDrawShowForPlayer(playerid, Textdraws[textdraw_PLAY_MENU][0]);
									TextDrawShowForPlayer(playerid, Textdraws[textdraw_PLAY_MENU][1]);
									TextDrawShowForPlayer(playerid, Textdraws[textdraw_PLAY_MENU][2]);
									PLAYER_TEMP[playerid][pt_PLAYER_PLAY_MENU] = true;
									SelectTextDrawEx(playerid, 0xCCCCCCFF);
								}
							}
							else Kick(playerid);
						}
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, ip, email, salt, pass, admin_level FROM player WHERE name = '%e';", PLAYER_TEMP[playerid][pt_NAME]);
						MySQL_TQueryInline(handle_db,  using inline OnPlayerCheck, QUERY_BUFFER);
					}
				}
				else Kick(playerid);
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT *, UNIX_TIMESTAMP(bans.expire_date) AS expire_date_ts, NOW() AS now, UNIX_TIMESTAMP(NOW()) AS now_ts, player.name AS pname FROM bans LEFT JOIN bad_history ON bans.id_history = bad_history.id LEFT JOIN player ON player.id = bad_history.by WHERE bans.name = '%e' OR bans.ip = '%e';", PLAYER_TEMP[playerid][pt_NAME], PLAYER_TEMP[playerid][pt_IP]);
			MySQL_TQueryInline(handle_db, using inline OnPlayerBannedCheck, QUERY_BUFFER);
		}
	}
	else if ((PLAYER_TEMP[playerid][pt_GAME_STATE] == GAME_STATE_NORMAL || PLAYER_TEMP[playerid][pt_GAME_STATE] == GAME_STATE_DEAD) && PLAYER_TEMP[playerid][pt_USER_LOGGED]) // Viene de jugar
	{
		SetSpawnInfo(playerid, NO_TEAM, PI[playerid][pi_SKIN], PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z], PI[playerid][pi_ANGLE], 0, 0, 0, 0, 0, 0);
		SpawnPlayer(playerid);
		return 0;
	}
	return 0;
}

public OnPlayerRequestSpawn(playerid) // Intentar 'spawnear' mediante la selección de skin << spawn >>
{
	if (PLAYER_TEMP[playerid][pt_GAME_STATE] == GAME_STATE_CONNECTED) CallLocalFunction("OnPlayerRequestClass", "dd", playerid, 0);
    return 0;
}

public OnGameModeInit()
{
	AntiDeAMX();

	SetGameModeText(SERVER_GAMEMODE);
    SendRconCommand("hostname "SERVER_HOSTNAME"");
    SendRconCommand("language "SERVER_LANGUAGE"");
	SendRconCommand("weburl "SERVER_WEBSITE"");
	SendRconCommand("minconnectiontime 0");
    SendRconCommand("ackslimit 8000");
    SendRconCommand("messageslimit 500");
    SendRconCommand("conncookies 1");
	SendRconCommand("cookielogging 0");
	SendRconCommand("chatlogging 0");
	SendRconCommand("sleep 1");

	ConnectDatabase();

	DisableInteriorEnterExits();
	ShowPlayerMarkers(PLAYER_MARKERS_MODE_GLOBAL);
	EnableStuntBonusForAll(false);
	ManualVehicleEngineAndLights();
	FormatDialogStrings();
	UsePlayerPedAnims();
	AllowInteriorWeapons(true);
	MapAndreas_Init(MAP_ANDREAS_MODE_FULL);

	maintenance_mode = false;
	maintenance_mode_timer = -1;
	return 1;
}

FormatDialogStrings()
{
	new Dialog_Lines_String[256];
	
		/* PIZZA FOOD */
	format(DIALOG_FOOD_PIZZA_String, sizeof DIALOG_FOOD_PIZZA_String, "Producto\tPrecio\n");
	for (new i; i != sizeof PIZZA_FOOD; i ++)
	{
		format(Dialog_Lines_String, sizeof Dialog_Lines_String, "{F5F5F5}%d. %s\t{"#BLUE_COLOR"}%d$\n", i + 1, PIZZA_FOOD[i][food_NAME], PIZZA_FOOD[i][food_PRICE]);
		strcat(DIALOG_FOOD_PIZZA_String, Dialog_Lines_String);
	}
	
		/* CLUCKIN FOOD */
	format(DIALOG_FOOD_CLUCKIN_String, sizeof DIALOG_FOOD_CLUCKIN_String, "Producto\tPrecio\n");
	for (new i; i != sizeof CLUCKIN_BELL_FOOD; i ++)
	{
		format(Dialog_Lines_String, sizeof Dialog_Lines_String, "{F5F5F5}%d. %s\t{"#BLUE_COLOR"}%d$\n", i + 1, CLUCKIN_BELL_FOOD[i][food_NAME], CLUCKIN_BELL_FOOD[i][food_PRICE]);
		strcat(DIALOG_FOOD_CLUCKIN_String, Dialog_Lines_String);
	}
	
		/* BURGER_SHOT FOOD */
	format(DIALOG_FOOD_BURGER_String, sizeof DIALOG_FOOD_BURGER_String, "Producto\tPrecio\n");
	for (new i; i != sizeof BURGER_SHOT_FOOD; i ++)
	{
		format(Dialog_Lines_String, sizeof Dialog_Lines_String, "{F5F5F5}%d. %s\t{"#BLUE_COLOR"}%d$\n", i + 1, BURGER_SHOT_FOOD[i][food_NAME], BURGER_SHOT_FOOD[i][food_PRICE]);
		strcat(DIALOG_FOOD_BURGER_String, Dialog_Lines_String);
	}

		/* 24/7 LIST */
	for (new i = 0; i != sizeof Supermarket_Product_List; i ++)
	{
		format(Dialog_Lines_String, sizeof(Dialog_Lines_String), "{"#PRIMARY_COLOR"}%d.{F5F5F5} %s\t{F5F5F5}%d{"#GREEN_COLOR"}$\n", i + 1, Supermarket_Product_List[i][product_NAME], Supermarket_Product_List[i][product_PRICE]);
		strcat(DIALOG_247_LIST_String, Dialog_Lines_String);
	}
	
	//Colores bandas
	format(DIALOG_CREATE_CREW_COLOR_String, sizeof DIALOG_CREATE_CREW_COLOR_String, "");
	for (new i = 0; i != sizeof(RandomColors); i++)
	{
		format(Dialog_Lines_String, sizeof(Dialog_Lines_String), "{%06x}color %d\n", RandomColors[i] >>> 8, i + 1);
		strcat(DIALOG_CREATE_CREW_COLOR_String, Dialog_Lines_String);
	}

	format(DIALOG_CREDIT_String, sizeof DIALOG_CREDIT_String, 
		"\
			{d1d1d1}\n\
		"
	);
	
	//Animaciones
	format(DIALOG_ANIMS_String, sizeof DIALOG_ANIMS_String, "");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /rendirse\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /blowjob\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /rodar\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /borracho\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /bomba\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /apuntar\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /reir\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /amenazar\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /paja\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /herido\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /cruzarbrazos\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /recostarse\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /cubrirse\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /vomitar\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /comer\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /despedir\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /nalgada\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /agonizar\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /besar\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /crack\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /mear\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /sentarse\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /fucku\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /llamar\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /taichi\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /beber\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /boxear\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /saludar\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /llorar\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /dormir\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /rapear\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /astrip\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /bailar\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /alentar\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /hablar\n");
	strcat(DIALOG_ANIMS_String, "{f5f5f5}>> /asiento\n");
			
	return 1;
}

SanAndreas()
{
	CreateTextDraws();
	LoadEnterExits();
	LoadProperties();

	//Info para pickups
	new info[3], Pickup_Info;

	// 3D Texts Ropas
	for (new i = 0; i < sizeof Clothing_Shop_Positions; i++)
	{
		new label_str[256];
		format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}%s\n{F5F5F5}Presiona {"#PRIMARY_COLOR"}[ H ] {F5F5F5}para ver las opciones disponibles", Clothing_Shop_Positions[i][clothing_shop_NAME]);
		CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, Clothing_Shop_Positions[i][clothing_shop_X], Clothing_Shop_Positions[i][clothing_shop_Y], Clothing_Shop_Positions[i][clothing_shop_Z] + 0.25, 10.0, .testlos = true, .interiorid = Clothing_Shop_Positions[i][clothing_shop_INTERIOR]);
	}
	
	// 3D Texts Pedir comida
	for (new i = 0; i < sizeof Fast_Food_Positions; i++)
	{
		new label_str[128];
		format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}%s\n{F5F5F5}Presiona {"#PRIMARY_COLOR"}[ H ] {F5F5F5}para alimentarte", Fast_Food_Positions[i][fast_food_NAME]);
		CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, Fast_Food_Positions[i][fast_food_X], Fast_Food_Positions[i][fast_food_Y], Fast_Food_Positions[i][fast_food_Z] + 0.25, 10.0, .testlos = true, .interiorid = Fast_Food_Positions[i][fast_food_INTERIOR]);
	}
	
	// Banco
	for (new i = 0; i < sizeof Bank_Interior_Positions; i++) {
		Pickup_Info = CreateDynamicPickup(1212, 1, Bank_Interior_Positions[i][0], Bank_Interior_Positions[i][1], Bank_Interior_Positions[i][2], -1, -1);
		info[0] = PICKUP_TYPE_BANK;
		info[1] = i; // Index
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);
	}

	for (new i = 0; i < sizeof BUY_PROPERTIES_SITES; i++) CreateDynamic3DTextLabel("Escribe {"#PRIMARY_COLOR"}/comprarcasa [ID] {F5F5F5}para comprar una propiedad", 0xFFFFFFFF, BUY_PROPERTIES_SITES[i][site_X], BUY_PROPERTIES_SITES[i][site_Y], BUY_PROPERTIES_SITES[i][site_Z] + 0.25, 10.0, .testlos = true, .worldid = BUY_PROPERTIES_SITES[i][site_WORLD], .interiorid = BUY_PROPERTIES_SITES[i][site_INTERIOR]);
	
	//Cajeros
	for (new i = 0; i < sizeof ATM_BANK; i ++)
	{
		CreateDynamicObject(ATM_BANK[i][atm_modelid], ATM_BANK[i][atm_X], ATM_BANK[i][atm_Y], ATM_BANK[i][atm_Z], ATM_BANK[i][atm_RX], ATM_BANK[i][atm_RY], ATM_BANK[i][atm_RZ], 0, 0);
		
		ATM_BANK[i][atm_X] += (-0.5 * floatsin(-(ATM_BANK[i][atm_RZ] - 90.0), degrees));
		ATM_BANK[i][atm_Y] += (-0.5 * floatcos(-(ATM_BANK[i][atm_RZ] - 90.0), degrees));
		CreateDynamicMapIcon(ATM_BANK[i][atm_X], ATM_BANK[i][atm_Y], ATM_BANK[i][atm_Z], 52, -1, 0, 0);

		Pickup_Info = CreateDynamicPickup(0, 1, ATM_BANK[i][atm_X], ATM_BANK[i][atm_Y], ATM_BANK[i][atm_Z] + 0.10, 0, 0);
		info[0] = PICKUP_TYPE_ATM;
		info[1] = i; // Index
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);

		CreateAtmRobberyInfo(i);
	}

	// 3D Texts Gasolinera
	for (new i = 0; i < sizeof Fuel_Stations; i++)
	{
		Pickup_Info = CreateDynamicPickup(1650, 1, Fuel_Stations[i][fs_X], Fuel_Stations[i][fs_Y], Fuel_Stations[i][fs_Z], 0, 0);
		info[0] = PICKUP_TYPE_FUEL_STATION;
		info[1] = i; // Index
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);

		Pickup_Info = CreateDynamicPickup(0, 14, Fuel_Stations[i][fs_X], Fuel_Stations[i][fs_Y], Fuel_Stations[i][fs_Z], 0, 0);
		info[0] = PICKUP_TYPE_FUEL_STATION;
		info[1] = i; // Index
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);
	}

	//24/7 Int
	Pickup_Info = CreateDynamicPickup(19592, 1, -27.964675, -89.948631, 1003.546875 + 0.10, -1, 18);
	info[0] = PICKUP_TYPE_247;
	info[1] = 0;
	info[2] = 0;
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);

	//Notario
	CreateDynamic3DTextLabel("Presiona {"#PRIMARY_COLOR"}[ H ] {F5F5F5}para vender\nalguna propiedad o vehículo", 0xFFFFFFFF, -474.596282, 289.679107, 2004.584960, 10.0, .testlos = true, .interiorid = 20);
	
	//Barreras
	for (new i = 0; i != sizeof San_Andreas_Barriers; i ++)
	{
		CreateDynamicObject(966, San_Andreas_Barriers[i][barrier_X], San_Andreas_Barriers[i][barrier_Y], San_Andreas_Barriers[i][barrier_Z], 0.0, 0.0, San_Andreas_Barriers[i][barrier_ROTATION], San_Andreas_Barriers[i][barrier_WORLD], San_Andreas_Barriers[i][barrier_INTERIOR], .streamdistance = 600.0, .drawdistance = 600.0);
		San_Andreas_Barriers[i][barrier_OBJECT_ID] = CreateDynamicObject(968, San_Andreas_Barriers[i][barrier_X], San_Andreas_Barriers[i][barrier_Y], San_Andreas_Barriers[i][barrier_Z] + 0.72967, 0.0, -90.0, San_Andreas_Barriers[i][barrier_ROTATION], San_Andreas_Barriers[i][barrier_WORLD], San_Andreas_Barriers[i][barrier_INTERIOR], .streamdistance = 600.0, .drawdistance = 600.0);

		new label_str[256];
		
		if (San_Andreas_Barriers[i][barrier_PRICE] > 0) format(label_str, sizeof label_str, "{"#YELLOW_COLOR"}Peaje\n{F5F5F5}Usa Claxon o H para pagar {"#GREEN_COLOR"}%s$", number_format_thousand(San_Andreas_Barriers[i][barrier_PRICE]));
		else {
			if (San_Andreas_Barriers[i][barrier_VEHICLE_TYPE]) format(label_str, sizeof label_str, "{"#YELLOW_COLOR"}%c%s\n{F5F5F5}Usa Claxon o H", toupper(work_info[ San_Andreas_Barriers[i][barrier_VEHICLE_TYPE_IN] ][work_info_NAME][0]), work_info[ San_Andreas_Barriers[i][barrier_VEHICLE_TYPE_IN] ][work_info_NAME][1]);
			else format(label_str, sizeof label_str, "{F5F5F5}Usa Claxon o H");
		}

		CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, San_Andreas_Barriers[i][barrier_X], San_Andreas_Barriers[i][barrier_Y], San_Andreas_Barriers[i][barrier_Z] + 1.5, 15.0, .worldid = San_Andreas_Barriers[i][barrier_WORLD], .interiorid = San_Andreas_Barriers[i][barrier_INTERIOR], .testlos = true);

		San_Andreas_Barriers[i][barrier_PLAYER_X] = San_Andreas_Barriers[i][barrier_X] + (3.4 * floatsin(-(San_Andreas_Barriers[i][barrier_ROTATION] + 90.0), degrees));
		San_Andreas_Barriers[i][barrier_PLAYER_Y] = San_Andreas_Barriers[i][barrier_Y] + (3.4 * floatcos(-(San_Andreas_Barriers[i][barrier_ROTATION] + 90.0), degrees));
		San_Andreas_Barriers[i][barrier_PLAYER_Z] = San_Andreas_Barriers[i][barrier_Z];
	}
	
	Jail_Areas[0] = CreateDynamicRectangle(258.236938, 72.319061, 273.117279, 95.841438, -1, 6);
	Jail_Areas[1] = CreateDynamicRectangle(211.001739, 117.171920, 236.010986, 104.004219, -1, 10);
	Jail_Areas[2] = CreateDynamicRectangle(204.957885, 180.868392, 183.743148, 168.624618, -1, 3);
	Jail_Areas[3] = CreateDynamicRectangle(366.3146, 1951.8367, 17.6406, 78.4408, -1, 13);

	//Safe Zones
	for (new i = 0; i != sizeof SAFE_ZONES; i ++)
	{
		SAFE_ZONES[i][safe_zone_AREA_ID] = CreateDynamicRectangle(SAFE_ZONES[i][safe_zone_MIN_X], SAFE_ZONES[i][safe_zone_MIN_Y], SAFE_ZONES[i][safe_zone_MAX_X], SAFE_ZONES[i][safe_zone_MAX_Y], SAFE_ZONES[i][safe_zone_WORLD], SAFE_ZONES[i][safe_zone_INTERIOR]);
	}

	//Trabajos
	for (new i = 1; i < E_WORKS; i ++)
	{
		if (!obtain_work_coords[i][obtain_work_AVAILABLE]) continue;
		switch(work_info[i][work_info_TYPE])
		{
			case WORK_TYPE_NORMAL:
			{
				if (obtain_work_coords[i][obtain_work_PICKUP])
				{
					Pickup_Info = CreateDynamicPickup(1314, 1, obtain_work_coords[i][obtain_work_X], obtain_work_coords[i][obtain_work_Y], obtain_work_coords[i][obtain_work_Z], -1, obtain_work_coords[i][obtain_work_INTERIOR]);
					info[0] = PICKUP_TYPE_WORK;
					info[1] = i; // Index
					info[2] = 0; // Nada
					Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);
				}
				if (obtain_work_coords[i][obtain_work_MAP_ICON] != -1) CreateDynamicMapIcon(obtain_work_coords[i][obtain_work_MAP_ICON_X], obtain_work_coords[i][obtain_work_MAP_ICON_Y], obtain_work_coords[i][obtain_work_MAP_ICON_Z], obtain_work_coords[i][obtain_work_MAP_ICON], -1, 0, 0);
			}
		}
	}

	//Random taximeters
	for (new i = 0; i != MAX_VEHICLES; i ++) {
		TAXI_METER_VEHICLE[i][veh_taxi_meter_PRICE] = minrand(2, 8);
		GLOBAL_VEHICLES[i][gb_vehicle_RESPAWN_TIME] = gettime() + 600;
	}

	//Pickups vehiculos
	for (new i = 0; i != sizeof TruckLoadPoint; i ++)
	{
		Pickup_Info = CreateDynamicPickup(2912, 14, TruckLoadPoint[i][0], TruckLoadPoint[i][1], TruckLoadPoint[i][2], -1, -1);
		info[0] = PICKUP_TYPE_TRUCK_LOAD;
		info[1] = i; // Index
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);
	}

	//Mecánico
	Mechanic_Areas[0] = CreateDynamicRectangle(1456.500000, -2178.000000, 1659.500000, -2140.000000, 0, 0);
	Streamer_SetArrayData(STREAMER_TYPE_AREA, Mechanic_Areas[0], E_STREAMER_EXTRA_ID, { AREA_TYPE_MECHANIC });

	for (new i; i != sizeof MechanicBuyPiecesCoords; i++)
	{
		Pickup_Info = CreateDynamicPickup(19832, 1, MechanicBuyPiecesCoords[i][0], MechanicBuyPiecesCoords[i][1], MechanicBuyPiecesCoords[i][2], -1, -1);
		info[0] = PICKUP_TYPE_MECHANIC_PIECES;
		info[1] = i; // Index
		info[2] = 0; // Nada
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);
	}

	//Ruta 0
	CreateTrashCheckpoint(0, 1440, 1167, 1587, -1812.46228, -558.37744, 15.73948,   0.00000, 0.00000, 274.24359);
	CreateTrashCheckpoint(0, 1440, 1167, 1587, -1793.84106, -312.50452, 24.46057,   0.00000, 0.00000, 268.49271);
	CreateTrashCheckpoint(0, 1440, 1167, 1587, -1801.20825, 115.39587, 14.55550,   0.00000, 0.00000, 280.09882);
	CreateTrashCheckpoint(0, 1440, 1167, 1587, -1750.40051, 323.11810, 6.61720,   0.00000, 0.00000, 319.06424);
	CreateTrashCheckpoint(0, 1440, 1167, 1587, -1814.43311, 511.15622, 28.66113,   0.00000, 9.00000, 304.31201);
	CreateTrashCheckpoint(0, 1440, 1167, 1587, -1982.79871, 614.85687, 34.61121,   0.00000, 0.00000, 0.00000);
	CreateTrashCheckpoint(0, 1440, 1167, 1587, -2229.42896, 575.27448, 34.58952,   0.00000, 0.00000, 0.00000);
	CreateTrashCheckpoint(0, 1440, 1167, 1587, -2385.20020, 513.64594, 28.11606,   0.00000, 0.00000, 282.48959);
	CreateTrashCheckpoint(0, 1440, 1167, 1587, -2258.51782, 221.79150, 34.74878,   0.00000, 0.00000, 90.00000);
	CreateTrashCheckpoint(0, 1440, 1167, 1587, -2266.30273, -206.86926, 34.86986,   0.00000, 0.00000, 90.00000);
	CreateTrashCheckpoint(0, 1440, 1167, 1587, -1995.48499, -771.90076, 31.56746,   0.00000, 0.00000, 90.00000);
	//Ruta 1
	CreateTrashCheckpoint(1, 1440, 1589, 2089, -2211.24414, -964.98248, 38.68247,   0.00000, 2.50000, 286.39740);
	CreateTrashCheckpoint(1, 1440, 1589, 2089, -2424.54443, -595.71997, 131.88649,   0.00000, -4.50000, 303.65921);
	CreateTrashCheckpoint(1, 1440, 1589, 2089, -2602.82544, -478.18484, 68.15035,   0.00000, 0.00000, 21.71607);
	CreateTrashCheckpoint(1, 1440, 1589, 2089, -2353.62256, -396.48764, 78.42006,   0.00000, -3.50000, 305.07410);
	CreateTrashCheckpoint(1, 1440, 1589, 2089, -2756.29199, -500.66721, 6.77589,   0.00000, 0.00000, 316.44635);
	CreateTrashCheckpoint(1, 1440, 1589, 2089, -2811.07056, -346.85269, 6.66456,   0.00000, 0.00000, 259.86459);
	CreateTrashCheckpoint(1, 1440, 1589, 2089, -2415.51563, -128.34013, 34.82273,   0.00000, 0.00000, 250.60507);
	CreateTrashCheckpoint(1, 1440, 1589, 2089, -2028.09985, -76.42242, 34.70956,   0.00000, 0.00000, 0.00000);
	//Ruta 2
	CreateTrashCheckpoint(2, 1440, 2278, 3183, -2193.88306, -2156.55347, 46.46848,   0.00000, -10.00000, 46.48320);
	CreateTrashCheckpoint(2, 1440, 2278, 3183, -2208.01904, -2280.10645, 30.12751,   0.00000, 0.00000, 331.91882);
	CreateTrashCheckpoint(2, 1440, 2278, 3183, -2125.33594, -2256.24902, 30.10599,   0.00000, 0.00000, 326.47290);
	CreateTrashCheckpoint(2, 1440, 2278, 3183, -2101.86353, -2313.20093, 30.14946,   0.00000, 0.00000, 42.68287);
	CreateTrashCheckpoint(2, 1440, 2278, 3183, -2183.69775, -2449.03003, 30.01783,   0.00000, 0.00000, 51.16318);
	CreateTrashCheckpoint(2, 1440, 2278, 3183, -2328.98047, -2704.17358, 44.41791,   6.17998, 5.88000, 340.20822);
	CreateTrashCheckpoint(2, 1440, 2278, 3183, -2601.78345, -2334.39746, 10.50614,   0.00000, 0.00000, 41.64481);
	
	//Lecador arboles
	Lumberjack_Area = CreateDynamicRectangle(-613.953796, -209.777252, -381.961181, -6.355076, 0, 0);
	for (new i = 0; i != sizeof LUMBER_TREES; i ++)
	{
		LUMBER_TREES[i][lumber_tree_OBJECT_ID] = CreateDynamicObject(LUMBER_TREES[i][lumber_tree_MODELID], LUMBER_TREES[i][lumber_tree_X], LUMBER_TREES[i][lumber_tree_Y], LUMBER_TREES[i][lumber_tree_Z], LUMBER_TREES[i][lumber_tree_RX], LUMBER_TREES[i][lumber_tree_RY], LUMBER_TREES[i][lumber_tree_RZ], 0, 0);
		
		new label_str[256];
		format(label_str, sizeof label_str, "{f46530}Árbol (%d)\n\n{F5F5F5}Pulsa {f9d834}F {F5F5F5}para talar el arbol.", i);
		LUMBER_TREES[i][lumber_tree_LABEL] = CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, LUMBER_TREES[i][lumber_tree_X], LUMBER_TREES[i][lumber_tree_Y], LUMBER_TREES[i][lumber_tree_Z] + 1.5, 5.0, .testlos = false, .worldid = 0, .interiorid = 0);
	}
	
	//Agricultor
	Farmer_Area = CreateDynamicCircle(1461.8894, -83.2621, 65.0, 0, 0);
	CreateDynamicMapIcon(1461.8894, -83.2621, 65.0, 53, -1, 0, 0);

	Pickup_Info = CreateDynamicPickup(2241, 1, 1566.521606, 31.370532, 24.16406, 0, 0);
	info[0] = PICKUP_TYPE_FARMER_SEEDS;
	info[1] = 0; // Nada
	info[2] = 0; // Nada
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);

	Pickup_Info = CreateDynamicPickup(1575, 1, 1546.2705, 13.9676, 24.1394, 0, 0);
	info[0] = PICKUP_TYPE_PACK_DRUGS;
	info[1] = 0; // Nada
	info[2] = 0; // Nada
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);
	
	Pickup_Info = CreateDynamicPickup(1575, 1, 1540.2292, 17.6346, 24.1406, 0, 0);
	info[0] = PICKUP_TYPE_BUY_DRUGS_PACK;
	info[1] = 0; // Nada
	info[2] = 0; // Nada
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);

	//Cosechador
	Harvest_Area = CreateDynamicRectangle(-428.336059, -1667.658569, -116.565414, -1220.122070, 0, 0);

	//Actor Mecanico
	CreateActor(50, 1562.8501, -2156.9243, 13.5710, 41.5912);

	//Policia
	Pickup_Info = CreateDynamicPickup(347, 1, 1564.2455, -1648.0438, 917.6164, -1, -1);
	info[0] = PICKUP_TYPE_BUY_POLICE_WEAPONS;
	info[1] = 0; // Nada
	info[2] = 0; // Nada
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);
	
	Pickup_Info = CreateDynamicPickup(1242, 1, 1566.5187, -1646.4478, 917.6164, -1, -1);
	info[0] = PICKUP_TYPE_BUY_POLICE_ARMOUR;
	info[1] = 0; // Nada
	info[2] = 0; // Nada
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);

	Pickup_Info = CreateDynamicPickup(1081, 1, 1587.9720, -1636.9628, 13.4006, -1, -1);
	info[0] = PICKUP_TYPE_SPAWN_POLICE_VEHICL;
	info[1] = 0; // Nada
	info[2] = 0; // Nada
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);

	/* Hospital */
	CreateDynamicActor(308, 2042.0570, -1395.6455, 942.9708, 270.0, true, 100.0, -1, -1);

	Pickup_Info = CreateDynamicPickup(11738, 1, 2044.8937, -1395.6809, 942.9708, -1, -1);
	info[0] = PICKUP_TYPE_MEDIC_MEDICINE_BUY;
	info[1] = 0; // Nada
	info[2] = 0; // Nada
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);

	Pickup_Info = CreateDynamicPickup(11738, 1, -31.0071, -28.6768, 1003.5573, -1, -1);
	info[0] = PICKUP_TYPE_PHARMACY;
	info[1] = 0; // Nada
	info[2] = 0; // Nada
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);

	Pickup_Info = CreateDynamicPickup(19792, 1, -2033.0610, -117.4605, 1035.1719, -1, -1);
	info[0] = PICKUP_TYPE_DRIVING_LICENSE;
	info[1] = 0; // Nada
	info[2] = 0; // Nada
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, Pickup_Info, E_STREAMER_EXTRA_ID, info);
	return 1;
}


stock Float:GetSpeed(Float:vx, Float:vy, Float:vz)
{
	new Float:vel = floatmul(floatsqroot(floatadd(floatadd(floatpower(vx, 2), floatpower(vy, 2)),  floatpower(vz, 2))), 181.5);
	return vel;
}

stock IsVehicleDrivingForward(vehicleid)
{
    new Float:Float[3];
    if (GetVehicleVelocity(vehicleid, Float[1], Float[2], Float[0]))
    {
        GetVehicleZAngle(vehicleid, Float[0]);
        if (Float[0] < 90)
        {
            if (Float[1] < 0 && Float[2] > 0) return true;
        }
        else if (Float[0] < 180)
        {
            if (Float[1] < 0 && Float[2] < 0) return true;
        }
        else if (Float[0] < 270)
        {
            if (Float[1] > 0 && Float[2] < 0) return true;
        }
        else if (Float[1] > 0 && Float[2] > 0) return true;
    }
    return false;
}

CreateTrashCheckpoint(route, modelid, payment, vip_payment, Float:x, Float:y, Float:z, Float:rx, Float:ry, Float:rz)
{
	if (route >= MAX_ROUTES) return print("---> Límite superado en array 'TRASH_OBJECTS, route' en la función 'CreateTrashCheckpoint'.");
	if (!TRASH_OBJECTS[route][trash_route_VALID]) TRASH_OBJECTS[route][trash_route_VALID] = true;
	if (TRASH_OBJECTS[route][trash_route_OBJECTS] >= MAX_OBJECTS_PER_ROUTE) return print("---> Límite superado en array 'TRASH_OBJECTS, objects' en la función 'CreateTrashCheckpoint'.");

	if (TRASH_OBJECTS[route][trash_route_OBJECTS] == 0) TRASH_OBJECTS[route][trash_route_DISTANCE] = GetDistanceBetweenPoints3D(x, y, z, obtain_work_coords[WORK_TRASH][obtain_work_X], obtain_work_coords[WORK_TRASH][obtain_work_Y], obtain_work_coords[WORK_TRASH][obtain_work_Z]);
	else
	{
		TRASH_OBJECTS[route][trash_route_DISTANCE] -= GetDistanceBetweenPoints3D(TRASH_OBJECTS[route][trash_object_X][ TRASH_OBJECTS[route][trash_route_OBJECTS] - 1], TRASH_OBJECTS[route][trash_object_Y][ TRASH_OBJECTS[route][trash_route_OBJECTS] - 1 ], TRASH_OBJECTS[route][trash_object_Z][ TRASH_OBJECTS[route][trash_route_OBJECTS] - 1 ], obtain_work_coords[WORK_TRASH][obtain_work_X], obtain_work_coords[WORK_TRASH][obtain_work_Y], obtain_work_coords[WORK_TRASH][obtain_work_Z]);
		TRASH_OBJECTS[route][trash_route_DISTANCE] += GetDistanceBetweenPoints3D(x, y, z, TRASH_OBJECTS[route][trash_object_X][ TRASH_OBJECTS[route][trash_route_OBJECTS] - 1], TRASH_OBJECTS[route][trash_object_Y][ TRASH_OBJECTS[route][trash_route_OBJECTS] - 1 ], TRASH_OBJECTS[route][trash_object_Z][ TRASH_OBJECTS[route][trash_route_OBJECTS] - 1 ]);
	}
	
	TRASH_OBJECTS[route][trash_object_MODELID][ TRASH_OBJECTS[route][trash_route_OBJECTS] ] = modelid;
	TRASH_OBJECTS[route][trash_object_X][ TRASH_OBJECTS[route][trash_route_OBJECTS] ] = x;
	TRASH_OBJECTS[route][trash_object_Y][ TRASH_OBJECTS[route][trash_route_OBJECTS] ] = y;
	TRASH_OBJECTS[route][trash_object_Z][ TRASH_OBJECTS[route][trash_route_OBJECTS] ] = z;
	TRASH_OBJECTS[route][trash_object_RX][ TRASH_OBJECTS[route][trash_route_OBJECTS] ] = rx;
	TRASH_OBJECTS[route][trash_object_RY][ TRASH_OBJECTS[route][trash_route_OBJECTS] ] = ry;
	TRASH_OBJECTS[route][trash_object_RZ][ TRASH_OBJECTS[route][trash_route_OBJECTS] ] = rz;
	//CreateDynamicObject(modelid, x, y, z, rx, ry, rz, 0, 0);
	
	TRASH_OBJECTS[route][trash_route_DISTANCE] += GetDistanceBetweenPoints3D(x, y, z, obtain_work_coords[WORK_TRASH][obtain_work_X], obtain_work_coords[WORK_TRASH][obtain_work_Y], obtain_work_coords[WORK_TRASH][obtain_work_Z]);
	TRASH_OBJECTS[route][trash_route_MONEY] = payment;
	TRASH_OBJECTS[route][trash_route_VIP_MONEY] = vip_payment;

	TRASH_OBJECTS[route][trash_route_OBJECTS] ++;
	return 1;
}
	
stock Float:GetDistanceBetweenPoints3D(Float:x1, Float:y1, Float:z1, Float:x2, Float:y2, Float:z2)
{
    return VectorSize(x1-x2,y1-y2,z1-z2);
}

CreateTextDraws()
{
	for (new i; i < sizeof(Textdraws); i++) Textdraws[Textdraws_Enum:i] = INVALID_TEXT_DRAW;

    Textdraws[textdraw_PLAY_MENU][0] = TextDrawCreate(320.000, 200.000, "~g~~h~~h~Spain +");
    TextDrawLetterSize(Textdraws[textdraw_PLAY_MENU][0], 0.800, 3.800);
    TextDrawAlignment(Textdraws[textdraw_PLAY_MENU][0], 2);
    TextDrawColor(Textdraws[textdraw_PLAY_MENU][0], -1);
    TextDrawSetShadow(Textdraws[textdraw_PLAY_MENU][0], 1);
    TextDrawSetOutline(Textdraws[textdraw_PLAY_MENU][0], 1);
    TextDrawBackgroundColor(Textdraws[textdraw_PLAY_MENU][0], 150);
    TextDrawFont(Textdraws[textdraw_PLAY_MENU][0], 1);
    TextDrawSetProportional(Textdraws[textdraw_PLAY_MENU][0], 1);

    Textdraws[textdraw_PLAY_MENU][1] = TextDrawCreate(320.000, 235.000, "CLICK");
    TextDrawLetterSize(Textdraws[textdraw_PLAY_MENU][1], 0.500, 2.600);
    TextDrawTextSize(Textdraws[textdraw_PLAY_MENU][1], 50.000, 50.000);
    TextDrawAlignment(Textdraws[textdraw_PLAY_MENU][1], 2);
    TextDrawColor(Textdraws[textdraw_PLAY_MENU][1], -1);
    TextDrawSetShadow(Textdraws[textdraw_PLAY_MENU][1], 0);
    TextDrawSetOutline(Textdraws[textdraw_PLAY_MENU][1], 1);
    TextDrawBackgroundColor(Textdraws[textdraw_PLAY_MENU][1], 150);
    TextDrawFont(Textdraws[textdraw_PLAY_MENU][1], 2);
    TextDrawSetProportional(Textdraws[textdraw_PLAY_MENU][1], 1);
    TextDrawSetSelectable(Textdraws[textdraw_PLAY_MENU][1], 1);

    Textdraws[textdraw_PLAY_MENU][2] = TextDrawCreate(320.000, 420.000, "Pulsa en ~b~Click~w~ para continuar");
    TextDrawLetterSize(Textdraws[textdraw_PLAY_MENU][2], 0.300, 1.800);
    TextDrawTextSize(Textdraws[textdraw_PLAY_MENU][2], 1000.000, 1000.000);
    TextDrawAlignment(Textdraws[textdraw_PLAY_MENU][2], 2);
    TextDrawColor(Textdraws[textdraw_PLAY_MENU][2], -1);
    TextDrawSetShadow(Textdraws[textdraw_PLAY_MENU][2], 0);
    TextDrawSetOutline(Textdraws[textdraw_PLAY_MENU][2], 1);
    TextDrawBackgroundColor(Textdraws[textdraw_PLAY_MENU][2], 150);
    TextDrawFont(Textdraws[textdraw_PLAY_MENU][2], 2);
    TextDrawSetProportional(Textdraws[textdraw_PLAY_MENU][2], 1);


    Textdraws[textdraw_HUD][0] = TextDrawCreate(635.000, 426.000, "~g~~h~~h~Spain +~p~~h~~h~ Roleplay - PC|Android");
    TextDrawLetterSize(Textdraws[textdraw_HUD][0], 0.230, 1.099);
    TextDrawAlignment(Textdraws[textdraw_HUD][0], 3);
    TextDrawColor(Textdraws[textdraw_HUD][0], HexToIntEx("FFFFFF", 155));
    TextDrawSetShadow(Textdraws[textdraw_HUD][0], 0);
    TextDrawSetOutline(Textdraws[textdraw_HUD][0], 0);
    TextDrawBackgroundColor(Textdraws[textdraw_HUD][0], 150);
    TextDrawFont(Textdraws[textdraw_HUD][0], 1);
    TextDrawSetProportional(Textdraws[textdraw_HUD][0], 1);
	
	Textdraws[textdraw_GPS_MAP][0] = TextDrawCreate(-5.000000, 132.000000, "box");
	TextDrawLetterSize(Textdraws[textdraw_GPS_MAP][0], 0.000000, 22.498472);
	TextDrawTextSize(Textdraws[textdraw_GPS_MAP][0], 180.130477, 0.000000);
	TextDrawAlignment(Textdraws[textdraw_GPS_MAP][0], 1);
	TextDrawColor(Textdraws[textdraw_GPS_MAP][0], -1);
	TextDrawUseBox(Textdraws[textdraw_GPS_MAP][0], 1);
	TextDrawBoxColor(Textdraws[textdraw_GPS_MAP][0], 120);
	TextDrawSetShadow(Textdraws[textdraw_GPS_MAP][0], 0);
	TextDrawSetOutline(Textdraws[textdraw_GPS_MAP][0], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_GPS_MAP][0], 255);
	TextDrawFont(Textdraws[textdraw_GPS_MAP][0], 1);
	TextDrawSetProportional(Textdraws[textdraw_GPS_MAP][0], 1);
	TextDrawSetShadow(Textdraws[textdraw_GPS_MAP][0], 0);

	Textdraws[textdraw_GPS_MAP][1] = TextDrawCreate(map_td_X, map_td_Y, "samaps:map");
	TextDrawLetterSize(Textdraws[textdraw_GPS_MAP][1], 0.000000, 0.000000);
	TextDrawTextSize(Textdraws[textdraw_GPS_MAP][1], map_td_SIZE_X, map_td_SIZE_Y);
	TextDrawAlignment(Textdraws[textdraw_GPS_MAP][1], 1);
	TextDrawColor(Textdraws[textdraw_GPS_MAP][1], -1);
	TextDrawSetShadow(Textdraws[textdraw_GPS_MAP][1], 0);
	TextDrawSetOutline(Textdraws[textdraw_GPS_MAP][1], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_GPS_MAP][1], 255);
	TextDrawFont(Textdraws[textdraw_GPS_MAP][1], 4);
	TextDrawSetProportional(Textdraws[textdraw_GPS_MAP][1], 0);
	TextDrawSetShadow(Textdraws[textdraw_GPS_MAP][1], 0);

	Textdraws[textdraw_GPS_MAP][2] = TextDrawCreate(90.000000, 324.000000, "GPS_-_/mapa");
	TextDrawLetterSize(Textdraws[textdraw_GPS_MAP][2], 0.197330, 1.027553);
	TextDrawAlignment(Textdraws[textdraw_GPS_MAP][2], 2);
	TextDrawColor(Textdraws[textdraw_GPS_MAP][2], -186);
	TextDrawSetShadow(Textdraws[textdraw_GPS_MAP][2], 0);
	TextDrawSetOutline(Textdraws[textdraw_GPS_MAP][2], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_GPS_MAP][2], 255);
	TextDrawFont(Textdraws[textdraw_GPS_MAP][2], 1);
	TextDrawSetProportional(Textdraws[textdraw_GPS_MAP][2], 1);
	TextDrawSetShadow(Textdraws[textdraw_GPS_MAP][2], 0);

	Textdraws[textdraw_GPS_MAP][3] = TextDrawCreate(map_td_X, map_td_Y, "mdl-1000:lc_map");
	TextDrawLetterSize(Textdraws[textdraw_GPS_MAP][3], 0.000000, 0.000000);
	TextDrawTextSize(Textdraws[textdraw_GPS_MAP][3], map_td_SIZE_X, map_td_SIZE_Y);
	TextDrawAlignment(Textdraws[textdraw_GPS_MAP][3], 1);
	TextDrawColor(Textdraws[textdraw_GPS_MAP][3], -1);
	TextDrawSetShadow(Textdraws[textdraw_GPS_MAP][3], 0);
	TextDrawSetOutline(Textdraws[textdraw_GPS_MAP][3], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_GPS_MAP][3], 255);
	TextDrawFont(Textdraws[textdraw_GPS_MAP][3], 4);
	TextDrawSetProportional(Textdraws[textdraw_GPS_MAP][3], 0);
	TextDrawSetShadow(Textdraws[textdraw_GPS_MAP][3], 0);
	
	
	Textdraws[textdraw_PLAYER_REP_BACK][0] = TextDrawCreate(500.000000, 13.000000, "box");
	TextDrawLetterSize(Textdraws[textdraw_PLAYER_REP_BACK][0], 0.000000, 0.633333);
	TextDrawTextSize(Textdraws[textdraw_PLAYER_REP_BACK][0], 605.000000, 0.000000);
	TextDrawAlignment(Textdraws[textdraw_PLAYER_REP_BACK][0], 1);
	TextDrawColor(Textdraws[textdraw_PLAYER_REP_BACK][0], -1);
	TextDrawUseBox(Textdraws[textdraw_PLAYER_REP_BACK][0], 1);
	TextDrawBoxColor(Textdraws[textdraw_PLAYER_REP_BACK][0], 255);
	TextDrawSetShadow(Textdraws[textdraw_PLAYER_REP_BACK][0], 0);
	TextDrawSetOutline(Textdraws[textdraw_PLAYER_REP_BACK][0], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_PLAYER_REP_BACK][0], 255);
	TextDrawFont(Textdraws[textdraw_PLAYER_REP_BACK][0], 1);
	TextDrawSetProportional(Textdraws[textdraw_PLAYER_REP_BACK][0], 1);
	TextDrawSetShadow(Textdraws[textdraw_PLAYER_REP_BACK][0], 0);

	Textdraws[textdraw_PLAYER_REP_BACK][1] = TextDrawCreate(502.000000, 15.000000, "box");
	TextDrawLetterSize(Textdraws[textdraw_PLAYER_REP_BACK][1], 0.000000, 0.200000);
	TextDrawTextSize(Textdraws[textdraw_PLAYER_REP_BACK][1], 603.000000, 0.000000);
	TextDrawAlignment(Textdraws[textdraw_PLAYER_REP_BACK][1], 1);
	TextDrawColor(Textdraws[textdraw_PLAYER_REP_BACK][1], -1);
	TextDrawUseBox(Textdraws[textdraw_PLAYER_REP_BACK][1], 1);
	TextDrawBoxColor(Textdraws[textdraw_PLAYER_REP_BACK][1], 5787296);
	TextDrawSetShadow(Textdraws[textdraw_PLAYER_REP_BACK][1], 0);
	TextDrawSetOutline(Textdraws[textdraw_PLAYER_REP_BACK][1], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_PLAYER_REP_BACK][1], 255);
	TextDrawFont(Textdraws[textdraw_PLAYER_REP_BACK][1], 1);
	TextDrawSetProportional(Textdraws[textdraw_PLAYER_REP_BACK][1], 1);
	TextDrawSetShadow(Textdraws[textdraw_PLAYER_REP_BACK][1], 0);

	Textdraws[textdraw_LOAD_SCREEN][0] = TextDrawCreate(-15.000000, -4.000000, "box");
	TextDrawLetterSize(Textdraws[textdraw_LOAD_SCREEN][0], 0.000000, 50.866653);
	TextDrawTextSize(Textdraws[textdraw_LOAD_SCREEN][0], 728.000000, 0.000000);
	TextDrawAlignment(Textdraws[textdraw_LOAD_SCREEN][0], 1);
	TextDrawColor(Textdraws[textdraw_LOAD_SCREEN][0], -1);
	TextDrawUseBox(Textdraws[textdraw_LOAD_SCREEN][0], 1);
	TextDrawBoxColor(Textdraws[textdraw_LOAD_SCREEN][0], 0x000000FF);
	TextDrawSetShadow(Textdraws[textdraw_LOAD_SCREEN][0], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_LOAD_SCREEN][0], 255);
	TextDrawFont(Textdraws[textdraw_LOAD_SCREEN][0], 1);
	TextDrawSetProportional(Textdraws[textdraw_LOAD_SCREEN][0], 1);

	Textdraws[textdraw_LOAD_SCREEN][1] = TextDrawCreate(-15.000000, -4.000000, "box");
	TextDrawLetterSize(Textdraws[textdraw_LOAD_SCREEN][1], 0.000000, 50.866653);
	TextDrawTextSize(Textdraws[textdraw_LOAD_SCREEN][1], 728.000000, 0.000000);
	TextDrawAlignment(Textdraws[textdraw_LOAD_SCREEN][1], 1);
	TextDrawColor(Textdraws[textdraw_LOAD_SCREEN][1], -1);
	TextDrawUseBox(Textdraws[textdraw_LOAD_SCREEN][1], 1);
	TextDrawBoxColor(Textdraws[textdraw_LOAD_SCREEN][1], 90);
	TextDrawSetShadow(Textdraws[textdraw_LOAD_SCREEN][1], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_LOAD_SCREEN][1], 255);
	TextDrawFont(Textdraws[textdraw_LOAD_SCREEN][1], 1);
	TextDrawSetProportional(Textdraws[textdraw_LOAD_SCREEN][1], 1);

	Textdraws[textdraw_LOAD_SCREEN][2] = TextDrawCreate(320.000000, 80.000000, SERVER_SHORT_NAME);
	TextDrawLetterSize(Textdraws[textdraw_LOAD_SCREEN][2], 0.505666, 2.649481);
	TextDrawAlignment(Textdraws[textdraw_LOAD_SCREEN][2], 2);
	TextDrawColor(Textdraws[textdraw_LOAD_SCREEN][2], -1);
	TextDrawSetShadow(Textdraws[textdraw_LOAD_SCREEN][2], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_LOAD_SCREEN][2], 255);
	TextDrawFont(Textdraws[textdraw_LOAD_SCREEN][2], 2);
	TextDrawSetProportional(Textdraws[textdraw_LOAD_SCREEN][2], 1);

	Textdraws[textdraw_LOAD_SCREEN][3] = TextDrawCreate(320.000000, 99.000000, "ROLEPLAY");
	TextDrawLetterSize(Textdraws[textdraw_LOAD_SCREEN][3], 0.311000, 1.811555);
	TextDrawAlignment(Textdraws[textdraw_LOAD_SCREEN][3], 2);
	TextDrawColor(Textdraws[textdraw_LOAD_SCREEN][3], -1);
	TextDrawSetShadow(Textdraws[textdraw_LOAD_SCREEN][3], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_LOAD_SCREEN][3], 255);
	TextDrawFont(Textdraws[textdraw_LOAD_SCREEN][3], 2);
	TextDrawSetProportional(Textdraws[textdraw_LOAD_SCREEN][3], 1);
	
	Textdraws[textdraw_SHOP_TUNING][0] = TextDrawCreate(320.000000, 330.000000, "box");
	TextDrawLetterSize(Textdraws[textdraw_SHOP_TUNING][0], 0.000000, 6.966667);
	TextDrawTextSize(Textdraws[textdraw_SHOP_TUNING][0], 0.000000, 152.000000);
	TextDrawAlignment(Textdraws[textdraw_SHOP_TUNING][0], 2);
	TextDrawColor(Textdraws[textdraw_SHOP_TUNING][0], -1);
	TextDrawUseBox(Textdraws[textdraw_SHOP_TUNING][0], 1);
	TextDrawBoxColor(Textdraws[textdraw_SHOP_TUNING][0], 95);
	TextDrawSetShadow(Textdraws[textdraw_SHOP_TUNING][0], 0);
	TextDrawSetOutline(Textdraws[textdraw_SHOP_TUNING][0], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_SHOP_TUNING][0], 255);
	TextDrawFont(Textdraws[textdraw_SHOP_TUNING][0], 1);
	TextDrawSetProportional(Textdraws[textdraw_SHOP_TUNING][0], 1);
	TextDrawSetShadow(Textdraws[textdraw_SHOP_TUNING][0], 0);

	Textdraws[textdraw_SHOP_TUNING][1] = TextDrawCreate(320.000000, 330.000000, ""SERVER_SHORT_NAME"_Tuning_Club");
	TextDrawLetterSize(Textdraws[textdraw_SHOP_TUNING][1], 0.354000, 1.533629);
	TextDrawTextSize(Textdraws[textdraw_SHOP_TUNING][1], 0.000000, 152.000000);
	TextDrawAlignment(Textdraws[textdraw_SHOP_TUNING][1], 2);
	TextDrawColor(Textdraws[textdraw_SHOP_TUNING][1], -1);
	TextDrawUseBox(Textdraws[textdraw_SHOP_TUNING][1], 1);
	TextDrawBoxColor(Textdraws[textdraw_SHOP_TUNING][1], 10205093);
	TextDrawSetShadow(Textdraws[textdraw_SHOP_TUNING][1], 0);
	TextDrawSetOutline(Textdraws[textdraw_SHOP_TUNING][1], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_SHOP_TUNING][1], 255);
	TextDrawFont(Textdraws[textdraw_SHOP_TUNING][1], 0);
	TextDrawSetProportional(Textdraws[textdraw_SHOP_TUNING][1], 1);
	TextDrawSetShadow(Textdraws[textdraw_SHOP_TUNING][1], 0);

	Textdraws[textdraw_SHOP_TUNING][2] = TextDrawCreate(320.000000, 376.000000, "COMPRAR");
	TextDrawLetterSize(Textdraws[textdraw_SHOP_TUNING][2], 0.219666, 1.031703);
	TextDrawTextSize(Textdraws[textdraw_SHOP_TUNING][2], 10.000000, 43.000000);
	TextDrawAlignment(Textdraws[textdraw_SHOP_TUNING][2], 2);
	TextDrawColor(Textdraws[textdraw_SHOP_TUNING][2], -1);
	TextDrawUseBox(Textdraws[textdraw_SHOP_TUNING][2], 1);
	TextDrawBoxColor(Textdraws[textdraw_SHOP_TUNING][2], -1936945921);
	TextDrawSetShadow(Textdraws[textdraw_SHOP_TUNING][2], 0);
	TextDrawSetOutline(Textdraws[textdraw_SHOP_TUNING][2], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_SHOP_TUNING][2], 255);
	TextDrawFont(Textdraws[textdraw_SHOP_TUNING][2], 1);
	TextDrawSetProportional(Textdraws[textdraw_SHOP_TUNING][2], 1);
	TextDrawSetShadow(Textdraws[textdraw_SHOP_TUNING][2], 0);
	TextDrawSetSelectable(Textdraws[textdraw_SHOP_TUNING][2], true);

	Textdraws[textdraw_SHOP_TUNING][3] = TextDrawCreate(370.000000, 376.000000, "SIGUIENTE");
	TextDrawLetterSize(Textdraws[textdraw_SHOP_TUNING][3], 0.219666, 1.031703);
	TextDrawTextSize(Textdraws[textdraw_SHOP_TUNING][3], 10.000000, 43.000000);
	TextDrawAlignment(Textdraws[textdraw_SHOP_TUNING][3], 2);
	TextDrawColor(Textdraws[textdraw_SHOP_TUNING][3], -1);
	TextDrawUseBox(Textdraws[textdraw_SHOP_TUNING][3], 1);
	TextDrawBoxColor(Textdraws[textdraw_SHOP_TUNING][3], -1936945921);
	TextDrawSetShadow(Textdraws[textdraw_SHOP_TUNING][3], 0);
	TextDrawSetOutline(Textdraws[textdraw_SHOP_TUNING][3], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_SHOP_TUNING][3], 255);
	TextDrawFont(Textdraws[textdraw_SHOP_TUNING][3], 1);
	TextDrawSetProportional(Textdraws[textdraw_SHOP_TUNING][3], 1);
	TextDrawSetShadow(Textdraws[textdraw_SHOP_TUNING][3], 0);
	TextDrawSetSelectable(Textdraws[textdraw_SHOP_TUNING][3], true);

	Textdraws[textdraw_SHOP_TUNING][4] = TextDrawCreate(270.000000, 376.000000, "ANTERIOR");
	TextDrawLetterSize(Textdraws[textdraw_SHOP_TUNING][4], 0.219666, 1.031703);
	TextDrawTextSize(Textdraws[textdraw_SHOP_TUNING][4], 10.000000, 43.000000);
	TextDrawAlignment(Textdraws[textdraw_SHOP_TUNING][4], 2);
	TextDrawColor(Textdraws[textdraw_SHOP_TUNING][4], -1);
	TextDrawUseBox(Textdraws[textdraw_SHOP_TUNING][4], 1);
	TextDrawBoxColor(Textdraws[textdraw_SHOP_TUNING][4], -1936945921);
	TextDrawSetShadow(Textdraws[textdraw_SHOP_TUNING][4], 0);
	TextDrawSetOutline(Textdraws[textdraw_SHOP_TUNING][4], 0);
	TextDrawBackgroundColor(Textdraws[textdraw_SHOP_TUNING][4], 255);
	TextDrawFont(Textdraws[textdraw_SHOP_TUNING][4], 1);
	TextDrawSetProportional(Textdraws[textdraw_SHOP_TUNING][4], 1);
	TextDrawSetShadow(Textdraws[textdraw_SHOP_TUNING][4], 0);
	TextDrawSetSelectable(Textdraws[textdraw_SHOP_TUNING][4], true);
	return 1;
}

stock DestroyTextDraws()
{
	for (new i; i < sizeof(Textdraws); i++)
	{
		if (Textdraws[Textdraws_Enum:i] == INVALID_TEXT_DRAW) continue;
		TextDrawDestroy(Text:Textdraws[Textdraws_Enum:i]);
		Textdraws[Textdraws_Enum:i] = INVALID_TEXT_DRAW;
	}
	return 1;
}

public OnGameModeExit()
{
	AntiDeAMX();

	new date[24];
	getDateTime(date);
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i) && PLAYER_TEMP[i][pt_USER_LOGGED])
		{
			SetPlayerWantedLevelEx(i, 0);
			format(PI[i][pi_LAST_CONNECTION], 24, "%s", date);
			SavePlayerData(i);
			SavePlayerVehicles(i, false);
			SavePlayerWorkLevels(i);
			SavePlayerInventory(i);
		}
	}
	mysql_close(handle_db);
	return 1;
}

CMD:a(playerid, params[]) {
	if (isnull(params)) return ShowPlayerMessage(playerid, "~>~ /a <texto>");

  	new string[145];
    format(string, sizeof(string), "{%s}[Admin Chat] {f5f5f5}%s [%s]: %s", ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], PI[playerid][pi_NAME], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], params);
	SendChatMessageToAdmins(string);
	return 1;
}

#define MIN_SECONDS_BETWEEN_TALKS 100 // Deben pasar al menos 1 segundos para volver a hablar.
hook OnPlayerText(playerid, text[])
{
	if (PLAYER_TEMP[playerid][pt_KICKED]) return 0;
	
	if (PLAYER_TEMP[playerid][pt_GAME_STATE] != GAME_STATE_NORMAL || PLAYER_TEMP[playerid][pt_SELECT_TEXTDRAW] || PI[playerid][pi_STATE] == ROLEPLAY_STATE_HOSPITAL) { SendPlayerClientMessage(playerid, "Ahora no puedes hablar."); return 0; }
	if (text[0] == '#' && PI[playerid][pi_ADMIN_LEVEL] > 1) {
		new string[145];
		format(string, sizeof(string), "{%s}[Admin Chat] {f5f5f5}%s [%s]: %s", ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], PI[playerid][pi_NAME], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], text[1]);
		SendChatMessageToAdmins(string);
		return 0;
	}

	new interval = GetTickDiff(GetTickCount(), PLAYER_TEMP[playerid][pt_ANTIFLOOD_TALK]);
	if (interval < MIN_SECONDS_BETWEEN_TALKS)
	{
		if (ac_Info[CHEAT_TEXT_SPAMMER][ac_Enabled])
		{
			if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_TEXT_SPAMMER][p_ac_info_IMMUNITY])
			{
				if (interval < 50)
				{
					if (!ac_Info[CHEAT_TEXT_SPAMMER][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_TEXT_SPAMMER, float(interval));
					else
					{
						if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_TEXT_SPAMMER][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_TEXT_SPAMMER][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_TEXT_SPAMMER][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_TEXT_SPAMMER][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_TEXT_SPAMMER][p_ac_info_LAST_DETECTION] = gettime();
						if (PLAYER_AC_INFO[playerid][CHEAT_TEXT_SPAMMER][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_TEXT_SPAMMER][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_TEXT_SPAMMER, float(interval));
					}
				}
			}
		}
		SendPlayerClientMessage(playerid, "Calmate."); 
		return 0; 
	}
	PLAYER_TEMP[playerid][pt_ANTIFLOOD_TALK] = GetTickCount();
	
	if (PLAYER_TEMP[playerid][pt_POLICE_CALL_NAME])
	{
		format(PLAYER_TEMP[playerid][pt_POLICE_CALL_NAME_STR], 24, "%s", text);
		SendPlayerClientMessage(playerid, "Operadora: de acuerdo, describe brevemente lo que sucede para enviar una patrulla.");
		PLAYER_TEMP[playerid][pt_POLICE_CALL_NAME] = false;
		PLAYER_TEMP[playerid][pt_POLICE_CALL_DESCRIPTION] = true;
		return 0;
	}
	if (PLAYER_TEMP[playerid][pt_POLICE_CALL_DESCRIPTION])
	{
		PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL] = false;
		PLAYER_TEMP[playerid][pt_POLICE_CALL_NAME] = false;
		PLAYER_TEMP[playerid][pt_POLICE_CALL_DESCRIPTION] = false;
		
		
		new city[45], zone[45];
		GetPlayerZones(playerid, city, zone);
			
		new message[145];
		format(message, sizeof message, "{"#POLICE_COLOUR"}[Central policia] {F5F5F5}Reporte {f5f5f5}[%s (%d), gps: %s, %s]: {F5F5F5}%s", PLAYER_TEMP[playerid][pt_POLICE_CALL_NAME_STR], playerid, city, zone, text);
		SendPoliceRadioMessage(-1, message);

		SendPlayerClientMessage(playerid, "Operadora: su petición fue enviada, en breve una patrulla acudirá.");
		SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}Llamada finalizada.");
		return 0;
	}
	
	new str_text[190];
	if (text[0] == '!')
	{
		if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET] && PLAYER_TEMP[playerid][pt_WORKING_IN] == WORK_POLICE)
		{
			if (text[1] == '!') format(str_text, sizeof str_text, "{cccccc}** [Radio] (( %s: %s ))", PLAYER_TEMP[playerid][pt_NAME], text[2]);
			else format(str_text, sizeof str_text, "{8D8DFF}** [Radio]{FF8C00} %s %s: {F5F5F5}%s", POLICE_RANKS[ PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] ], PLAYER_TEMP[playerid][pt_NAME], text[1]);
			
			SendPoliceRadioMessage(PLAYER_TEMP[playerid][pt_POLICE_RADIO], str_text);
			return 0;
		}
		
		if (PI[playerid][pi_CREW])
		{
			if (text[1] == '!') format(str_text, sizeof str_text, "{%06x}** [Radio] (( %s{f5f5f5}: %s {%06x}))", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME], text[2], CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8);
			else format(str_text, sizeof str_text, "{%06x}** [Radio] %s %s: %s", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_NAME], text[1]);
			
			SendMessageToCrewMembers(PI[playerid][pi_CREW], str_text);
			return 0;
		}
	}

	if (GetPlayerState(playerid) != PLAYER_STATE_SPECTATING) {
		if (PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_STATE] == CALL_STATE_ESTABLISHED)
		{
			format(str_text, 145, "%s dice (por teléfono): %s", PLAYER_TEMP[playerid][pt_NAME], text);
			SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_PLAYERID], "{f5f5f5}Teléfono: %s: %s", convertPhoneNumber(PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_PLAYERID], PI[playerid][pi_PHONE_NUMBER]), text);
		}
		else
		{
			if (GetPlayerDrunkLevel(playerid) > 2000) format(str_text, 145, "%s dice (ebrio): %s", PLAYER_TEMP[playerid][pt_NAME], text);
			else format(str_text, 145, "%s dice: %s", PLAYER_TEMP[playerid][pt_NAME], text);
		}
		ProxDetector(playerid, 15.0, str_text, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5, 85);
	} else {
		ShowPlayerMessage(playerid, "No puedes ~r~hablar~w~ ahora.");
	}
	return 0;
}

#define MIN_TIME_BETWEEN_DOUBT	60
CMD:duda(playerid, params[])
{
	if (!PI[playerid][pi_DOUBT_CHANNEL]) return SendPlayerClientMessage(playerid, "Para enviar una duda primero debes activar el canal de dudas con ~b~/panel");
	if (isnull(params)) return ShowPlayerMessage(playerid, "~>~ ~w~/duda ~b~DUDA");
	
	if (PI[playerid][pi_MUTE] > gettime())
	{
		new seconds = PI[playerid][pi_MUTE] - gettime();
		SendPlayerClientMessage(playerid, "{cccccc}Estás silenciado por %s minutos.", TimeConvert(seconds));
		return 1;
	}
	
	if (!PI[playerid][pi_ADMIN_LEVEL]) {
		if (gettime() < PLAYER_TEMP[playerid][pt_DOUBT_CHANNEL_TIME] + MIN_TIME_BETWEEN_DOUBT) {
			new time = (MIN_TIME_BETWEEN_DOUBT-(gettime()-PLAYER_TEMP[playerid][pt_DOUBT_CHANNEL_TIME]));
			SendPlayerClientMessage(playerid, "{cccccc}Tienes que esperar %s minutos para volver a realizar otra consulta.", TimeConvert(time));
			return 1;
		}
	} else {
		if (!PLAYER_TEMP[playerid][pt_ADMIN_SERVICE]) return ShowPlayerMessage(playerid, "Para usar ~r~comandos administrativos~w~ debes estar en ~y~/duty~w~.");
	}
	
 	SendMessageToDoubtChannel(playerid, params, 100);
	return 1;
}
alias:duda("d");

CMD:t(playerid, params[]) //pi_GLOBAL_CHANNEL
{
	if(PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL) return ShowPlayerMessage(playerid, "No puedes usar este comando.");
	if (!PI[playerid][pi_GLOBAL_CHANNEL]) return SendPlayerClientMessage(playerid, "Para enviar un mensaje primero debes activar el canal de twitter con ~b~/panel");
	if (isnull(params)) return ShowPlayerMessage(playerid, "~>~ ~w~/t ~b~TWITTER");

	if (PI[playerid][pi_MUTE] > gettime())
	{
		new seconds = PI[playerid][pi_MUTE] - gettime();
		SendPlayerClientMessage(playerid, "{cccccc}Estás silenciado por %s minutos.", TimeConvert(seconds));
		return 1;
	}

	if (!PI[playerid][pi_ADMIN_LEVEL])
	{
		if (gettime() < PLAYER_TEMP[playerid][pt_GLOBAL_CHANNEL_TIME] + 20)
		{
			new time = (20-(gettime()-PLAYER_TEMP[playerid][pt_GLOBAL_CHANNEL_TIME]));
			SendPlayerClientMessage(playerid, "{cccccc}Tienes que esperar %s minutos para usar este canal.", TimeConvert(time));
			return 1;
		}
	}
	
 	SendMessageToGlobalChannel(playerid, params, true, 140, false);
	return 1;
}

CMD:ta(playerid, params[]) //pi_GLOBAL_CHANNEL
{
	if (!PI[playerid][pi_GLOBAL_CHANNEL]) return ShowPlayerMessage(playerid, "Para enviar un mensaje primero debes activar el canal twitter con ~b~/panel");
	if (isnull(params)) return ShowPlayerMessage(playerid, "~>~ ~w~/ta ~b~TWITTER");

	if (PI[playerid][pi_MUTE] > gettime())
	{
		new seconds = PI[playerid][pi_MUTE] - gettime();
		SendPlayerClientMessage(playerid, "{cccccc}Estás silenciado por %s minutos.", TimeConvert(seconds));
		return 1;
	}

	if (!PI[playerid][pi_ADMIN_LEVEL])
	{
		if (gettime() < PLAYER_TEMP[playerid][pt_GLOBAL_CHANNEL_TIME] + 20)
		{
			new time = (20-(gettime()-PLAYER_TEMP[playerid][pt_GLOBAL_CHANNEL_TIME]));
			SendPlayerClientMessage(playerid, "{cccccc}Tienes que esperar %s minutos para usar este canal.", TimeConvert(time));
			return 1;
		}
	}
	
 	SendMessageToGlobalChannel(playerid, params, false, 140, false);
	return 1;
}

CMD:tap(playerid, params[]) //pi_GLOBAL_CHANNEL
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return ShowPlayerMessage(playerid, "No eres policia.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return ShowPlayerMessage(playerid, "No estás de servicio como policia.");
	if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 11) return ShowPlayerMessage(playerid, "No eres comisario.");
	if (!PI[playerid][pi_GLOBAL_CHANNEL]) return ShowPlayerMessage(playerid, "Para enviar un mensaje primero debes activar el canal twitter con ~b~/panel");
	if (isnull(params)) return ShowPlayerMessage(playerid, "~>~ ~w~/tap ~b~TWITTER");

	if (PI[playerid][pi_MUTE] > gettime())
	{
		new seconds = PI[playerid][pi_MUTE] - gettime();
		SendPlayerClientMessage(playerid, "{cccccc}Estás silenciado por %s minutos.", TimeConvert(seconds));
		return 1;
	}

	if (!PI[playerid][pi_ADMIN_LEVEL])
	{
		if (gettime() < PLAYER_TEMP[playerid][pt_GLOBAL_CHANNEL_TIME] + 20)
		{
			new time = (20-(gettime()-PLAYER_TEMP[playerid][pt_GLOBAL_CHANNEL_TIME]));
			SendPlayerClientMessage(playerid, "{cccccc}Tienes que esperar %s minutos para usar este canal.", TimeConvert(time));
			return 1;
		}
	}
	
 	SendMessageToGlobalChannel(playerid, params, true, 140, true);
	return 1;
}

CMD:ma(playerid, params[]) //pi_SELL_CHANNEL
{
	if(PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL) return ShowPlayerMessage(playerid, "No puedes usar este comando.");
	if (!PI[playerid][pi_SELL_CHANNEL]) return ShowPlayerMessage(playerid, "Para enviar un mensaje primero debes activar el canal de anuncios con ~b~/panel");
	if (isnull(params)) return ShowPlayerMessage(playerid, "~>~ ~w~/ma ~g~ANUNCIO");

	if (PI[playerid][pi_MUTE] > gettime())
	{
		new seconds = PI[playerid][pi_MUTE] - gettime();
		SendPlayerClientMessage(playerid, "{cccccc}Estás silenciado por %s minutos.", TimeConvert(seconds));
		return 1;
	}

	if (!PI[playerid][pi_ADMIN_LEVEL]) {
		if (gettime() < PLAYER_TEMP[playerid][pt_GLOBAL_CHANNEL_TIME] + 20) {
			new time = (20-(gettime()-PLAYER_TEMP[playerid][pt_GLOBAL_CHANNEL_TIME]));
			SendPlayerClientMessage(playerid, "{cccccc}Tienes que esperar %s minutos para usar este canal.", TimeConvert(time));
			return 1;
		}
	}
	
 	SendMessageToAnnounceChannel(playerid, params, 140);
	return 1;
}

CMD:g(playerid, params[])
{
	if (isnull(params)) return ShowPlayerMessage(playerid, "~>~ ~w~/gritar ~b~[TEXTO]");
	
	new str_text[190];
	format(str_text, 190, "%s grita: ¡%s!", PLAYER_TEMP[playerid][pt_NAME], params);
	ProxDetector(playerid, 25.0, str_text, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5, 85);
	return 1;
}
alias:g("gritar");

CMD:s(playerid, params[])
{
	if (isnull(params)) return ShowPlayerMessage(playerid, "~>~ ~w~/susurrar ~b~[TEXTO]");
	
	new str_text[190];
	format(str_text, sizeof(str_text), "%s susurra: %s", PLAYER_TEMP[playerid][pt_NAME], params);
	ProxDetector(playerid, 5.0, str_text, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5, 85);
	return 1;
}
alias:s("susurrar");

CMD:b(playerid, params[])
{
	if (isnull(params)) return ShowPlayerMessage(playerid, "~>~ ~w~/b ~b~[TEXTO]");
	
    new str_text[190];
    format(str_text, sizeof(str_text), "ID: %d | %s: (( %s ))", playerid, PLAYER_TEMP[playerid][pt_NAME], params);
	ProxDetector(playerid, 15.0, str_text, COLOR_FADE1, COLOR_FADE2, COLOR_FADE3, COLOR_FADE4, COLOR_FADE5, 85);
	return 1;
}

CMD:do(playerid, params[])
{
	if (isnull(params)) return ShowPlayerMessage(playerid, "~>~ ~w~/do ~b~[TEXTO]");

    new str_text[190];
    format(str_text, sizeof(str_text), "* %s (( %s ))", PLAYER_TEMP[playerid][pt_NAME], params);
	ProxDetector(playerid, 15.0, str_text, 0xADFF2FAA, 0xADFF2FAA, 0xADFF2FAA, 0xADFF2FAA, 0xADFF2FAA, 85);
	PLAYER_TEMP[playerid][pt_PERFORMED_ENVIRONMET] = strlen(params);
	return 1;
}

CMD:me(playerid, params[])
{
	if (isnull(params)) return ShowPlayerMessage(playerid, "~>~ ~w~/me ~b~[TEXTO]");
	
	SendPlayerAction(playerid, params);
	PLAYER_TEMP[playerid][pt_PERFORMED_ACTION] = strlen(params);
	return 1;
}

CMD:n(playerid)
{
	CallLocalFunction("OnPlayerKeyStateChange", "ddd", playerid, KEY_NO, KEY_NO);
	return 1;
}

CMD:y(playerid)
{
	CallLocalFunction("OnPlayerKeyStateChange", "ddd", playerid, KEY_YES, KEY_YES);
	return 1;
}

CMD:h(playerid)
{
	CallLocalFunction("OnPlayerKeyStateChange", "ddd", playerid, KEY_CTRL_BACK, KEY_CTRL_BACK);
	return 1;
}

CMD:c(playerid)
{
	CallLocalFunction("OnPlayerKeyStateChange", "ddd", playerid, KEY_CROUCH, KEY_CROUCH);
	return 1;
}

CMD:2(playerid)
{
	CallLocalFunction("OnPlayerKeyStateChange", "ddd", playerid, KEY_SUBMISSION, KEY_SUBMISSION);
	return 1;
}

CMD:experiencia(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ShowPlayerSkills(playerid, playerid);
	return 1;
}
alias:experiencia("exp", "skills");

CMD:est(playerid, params[])
{
	ShowPlayerStats(playerid, playerid);
	return 1;
}
alias:est("estadisticas", "cuenta");

CMD:inv(playerid)
{
	ShowPlayerInventory(playerid, playerid);
	return 1;
}
alias:inv("inventario");

ptask AutoSavePlayerData[30000](playerid) {
	if (PLAYER_TEMP[playerid][pt_USER_LOGGED]) {
		SavePlayerData(playerid);
		SavePlayerVehicles(playerid, false);
		SavePlayerWorkLevels(playerid);
		SavePlayerInventory(playerid);
	}
}

ptask UpdatePlayerInfo[5000](playerid) {
	if (PLAYER_TEMP[playerid][pt_USER_LOGGED]) {
		if (PI[playerid][pi_WANTED_LEVEL] > 0) {
			SetWantedMarkerToPolice(playerid);
		}

		if (PLAYER_TEMP[playerid][pt_REINFORCEMENT]) {
			if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) {
				foreach (new i : Player) {
					if (IsPlayerConnected(i)) {
						if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL) {
							if (i == playerid) continue;
							if (!PLAYER_WORKS[i][WORK_POLICE][pwork_SET]) continue;
							if (PLAYER_TEMP[i][pt_WORKING_IN] != WORK_POLICE) continue;
							
							SetPlayerMarkerForPlayer(i, playerid, 0x0f4bffff);
						}
					}
				}
			}
			
			if (PI[playerid][pi_CREW]) {
				foreach (new i : Player) {
					if (IsPlayerConnected(i)) {
						if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL) {
							if (i == playerid) continue;
							if (PI[i][pi_CREW] != PI[playerid][pi_CREW]) continue;
							
							SetPlayerMarkerForPlayer(i, playerid, CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR]);
						}
					}
				}
			}
		}
	}
}

CMD:ayuda(playerid, params[])
{
	switch(YHash(params, false))
	{
		case _I<general>: ShowDialog(playerid, DIALOG_HELP_GENERAL);
		case _I<informacion>: ShowDialog(playerid, DIALOG_HELP_INFO);
		case _I<personaje>: ShowDialog(playerid, DIALOG_HELP_CHARACTER);
		case _I<propiedades>: ShowDialog(playerid, DIALOG_HELP_PROPERTIES);
		case _I<reportar>: ShowDialog(playerid, DIALOG_HELP_REPORT);
		case _I<trabajos>: ShowDialog(playerid, DIALOG_HELP_WORKS);
		case _I<vehiculos>: ShowDialog(playerid, DIALOG_HELP_VEHICLES);
		case _I<bandas>: ShowDialog(playerid, DIALOG_HELP_CREWS);
		case _I<vip>: ShowDialog(playerid, DIALOG_HELP_SU);

		default: ShowDialog(playerid, DIALOG_HELP);
	}
	return 1;
}

CMD:pedir(playerid, params[])
{
	new index = GetPlayerFastFoodIndex(playerid);
	if (index == -10) return SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");

	switch(Fast_Food_Positions[index][fast_food_INTERIOR_TYPE])
	{
		case INTERIOR_BURGER_SHOT: ShowDialog(playerid, DIALOG_FOOD_BURGER);
		case INTERIOR_PIZZA: ShowDialog(playerid, DIALOG_FOOD_PIZZA);
		case INTERIOR_CLUCKIN_BELL: ShowDialog(playerid, DIALOG_FOOD_CLUCKIN);
		case -1: ShowDialog(playerid, DIALOG_FOOD_BURGER);
	}
	return 1;
}

CMD:gps(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	if (!PI[playerid][pi_GPS])
	{
		SendPlayerClientMessage(playerid, "No tienes ningún GPS, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	
	Auto_SendPlayerAction(playerid, "mira su GPS.");
	ShowDialog(playerid, DIALOG_PLAYER_GPS);
	return 1;
}

CMD:tiempo(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL)
	{
		new time = PI[playerid][pi_POLICE_JAIL_TIME] - (gettime() - PLAYER_TEMP[playerid][pt_ENTER_JAIL_TIME]);
		if (time <= 0)
		{
			UnjailPlayer(playerid);
			return 1;
		}
		SendPlayerClientMessage(playerid, "Te quedan %s minutos de condena.", TimeConvert(time));
	}
	else SendPlayerClientMessage(playerid, "No estás en la cárcel.");
	return 1;
}

CMD:mapa(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	if (!PI[playerid][pi_GPS])
	{
		SendPlayerClientMessage(playerid, "No tienes ningún GPS, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	
	if (PLAYER_TEMP[playerid][pt_GPS_MAP]) HidePlayerGpsMap(playerid);
	else ShowPlayerGpsMap(playerid);
	return 1;
}

CMD:stop(playerid, params[])
{
	StopAudioStreamForPlayer(playerid);
	return 1;
}

CMD:pass(playerid, params[])
{
	ShowDialog(playerid, DIALOG_CHANGE_PASSWORD);
	return 1;
}
alias:pass("contra", "cpass");

CMD:gcp(playerid, params[])
{
	if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT]))
	{
		DestroyDynamicCP(PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT]);
		PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT] = INVALID_STREAMER_ID;
		
		SendPlayerClientMessage(playerid, "Has cancelado la ruta antigua de tu GPS.");
	}
	else SendPlayerClientMessage(playerid, "No tienes ningún punto marcado en tu GPS.");
	return 1;
}

CMD:movil(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	if (!PI[playerid][pi_PHONE_NUMBER])
	{
		SendPlayerClientMessage(playerid, "No tienes ningún teléfono, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	if (PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL]) SendPlayerClientMessage(playerid, "Estás en una llamada.");
	
	Auto_SendPlayerAction(playerid, "mira su teléfono.");
	ShowDialog(playerid, DIALOG_PHONE);
	return 1;
}
alias:movil("celular", "telefono", "tlf");

CMD:guia(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	if (!PI[playerid][pi_PHONE_RESOLVER])
	{
		SendPlayerClientMessage(playerid, "No tienes una guía telefónica, puedes ir a cualquier 24/7 para comprar una.");
		return 1;
	}
	
	if (sscanf(params, "u", params[0])) return ShowPlayerMessage(playerid, "~>~ ~w~/guia [PlayerID/Nombre]");
	if (!IsPlayerConnected(params[0])) return SendPlayerClientMessage(playerid, "Jugador desconectado.");
	
	if (!PI[params[0]][pi_PHONE_NUMBER]) return SendPlayerClientMessage(playerid, "Este jugador no tiene teléfono.");
	if (!PI[params[0]][pi_PHONE_VISIBLE_NUMBER]) return SendPlayerClientMessage(playerid, "Este jugador ha decidido no mostrar su número en la guía.");
	
	SendPlayerClientMessage(playerid, "Persona encontrada:~n~~n~~b~Nombre: ~w~%s~n~~b~Teléfono: ~w~%d.", PLAYER_TEMP[params[0]][pt_NAME], PI[params[0]][pi_PHONE_NUMBER]);
	return 1;
}

CMD:sguia(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	if (!PI[playerid][pi_PHONE_NUMBER])
	{
		SendPlayerClientMessage(playerid, "No tienes ningún teléfono, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	
	if (PI[playerid][pi_PHONE_VISIBLE_NUMBER])
	{
		PI[playerid][pi_PHONE_VISIBLE_NUMBER] = false;
		SendPlayerClientMessage(playerid, "Tu número no aparecerá ahora en la guía telefónica.");
	}
	else
	{
		PI[playerid][pi_PHONE_VISIBLE_NUMBER] = true;
		SendPlayerClientMessage(playerid, "Tu número aparecerá en la guía telefónica.");
	}
	return 1;
}

CMD:sms(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	if (!PI[playerid][pi_PHONE_NUMBER])
	{
		SendPlayerClientMessage(playerid, "No tienes ningún teléfono, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_OFF) return SendPlayerClientMessage(playerid, "Tu teléfono está apagado, para encenderlo usa /movil.");
	if (PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL]) return SendPlayerClientMessage(playerid, "Estás en una llamada.");
	
	new params_message[64], params_number, params_contact[24];
	if (!sscanf(params, "ds[64]", params_number, params_message))
	{
		if (params_number <= 0) SendPlayerClientMessage(playerid, "El número destino no es válido.");
		else
		{
			inline OnPhoneChecked()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					if (rows)
					{
						new id, connected, pid;
						cache_get_value_name_int(0, "id", id);
						cache_get_value_name_int(0, "connected", connected);
						cache_get_value_name_int(0, "playerid", pid);

						if (connected) RegisterPhoneMessage(PI[playerid][pi_ID], id, params_message, 0);
						else RegisterPhoneMessage(PI[playerid][pi_ID], id, params_message, 1);
						if (connected)
						{
							if (PI[pid][pi_PHONE_STATE] == PHONE_STATE_ON)
							{
								SendPlayerClientMessage(pid, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {f5f5f5}Remitente: {F5F5F5}%s {f5f5f5}Mensaje: {F5F5F5}%s", convertPhoneNumber(pid, PI[playerid][pi_PHONE_NUMBER]), params_message);
							}
						}
						SendPlayerClientMessage(playerid, "Mensaje enviado a ~b~%s~w~.", convertPhoneNumber(playerid, params_number));
					}
					else SendPlayerClientMessage(playerid, "El número destino no es válido.");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, connected, playerid FROM player WHERE phone_number = %d;", params_number);
			MySQL_TQueryInline(handle_db, using inline OnPhoneChecked, QUERY_BUFFER);
		}
	}
	else if (!sscanf(params, "s[24]s[64]", params_contact, params_message))
	{
		inline OnPhoneChecked()
		{
			new rows;
			if (cache_get_row_count(rows))
			{
				if (rows)
				{
					new number, id, connected, pid, bool:isnull_id;
					cache_is_value_name_null(0, "id", isnull_id);
					if (!isnull_id) {
						cache_get_value_name_int(0, "number", number);
						cache_get_value_name_int(0, "id", id);
						cache_get_value_name_int(0, "connected", connected);
						cache_get_value_name_int(0, "playerid", pid);

						if (connected) RegisterPhoneMessage(PI[playerid][pi_ID], id, params_message, 0);
						else RegisterPhoneMessage(PI[playerid][pi_ID], id, params_message, 1);

						if (connected)
						{
							if (PI[pid][pi_PHONE_STATE] == PHONE_STATE_ON)
							{
								SendPlayerClientMessage(pid, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {f5f5f5}Remitente: {F5F5F5}%s {f5f5f5}Mensaje: {F5F5F5}%s", convertPhoneNumber(pid, PI[playerid][pi_PHONE_NUMBER]), params_message);
							}
						}
						SendPlayerClientMessage(playerid, "Mensaje enviado a ~b~%s~w~.", convertPhoneNumber(playerid, number));
					}
					else SendPlayerClientMessage(playerid, "El número destino no es válido.");
				}
				else SendPlayerClientMessage(playerid, "El número destino no es válido.");
			}
		}
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT pbook.number, player.id, player.connected, player.playerid FROM pbook LEFT JOIN player ON pbook.number = player.phone_number WHERE pbook.id_player = %d AND pbook.name LIKE '%%%e%%' LIMIT 1;", PI[playerid][pi_ID], params_contact);
		MySQL_TQueryInline(handle_db, using inline OnPhoneChecked, QUERY_BUFFER);
	}
	else SendPlayerClientMessage(playerid, "Usa /sms [numero o contacto]");
	return 1;
}

CMD:agenda(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	if (!PI[playerid][pi_PHONE_NUMBER])
	{
		SendPlayerClientMessage(playerid, "No tienes ningún teléfono, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_OFF) return SendPlayerClientMessage(playerid, "Tu teléfono está apagado, para encenderlo usa /movil.");
	if (PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL]) return SendPlayerClientMessage(playerid, "Estás en una llamada.");
	
	ShowDialog(playerid, DIALOG_PHONE_BOOK);
	return 1;
}

HandleStaticPhoneNumbers(playerid, call_number)
{
	switch(call_number)
	{
		case 911:
		{
			if (PI[playerid][pi_LEVEL] < 2) return SendPlayerClientMessage(playerid, "Debes ser al menos nivel 2 para llamar a la policia.");

			PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL] = true;
			PLAYER_TEMP[playerid][pt_POLICE_CALL_NAME] = true;
			PLAYER_TEMP[playerid][pt_POLICE_CALL_DESCRIPTION] = false;
			
			SendPlayerClientMessage(playerid, "{f5f5f5}Operadora: ha llamado a la central de policia, indícanos su nombre por favor.");
			return 1;
		}
		case 450: //Taxi
		{
			if (PLAYER_TEMP[playerid][pt_WANT_TAXI]) {
				PLAYER_TEMP[playerid][pt_WANT_TAXI] = false;
				DisablePlayerTaxiMark(playerid);
				SendPlayerClientMessage(playerid, "{f5f5f5}Has cancelado el taxi.");
			} else {
				PLAYER_TEMP[playerid][pt_WANT_TAXI] = true;
				SendPlayerClientMessage(playerid, "{f5f5f5}Tu llamada se ha enviado a los taxistas disponibles, espera a que llegue un taxi.");
				SendPlayerClientMessage(playerid, "{f5f5f5}Vuelve a llamar a este número si ya no necesitas un taxi.");
				SendAlertToTaxiDrivers(playerid);
			}
			return 1;
		}
		case 570: //Mecanico
		{
			if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return ShowPlayerMessage(playerid, "DEBES ESTAR EN UN VEHICULO AVERIADO PARA LLAMAR AL MECANICO.");
			new vehicleid = GetPlayerVehicleID(playerid);
			if (vehicleid == INVALID_VEHICLE_ID) return ShowPlayerMessage(playerid, "DEBES ESTAR EN UN VEHICULO AVERIADO PARA LLAMAR AL MECANICO.");

			if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] != VEHICLE_STATE_DAMAGED) {
				ShowPlayerMessage(playerid, "DEBES ESTAR EN UN VEHICULO AVERIADO PARA LLAMAR AL MECANICO.");
				return 1;
			}

			if (PLAYER_TEMP[playerid][pt_WANT_MECHANIC]) {
				PLAYER_TEMP[playerid][pt_WANT_MECHANIC] = false;
				ShowPlayerMessage(playerid, "HAS CANCELADO EL MECANICO");
			} else {
				PLAYER_TEMP[playerid][pt_WANT_MECHANIC] = true;
				ShowPlayerMessage(playerid, "VUELVE A LLAMAR A ESTE NUMERO SI YA ~b~NO NECESITAS~w~ UN MECANICO");
			}
			return 1;
		}
		case 580: {
			if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return ShowPlayerMessage(playerid, "No estas de pie.");

			ShowCraneDialog(playerid);
			return 1;
		}
		case 666: {
			SendPlayerClientMessage(playerid, "{ff0000}Mirar a las estrellas es mirar al pasado, no mires.");
			return 1;
		}
	}
	return 0;
}

CMD:llamar(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	if (!PI[playerid][pi_PHONE_NUMBER])
	{
		SendPlayerClientMessage(playerid, "No tienes ningún teléfono, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_OFF) return SendPlayerClientMessage(playerid, "Tu teléfono está apagado, para encenderlo usa /movil.");
	if (PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL]) return SendPlayerClientMessage(playerid, "Estás en una llamada.");

	new params_number, params_contact[24];
	if (!sscanf(params, "d", params_number))
	{
		if (params_number <= 0) SendPlayerClientMessage(playerid, "El número destino no es válido.");
		else
		{
			if (!HandleStaticPhoneNumbers(playerid, params_number))
			{
				inline OnPhoneChecked()
				{
					new rows;
					if (cache_get_row_count(rows))
					{
						if (rows)
						{
							new id, connected, pid;
							cache_get_value_name_int(0, "id", id);
							cache_get_value_name_int(0, "connected", connected);
							cache_get_value_name_int(0, "playerid", pid);

							if (!connected) ShowPlayerMessage(playerid, "El número al que intentas llamar está fuera de cobertura (desconectado).");
							else
							{
								if (pid == playerid) return ShowPlayerMessage(playerid, "El número al que intentas llamar es el tuyo.");
								if (PI[pid][pi_PHONE_STATE] == PHONE_STATE_OFF) return ShowPlayerMessage(playerid, "El número al que intentas llamar está apagado o fuera de cobertura.");
								if (PLAYER_TEMP[pid][pt_PLAYER_IN_CALL]) return ShowPlayerMessage(playerid, "El número al que intentas llamar está en otra llamada.");
								
								SendPlayerClientMessage(pid, "{"#PRIMARY_COLOR"}[Llamada entrante] {f5f5f5}%s te está llamando, para responser usa {"#YELLOW_COLOR"}/responder {f5f5f5}o {ff0000}/colgar{f5f5f5}.", convertPhoneNumber(pid, PI[playerid][pi_PHONE_NUMBER]));
								PLAYER_TEMP[pid][pt_PLAYER_IN_CALL] = true;
								PLAYER_TEMP[pid][pt_PLAYER_PHONE_CALL_STATE] = CALL_STATE_INCOMING_CALL;
								PLAYER_TEMP[pid][pt_PLAYER_PHONE_CALL_PLAYERID] = playerid;
								
								SendPlayerClientMessage(playerid, "{f5f5f5}Llamando a {"#YELLOW_COLOR"}%s{f5f5f5}...", convertPhoneNumber(playerid, params_number));
								PLAYER_TEMP[playerid][pt_TIMERS][6] = SetTimerEx("NoCallResponse", 15000, false, "i", playerid);
								PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL] = true;
								PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_STATE] = CALL_STATE_WAITING_RESPONSE;
								PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] = pid;
								PlayerPlaySoundEx(playerid, 3600, 0.0, 0.0, 0.0);
							}
						}
						else SendPlayerClientMessage(playerid, "El número destino no es válido.");
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, connected, playerid FROM player WHERE phone_number = %d;", params_number);
				MySQL_TQueryInline(handle_db, using inline OnPhoneChecked, QUERY_BUFFER);
			}
		}
	}
	else if (!sscanf(params, "s[24]", params_contact))
	{
		if (!strcmp(params_contact, "policia", true)) HandleStaticPhoneNumbers(playerid, 911);
		else if (!strcmp(params_contact, "taxi", true)) HandleStaticPhoneNumbers(playerid, 450);
		else if (!strcmp(params_contact, "mecanico", true)) HandleStaticPhoneNumbers(playerid, 570);
		else if (!strcmp(params_contact, "grua", true)) HandleStaticPhoneNumbers(playerid, 580);
		else
		{
			inline OnPhoneChecked()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					if (rows)
					{
						new number, id, connected, pid, bool:isnull_id;
						cache_is_value_name_null(0, "id", isnull_id);
						if (!isnull_id) {
							cache_get_value_name_int(0, "number", number);
							cache_get_value_name_int(0, "id", id);
							cache_get_value_name_int(0, "connected", connected);
							cache_get_value_name_int(0, "playerid", pid);

							if (!connected) ShowPlayerMessage(playerid, "El número al que intentas llamar está fuera de cobertura (desconectado).");
							else
							{
								if (pid == playerid) return ShowPlayerMessage(playerid, "El número al que intentas llamar es el tuyo.");
								if (PI[pid][pi_PHONE_STATE] == PHONE_STATE_OFF) return ShowPlayerMessage(playerid, "El número al que intentas llamar está apagado o fuera de cobertura.");
								if (PLAYER_TEMP[pid][pt_PLAYER_IN_CALL]) return ShowPlayerMessage(playerid, "El número al que intentas llamar está en otra llamada.");
								
								ShowPlayerMessage(pid, "{"#PRIMARY_COLOR"}[Llamada entrante] {f5f5f5}%s te está llamando, para responser usa {"#YELLOW_COLOR"}/responder {f5f5f5}o {ff0000}/colgar{f5f5f5}.", convertPhoneNumber(pid, PI[playerid][pi_PHONE_NUMBER]));
								PLAYER_TEMP[pid][pt_PLAYER_IN_CALL] = true;
								PLAYER_TEMP[pid][pt_PLAYER_PHONE_CALL_STATE] = CALL_STATE_INCOMING_CALL;
								PLAYER_TEMP[pid][pt_PLAYER_PHONE_CALL_PLAYERID] = playerid;
								
								ShowPlayerMessage(playerid, "{f5f5f5}Llamando a {"#YELLOW_COLOR"}%s{f5f5f5}...", convertPhoneNumber(playerid, number));
								PLAYER_TEMP[playerid][pt_TIMERS][6] = SetTimerEx("NoCallResponse", 15000, false, "i", playerid);
								PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL] = true;
								PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_STATE] = CALL_STATE_WAITING_RESPONSE;
								PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] = pid;
								PlayerPlaySoundEx(playerid, 3600, 0.0, 0.0, 0.0);
							}
						}
						else ShowPlayerMessage(playerid, "El número destino no es válido.");
					}
					else ShowPlayerMessage(playerid, "El número destino no es válido.");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT pbook.number, player.id, player.connected, player.playerid FROM pbook LEFT JOIN player ON pbook.number = player.phone_number WHERE pbook.id_player = %d AND pbook.name LIKE '%%%e%%' LIMIT 1;", PI[playerid][pi_ID], params_contact);
			MySQL_TQueryInline(handle_db, using inline OnPhoneChecked, QUERY_BUFFER);
		}
	}
	else ShowPlayerMessage(playerid, "~>~ /llamar [numero o contacto]");
	return 1;
}

CMD:responder(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	if (!PI[playerid][pi_PHONE_NUMBER])
	{
		SendPlayerClientMessage(playerid, "No tienes ningún teléfono, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_OFF) return SendPlayerClientMessage(playerid, "Tu teléfono está apagado, para encenderlo usa /movil.");
	
	if (!PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL]) return SendPlayerClientMessage(playerid, "No hay ninguna llamada entrante.");
	if (PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] == INVALID_PLAYER_ID) return SendPlayerClientMessage(playerid, "No hay ninguna llamada entrante."); 
	if (PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_STATE] != CALL_STATE_INCOMING_CALL) return SendPlayerClientMessage(playerid, "No hay ninguna llamada entrante.");
	
	new to_playerid = PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_PLAYERID];
	
	PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL] = true;
	PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_STATE] = CALL_STATE_ESTABLISHED;
	PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] = to_playerid;
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_USECELLPHONE);
	
	KillTimer(PLAYER_TEMP[to_playerid][pt_TIMERS][6]);
	PLAYER_TEMP[to_playerid][pt_PLAYER_IN_CALL] = true;
	PLAYER_TEMP[to_playerid][pt_PLAYER_PHONE_CALL_STATE] = CALL_STATE_ESTABLISHED;
	PLAYER_TEMP[to_playerid][pt_PLAYER_PHONE_CALL_PLAYERID] = playerid;
	SetPlayerSpecialAction(to_playerid, SPECIAL_ACTION_USECELLPHONE);
	
	SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}Llamada establecida, usa {ff0000}/colgar{f5f5f5} para terminarla.");
	SendPlayerClientMessage(to_playerid, "{"#PRIMARY_COLOR"}{f5f5f5}Llamada establecida, usa {ff0000}/colgar{f5f5f5} para terminarla.");
	return 1;
}

CMD:colgar(playerid, params[])
{
	if (!PI[playerid][pi_PHONE_NUMBER])
	{
		SendPlayerClientMessage(playerid, "No tienes ningún teléfono, puedes ir a cualquier 24/7 para comprar uno.");
		return 1;
	}
	if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_OFF) return SendPlayerClientMessage(playerid, "Tu teléfono está apagado, para encenderlo usa /movil.");
	
	if (!PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL]) return SendPlayerClientMessage(playerid, "No hay ninguna llamada entrante.");
	
	if (PLAYER_TEMP[playerid][pt_POLICE_CALL_NAME] || PLAYER_TEMP[playerid][pt_POLICE_CALL_DESCRIPTION])
	{
		PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL] = false;
		PLAYER_TEMP[playerid][pt_POLICE_CALL_NAME] = false;
		PLAYER_TEMP[playerid][pt_POLICE_CALL_DESCRIPTION] = false;
		SendPlayerClientMessage(playerid, "~r~Llamada finalizada~w~.");
		return 1;
	}
	
	if (PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] == INVALID_PLAYER_ID) return SendPlayerClientMessage(playerid, "No hay ninguna llamada entrante."); 
	
	switch(PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_STATE])
	{
		case CALL_STATE_WAITING_RESPONSE:
		{
			EndPhoneCall(playerid);
			ShowPlayerMessage(playerid, "Colgaste.");
		}
		case CALL_STATE_INCOMING_CALL:
		{
			EndPhoneCall(playerid);
			ShowPlayerMessage(playerid, "No has respondido la llamada.");
		}
		case CALL_STATE_ESTABLISHED:
		{
			EndPhoneCall(playerid);
			ShowPlayerMessage(playerid, "~r~Llamada finalizada~w~.");
		}
		default: ShowPlayerMessage(playerid, "No estás en ninguna llamada.");	
	}
	return 1;
}

CMD:panel(playerid, params[])
{
	ShowDialog(playerid, DIALOG_PLAYER_CONFIG);
	return 1;
}
alias:panel("config", "configuracion", "ajustes");

CMD:comprarcasa(playerid, params[])
{
	if (PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] == -1) return SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");
	if (ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] == INTERIOR_NO_INFO) return SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");

	
	new site_index = GetBuyPropertySiteIndexByIntTyp(ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE]);
	if (site_index == -1) return SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");

	if (!IsPlayerInRangeOfPoint(playerid, 1.0, BUY_PROPERTIES_SITES[site_index][site_X], BUY_PROPERTIES_SITES[site_index][site_Y], BUY_PROPERTIES_SITES[site_index][site_Z])) return SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");
	
	if (PI[playerid][pi_BANK_ACCOUNT] == 0) return SendPlayerClientMessage(playerid, "No puedes comprar una casa sin tener cuenta bancaria.");

	if (sscanf(params, "d", params[0])) return ShowPlayerMessage(playerid, "~>~ ~w~/comprarcasa [ID]");
	if (params[0] <= 0) return SendPlayerClientMessage(playerid, "Error: ID no es válida.");
	
	new player_properties = CountPlayerProperties(playerid);
	if (PI[playerid][pi_VIP])
	{
		if (player_properties >= MAX_SU_PROPERTIES) return SendPlayerClientMessage(playerid, "No puedes comprar más propiedades.");
	}
	else
	{
		if (player_properties >= MAX_NU_PROPERTIES)
		{
			SendPlayerClientMessage(playerid, "{"#YELLOW_COLOR"}{f5f5f5}¡Los jugadores {"#YELLOW_COLOR"}VIP {f5f5f5}pueden tener hasta %d propiedades! Usa {"#YELLOW_COLOR"}/ayuda {f5f5f5}si quieres ser VIP{f5f5f5}.", MAX_SU_PROPERTIES);
			SendPlayerClientMessage(playerid, "No puedes comprar más propiedades.");
			return 1;
		}
	}
	
	new index = GetPropertyIndexByID(params[0]);
	if (index == -1) return SendPlayerClientMessage(playerid, "Error: ID no es válida.");
	
	if (PROPERTY_INFO[index][property_SOLD]) return SendPlayerClientMessage(playerid, "Está propiedad ya está vendida.");
	if (PROPERTY_INFO[index][property_LEVEL] > PI[playerid][pi_LEVEL]) return SendPlayerClientMessage(playerid, "Necesitas ser como mínimo nivel %d para comprar esta propiedad.", PROPERTY_INFO[index][property_LEVEL]);
	if (PROPERTY_INFO[index][property_VIP_LEVEL] && !PI[playerid][pi_VIP]) return SendPlayerClientMessage(playerid, "Necesitas membresia VIP para comprar esta propiedad.", PROPERTY_INFO[index][property_VIP_LEVEL]);
	if (PROPERTY_INFO[index][property_EXTRA] > PI[playerid][pi_COINS]) return SendPlayerClientMessage(playerid, "Necesitas %d "SERVER_COIN" para comprar esta propiedad.", PROPERTY_INFO[index][property_EXTRA]);
	if (PI[playerid][pi_BANK_MONEY] >= PROPERTY_INFO[index][property_PRICE])
	{
		PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX] = index;
		ShowDialog(playerid, DIALOG_CONFIRM_BUY_PROPERTY);
	}
	else SendPlayerClientMessage(playerid, "No tienes fondos suficientes en tu cuenta, te faltan ~r~%s dólares ~w~para poder comprar esta propiedad.", number_format_thousand(PROPERTY_INFO[index][property_PRICE] - PI[playerid][pi_BANK_MONEY]));
	return 1;
}

GetPropertyIndexByID(id)
{
	for (new i = 0; i != MAX_PROPERTIES; i ++)
	{
		if (!PROPERTY_INFO[i][property_VALID]) continue;
		if (PROPERTY_INFO[i][property_ID] == id) return i;
	}
	return -1;
}

#define TIME_BETWEEN_GIVE_CASH	30 // segundos
CMD:dar(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	if (PI[playerid][pi_LEVEL] < 2) return SendPlayerClientMessage(playerid, "Debes ser al menos nivel 2 para usar este comando.");
	
	new option[24], to_playerid, extra;
	if (sscanf(params, "s[24]ud", option, to_playerid, extra)) return ShowPlayerMessage(playerid, "/dar Medicamento | Marihuana | crack | gamas~n~playerid | Cantidad");
	if (playerid == to_playerid) return SendPlayerClientMessage(playerid, "No puedes darte ati mismo.");

	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(to_playerid, pos[0], pos[1], pos[2]);
	if (!IsPlayerInRangeOfPoint(playerid, NEARS_PLAYERS_DISTANCE, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "Este jugador no está cerca tuya.");
	if (PLAYER_TEMP[to_playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "No puedes darle nada a este jugador ahora.");
	
	switch(YHash(option, false))
	{
		case _I<dinero>:
		{
			if (gettime() < PLAYER_TEMP[playerid][pt_LAST_GIVE_MONEY_TIME] + TIME_BETWEEN_GIVE_CASH)
			{
				new time = TIME_BETWEEN_GIVE_CASH - (gettime() - PLAYER_TEMP[playerid][pt_LAST_GIVE_MONEY_TIME]);
				SendPlayerClientMessage(playerid, "Debes de esperar %s minutos para volver a dar dinero.", TimeConvert(time));
				return 1;
			}
			
			if(!IsPlayerConnected(to_playerid) || !IsPlayerConnected(playerid)) {
				return 0;
			}

			if (extra < 0 || extra > PI[playerid][pi_CASH]) return SendPlayerClientMessage(playerid, "Cantidad de dinero incorrecta.");
			if (extra > 50000) return SendPlayerClientMessage(playerid, "Para dar tanto dinero tienes que hacerlo a través de transferencias bancarias.");
			
			if (GivePlayerCash(playerid, -extra, true, true) && GivePlayerCash(to_playerid, extra, true, false)) {
				ShowPlayerMessage(playerid, "Le has dado ~b~%s dólares~w~ a %s.", number_format_thousand(extra), PLAYER_TEMP[to_playerid][pt_NAME]);
				ShowPlayerMessage(to_playerid, "%s te ha dado ~b~%s dólares~w~.", PLAYER_TEMP[playerid][pt_NAME], number_format_thousand(extra));
				
				new action[64];
				format(action, sizeof action, "le da dinero a %s.", PLAYER_TEMP[to_playerid][pt_NAME]);
				Auto_SendPlayerAction(playerid, action);
				PLAYER_TEMP[playerid][pt_LAST_GIVE_MONEY_TIME] = gettime();
			}
		}
		case _I<medicamentos>:
		{
			if (extra <= 0 || extra > 10000000) return SendPlayerClientMessage(playerid, "Cantidad incorrecta.");
			if (extra > PI[playerid][pi_MEDICINE]) return SendPlayerClientMessage(playerid, "No tienes esa cantidad.");
			
			if(!IsPlayerConnected(to_playerid) || !IsPlayerConnected(playerid)) {
				return 0;
			}

			PI[playerid][pi_MEDICINE] -= extra;
			PI[to_playerid][pi_MEDICINE] += extra;

			MySQL_UpdateInt(playerid, "medicine", PI[playerid][pi_MEDICINE]);
			MySQL_UpdateInt(to_playerid, "medicine", PI[to_playerid][pi_MEDICINE]);
			
			ShowPlayerMessage(playerid, "Le has dado ~b~%d gramos~w~ de medicamentos a %s.", extra, PLAYER_TEMP[to_playerid][pt_NAME]);
			ShowPlayerMessage(to_playerid, "%s te ha dado ~b~%d gramos~w~ de medicamentos.", PLAYER_TEMP[playerid][pt_NAME], extra);
	
			new action[64];
			format(action, sizeof action, "le da algo a %s.", PLAYER_TEMP[to_playerid][pt_NAME]);
			Auto_SendPlayerAction(playerid, action);
		}
		case _I<marihuana>:
		{
			if (extra <= 0 || extra > 10000000) return SendPlayerClientMessage(playerid, "Cantidad incorrecta.");
			if (extra > PI[playerid][pi_CANNABIS]) return SendPlayerClientMessage(playerid, "No tienes esa cantidad.");
			
			if(!IsPlayerConnected(to_playerid) || !IsPlayerConnected(playerid)) {
				return 0;
			}

			PI[playerid][pi_CANNABIS] -= extra;
			PI[to_playerid][pi_CANNABIS] += extra;

			MySQL_UpdateInt(playerid, "cannabis", PI[playerid][pi_CANNABIS]);
			MySQL_UpdateInt(to_playerid, "cannabis", PI[to_playerid][pi_CANNABIS]);
			
			ShowPlayerMessage(playerid, "Le has dado %dg de marihuana a %s.", extra, PLAYER_TEMP[to_playerid][pt_NAME]);
			ShowPlayerMessage(to_playerid, "%s te ha dado %dg de marihuana.", PLAYER_TEMP[playerid][pt_NAME], extra);
			
			new action[64];
			format(action, sizeof action, "le da algo a %s.", PLAYER_TEMP[to_playerid][pt_NAME]);
			Auto_SendPlayerAction(playerid, action);
		}
		case _I<crack>:
		{
			if (extra <= 0 || extra > 10000000) return SendPlayerClientMessage(playerid, "Cantidad incorrecta.");
			if (extra > PI[playerid][pi_CRACK]) return SendPlayerClientMessage(playerid, "No tienes esa cantidad.");
			
			if(!IsPlayerConnected(to_playerid) || !IsPlayerConnected(playerid)) {
				return 0;
			}

			PI[playerid][pi_CRACK] -= extra;
			PI[to_playerid][pi_CRACK] += extra;
			
			MySQL_UpdateInt(playerid, "crack", PI[playerid][pi_CRACK]);
			MySQL_UpdateInt(to_playerid, "crack", PI[to_playerid][pi_CRACK]);

			ShowPlayerMessage(playerid, "Le has dado ~b~%d gramos~w~ de crack a %s.", extra, PLAYER_TEMP[to_playerid][pt_NAME]);
			ShowPlayerMessage(to_playerid, "%s te ha dado ~b~%d gramos~w~ de crack.", PLAYER_TEMP[playerid][pt_NAME], extra);
			
			new action[64];
			format(action, sizeof action, "le da algo a %s.", PLAYER_TEMP[to_playerid][pt_NAME]);
			Auto_SendPlayerAction(playerid, action);
		}
		default: ShowPlayerMessage(playerid, "/dar Medicamento | Marihuana | crack | gamas~n~playerid | Cantidad");
	}
	return 1;
}

CMD:vender(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	if (PI[playerid][pi_LEVEL] < 2) return SendPlayerClientMessage(playerid, "Debes ser al menos nivel 2 para usar este comando.");
	
	new option[24], to_playerid, extra, price;
	if (sscanf(params, "s[24]udd", option, to_playerid, extra, price)) return ShowPlayerMessage(playerid, "/vender Medicamento | Marihuana | crack | gamas~n~playerid | Cantidad | Precio");
	if (playerid == to_playerid) return SendPlayerClientMessage(playerid, "No puedes venderte ati mismo.");

	if (price <= 0 || price > 10000000) return SendPlayerClientMessage(playerid, "El precio no es válido.");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(to_playerid, pos[0], pos[1], pos[2]);
	if (!IsPlayerInRangeOfPoint(playerid, NEARS_PLAYERS_DISTANCE, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "Este jugador no está cerca tuya.");
	if (PLAYER_TEMP[to_playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "No puedes venderle nada a este jugador ahora.");
	
	if (price > PI[to_playerid][pi_CASH])
	{
		SendPlayerClientMessage(playerid, "Esta persona no tiene el dinero que pides.");
		return 1;
	}
	
	PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_PID] = playerid;
	PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_AID] = PI[playerid][pi_ID];
	PLAYER_TEMP[to_playerid][pt_TRICK_PRICE] = price;
	PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_EXTRA] = extra;
	PLAYER_TEMP[to_playerid][pt_TRICK_TIME] = gettime();

	switch(YHash(option, false))
	{
		case _I<medicamentos>:
		{
			if (PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_EXTRA] <= 0 || PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_EXTRA] > 10000000) return SendPlayerClientMessage(playerid, "Cantidad incorrecta.");
			if (PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_EXTRA] > PI[playerid][pi_MEDICINE]) return SendPlayerClientMessage(playerid, "No tienes esa cantidad.");
			
			if(!IsPlayerConnected(to_playerid) || !IsPlayerConnected(playerid)) {
				return 0;
			}

			SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}Le has ofrecido una venta a {"#PRIMARY_COLOR"}%s{f5f5f5}, espera a ver si la acepta.", PLAYER_TEMP[to_playerid][pt_NAME]);
			ShowDialog(to_playerid, DIALOG_TRICKS_MEDICINE);
		}
		case _I<marihuana>:
		{
			if (PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_EXTRA] <= 0 || PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_EXTRA] > 10000000) return SendPlayerClientMessage(playerid, "Cantidad incorrecta.");
			if (PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_EXTRA] > PI[playerid][pi_CANNABIS]) return SendPlayerClientMessage(playerid, "No tienes esa cantidad.");
			
			if(!IsPlayerConnected(to_playerid) || !IsPlayerConnected(playerid)) {
				return 0;
			}

			SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}Le has ofrecido una venta a {"#PRIMARY_COLOR"}%s{f5f5f5}, espera a ver si la acepta.", PLAYER_TEMP[to_playerid][pt_NAME]);
			ShowDialog(to_playerid, DIALOG_TRICKS_CANNABIS);
		}
		case _I<crack>:
		{
			if (PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_EXTRA] <= 0 || PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_EXTRA] > 10000000) return SendPlayerClientMessage(playerid, "Cantidad incorrecta.");
			if (PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_EXTRA] > PI[playerid][pi_CRACK]) return SendPlayerClientMessage(playerid, "No tienes esa cantidad.");
			
			if(!IsPlayerConnected(to_playerid) || !IsPlayerConnected(playerid)) {
				return 0;
			}

			SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}Le has ofrecido una venta a {"#PRIMARY_COLOR"}%s{f5f5f5}, espera a ver si la acepta.", PLAYER_TEMP[to_playerid][pt_NAME]);
			ShowDialog(to_playerid, DIALOG_TRICKS_CRACK);
		}
		case _I<gamas>:
		{
			if (PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_EXTRA] <= 0 || PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_EXTRA] > 10000000) return SendPlayerClientMessage(playerid, "Cantidad incorrecta.");
			if (PLAYER_TEMP[to_playerid][pt_TRICK_SELLER_EXTRA] > PI[playerid][pi_COINS]) return SendPlayerClientMessage(playerid, "No tienes esa cantidad de "SERVER_COIN".");
			
			if(!IsPlayerConnected(to_playerid) || !IsPlayerConnected(playerid)) {
				return 0;
			}

			SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}Le has ofrecido una venta a {"#PRIMARY_COLOR"}%s{f5f5f5}, espera a ver si la acepta.", PLAYER_TEMP[to_playerid][pt_NAME]);
			ShowDialog(to_playerid, DIALOG_TRICKS_SU);
		}
		default: ShowPlayerMessage(playerid, "/vender Medicamento | Marihuana | crack | gamas~n~playerid | Cantidad | Precio");
	}
	return 1;
}

CMD:consumir(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	new option[24];
	
	if (!sscanf(params, "s[24]", option))
	{
		switch(YHash(option, false))
		{
			case _I<medicamento>:
			{
				if (PLAYER_TEMP[playerid][pt_COOLDOWN_CONSUMABLES] > gettime()) return ShowPlayerMessage(playerid, "Debes esperar ~b~%d segundos~w~.", PLAYER_TEMP[playerid][pt_COOLDOWN_CONSUMABLES] - gettime());

				if (PI[playerid][pi_MEDICINE] <= 0) return ShowPlayerMessage(playerid, "No tienes ~r~medicamentos~w~.");
				
				PLAYER_TEMP[playerid][pt_COOLDOWN_CONSUMABLES] = gettime() + 30;

				PI[playerid][pi_MEDICINE] --;
				GivePlayerHealthEx(playerid, 20.0);

				Auto_SendPlayerAction(playerid, "se toma un medicamento.");
				ShowPlayerMessage(playerid, "Recuperando salud 20~b~HP");
			}
			case _I<marihuana>:
			{
				if (PLAYER_TEMP[playerid][pt_COOLDOWN_CONSUMABLES] > gettime()) return ShowPlayerMessage(playerid, "Debes esperar ~b~%d segundos~w~.", PLAYER_TEMP[playerid][pt_COOLDOWN_CONSUMABLES] - gettime());

				if (PI[playerid][pi_CANNABIS] <= 0) return SendPlayerClientMessage(playerid, "No tienes marihuana.");

				PLAYER_TEMP[playerid][pt_COOLDOWN_CONSUMABLES] = gettime() + 30;
				
				PI[playerid][pi_CANNABIS] --;
				GivePlayerHealthEx(playerid, 30.0);
				Auto_SendPlayerAction(playerid, "consume marihuana.");
				GivePlayerDrunkLevel(playerid, 1000);
				ShowPlayerMessage(playerid, "Recuperando salud 30~b~HP");
			}
			case _I<crack>:
			{
				if (PLAYER_TEMP[playerid][pt_COOLDOWN_CONSUMABLES] > gettime()) return ShowPlayerMessage(playerid, "Debes esperar ~b~%d segundos~w~.", PLAYER_TEMP[playerid][pt_COOLDOWN_CONSUMABLES] - gettime());

				if (PI[playerid][pi_CRACK] <= 0) return SendPlayerClientMessage(playerid, "No tienes crack.");

				PLAYER_TEMP[playerid][pt_COOLDOWN_CONSUMABLES] = gettime() + 30;
				PI[playerid][pi_CRACK] --;

				if (IsValidPlayerInventoryObjectSlo(playerid, SLOT_BACK, INVENTORY_TYPE_VEST)) {
					j_PocketInfo[playerid][SLOT_BACK][pExtra] += 25;
					if(j_PocketInfo[playerid][SLOT_BACK][pExtra] > 100) j_PocketInfo[playerid][SLOT_BACK][pExtra] = 100;
					SetPlayerArmourEx(playerid, j_PocketInfo[playerid][SLOT_BACK][pExtra]);

					ShowPlayerMessage(playerid, "Aumentando crack 25g");
				} else {
					GivePlayerArmourEx(playerid, 20.0);

					ShowPlayerMessage(playerid, "Aumentando crack 20g");
				}
				
				Auto_SendPlayerAction(playerid, "consume crack.");
				GivePlayerDrunkLevel(playerid, 2000);
			}
			default: ShowPlayerMessage(playerid, "~>~ ~w~/consumir [medicamento - marihuana - crack]");
		}
	}
	else ShowPlayerMessage(playerid, "~>~ ~w~/consumir [medicamento - marihuana - crack]");
	return 1;
}

CMD:puerta(playerid, params[])
{
	if (PI[playerid][pi_STATE] != ROLEPLAY_STATE_OWN_PROPERTY) return SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");
	if (PLAYER_TEMP[playerid][pt_LAST_PICKUP_ID] == 0) return SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");
		
	new info[3];
	Streamer_GetArrayData(STREAMER_TYPE_PICKUP, PLAYER_TEMP[playerid][pt_LAST_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
	if (info[0] != PICKUP_TYPE_PROPERTY) return SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");
	
	new Float:pos[3]; 
	Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PLAYER_TEMP[playerid][pt_LAST_PICKUP_ID], E_STREAMER_X, pos[0]);
	Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PLAYER_TEMP[playerid][pt_LAST_PICKUP_ID], E_STREAMER_Y, pos[1]);
	Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PLAYER_TEMP[playerid][pt_LAST_PICKUP_ID], E_STREAMER_Z, pos[2]);
	
	if (!IsPlayerInRangeOfPoint(playerid, 1.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");
	
	if (info[2] == 1) // Está en el Pickup Interior
	{
		if (PROPERTY_INFO[info[1]][property_OWNER_ID] == PI[playerid][pi_ID])
		{
			if (PLAYER_TEMP[playerid][pt_KNOCK_PLAYER_ID] == INVALID_PLAYER_ID) return SendPlayerClientMessage(playerid, "Nadie ha tocado en la puerta.");
			if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_KNOCK_PLAYER_ID])) return SendPlayerClientMessage(playerid, "Nadie ha tocado en la puerta o ya se ha ido.");
			if (!IsPlayerInRangeOfPoint(PLAYER_TEMP[playerid][pt_KNOCK_PLAYER_ID], 3.0, PROPERTY_INFO[info[1]][property_EXT_X], PROPERTY_INFO[info[1]][property_EXT_Y], PROPERTY_INFO[info[1]][property_EXT_Z])) return SendPlayerClientMessage(playerid, "Nadie ha tocado en la puerta o ya se ha ido.");
			if (PLAYER_TEMP[playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "Este jugador no puede entrar ahora.");
			
			PLAYER_TEMP[PLAYER_TEMP[playerid][pt_KNOCK_PLAYER_ID]][pt_HOSPITAL] = GetNearestHospitalForPlayer(PLAYER_TEMP[playerid][pt_KNOCK_PLAYER_ID]);
			
			PI[PLAYER_TEMP[playerid][pt_KNOCK_PLAYER_ID]][pi_STATE] = ROLEPLAY_STATE_GUEST_PROPERTY;
			PI[PLAYER_TEMP[playerid][pt_KNOCK_PLAYER_ID]][pi_LOCAL_INTERIOR] = PROPERTY_INFO[info[1]][property_ID];
			PLAYER_TEMP[PLAYER_TEMP[playerid][pt_KNOCK_PLAYER_ID]][pt_PROPERTY_INDEX] = info[1];

			new Float:z_pos = PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_Z];
			
			SetPlayerPosEx(PLAYER_TEMP[playerid][pt_KNOCK_PLAYER_ID], PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_X], PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_Y], z_pos, PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_ANGLE], PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_INTERIOR], PROPERTY_INFO[info[1]][property_ID], false, true);
			FreezePlayer(PLAYER_TEMP[playerid][pt_KNOCK_PLAYER_ID]);
		}
		else SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");
	}
	else SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");
	return 1;
}

CMD:pvender(playerid, params[])
{
	if (PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] == -1 || ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] != INTERIOR_CITY_HALL_LS) return 1;
	if (!IsPlayerInRangeOfPoint(playerid, 1.0, -474.596282, 289.679107, 2004.584960)) return 1;
	if (PI[playerid][pi_LEVEL] < 2) return SendPlayerClientMessage(playerid, "Debes ser al menos nivel 2 para usar este comando.");
	if (PI[playerid][pi_BANK_ACCOUNT] == 0) return SendPlayerClientMessage(playerid, "Necesitas tener una cuenta bancaria para poder realizar estas operaciones.");
	
	ShowDialog(playerid, DIALOG_NOTARY);
	return 1;
}

CMD:casa(playerid, params[])
{
	if (PLAYER_TEMP[playerid][pt_LAST_PICKUP_ID] == 0) return SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");
	
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_OWN_PROPERTY || PI[playerid][pi_STATE] == ROLEPLAY_STATE_GUEST_PROPERTY) {
		new index = GetPropertyIndexByID(PI[playerid][pi_LOCAL_INTERIOR]);
		if (index == -1) return SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");

		if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_OWN_PROPERTY)
		{	
			if (PROPERTY_INFO[index][property_OWNER_ID] == PI[playerid][pi_ID])
			{
				PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] = index;
				ShowDialog(playerid, DIALOG_PROPERTY_OPTIONS);
			}
			else SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");
		}
		else if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_GUEST_PROPERTY)
		{
			if (PROPERTY_INFO[index][property_CREW])
			{
				if (PROPERTY_INFO[index][property_CREW_ID] != PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "Esta no es una propiedad de tu banda.");
				if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_DELETE_PROPERTIES]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
				if (CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendPlayerClientMessage(playerid, "No puedes liberar una propiedad cuando tu banda está en combate."); 
				
				PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] = index;
				ShowDialog(playerid, DIALOG_CREW_LEAVE_PROPERTY);
			}
			else SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");
		}
	}
	else SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");
	return 1;
}

CMD:echar(playerid, params[])
{
	if (sscanf(params, "u", params[0])) return ShowPlayerMessage(playerid, "~>~ ~w~/echar [PlayerID/Nombre]");
	if (!IsPlayerConnected(params[0])) return SendPlayerClientMessage(playerid, "El jugador no está conectado.");
	if (playerid == params[0]) return SendPlayerClientMessage(playerid, "No te eches a ti mismo.");
	
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_OWN_PROPERTY)
	{
		if ( PI[params[0]][pi_STATE] == ROLEPLAY_STATE_GUEST_PROPERTY && PI[params[0]][pi_LOCAL_INTERIOR] == PI[playerid][pi_LOCAL_INTERIOR])
		{		
			new index = GetPropertyIndexByID(PI[playerid][pi_LOCAL_INTERIOR]);
			if (index == -1) return SendPlayerClientMessage(playerid, "BUG: CMD /ECHAR, Tome captura y contacte con administrador.");
				
			PI[params[0]][pi_STATE] = ROLEPLAY_STATE_NORMAL;
			PI[params[0]][pi_LOCAL_INTERIOR] = 0;
			PLAYER_TEMP[params[0]][pt_PROPERTY_INDEX] = -1;
			SetPlayerPosEx(params[0], PROPERTY_INFO[ index ][property_EXT_X], PROPERTY_INFO[ index ][property_EXT_Y], PROPERTY_INFO[ index ][property_EXT_Z], PROPERTY_INFO[ index ][property_EXT_ANGLE], PROPERTY_INFO[ index ][property_EXT_INTERIOR], 0, false /*PROPERTY_INFO[ index ][property_EXT_FREEZE]*/, false);
			StopAudioStreamForPlayer(params[0]);
			FreezePlayer(params[0]);
			
			SendPlayerClientMessage(params[0], "~r~%s ~w~te ha echado de su propiedad.", PLAYER_TEMP[playerid][pt_NAME]);
			SendPlayerClientMessage(playerid, "Has echado a ~r~%s ~w~de tu propiedad.", PLAYER_TEMP[params[0]][pt_NAME]);
		}
		else SendPlayerClientMessage(playerid, "Este jugador no está en tu propiedad.");
		return 1;
	}

	if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
		new vehicleid = GetPlayerVehicleID(playerid);
		
		if (!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) return SendPlayerClientMessage(playerid, "Este no es tú vehículo.");
		if (PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] != PI[playerid][pi_ID]) return SendPlayerClientMessage(playerid, "Este no es tú vehículo.");
		if (GetPlayerVehicleID(params[0]) != vehicleid) return SendPlayerClientMessage(playerid, "Este jugador no está en tu vehículo.");
		
		RemovePlayerFromVehicle(params[0]);
		
		new action[64];
		format(action, sizeof action, "ha echado a %s de su vehículo.", PLAYER_TEMP[ params[0] ][pt_NAME]);
		Auto_SendPlayerAction(playerid, action);
		return 1;
	}
	
	SendPlayerClientMessage(playerid, "No estás en tu propiedad o en tu vehículo.");
	return 1;
}

CMD:tarifa(playerid, params[])
{
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendPlayerClientMessage(playerid, "No estás conduciendo.");
	if (!PLAYER_WORKS[playerid][WORK_TAXI][pwork_SET]) return SendPlayerClientMessage(playerid, "No eres taxista.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_TAXI) return SendPlayerClientMessage(playerid, "No estás de servicio como taxista.");
	
	new vehicleid = GetPlayerVehicleID(playerid);
	if (TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_ENABLED]) return SendPlayerClientMessage(playerid, "Solo puedes cambiar la tarifa cuando no haya ningún pasajero.");
	
	if (sscanf(params, "d", params[0])) return ShowPlayerMessage(playerid, "INTRODUCE UN VALOR ENTRE 0-25~b~$~w~");
	if (params[0] < 0 || params[0] > 25) return ShowPlayerMessage(playerid, "INTRODUCE UN VALOR ENTRE 0-25~b~$~w~");
	
	TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_PRICE] = params[0];
	Auto_SendPlayerAction(playerid, "ajusta el taxímetro.");
	UpdatePlayerTaxiMeterTextdraws(playerid);
	return 1;
}

SendPlayerAction(playerid, action[])
{
	new str_text[190];
	format(str_text, sizeof str_text, "* %s %s", PLAYER_TEMP[playerid][pt_NAME], action);
	ProxDetector(playerid, 15.0, str_text, 0xffe678ff, 0xffe678ff, 0xffe678ff, 0xffe678ff, 0xffe678ff, 85);
	return 1;
}

Auto_SendPlayerAction(playerid, action[])
{
	new str_text[145];
	format(str_text, 145, "* %s %s", PLAYER_TEMP[playerid][pt_NAME], action);
	ProxDetector(playerid, 15.0, str_text, 0xffe678ff, 0xffe678ff, 0xffe678ff, 0xffe678ff, 0xffe678ff);
	return 1;
}

ShowDialog(playerid, dialogid)
{
	PLAYER_TEMP[playerid][pt_DIALOG_RESPONDED] = false;
	PLAYER_TEMP[playerid][pt_DIALOG_SHOW] = true;
	PLAYER_TEMP[playerid][pt_DIALOG_ID] = dialogid;
	
	switch(dialogid)
	{
		case DIALOG_REGISTER:
		{
			new dialog[255];
			format(
				dialog, sizeof dialog, 
				"{F5F5F5}La cuenta %s no esta {"#RED_COLOR"}registrada.\n\
				{F5F5F5}Ingrese su {"#PRIMARY_COLOR"}contraseña{F5F5F5} a continuacion.\n\
				\nLa contraseña debe contener entre {"#PRIMARY_COLOR"}"#MIN_PASS_LENGTH"-"#MAX_PASS_LENGTH"{F5F5F5} caracteres.\
				", 
					PLAYER_TEMP[playerid][pt_NAME]
			);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_PASSWORD, "Registrarse  {"#PRIMARY_COLOR"}Spain +", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_LOGIN:
		{
			new dialog[255];
			format(
				dialog, sizeof dialog, 
				"{F5F5F5}Bienvenido de nuevo %s.\nIngrese su {"#RED_COLOR"}contraseña{F5F5F5} para acceder.", 
				PLAYER_TEMP[playerid][pt_NAME]
			);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_PASSWORD, "Ingresar  {"#PRIMARY_COLOR"}Spain +", dialog, "»Entrar", "xSalir");
			return 1;
		}
		case DIALOG_REGISTER_EMAIL:
		{
			ShowPlayerDialog(
				playerid, dialogid, DIALOG_STYLE_INPUT,
				"Correo electronico  {"#PRIMARY_COLOR"}Spain +",
				"{F5F5F5}Ingresa una dirección de {"#RED_COLOR"}correo electrónico válida.\n\
				\n{F5F5F5}Es importante que tengas acceso al {"#PRIMARY_COLOR"}correo{F5F5F5} ya que\n\
				será la única manera de recuperar tu contraseña.\n\
				\nTranquilo, no recibirás ningún tipo de {"#RED_COLOR"}SPAM{F5F5F5} ni suscripciones.", 
				"»Siguiente", "xSalir"
			);
			return 1;
		}
		case DIALOG_CLOTHES: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "{"#PRIMARY_COLOR"}¿Qué quieres comprar?", "Ropa\nAccesorios", ">>", "Salir");
		case DIALOG_FOOD_PIZZA: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Comida rápida", DIALOG_FOOD_PIZZA_String, "Pedir", "Cerrar");
		case DIALOG_FOOD_CLUCKIN: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Comida rápida", DIALOG_FOOD_CLUCKIN_String, "Pedir", "Cerrar");
		case DIALOG_FOOD_BURGER: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Comida rápida", DIALOG_FOOD_BURGER_String, "Pedir", "Cerrar");
		case DIALOG_BANK:
		{
			if (PI[playerid][pi_BANK_ACCOUNT] == 0) return SendPlayerClientMessage(playerid, "No tienes cuenta bancaria.");
			
			new caption[80];
			format(caption, sizeof caption, "Mi cuenta bancaria: {"#BLUE_COLOR"}%s {F5F5F5}- Balance actual: {"#BLUE_COLOR"}%s$", number_format_thousand(PI[playerid][pi_BANK_ACCOUNT]), number_format_thousand(PI[playerid][pi_BANK_MONEY]));
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, 
				"{f5f5f5}1. Retirar dinero\n{f5f5f5}2. Depositar dinero\n{f5f5f5}3. Transferir dinero\n{f5f5f5}4. Últimas transacciones", 
			"»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_CREATE_BANK_ACCOUNT:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Crear cuenta bancaria", 
				"{f5f5f5}Bienvenido, actualmente no tienes una cuenta bancaria.\n\nPara disfrutar de los beneficios de una cuenta bancaria\npuedes crearla ahora mismo con un depósito minimo de 500$.", 
			"Crear", "Cerrar");
			return 1;
		}
		case DIALOG_BANK_WITHDRAW:
		{
			new dialog[100];
			format(dialog, sizeof dialog, "{f5f5f5}Balance actual: {"#BLUE_COLOR"}%s$\n{f5f5f5}¿Cuánto quiere retirar?", number_format_thousand(PI[playerid][pi_BANK_MONEY]));
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Banco - Retirar", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_BANK_DEPOSIT:
		{
			new dialog[100];
			format(dialog, sizeof dialog, "{f5f5f5}Dinero actual: {"#BLUE_COLOR"}%s$\n{f5f5f5}¿Cuánto quiere depositar?", number_format_thousand(PI[playerid][pi_CASH]));
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Banco - Depositar", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_BANK_TRANSFER: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Banco - Transferir", "Indica a que número de cuenta quiere transferir dinero.", "»Aceptar", "xSalir");
		case DIALOG_BANK_TRANSFER_SEND:
		{
			new dialog[170];
			format(dialog, sizeof dialog, "{f5f5f5}Transferir a cuenta: {"#BLUE_COLOR"}%s\n{f5f5f5}Balance actual: {"#BLUE_COLOR"}%s$\n\n{f5f5f5}¿Cuánto quiere transferir?", number_format_thousand(PLAYER_TEMP[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT]), number_format_thousand(PI[playerid][pi_BANK_MONEY]));
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Banco - Transferir", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_BANK_TRANSACTIONS:
		{
			inline OnBankMovementsLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					new dialog[2675], caption[40], line_str[128];
					format(caption, sizeof caption, "Banco - Últimas %d transacciones", rows);
					format(dialog, sizeof dialog, "{f5f5f5}Fecha\t{"#BLUE_COLOR"}Concepto\t{f5f5f5}Importe\n");
					if (rows)
					{
						for (new i = 0; i != rows; i ++)
						{
							new date[24], type, from_id, to_id, amount, from_bankid, to_bankid, bool:insull_from_id, bool:isnull_to_id;
							cache_get_value_name(i, "date", date);
							cache_get_value_name_int(i, "type", type);
							cache_is_value_name_null(i, "from_id", insull_from_id);
							if (!insull_from_id) cache_get_value_name_int(i, "from_id", from_id);
							cache_is_value_name_null(i, "to_id", isnull_to_id);
							if (!isnull_to_id) cache_get_value_name_int(i, "to_id", to_id);
							cache_get_value_name_int(i, "amount", amount);
							cache_get_value_name_int(i, "from_bankid", from_bankid);
							cache_get_value_name_int(i, "to_bankid", to_bankid);

							switch(type)
							{
								case BANK_TRANSACTION_WITHDRAW:
								{
									format(line_str, sizeof line_str, "{f5f5f5}%s\t{"#BLUE_COLOR"}Retirada efectivo\t{f5f5f5}-%s$\n", date, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
								case BANK_TRANSACTION_DEPOSIT:
								{
									format(line_str, sizeof line_str, "{f5f5f5}%s\t{"#BLUE_COLOR"}Ingreso efectivo\t{f5f5f5}%s$\n", date, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
								case BANK_TRANSACTION_TRANSFER:
								{
									if (from_id == PI[playerid][pi_ID]) format(line_str, sizeof line_str, "{f5f5f5}%s\t{"#BLUE_COLOR"}Transferencia a %d\t{f5f5f5}-%s$\n", date, to_bankid, number_format_thousand(amount));
									else format(line_str, sizeof line_str, "{f5f5f5}%s\t{"#BLUE_COLOR"}Transferencia de %d\t{f5f5f5}%s$\n", date, from_bankid, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
								case BANK_TRANSACTION_CREATE_ACCOUNT:
								{
									format(line_str, sizeof line_str, "{f5f5f5}%s\t{"#BLUE_COLOR"}Apertura cuenta\t{f5f5f5}-%s$\n", date, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
								case BANK_TRANSACTION_BUY_PROPERTY:
								{
									format(line_str, sizeof line_str, "{f5f5f5}%s\t{"#BLUE_COLOR"}Compra de propiedad\t{f5f5f5}-%s$\n", date, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
								case BANK_TRANSACTION_SOLD_PROPERTY:
								{
									format(line_str, sizeof line_str, "{f5f5f5}%s\t{"#BLUE_COLOR"}Venta de propiedad\t{f5f5f5}%s$\n", date, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
								case BANK_TRANSACTION_BUY_VEHICLE:
								{
									format(line_str, sizeof line_str, "{f5f5f5}%s\t{"#BLUE_COLOR"}Compra de vehículo\t{f5f5f5}-%s$\n", date, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
								case BANK_TRANSACTION_SOLD_VEHICLE:
								{
									format(line_str, sizeof line_str, "{f5f5f5}%s\t{"#BLUE_COLOR"}Venta de vehículo\t{f5f5f5}%s$\n", date, number_format_thousand(amount));
									strcat(dialog, line_str);
								}
							}
						}
					}
					else strcat(dialog, "{f5f5f5}No hay transacciones en tu cuenta.");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Cerrar", "Atrás");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT bank_movements.*, player.bank_account AS from_bankid, player2.bank_account AS to_bankid FROM bank_movements LEFT JOIN player ON bank_movements.from_id = player.id LEFT JOIN player AS player2 ON bank_movements.to_id = player2.id WHERE bank_movements.from_id = %d OR bank_movements.to_id = %d ORDER BY date DESC LIMIT %d;", PI[playerid][pi_ID], PI[playerid][pi_ID], MAX_BANK_TRANSACTIONS_DIALOG);
			MySQL_TQueryInline(handle_db, using inline OnBankMovementsLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_247_LIST: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "247  {"#PRIMARY_COLOR"}Spain +", DIALOG_247_LIST_String, "»Aceptar", "xSalir");
		case DIALOG_PHONE:
		{
			new caption[50];
			format(caption, sizeof caption, "Mi teléfono - %d", PI[playerid][pi_PHONE_NUMBER]);
			
			new dialog[200];
			if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_ON) format(dialog, sizeof dialog, "{f5f5f5}1. Agenda\n{f5f5f5}2. Llamar\n{f5f5f5}3. Enviar mensaje\n{f5f5f5}4. Ver mensajes recibidos\n{f5f5f5}5. Ver mensajes enviados\n{f5f5f5}6. Apagar teléfono");
			else format(dialog, sizeof dialog, "{f5f5f5}1. Encender teléfono\n{f5f5f5}2. Agenda\n{f5f5f5}3. Llamar\n{f5f5f5}4. Enviar mensaje\n{f5f5f5}5. Ver mensajes recibidos\n{f5f5f5}6. Ver mensajes enviados");
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_PHONE_BOOK:
		{
			for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[80 * (MAX_PHONE_CONTACTS + 3)];
			format(dialog, sizeof dialog, "{f5f5f5}Nombre\t{"#BLUE_COLOR"}Número\n");

			new line_str[80], contacts, listitem;
			for (new i = 0; i != MAX_PHONE_CONTACTS; i++ )
			{
				if (!PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_VALID]) continue;
				
				format(line_str, sizeof line_str, "{f5f5f5}%d. %s\t{"#BLUE_COLOR"}%d\n", listitem + 1, PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_NAME], PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_PHONE_NUMBER]);
				strcat(dialog, line_str);
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				
				contacts ++; listitem ++;
			}
			if (contacts < MAX_PHONE_CONTACTS)
			{
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = MAX_PHONE_CONTACTS + 10;
				strcat(dialog, "{f5f5f5}+ Añadir contacto\n"); listitem ++;
			}
			if (contacts > 0)
			{
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = MAX_PHONE_CONTACTS + 20;
				strcat(dialog, "{c4290d}- Eliminar todo\n"); listitem ++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Mi teléfono - Agenda", dialog, "»Aceptar", "xSalir");		
			return 1;
		}
		case DIALOG_PHONE_BOOK_ADD_NUMBER: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Agenda - Añadir contacto", "Está añadiendo un nuevo contacto en su agenda.\nIndique el número de teléfono del nuevo contacto.", "»Aceptar", "xSalir");
		case DIALOG_PHONE_BOOK_ADD_NAME: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Agenda - Añadir contacto", "Está añadiendo un nuevo contacto en su agenda.\nIndique el nombre del nuevo contacto.", "»Aceptar", "xSalir");
		case DIALOG_PHONE_BOOK_OPTIONS:
		{
			new caption[40];
			format(caption, sizeof caption, "Contacto - %s", PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, "{f5f5f5}1. Llamar\n{f5f5f5}2. Enviar mensaje\n{f5f5f5}3. Cambiar nombre del contacto\n{f5f5f5}4. Eliminar este contacto", "»Aceptar", "xSalir");			
			return 1;
		}
		case DIALOG_PHONE_BOOK_CHANGE_NAME:
		{
			new caption[40];
			format(caption, sizeof caption, "Contacto - %s", PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME]);
			
			new dialog[140];
			format(dialog, sizeof dialog, "Nombre actual: %s\nTeléfono: %d\n\nIndica el nuevo nombre de este contacto.", PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME], PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_PHONE_NUMBER]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, dialog, "Cambiar", "Atrás");	
			return 1;
		}
		case DIALOG_PHONE_BOOK_CONFIRM_DELET:
		{
			new caption[40];
			format(caption, sizeof caption, "Contacto - %s", PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME]);
			
			new dialog[140];
			format(dialog, sizeof dialog, "¿Estás seguro de que desea eliminar el siguiente contacto?\n\nNombre: %s\nTeléfono: %d", PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME], PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_PHONE_NUMBER]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, caption, dialog, "Eliminar", "Atrás");	
			return 1;
		}
		case DIALOG_PHONE_BOOK_DELETE_ALL: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Agenda - Eliminar todo", "¿Estás seguro de que quiere eliminar todos sus contactos?\nEsta opción no se puede deshacer y perderás todos los contactos guardados.", "Eliminar", "Atrás");	
		case DIALOG_PHONE_CALL_NUMBER: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Mi teléfono - Realizar una llamada", "¿A quién quieres llamar?\nIndique el número al que desea llamar.", "»Aceptar", "xSalir");
		case DIALOG_PHONE_SMS_NUMBER: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Mi teléfono - Enviar mensaje", "¿A quién quieres enviarle el mensaje?\nIndique el número al que desea enviar el mensaje.", "»Aceptar", "xSalir");
		case DIALOG_PHONE_SMS_MESSAGE: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Mi teléfono - Enviar mensaje", "Escribe el mensaje que quieres enviar\nCaracteres: 1-64.", "»Aceptar", "xSalir");
		case DIALOG_PHONE_BOOK_SEND_MESSAGE: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Mi teléfono - Enviar mensaje", "Escribe el mensaje que quieres enviar\nCaracteres: 1-64.", "»Aceptar", "xSalir");
		case DIALOG_PHONE_SENT_MESSAGES:
		{
			inline OnSentMessagesLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					new dialog[1600], caption[40], line_str[128];
					format(caption, sizeof caption, "Últimos %d mensajes enviados", rows);
					format(dialog, sizeof dialog, "{f5f5f5}Fecha\t{"#BLUE_COLOR"}Enviado a\t{f5f5f5}Mensaje\n");
					if (rows)
					{
						for (new i = 0; i != rows; i ++)
						{
							new message[64], date[24], phone_number, bool:isnull_phone_number;
							cache_get_value_name(i, "message", message);
							cache_get_value_name(i, "date", date);
							cache_is_value_name_null(i, "phone_number", isnull_phone_number);
							if (!isnull_phone_number) cache_get_value_name_int(i, "phone_number", phone_number);

							if (!phone_number) format(line_str, sizeof line_str, "{f5f5f5}%s\t{"#BLUE_COLOR"}---\t{f5f5f5}%s\n", date, message);
							else format(line_str, sizeof line_str, "{f5f5f5}%s\t{"#BLUE_COLOR"}%s\t{f5f5f5}%s\n", date, convertPhoneNumber(playerid, phone_number), message);
							strcat(dialog, line_str);
						}
					}
					else strcat(dialog, "{f5f5f5}No hay mensajes.");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Cerrar", "Atrás");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT pmessages.*, player.phone_number FROM pmessages LEFT JOIN player ON pmessages.to_id = player.id WHERE pmessages.from_id = %d ORDER BY pmessages.date DESC LIMIT 10;", PI[playerid][pi_ID]);
			MySQL_TQueryInline(handle_db, using inline OnSentMessagesLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_PHONE_RECEIVED_MESSAGES:
		{
			inline OnReceivedMessagesLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					new dialog[1600], caption[40], line_str[128];
					format(caption, sizeof caption, "Últimos %d mensajes recibidos", rows);
					format(dialog, sizeof dialog, "{f5f5f5}Fecha\t{"#BLUE_COLOR"}Remitente\t{f5f5f5}Mensaje\n");
					if (rows)
					{
						for (new i = 0; i != rows; i ++)
						{
							new message[64], date[24], phone_number, bool:isnull_phone_number;
							cache_get_value_name(i, "message", message);
							cache_get_value_name(i, "date", date);
							cache_is_value_name_null(i, "phone_number", isnull_phone_number);
							if (!isnull_phone_number) cache_get_value_name_int(i, "phone_number", phone_number);

							if (!phone_number) format(line_str, sizeof line_str, "{f5f5f5}%s\t{"#BLUE_COLOR"}---\t{f5f5f5}%s\n", date, message);
							else format(line_str, sizeof line_str, "{f5f5f5}%s\t{"#BLUE_COLOR"}%s\t{f5f5f5}%s\n", date, convertPhoneNumber(playerid, phone_number), message);
							strcat(dialog, line_str);
						}
					}
					else strcat(dialog, "{f5f5f5}No hay mensajes.");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Cerrar", "Atrás");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT pmessages.*, player.phone_number FROM pmessages LEFT JOIN player ON pmessages.from_id = player.id WHERE pmessages.to_id = %d ORDER BY pmessages.date DESC LIMIT 10;", PI[playerid][pi_ID]);
			MySQL_TQueryInline(handle_db, using inline OnReceivedMessagesLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_CONFIRM_BUY_PROPERTY:
		{
			new dialog[220];
			
			if (PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_EXTRA])
			{
				format(dialog, sizeof dialog, "Coste de la propiedad: %d "SERVER_COIN"\nSeguro: NO\nMonedas "SERVER_COIN" actuales: %d "SERVER_COIN"\nMonedas "SERVER_COIN" tras la compra: %d "SERVER_COIN"\n\n¿De verdad desea comprar esta propiedad?", PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX] ][property_EXTRA], PI[playerid][pi_COINS], PI[playerid][pi_COINS] - PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX] ][property_EXTRA]);
			}
			else
			{
				format(dialog, sizeof dialog, "Precio de la propiedad: %s$\nSeguro: %s$\nBalance actual: %s$\nBalance tras la compra: %s$\n\n¿De verdad desea comprar esta propiedad?", number_format_thousand(PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX] ][property_PRICE]), number_format_thousand(PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX] ][property_PRICE_BASE] / 200), number_format_thousand(PI[playerid][pi_BANK_MONEY]), number_format_thousand(PI[playerid][pi_BANK_MONEY] - PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX] ][property_PRICE]));
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Comprar propiedad",  dialog, "Comprar", "Cerrar");
			return 1;
		}
		case DIALOG_PLAYER_GPS:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "GPS  {"#PRIMARY_COLOR"}Spain +",  " Mis lugares\n Mis propiedades\n Mis vehículos\n Lugares de interes\n Trabajos\n Ver mapa", "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_PLAYER_GPS_PLAYER:
		{
			for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[90 * (MAX_PLAYER_GPS_SAVES + 2)];
			format(dialog, sizeof dialog, "{f5f5f5}Lugar\t{FF846A}Distancia\n");
			
			new line_str[90], sites, listitem;
			for (new i = 0; i != MAX_PLAYER_GPS_SAVES; i++ )
			{
				if (!PLAYER_GPS[playerid][i][player_gps_VALID]) continue;
				
				format(line_str, sizeof line_str, "{f5f5f5}%d. %s\t{"#BLUE_COLOR"}%.2f Km\n", listitem + 1, PLAYER_GPS[playerid][listitem][player_gps_NAME], (GetPlayerDistanceFromPoint(playerid, PLAYER_GPS[playerid][listitem][player_gps_X], PLAYER_GPS[playerid][listitem][player_gps_Y], PLAYER_GPS[playerid][listitem][player_gps_Z]) * 0.01));
				strcat(dialog, line_str);
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				
				sites ++; listitem ++;
			}
			if (sites < MAX_PLAYER_GPS_SAVES)
			{
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = MAX_PLAYER_GPS_SAVES + 10;
				strcat(dialog, "{f5f5f5}+ Añadir lugar actual\n"); listitem ++;
			}
			if (sites > 0)
			{
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = MAX_PLAYER_GPS_SAVES + 20;
				strcat(dialog, "{c4290d}- Eliminar todo\n"); listitem ++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS  Mis lugares", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_PLAYER_ADD:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "GPS  Añadir lugar", "Tu posición actual será guardada en este lugar para ir más tarde.\nIndica el nombre de este lugar para guardarlo.", "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_DELETE_ALL: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Mis lugares - Eliminar todo", "¿Estás seguro de que quiere eliminar todos sus lugares?\nEsta opción no se puede deshacer y perderás todos los lugares guardados.", "Eliminar", "Atrás");	
		case DIALOG_PLAYER_GPS_PLAYER_OPTION:
		{
			new caption[40];
			format(caption, sizeof caption, "GPS  %s", PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_NAME]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, "{f5f5f5}1. Marcar coordenadas en el GPS\n{f5f5f5}2. Cambiar nombre de este lugar\n{f5f5f5}3. Eliminar este lugar del GPS", "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_CHANGE_NAME:
		{
			new dialog[90];
			format(dialog, sizeof dialog, "Nombre del lugar: %s\nIndica el nuevo nombre para este lugar.", PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "GPS  Cambiar nombre de un lugar", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_CONFIRM_DELET:
		{
			new dialog[95];
			format(dialog, sizeof dialog, "Nombre del lugar: %s\n¿Estás seguro de que quiere borrarlo del GPS?", PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "GPS  Eliminar un lugar", dialog, "Eliminar", "Atrás");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITES:
		{
			new dialog[1024];
			format(dialog, sizeof dialog, " Centro de licencias\n Hospitales\n Tiendas de Ropa\n Tiendas 24/7\n Restaurantes\n Bancos\n Cajeros\n Gasolineras\n Concesionarios\n Gobierno San Andreas\n Policias\n Farmacias\n");
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "GPS  Lugares de interés", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_PLAYER_GPS_WORKS:
		{
			for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[85 * (sizeof(work_info) + 1)], listitem;
			format(dialog, sizeof dialog, "Trabajo\tNivel\tDistancia\n");

			for (new i = 1; i != sizeof work_info; i ++)
			{
				if (work_info[i][work_info_TYPE] == WORK_TYPE_FAMILY) continue;
				if (!obtain_work_coords[i][obtain_work_AVAILABLE]) continue;
				
				new line_str[85];
				if (i == WORK_MEDIC)
					format(line_str, sizeof line_str, "{f5f5f5}%c%s\t{f5f5f5}%d\t{f5f5f5}-\n", toupper(work_info[i][work_info_NAME][0]), work_info[i][work_info_NAME][1], work_info[i][work_info_LEVEL]);
				else
					format(line_str, sizeof line_str, "{f5f5f5}%c%s\t{f5f5f5}%d\t{f5f5f5}%.2f Km\n", toupper(work_info[i][work_info_NAME][0]), work_info[i][work_info_NAME][1], work_info[i][work_info_LEVEL], (GetPlayerDistanceFromPoint(playerid, obtain_work_coords[i][obtain_work_MAP_ICON_X], obtain_work_coords[i][obtain_work_MAP_ICON_Y], obtain_work_coords[i][obtain_work_MAP_ICON_Z]) * 0.01));
				strcat(dialog, line_str);
				
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				listitem ++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS  Trabajos", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_WORKS_TELEPORTS:
		{
			for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[85 * (sizeof(work_info) + 1)], listitem;
			format(dialog, sizeof dialog, "Trabajo\tNivel\n");

			for (new i = 1; i != sizeof work_info; i ++)
			{
				new line_str[85];
				format(line_str, sizeof line_str, "{f5f5f5}%c%s (id: %d)\t{f5f5f5}%d\n", toupper(work_info[i][work_info_NAME][0]), work_info[i][work_info_NAME][1], i, work_info[i][work_info_LEVEL]);
				strcat(dialog, line_str);

				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				listitem ++;
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Trabajos", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_0: //Hospitales
		{
			new dialog[90 * (sizeof Hospital_Spawn_Positions)], listitem;

			format(dialog, sizeof dialog, "{f5f5f5}Lugar\t{"#BLUE_COLOR"}Zona");
			for (new i = 0; i != sizeof(Hospital_Spawn_Positions); i++ )
			{
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = i;

				new city[45], zone[45];
				GetPointZone(Hospital_Spawn_Positions[i][hspi_X], Hospital_Spawn_Positions[i][hspi_Y], city, zone);
				format(dialog, sizeof dialog, "%s\n{F5F5F5}Hospital %d\t{"#BLUE_COLOR"}%s, %s", dialog, listitem + 1, city, zone);

				listitem++;
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS  Hospitales", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_1: //Tiendas de ropa
		{
			for (new i = 0; i != MAX_LISTITEMS; i ++) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[90 * (MAX_LISTITEMS + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for (new i = 0; i != sizeof(ENTER_EXIT); i++ )
			{
				if (sites >= MAX_LISTITEMS) break;
				if (ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_BINCO && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_SUBURBAN && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_PROLAPS && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_DIDIER_SACHS && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_VICTIM && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_ZIP) continue;

				format(line_str, sizeof line_str, "{F5F5F5}%d. %s\t{f5f5f5}%.2f Km\n", sites + 1, ENTER_EXIT[i][ee_NAME], (GetPlayerDistanceFromPoint(playerid, ENTER_EXIT[i][ee_EXT_X], ENTER_EXIT[i][ee_EXT_Y], ENTER_EXIT[i][ee_EXT_Z]) * 0.01));
				strcat(dialog, line_str);

				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][sites] = i;
				sites ++;
			}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS  Tiendas de ropa", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_2: //Tiendas 24 horas
		{
			for (new i = 0; i != MAX_LISTITEMS; i ++) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[90 * (MAX_LISTITEMS + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for (new i = 0; i != sizeof(ENTER_EXIT); i++ )
			{
				if (sites >= MAX_LISTITEMS) break;
				if (ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_247) continue;

				format(line_str, sizeof line_str, "{F5F5F5}%d. %s\t{f5f5f5}%.2f Km\n", sites + 1, ENTER_EXIT[i][ee_NAME], (GetPlayerDistanceFromPoint(playerid, ENTER_EXIT[i][ee_EXT_X], ENTER_EXIT[i][ee_EXT_Y], ENTER_EXIT[i][ee_EXT_Z]) * 0.01));
				strcat(dialog, line_str);

				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][sites] = i;
				sites ++;
			}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS  Tiendas 24/7", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_3: //Comida rapida
		{
			for (new i = 0; i != MAX_LISTITEMS; i ++) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[90 * (MAX_LISTITEMS + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for (new i = 0; i != sizeof(ENTER_EXIT); i++ )
			{
				if (sites >= MAX_LISTITEMS) break;
				if (ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_PIZZA && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_CLUCKIN_BELL && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_BURGER_SHOT) continue;

				format(line_str, sizeof line_str, "{F5F5F5}%d. %s\t{f5f5f5}%.2f Km\n", sites + 1, ENTER_EXIT[i][ee_NAME], (GetPlayerDistanceFromPoint(playerid, ENTER_EXIT[i][ee_EXT_X], ENTER_EXIT[i][ee_EXT_Y], ENTER_EXIT[i][ee_EXT_Z]) * 0.01));
				strcat(dialog, line_str);

				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][sites] = i;
				sites ++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS  Restaurantes", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_4: //Bancos
		{
			for (new i = 0; i != MAX_LISTITEMS; i ++) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[90 * (MAX_LISTITEMS + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for (new i = 0; i != sizeof(ENTER_EXIT); i++ )
			{
				if (sites >= MAX_LISTITEMS) break;
				if (ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_BANK_LS && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_BANK_SF && ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_BANK_LV) continue;

				format(line_str, sizeof line_str, "{F5F5F5}%d. %s\t{f5f5f5}%.2f Km\n", sites + 1, ENTER_EXIT[i][ee_NAME], (GetPlayerDistanceFromPoint(playerid, ENTER_EXIT[i][ee_EXT_X], ENTER_EXIT[i][ee_EXT_Y], ENTER_EXIT[i][ee_EXT_Z]) * 0.01));
				strcat(dialog, line_str);

				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][sites] = i;
				sites ++;
			}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS  Bancos", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_5: //Cajeros
		{
			new dialog[90 * (sizeof(ATM_BANK) + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for (new i = 0; i != sizeof(ATM_BANK); i++ )
			{

				format(line_str, sizeof line_str, "{F5F5F5}Cajero %d\t{f5f5f5}%.2f Km\n", sites + 1, (GetPlayerDistanceFromPoint(playerid, ATM_BANK[i][atm_X], ATM_BANK[i][atm_Y], ATM_BANK[i][atm_Z]) * 0.01));
				strcat(dialog, line_str);

				sites ++;
			}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS  Cajeros", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_6: //Gasolineras
		{
			new dialog[90 * (sizeof(Fuel_Stations) + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for (new i = 0; i != sizeof(Fuel_Stations); i++ )
			{
				if (!Fuel_Stations[i][fs_GPS_SHOW]) continue;

				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][sites] = i;
				format(line_str, sizeof line_str, "{F5F5F5}Gasolinera %d\t%.2f Km\n", sites + 1, (GetPlayerDistanceFromPoint(playerid, Fuel_Stations[i][fs_X], Fuel_Stations[i][fs_Y], Fuel_Stations[i][fs_Z]) * 0.01));
				strcat(dialog, line_str);

				sites ++;
			}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS  Gasolineras", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_7: //Concesionarios
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "GPS  Concesionarios", DIALOG_PLAYER_GPS_SITE_7_String, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_8: //Policias
		{
			for (new i = 0; i != MAX_LISTITEMS; i ++) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[90 * (MAX_LISTITEMS + 1)];
			format(dialog, sizeof dialog, "Lugar\tDistancia\n");

			new line_str[90], sites;
			for (new i = 0; i != sizeof(ENTER_EXIT); i++ )
			{
				if (sites >= MAX_LISTITEMS) break;
				if (ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_POLICE_LS) continue;

				format(line_str, sizeof line_str, "{F5F5F5}%d. %s\t%.2f Km\n", sites + 1, ENTER_EXIT[i][ee_NAME], (GetPlayerDistanceFromPoint(playerid, ENTER_EXIT[i][ee_EXT_X], ENTER_EXIT[i][ee_EXT_Y], ENTER_EXIT[i][ee_EXT_Z]) * 0.01));
				strcat(dialog, line_str);

				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][sites] = i;
				sites ++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS  Policias", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_9: {
			for (new i = 0; i != MAX_LISTITEMS; i ++) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[90 * (MAX_LISTITEMS + 1)], line_str[90], sites;
			for (new i = 0; i != sizeof(ENTER_EXIT); i++ )
			{
				if (sites >= MAX_LISTITEMS) break;
				if (ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_PHARMACY) continue;

				format(line_str, sizeof line_str, "{F5F5F5}%d. %s\t%.2f Km\n", sites + 1, ENTER_EXIT[i][ee_NAME], (GetPlayerDistanceFromPoint(playerid, ENTER_EXIT[i][ee_EXT_X], ENTER_EXIT[i][ee_EXT_Y], ENTER_EXIT[i][ee_EXT_Z]) * 0.01));
				strcat(dialog, line_str);

				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][sites] = i;
				sites ++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "GPS  Farmacias", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_10: {
			for (new i = 0; i != MAX_LISTITEMS; i ++) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;

			new dialog[90 * (MAX_LISTITEMS + 1)], line_str[144], sites, city_name[24];
			
			for (new i = 0; i != sizeof(ENTER_EXIT); i++ ) {
				if (sites >= MAX_LISTITEMS) break;
				if (ENTER_EXIT[i][ee_INTERIOR_TYPE] != INTERIOR_DRIVING_SCHOOL) continue;

				GetPointZone(ENTER_EXIT[i][ee_EXT_X], ENTER_EXIT[i][ee_EXT_Y], city_name, "", false);
				format(line_str, sizeof(line_str), "{F5F5F5}%s\t%s\n", ENTER_EXIT[i][ee_GPS_NAME], city_name);
				strcat(dialog, line_str);

				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][sites] = i;
				sites ++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "GPS  Centro de Licencias", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_PLAYER_GPS_PROPERTIES:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					new dialog[90 * (MAX_SU_PROPERTIES + 2)], line_str[90];
					format(dialog, sizeof dialog, "Propiedad\tDistancia\n");
					for (new i = 0; i != MAX_SU_PROPERTIES; i ++) PLAYER_TEMP[playerid][pt_PLAYER_GPS_SELECTED_PROPERTY][i] = -1;
					if (rows)
					{
						for (new i = 0; i != rows; i ++)
						{
							if (i >= MAX_SU_PROPERTIES) break;
							new property_name[24], Float:pos[3], bool:isnull_name;
							cache_get_value_name_int(i, "id", PLAYER_TEMP[playerid][pt_PLAYER_GPS_SELECTED_PROPERTY][i]);
							cache_is_value_name_null(i, "name", isnull_name);
							if (!isnull_name) cache_get_value_name(i, "name", property_name);
							cache_get_value_name_float(i, "ext_x", pos[0]);
							cache_get_value_name_float(i, "ext_y", pos[1]);
							cache_get_value_name_float(i, "ext_z", pos[2]);
							format(line_str, sizeof line_str, "{F5F5F5}%d. %s\t{f5f5f5}%.2f Km\n", i + 1, property_name, (GetPlayerDistanceFromPoint(playerid, pos[0], pos[1], pos[2]) * 0.01));
							strcat(dialog, line_str);
						}
					}
					else strcat(dialog, "{f5f5f5}No tienes propiedades");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS  Mis propiedades", dialog, "»Aceptar", "xSalir");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM properties WHERE id_player = %d;", PI[playerid][pi_ID]);
			MySQL_TQueryInline(handle_db, using inline OnDialogQueryLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_PLAYER_GPS_VEHICLES:
		{
			for (new i = 0; i != MAX_LISTITEMS; i ++) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
			for (new i = 0; i != MAX_LISTITEMS; i ++) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM_EX][i] = -1;

			new dialog[115 * (MAX_SU_VEHICLES + 2)], total_vehicles;
			format(dialog, sizeof dialog, "Vehículo\tMatrícula\tDistancia\n");
			for (new i = 0; i != MAX_VEHICLES; i ++)
			{
				if (!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
				if (!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
				if (total_vehicles > MAX_SU_VEHICLES) break;

				if (PLAYER_VEHICLES[i][player_vehicle_OWNER_ID] == PI[playerid][pi_ID])
				{
					PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][total_vehicles] = i;

					new Float:pos[3];
					GetVehiclePos(i, pos[0], pos[1], pos[2]);

					new line_str[115];

					if (!PLAYER_VEHICLES[i][player_vehicle_ACCESSIBLE])
						format(line_str, sizeof line_str, "{666666}%d. %s (%d)\t{666666}%s\t{666666}-\n", total_vehicles + 1, VEHICLE_INFO[ GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME], i, GLOBAL_VEHICLES[i][gb_vehicle_NUMBER_PLATE]);
					else
						format(line_str, sizeof line_str, "{F5F5F5}%d. %s\t{F5F5F5}%s\t{f5f5f5}%.2f Km\n", total_vehicles + 1, VEHICLE_INFO[ GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME], GLOBAL_VEHICLES[i][gb_vehicle_NUMBER_PLATE], (GetPlayerDistanceFromPoint(playerid, pos[0], pos[1], pos[2]) * 0.01));

					strcat(dialog, line_str);
					total_vehicles ++;
				}
			}

			for (new i = 0; i != MAX_SU_VEHICLES; i ++) {
				if (!ParkingVehicles[playerid][i][pvValid]) continue;
				if (ParkingVehicles[playerid][i][pvOwnerId] != PI[playerid][pi_ID]) continue;

				strcatf(dialog, "{F5F5F5}%d. %s\t{F5F5F5}%s\t{f5f5f5}{"#YELLOW_COLOR"}Parking{f5f5f5}(%d)\n", total_vehicles + 1, VEHICLE_INFO[ ParkingVehicles[playerid][i][pvModelid] - 400 ][vehicle_info_NAME], ParkingVehicles[playerid][i][pvVehiclePlate], ParkingVehicles[playerid][i][pvParkingIndex]);
				
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM_EX][total_vehicles] = i;
				total_vehicles ++;
			}

			if (total_vehicles == 0) strcat(dialog, "{f5f5f5}No tienes vehículos");

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "GPS  Mis vehículos", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_PROPERTY_OPTIONS:
		{
			new caption[40];
			format(caption, sizeof caption, "Propiedad - %s", PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME]);

			new dialog[512];
			format(dialog, sizeof dialog, "1. Cambiar nombre de la propiedad\n2. Echar a todo del mundo de mi propiedad\n");

			if (PI[playerid][pi_CREW])
			{
				if (CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_ADD_PROPERTIES])
				{
					strcat(dialog, "3. Pasar a propiedad de banda\n");
				}
			}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_PROPERTY_NAME:
		{
			new dialog[85];
			format(dialog, sizeof dialog, "Nombre actual: %s\nIndica el nuevo nombre de la propiedad.", PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Propiedad - Cambiar nombre", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_NOTARY:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Notaría", "{f5f5f5}Vender una propiedad al banco\n{f5f5f5}Vender un vehículo al banco\n{f5f5f5}Vender una propiedad a una persona\n{f5f5f5}Vender un vehículo a una persona", "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_NOTARY_SELECT_PROPERTY:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					new dialog[45 * (MAX_SU_PROPERTIES + 2)], line_str[45];
					format(dialog, sizeof dialog, "{f5f5f5}Propiedad\n");
					for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
					if (rows)
					{
						for (new i = 0; i != rows; i ++)
						{
							if (i >= MAX_SU_PROPERTIES) break;
							new property_name[24], bool:isnull_name;
							cache_get_value_name_int(i, "id", PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i]);
							cache_is_value_name_null(i, "name", isnull_name);
							if (!isnull_name) cache_get_value_name(i, "name", property_name);
							format(line_str, sizeof line_str, "{f5f5f5}%d. %s\n", i + 1, property_name);
							strcat(dialog, line_str);
						}
					}
					else strcat(dialog, "{f5f5f5}No tienes propiedades");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Selecciona la propiedad que quieres vender", dialog, "»Aceptar", "xSalir");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name FROM properties WHERE id_player = %d;", PI[playerid][pi_ID]);
			MySQL_TQueryInline(handle_db, using inline OnDialogQueryLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_PROPERTY_BANK_SELL:
		{
			new caption[40];
			format(caption, sizeof caption, "Vender - %s", PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME]);
			
			new Float:price, payment;
			price = PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_PRICE_BASE];
			if (PI[playerid][pi_VIP]) payment = floatround( floatmul(price, 0.50) );
			else payment = floatround( floatmul(price, 0.25) );
			
			new dialog[160];
			format(dialog, sizeof dialog, "Precio en mercado: %s$\nNosotros te pagaremos: %s$\n\n¿Estás seguro de que quiere venderla?", number_format_thousand(PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_PRICE]), number_format_thousand(payment));
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, caption, dialog, "Vender", "Atrás");
			return 1;
		}
		case DIALOG_PROPERTY_SELL_PRICE:
		{
			new caption[40];
			format(caption, sizeof caption, "Vender - %s", PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME]);
			
			new Float:price, min_price, max_price;
			price = PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_PRICE];
			min_price = floatround( floatmul(price, 0.15) );
			max_price = floatround( floatmul(price, 6.0) );
			
			new dialog[250];
			format(dialog, sizeof dialog, 
			"Precio en mercado: %s$\n\nPrecio mínimo de venta: %s$\nPrecio máximo de venta: %s$\n\n¿Por cuánto quieres vender esta propiedad?", 
			number_format_thousand(PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_PRICE]),
			number_format_thousand(min_price),
			number_format_thousand(max_price));
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_PROPERTY_SELL_TO_PLAYER:
		{
			new caption[40];
			format(caption, sizeof caption, "Vender - %s", PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME]);
			
			new dialog[250];
			format(dialog, sizeof dialog, "De acuerdo, quieres vender esta propiedad por %s$.\n\nIndica el nombre o playerid del comprador.\nEl comprador debe estar en la sala y cumplir todos los requisitos.", number_format_thousand(PLAYER_TEMP[playerid][pt_NOTARY_PRICE]));
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_SELL_CONFIRM_PROPERTY:
		{
			new dialog[240];
			format(dialog, sizeof dialog,
				"%s te quiere vender una propiedad.\n\n\
				Propiedad: %d\n\
				Precio: %s$\n\n\
				Balance tras la compra: %s$\n\n\
				¿Quieres comprar esta propiedad?",
				PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER] ][pt_NAME],
				PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID],
				number_format_thousand(PLAYER_TEMP[playerid][pt_NOTARY_PRICE]),
				number_format_thousand( PI[playerid][pi_BANK_MONEY] - PLAYER_TEMP[playerid][pt_NOTARY_PRICE] )
			);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Oferta recibida", dialog, "Comprar", "Cerrar");
			return 1;
		}
		case DIALOG_NOTARY_SELECT_VEHICLE:
		{
			for (new i = 0; i != MAX_LISTITEMS; i ++) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[95 * (MAX_SU_VEHICLES + 2)], total_vehicles;
			format(dialog, sizeof dialog, "{f5f5f5}Vehículo\t{"#BLUE_COLOR"}Matrícula\n");
			for (new i = 0; i != MAX_VEHICLES; i ++)
			{
				if (!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
				if (!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
				if (total_vehicles > MAX_SU_VEHICLES) break;
				
				if (PLAYER_VEHICLES[i][player_vehicle_OWNER_ID] == PI[playerid][pi_ID])
				{
					PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][total_vehicles] = i;
					
					new line_str[95];
					format(line_str, sizeof line_str, "{f5f5f5}%d. %s\t{"#BLUE_COLOR"}%s\n", total_vehicles + 1, VEHICLE_INFO[ GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME], GLOBAL_VEHICLES[i][gb_vehicle_NUMBER_PLATE]);
					strcat(dialog, line_str);
					total_vehicles ++;
				}
			}
			if (total_vehicles == 0) strcat(dialog, "{f5f5f5}No tienes vehículos");
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Selecciona el vehículo que quieres vender", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_VEHICLE_BANK_SELL:
		{
			new caption[40];
			format(caption, sizeof caption, "Vender - %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			new Float:price, payment;
			price = VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_PRICE];
			if (PI[playerid][pi_VIP]) payment = floatround( floatmul(price, 0.50) );
			else payment = floatround( floatmul(price, 0.25) );
			
			new dialog[160];
			format(dialog, sizeof dialog, "Precio en mercado: %s$\nNosotros te pagaremos: %s$\n\n¿Estás seguro de que quiere venderlo?", number_format_thousand( VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_PRICE] ), number_format_thousand(payment));
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, caption, dialog, "Vender", "Atrás");
			return 1;
		}
		case DIALOG_VEHICLE_SELL_PRICE:
		{
			new caption[40];
			format(caption, sizeof caption, "Vender - %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			new Float:price, min_price, max_price;
			price = VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_PRICE];
			min_price = floatround( floatmul(price, 0.15) );
			max_price = floatround( floatmul(price, 6.0) );
			
			new dialog[250];
			format(dialog, sizeof dialog, 
			"Precio en mercado: %s$\n\nPrecio mínimo de venta: %s$\nPrecio máximo de venta: %s$\n\n¿Por cuánto quieres vender este vehículo?", 
			number_format_thousand(VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_PRICE]),
			number_format_thousand(min_price),
			number_format_thousand(max_price));
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_VEHICLE_SELL_TO_PLAYER:
		{
			new caption[40];
			format(caption, sizeof caption, "Vender - %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			new dialog[250];
			format(dialog, sizeof dialog, "De acuerdo, quieres vender este vehículo por %s$.\n\nIndica el nombre o playerid del comprador.\nEl comprador debe estar en la sala y cumplir todos los requisitos.", number_format_thousand(PLAYER_TEMP[playerid][pt_NOTARY_PRICE]));
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_SELL_CONFIRM_VEHICLE:
		{
			new dialog[300];
			format(dialog, sizeof dialog,
				"%s te quiere vender un vehículo.\n\n\
				Vehículo: %s\n\
				Matrícula: %s\n\
				Precio: %s$\n\n\
				Balance tras la compra: %s$\n\n\
				¿Quieres comprar este vehículo?",
				PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER] ][pt_NAME],
				VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME],
				GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_NUMBER_PLATE],
				number_format_thousand(PLAYER_TEMP[playerid][pt_NOTARY_PRICE]),
				number_format_thousand( PI[playerid][pi_BANK_MONEY] - PLAYER_TEMP[playerid][pt_NOTARY_PRICE] )
			);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Oferta recibida", dialog, "Comprar", "Cerrar");
			return 1;
		}
		case DIALOG_SELECT_TRUCK_TYPE:
		{
			new work_extra_payment;
			if (work_info[WORK_TRUCK][work_info_EXTRA_PAY] > 0 && work_info[WORK_TRUCK][work_info_EXTRA_PAY_EXP] > 0)
			{
				work_extra_payment = (work_info[WORK_TRUCK][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[playerid][WORK_TRUCK][pwork_LEVEL], work_info[WORK_TRUCK][work_info_EXTRA_PAY_EXP])));
				if (work_info[WORK_TRUCK][work_info_EXTRA_PAY_LIMIT] != 0) if (work_extra_payment > work_info[WORK_TRUCK][work_info_EXTRA_PAY_LIMIT]) work_extra_payment = work_info[WORK_TRUCK][work_info_EXTRA_PAY_LIMIT];
				
				if (PI[playerid][pi_VIP]) work_extra_payment += VIP_WORK_EXTRA_PAY;
			}
			
			new dialog[105 * (sizeof(Truck_Contents) + 2)], listitem;
			for (new i = 0; i != sizeof Truck_Contents; i ++)
			{
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = i;

				if (Truck_Contents[i][truck_content_EXP] > PLAYER_WORKS[playerid][WORK_TRUCK][pwork_LEVEL]) strcatf(dialog, "{666666}%s\t{666666}%s$\t{666666}%.2f{"#LIGHTBLUE_COLOR"}KM\n", Truck_Contents[i][truck_content_NAME], number_format_thousand(Truck_Contents[i][truck_content_MONEY] + work_extra_payment), (GetPlayerDistanceFromPoint(playerid, Truck_Contents[i][truck_content_X], Truck_Contents[i][truck_content_Y], Truck_Contents[i][truck_content_Z]) * 0.01));
				else strcatf(dialog, "{"#GREEN_COLOR"}{f5f5f5}%s\t{f5f5f5}%s{"#GREEN_COLOR"}$\t{f5f5f5}%.2f {"#GREEN_COLOR"}km\n", Truck_Contents[i][truck_content_NAME], number_format_thousand(Truck_Contents[i][truck_content_MONEY] + work_extra_payment), (GetPlayerDistanceFromPoint(playerid, Truck_Contents[i][truck_content_X], Truck_Contents[i][truck_content_Y], Truck_Contents[i][truck_content_Z]) * 0.01));
				listitem++;
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "[{999999}Camionero{F5F5F5}]  Seleccionar carga", dialog, "»Aceptar", "xCancelar");
			return 1;
		}
		case DIALOG_TUNING_MENU_PART:
		{
			inline OnComponentsInfoLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					new caption[45], dialog[80 * TOTAL_TUNING_PARTS], line_str[80];
					format(caption, sizeof caption, "Tuning - %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
					format(dialog, sizeof dialog, "{f5f5f5}Categoría\n");
					if (rows)
					{
						for (new i = 0; i != rows; i ++)
						{
							if (i >= TOTAL_TUNING_PARTS)
							{
								printf("---> Límite superado en array 'PLAYER_TUNING_MENU, dialog Parts' al intentar cargar de la base de datos.");
								break;
							}

							cache_get_value_index(i, 0, PLAYER_TUNING_MENU[playerid][i][tuning_menu_NAME]);
							format(line_str, sizeof line_str, "{f5f5f5}%s\n", PLAYER_TUNING_MENU[playerid][i][tuning_menu_NAME]);
							strcat(dialog, line_str);
						}
					}
					else strcat(dialog, "{666666}Este vehículo no se puede tunear");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "»Aceptar", "xSalir");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT vcomponents_info.part FROM vcomponents_info INNER JOIN vcomponents ON vcomponents_info.id = vcomponents.componentid WHERE vcomponents.modelid = %d GROUP BY vcomponents_info.part;", GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID]);
			MySQL_TQueryInline(handle_db, using inline OnComponentsInfoLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_TUNING_MENU_COMPONENT:
		{
			inline OnComponentsInfoLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					new caption[45], dialog[75 * MAX_TUNING_PARTS_COMPONENTS], line_str[75];
					format(caption, sizeof caption, "%s > %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME], PLAYER_TEMP[playerid][pt_TUNING_SELECTED_PART]);
					format(dialog, sizeof dialog, "{f5f5f5}Categoría\t{"#BLUE_COLOR"}Piezas necesarias\t{f5f5f5}Estimación\n");
					if (rows)
					{
						for (new i = 0; i != rows; i ++)
						{
							if (i >= MAX_TUNING_PARTS_COMPONENTS)
							{
								printf("---> Límite superado en array 'PLAYER_TUNING_MENU, dialog Partsnames' al intentar cargar de la base de datos.");
								break;
							}

							cache_get_value_name_int(i, "id", PLAYER_TUNING_MENU[playerid][i][tuning_menu_ID]);
							cache_get_value_name(i, "name", PLAYER_TUNING_MENU[playerid][i][tuning_menu_NAME]);
							cache_get_value_name_int(i, "pieces", PLAYER_TUNING_MENU[playerid][i][tuning_menu_PIECES]);
							format(line_str, sizeof line_str, "{f5f5f5}%s\t{"#BLUE_COLOR"}%d\t{f5f5f5}%s$\n", PLAYER_TUNING_MENU[playerid][i][tuning_menu_NAME], PLAYER_TUNING_MENU[playerid][i][tuning_menu_PIECES], number_format_thousand(PLAYER_TUNING_MENU[playerid][i][tuning_menu_PIECES] * 50));
							strcat(dialog, line_str);
						}
					}
					else strcat(dialog, "{666666}No se puede tunear");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "»Aceptar", "xSalir");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT vcomponents_info.id, vcomponents_info.name, vcomponents_info.pieces FROM vcomponents_info INNER JOIN vcomponents ON vcomponents_info.id = vcomponents.componentid WHERE vcomponents_info.part = '%e' AND vcomponents.modelid = %d;", PLAYER_TEMP[playerid][pt_TUNING_SELECTED_PART], GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID]);
			MySQL_TQueryInline(handle_db, using inline OnComponentsInfoLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_MECHANIC_MENU:
		{
			new caption[500];
			format(caption, sizeof caption, "[{"#MECHANIC_COLOR"}Mecanico{F5F5F5}]  %s {"#MECHANIC_COLOR"}piezas{F5F5F5} » %s", number_format_thousand(PI[playerid][pi_MECHANIC_PIECES]), VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			new dialog[700];
			format(dialog, sizeof dialog, "{F5F5F5} Reparación completa\t{F5F5F5}10 {"#MECHANIC_COLOR"}Piezas 500{"#GREEN_COLOR"}$\n");
			
			for (new i; i != sizeof Mechanic_Areas; i++)
			{
				if (IsPlayerInDynamicArea(playerid, Mechanic_Areas[i]))
				{
					new paintjobs = VehiclePaintjob( GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] );
					strcat(dialog, "{F5F5F5} Pintar vehículo\t{F5F5F5}5 {"#MECHANIC_COLOR"}Piezas 250{"#GREEN_COLOR"}$\n");
					if (PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL] >= 100)
					{
						strcat(dialog, "{F5F5F5} Eliminar componentes\n");
						strcat(dialog, "{F5F5F5} Tunear vehículo\n");
						if (paintjobs > 0) strcat(dialog, "{F5F5F5} Paintjob\t{F5F5F5}15 {"#MECHANIC_COLOR"}Piezas 750{"#GREEN_COLOR"}$\n");
					}
					else
					{
						strcat(dialog, "{666666} Eliminar componentes\n");
						strcat(dialog, "{666666} Tunear vehículo\n");
						if (paintjobs > 0) strcat(dialog, "{666666} Paintjob\t{F5F5F5}15 {"#MECHANIC_COLOR"}Piezas 750{"#GREEN_COLOR"}$\n");
					}
					break;
				}
			}

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_MECHANIC_REPAIR_PRICE:
		{
			new caption[60];
			format(caption, sizeof caption, "[{"#MECHANIC_COLOR"}Mecanico{F5F5F5}]  Reparacion completa %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, "{F5F5F5} Rango de precio: 500{"#GREEN_COLOR"}$ {F5F5F5}- 5000{"#GREEN_COLOR"}$\n» {F5F5F5}Indica el precio de reparacion:", "»Aceptar", "«Volver");
			return 1;
		}
		case DIALOG_MECHANIC_COLOR_PRICE:
		{
			new caption[60];
			format(caption, sizeof caption, "[{"#MECHANIC_COLOR"}Mecanico{F5F5F5}]  Pintar %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, "Indica el precio para pintar el vehículo.\nRango de precio: 0$ - 1.750$", "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_MECHANIC_TUNING_PRICE:
		{
			new caption[60], dialog[145];
			format(caption, sizeof caption, "[{"#MECHANIC_COLOR"}Mecanico{F5F5F5}]  Tunear %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			format(dialog, sizeof dialog, "Indica el precio para tunear el vehículo.\nRango de precio: 0$ - %s$", number_format_thousand((PLAYER_TEMP[playerid][pt_TUNING_SELECTED_PIECES] * 50) + 2000));
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_MECHANIC_PAINTJOB_PRICE:
		{
			new caption[60];
			format(caption, sizeof caption, "[{"#MECHANIC_COLOR"}Mecanico{F5F5F5}]  Paintjob %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			if (PLAYER_TEMP[playerid][pt_PAINTJOB_SELECTED_ID] == 3)
				ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, "Indica el precio para eliminar el paintjob del vehículo.\nRango de precio: 0$ - 2.750$", "»Aceptar", "xSalir");
			else
				ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, "Indica el precio para el paintjob del vehículo.\nRango de precio: 0$ - 2.750$", "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_MECHANIC_REM_COM_PRICE:
		{
			new caption[60];
			format(caption, sizeof caption, "[{"#MECHANIC_COLOR"}Mecanico{F5F5F5}]  Eliminar componente de %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, "Indica el precio para eliminar el componente del vehículo.\nRango de precio: 0$ - 2.750$", "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_MECHANIC_ACCEPT:
		{
			new dialog[300];
			format(dialog, sizeof dialog,
				
				"\
					{f5f5f5}El mecánico %s te ofrece:\n\
					{cccccc}%s\n\
					\n\
					{F5F5F5} {f5f5f5}Precio: %s{"#GREEN_COLOR"}$\n\
					{F5F5F5} {f5f5f5}Piezas: %dP{f5f5f5}\n\
					» ¿Quieres aceptarlo?\n\
				",
					PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][pt_NAME],
					PLAYER_TEMP[playerid][pt_MECHANIC_TEXT],
					number_format_thousand(PLAYER_TEMP[playerid][pt_MECHANIC_PRICE]),
					PLAYER_TEMP[playerid][pt_MECHANIC_PIECES]
			);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "[{"#MECHANIC_COLOR"}Mecanico{F5F5F5}]  Oferta recibida", dialog, "»Aceptar", "xRechazar");
			return 1;
		}
		case DIALOG_MECHANIC_SELECT_COL_SLOT:
		{
			new caption[60];
			format(caption, sizeof caption, "[{"#MECHANIC_COLOR"}Mecanico{F5F5F5}]  Pintar %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, "{F5F5F5} Pintar color primario\n{F5F5F5} Pintar color secundario", "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_MECHANIC_SELECT_COLOR, DIALOG_PLANE_SELECT_COLOR, DIALOG_BOAT_SELECT_COLOR:
		{
			new caption[60];
			format(caption, sizeof caption, "[{"#MECHANIC_COLOR"}Mecanico{F5F5F5}]  Pintar %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			
			new dialog[15 * (sizeof(VEHICLE_COLORS) + 1) ];
			for (new i = 0; i != sizeof VEHICLE_COLORS; i++)
			{
				new line_str[15];
				format(line_str, sizeof(line_str), "{%06x}%d\n", VEHICLE_COLORS[i] >>> 8, i);
				strcat(dialog, line_str);
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_MECHANIC_REMOVE_COMPONEN:
		{
			inline OnComponentsInfoLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					new caption[60], dialog[80 * (MAX_VEHICLE_COMPONENTS + 2) ], count, line_str[80];
					format(caption, sizeof caption, "Componentes de %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
					format(dialog, sizeof dialog, "{f5f5f5}Componente\t{"#BLUE_COLOR"}Piezas\n");
					if (rows)
					{
						for (new i = 0; i != rows; i ++)
						{
							new id, part[24], name[24];
							cache_get_value_name_int(i, "id", id);
							PLAYER_TUNING_MENU[playerid][count][tuning_menu_ID] = GetVehicleComponentIndexFromId(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], id);
							if (PLAYER_TUNING_MENU[playerid][count][tuning_menu_ID] != -1) {
								cache_get_value_name(i, "part", part);
								cache_get_value_name(i, "name", name);
								cache_get_value_name_int(i, "pieces", PLAYER_TUNING_MENU[playerid][count][tuning_menu_PIECES]);
								format(line_str, sizeof line_str, "{f5f5f5}%s > %s\t{"#BLUE_COLOR"}+ %d\n", part, name, PLAYER_TUNING_MENU[playerid][count][tuning_menu_PIECES]);
								strcat(dialog, line_str);
								count++;
							}
							else strcat(dialog, "{f5f5f5}Vehículo sin tunear"); 
						}
					}
					else strcat(dialog, "{f5f5f5}Vehículo sin tunear");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Eliminar", "Atrás");
				}
			}

			new components_query[1024], count;
			format(components_query, sizeof components_query, "SELECT * FROM vcomponents_info WHERE");
			for (new i = 0; i != MAX_VEHICLE_COMPONENTS; i ++)
			{
				PLAYER_TUNING_MENU[playerid][i][tuning_menu_ID] = -1;
				if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][i]) continue;
				if (count == 0) format(components_query, sizeof components_query, "%s id = %d", components_query, GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][i]);
				else format(components_query, sizeof components_query, "%s OR id = %d", components_query, GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][i]);
				count ++;
			}
			if (!count) SendPlayerClientMessage(playerid, "Vehículo sin tunear.");
			else MySQL_TQueryInline(handle_db, using inline OnComponentsInfoLoad, components_query);
			return 1;
		}
		case DIALOG_TUNING_PAINTJOB:
		{
			new caption[60], dialog[25 * 4];
			format(caption, sizeof caption, "Paintjob - %s", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			new paintjobs = VehiclePaintjob( GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_MODELID] );
			if (paintjobs == 0)
			{
				SendPlayerClientMessage(playerid, "Este vehículo no soporta paintjobs.");
				ShowDialog(playerid, DIALOG_MECHANIC_MENU);
				return 1;
			}
			
			strcat(dialog, "{f5f5f5}Eliminar paintjob (+ 15 piezas)\n");
			for (new i = 0; i != paintjobs; i ++)
			{
				new line_str[25];
				format(line_str, sizeof line_str, "{f5f5f5}Paintjob %d\n", i + 1);
				strcat(dialog, line_str);
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_SEED_LIST:
		{
			new dialog[64 * (sizeof(seed_info) + 1)];
			
			for (new i = 0; i != sizeof seed_info; i ++)
			{
				if (PLAYER_WORKS[playerid][WORK_FARMER][pwork_LEVEL] >= seed_info[i][seed_info_EXP]) {
					if (seed_info[i][seed_info_TYPE] == TYPE_LEGAL) strcatf(dialog, "{"#GREEN_COLOR"}%s\t{f5f5f5}%d{"#GREEN_COLOR"}$\n", seed_info[i][seed_info_NAME], seed_info[i][seed_info_PRICE]);
					else strcatf(dialog, "{"#RED_COLOR"}%s\t{f5f5f5}%d{999999}B$\n", seed_info[i][seed_info_NAME], seed_info[i][seed_info_PRICE]);
				} else {
					if (seed_info[i][seed_info_TYPE] == TYPE_LEGAL) strcatf(dialog, "{666666}%s\t{666666}%dB$\n", seed_info[i][seed_info_NAME], seed_info[i][seed_info_PRICE]);
					else strcatf(dialog, "{666666}%s\t{666666}%d$\n", seed_info[i][seed_info_NAME], seed_info[i][seed_info_PRICE]);
				}
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "Semillas de la vida", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_SEED_BUY:
		{
			new dialog[150];
			if (seed_info[ PLAYER_TEMP[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_TYPE] == TYPE_LEGAL) format(dialog, sizeof dialog, "{f5f5f5}Vale, quieres comprar semillas de %s.\n{f5f5f5}El precio por semilla es de: %d$\n\n{f5f5f5}¿Cuántas semillas quieres comprar?", seed_info[ PLAYER_TEMP[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_NAME], seed_info[ PLAYER_TEMP[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_PRICE]);
			else format(dialog, sizeof dialog, "{f5f5f5}Vale, quieres comprar semillas de %s.\n{f5f5f5}El precio por semilla es de: %d{999999}B$\n\n{f5f5f5}¿Cuántas semillas quieres comprar?", seed_info[ PLAYER_TEMP[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_NAME], seed_info[ PLAYER_TEMP[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_PRICE]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Semillas de la vida", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_PLANT_PLANTS:
		{
			new dialog[95 * (sizeof(seed_info) + 1)];

			for (new i = 0; i != sizeof plant_info; i ++)
			{
				if (seed_info[i][seed_info_TYPE] == TYPE_LEGAL) strcatf(dialog, "{"#GREEN_COLOR"}%s\t{f5f5f5}%s\t{f5f5f5}%d\n", plant_info[i][plant_info_NAME], seed_info[i][seed_info_NAME], plant_info[i][plant_info_SEEDS]);
				else strcatf(dialog, "{"#ORANGE_COLOR"}%s\t{f5f5f5}%s\t{f5f5f5}%d\n", plant_info[i][plant_info_NAME], seed_info[i][seed_info_NAME], plant_info[i][plant_info_SEEDS]);
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "Plantar", dialog, "»Aceptar", "xSalir");
		}
		case DIALOG_ANIMS: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Animaciones", DIALOG_ANIMS_String, "Continuar", "X");
		case DIALOG_TRICKS_MEDICINE:
		{	
			new dialog[150];
			format(dialog, sizeof dialog, "%s te quiere vender algo.\n\nTipo: medicamento\nCantidad: %dg\nPrecio: %s$\n\n¿Quieres comprárselo?",
									PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pt_NAME],
									PLAYER_TEMP[playerid][pt_TRICK_SELLER_EXTRA],
									number_format_thousand(PLAYER_TEMP[playerid][pt_TRICK_PRICE])
								);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Ventas", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_TRICKS_CANNABIS:
		{	
			new dialog[150];
			format(dialog, sizeof dialog, "%s te quiere vender algo.\n\nTipo: marihuana\nCantidad: %dg\nPrecio: %s$\n\n¿Quieres comprárselo?",
									PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pt_NAME],
									PLAYER_TEMP[playerid][pt_TRICK_SELLER_EXTRA],
									number_format_thousand(PLAYER_TEMP[playerid][pt_TRICK_PRICE])
								);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Ventas", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_TRICKS_CRACK:
		{	
			new dialog[150];
			format(dialog, sizeof dialog, "%s te quiere vender algo.\n\nTipo: crack\nCantidad: %dg\nPrecio: %s$\n\n¿Quieres comprárselo?",
									PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pt_NAME],
									PLAYER_TEMP[playerid][pt_TRICK_SELLER_EXTRA],
									number_format_thousand(PLAYER_TEMP[playerid][pt_TRICK_PRICE])
								);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Ventas", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_TRICKS_SU:
		{	
			new dialog[150];
			format(dialog, sizeof dialog, "%s te quiere vender %d "SERVER_COIN"\nPrecio: %s$\n\n¿Quieres comprárselo?",
									PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pt_NAME],
									PLAYER_TEMP[playerid][pt_TRICK_SELLER_EXTRA],
									number_format_thousand(PLAYER_TEMP[playerid][pt_TRICK_PRICE])
								);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Ventas", dialog, "»Aceptar", "xSalir");	
			return 1;
		}
		case DIALOG_SELECT_POLICE_SKIN:
		{
			for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[60 * sizeof(POLICE_SKINS)], listitem;
			for (new i = 0; i != sizeof POLICE_SKINS; i ++)
			{
				if (POLICE_SKINS[i][police_skin_TYPE] != PI[playerid][pi_GENDER]) continue;
				
				if (POLICE_SKINS[i][police_skin_RANK] > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL]) strcatf(dialog, "{666666}%s\t{666666}%d\n", POLICE_RANKS[ POLICE_SKINS[i][police_skin_RANK] ], POLICE_SKINS[i][police_skin_SKIN]);
				else strcatf(dialog, "{F5F5F5}%s\t{"#POLICE_COLOUR"}%d\n", POLICE_RANKS[ POLICE_SKINS[i][police_skin_RANK] ], POLICE_SKINS[i][police_skin_SKIN]);
				
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				listitem ++;
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "{"#POLICE_COLOUR"}[Policia]{F5F5F5}  Servicio Policia", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_POLICE_RADIOS:
		{
			new dialog[64 * 6];
			for (new i = 0; i != 6; i ++)
			{
				new players = CountPoliceRadioPlayers(i);
				
				if (PLAYER_TEMP[playerid][pt_POLICE_RADIO] == i) strcat(dialog, "{"#POLICE_COLOUR"}{f5f5f5} ");
				else strcat(dialog, "{666666}");

				format(dialog, sizeof dialog, "%sFrecuencia %d:\t%d personas\n", dialog, i, players);
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "{"#POLICE_COLOUR"}[Policia]{f5f5f5}  Frecuencia", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_POLICE_LIST:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					new dialog[128 * 15], count, start_pos = PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] * PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT] + 1;
					for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
					for (new i = 0; i != rows; i ++)
					{
						new level, id, name[24], last_connection[24], connected;
						cache_get_value_name_int(i, "level", level);
						cache_get_value_name_int(i, "id", id);
						cache_get_value_name(i, "name", name);
						cache_get_value_name(i, "last_connection", last_connection);
						cache_get_value_name_int(i, "connected", connected);

						if (connected) strcatf(dialog, "{F5F5F5}%d. %s\t{"#GREEN_COLOR"}{F5F5F5}%s\t{"#GREEN_COLOR"}Conectado\n", start_pos + i, name, POLICE_RANKS[level]);
						else strcatf(dialog, "{F5F5F5}%d. %s\t{cccccc}{F5F5F5}%s\t{cccccc}%s\n", start_pos + i, name, POLICE_RANKS[level], last_connection);
						PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = id;
					}

					PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = -4;
					strcat(dialog, "{F5F5F5} Reclutar Miembro\n");

					PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = -5;
					strcat(dialog, "{F5F5F5} Refuerzos\n");

					PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = -2;
					strcat(dialog, "{F5F5F5}»Siguiente\n");
					PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = -3;
					strcat(dialog, "{F5F5F5}«Anterior\n");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "{"#POLICE_COLOUR"}[Policia]{F5F5F5}  San Andreas Departamento de Policia", dialog, "»Aceptar", "xSalir");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT pworks.level, player.id, player.name, player.last_connection, player.connected FROM pworks INNER JOIN player ON pworks.id_player = player.id WHERE pworks.id_work = %d AND pworks.`set` = 1 ORDER BY player.connected DESC, pworks.level DESC LIMIT %d, %d;", WORK_POLICE, PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] * PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT], PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT]);
			MySQL_TQueryInline(handle_db, using inline OnDialogQueryLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_POLICE_MODIFY:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					if (rows)
					{
						new level, name[24];
						cache_get_value_name_int(0, "level", level);
						cache_get_value_name(0, "name", name);

						if (level > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL]) SendPlayerClientMessage(playerid, "No puedes modificar el rango de este policia porque es un rango superior al tuyo.");
						else
						{
							new caption[45], dialog[45 * sizeof(POLICE_RANKS)], line_str[45];
							format(caption, sizeof caption, "policia - %s", name);
							format(dialog, sizeof dialog, "{f5f5f5}Civil (eliminar)\n");
							for (new i = 1; i != sizeof POLICE_RANKS; i ++)
							{
								if (i > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL])
								{
									if (level == i) format(line_str, sizeof line_str, "{666666}%s (actual)\n", POLICE_RANKS[i]);
									else format(line_str, sizeof line_str, "{666666}%s\n", POLICE_RANKS[i]);
								}
								else
								{
									if (level == i) format(line_str, sizeof line_str, "{f5f5f5}%s (actual)\n", POLICE_RANKS[i]);
									else format(line_str, sizeof line_str, "{f5f5f5}%s\n", POLICE_RANKS[i]);
								}
								strcat(dialog, line_str);
							}
							ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "»Aceptar", "xSalir");
						}
					}
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT pworks.level, player.name FROM pworks INNER JOIN player ON pworks.id_player = player.id WHERE pworks.id_player = %d AND pworks.id_work = %d AND pworks.`set` = 1;", PLAYER_TEMP[playerid][pt_SELECTED_DB_PID], WORK_POLICE);
			MySQL_TQueryInline(handle_db, using inline OnDialogQueryLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_HELP:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, ""SERVER_NAME"",
			
				"\
					{f5f5f5}- General\n\
					{f5f5f5}- Información\n\
					{f5f5f5}- Personaje\n\
					{f5f5f5}- Propiedades\n\
					{f5f5f5}- Reportar\n\
					{f5f5f5}- Trabajos\n\
					{f5f5f5}- Vehículos\n\
					{f5f5f5}- Bandas\n\
					{"#PRIMARY_COLOR"}- Membresia VIP\n\
				"
			
		, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_HELP_GENERAL:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "General",
			
				"\
					{F5F5F5}Un día del juego dura tres horas reales.\n\
					\n\
					Para subir de nivel necesitas rellenar la reputación, puedes verlo gráficamente\n\
					en la barra que aparece en la parte superior derecha que representa tu reputación.\n\
					La reputación se aumenta cada {"#PRIMARY_COLOR"}25 minutos,{F5F5F5} cuando la reputación llegue\n\
					{F5F5F5}El pago de juego(payday) se recibe cada tres reputaciones {"#PRIMARY_COLOR"}(75 minutos).\n\
					{F5F5F5}Puedes utilizar {f5f5f5}/csave{F5F5F5} para guardar los datos de tu cuenta.\n\
					\n\
					Utiliza {f5f5f5}/estadisticas{F5F5F5} para ver tus estadísticas, utiliza {f5f5f5}/exp{F5F5F5} para ver tus habilidades.\n\
					En el nivel uno no podrás agredir a otros jugadores, tampoco podrás tener armas\n\
					hasta el nivel tres.\n\
					Utiliza {f5f5f5}/nombre{F5F5F5} para cambiar tu nombre.\n\
					Utiliza {f5f5f5}/correo{F5F5F5} para cambiar tu correo electrónico.\n\
					Utiliza {f5f5f5}/pass{F5F5F5} para cambiar la contraseña de tu cuenta.\n\
					Para ver el tiempo que te queda en la cárcel utiliza {f5f5f5}/tiempo.\n\
					\n\
					{F5F5F5}Para utilizar el canal de dudas utiliza el comando {f5f5f5}/duda{F5F5F5} seguido de tu duda.\n\
					Para deshabilitar o volver a habilitar el canal de dudas usa {f5f5f5}/dudas.\n\
					\n\
					{F5F5F5}Utiliza {f5f5f5}/panel {F5F5F5}para configuraciones básicas de tu cuenta.\n\
					\n\
				"
		, "Cerrar", "");
			return 1;
		}
		case DIALOG_HELP_INFO:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Información", DIALOG_CREDIT_String, "Cerrar", "");
			return 1;
		}
		case DIALOG_HELP_CHARACTER:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Personaje",
			
				"\
					{F5F5F5}Para poder localizar cualquier punto en San Andreas te recomandamos que compres\n\
					un GPS en cualquier tienda {FF846A}24/7.{F5F5F5} Desde el GPS podrás localizarlo todo, tus vehículos,\n\
					tus propiedades, trabajos, lugares de interés, etc.\n\
					\n\
					Utiliza tu teléfono para llamar a la policia, mecánico, taxi... o para hablar con\n\
					alguien, por defecto tendrás varios contactos en la agenda pero puedes eliminarlos\n\
					o añadir más, puedes tener hasta 20 contactos, todo esto se hace desde {f5f5f5}/movil{F5F5F5} o {f5f5f5}/celular.\n\
					\n\
					{F5F5F5}En las tiendas {FF846A}24/7{F5F5F5} puedes comprar guías para saber el número de cualquier jugador.\n\
					Para evitar aparecer en la guía utiliza {f5f5f5}/sguia.\n\
					\n\
					{F5F5F5}Las barras en la esquina superior derecha representan tu nivel de hidratación y de alimentación,\n\
					si los niveles llegan muy abajo tu personaje se empezará a sentir mal y empezarás a perder vida.\n\
					Los niveles bajarán según tu actividad física, corriendo te dará sed más pronto que caminando.\n\
					Para alimentarte ve a un restaurante de cómida rápida o a un {FF846A}24/7{F5F5F5} donde podrás comprar alimentos,\n\
					que podrás consumir el cualquier momento con {f5f5f5}/alimentos{F5F5F5} o {f5f5f5}/consumir.\n\
					\n\
					{F5F5F5}Para consumir consumibles que lleves contigo utiliza {f5f5f5}/consumir.\n\
					\n\
					{F5F5F5}Puedes cambiar la ropa de tu personaje en cualquier tienda de ropa, también\n\
					podrás comprarte accesorios y ponertelos o quitartelos {f5f5f5}(/accesorios).\n\
					\n\
					{F5F5F5}Si tienes nivel de búsqueda o estás arrestado y mueres irás a la cárcel después de recuperarte.\n\
					Cuando te arresten los policias te pueden requisar tus pertenencias ilegales {FF846A}(armas y drogas).\n\
					\n\
					{F5F5F5}Utiliza {f5f5f5}/inv{F5F5F5} o pulsa {f5f5f5}N {F5F5F5}para ver todo lo que llevas encima.\n\
					{F5F5F5}Utiliza {f5f5f5}/estilo{F5F5F5} para cambiar el estilo de tu personaje.\n\
					\n\
				"
		, "Cerrar", "");
			return 1;
		}
		case DIALOG_HELP_PROPERTIES:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Propiedades",
			
				"\
					{F5F5F5}Puedes encontrar diferentes propiedades en todo {FF846A}San Andreas,{F5F5F5} para comprarla tendrás que saber la\n\
					ID de la propiedad e ir a cualquier banco para comprarla, el dinero se descuenta de la cuenta bancaria.\n\
					\n\
					Puedes localizar tus propiedades con el GPS.\n\
					Puedes dejar pasar a cualquiera a tu propiedad, solo tiene que tocar el timbre\n\
					y tu elijes si quieres dejarlo pasar o no.\n\
					\n\
					Si quieres echar a alguien que está dentro de tu propiedad utiliza el comando {f5f5f5}/echar.\n\
					{F5F5F5}Dentro de la propiedad sitúate en la puerta interior y pon {f5f5f5}/casa,{F5F5F5} desde ahí podras\n\
					cambiar el nombre de la propiedad para asi localizarla más fácilmente en el GPS.\n\
					{F5F5F5}también podrás echar a todos los huéspedes de tu propiedad.\n\
					\n\
					Si quieres vender tu propiedad puedes hacerlo en {"#PRIMARY_COLOR"}\"Gobierno San Andreas\"{F5F5F5}, localizaló en el GPS.\n\
					Puedes vendersela al banco al instante, pero te darán solo el 25% de lo que te costó {FF846A}(50% VIP).\n\
					{F5F5F5}también se la puedes vender a otro jugador, dentro de un rango de precio pre-establecido.\n\
					Para vender tu propiedad a un jugador puedes ponerla en {f5f5f5}/tienda.\n\
					\n\
				"
		, "Cerrar", "");
			return 1;
		}
		case DIALOG_HELP_REPORT:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Reportar",
			
				"\
					{F5F5F5}Para un reporte simple utiliza {f5f5f5}/reportar ID{F5F5F5} para reportar a un jugador.\n\
					\n\
					Para reportes más detallado debes publicarlos en el foro aportando imágenes.\n\
					Los reportes de fallos o bugs también deberás hacerlo en el foro junto con imágenes.\n\
					\n\
				"
		, "Cerrar", "");
			return 1;
		}
		case DIALOG_HELP_VEHICLES:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Vehículos",
			
				"\
					{FF846A}GENERAL\n\
					{F5F5F5}Para arrancar o detener un vehículo presiona {f5f5f5}Y {F5F5F5}o utiliza {f5f5f5}/motor.\n\
					{F5F5F5}Utiliza {f5f5f5}/luces{F5F5F5} para encender o apagar las luces del vehículos.\n\
					Si tu vehículo se daña tendrás que llamar a un mecánico desde tu móvil para que lo repare.\n\
					\n\
					Cada vehículo tiene su cantidad máxima del depósito de gasolina.\n\
					Para repostar el vehículo debes ir a cualquier gasolinera, puedes localizarlas con el GPS.\n\
					también puedes comprar un bidón de gasolina para {f5f5f5}/vertir{F5F5F5} gasolina en cualquier momento.\n\
					\n\
					\n\
					{FF846A}VEHICULOS PERSONALES\n\
					{F5F5F5}Para comprarlos ve a cualquier concesionario.\n\
					El dinero para comprarlo es el de la cuenta bancaria.\n\
					Para localizar tus vehículos utiliza el GPS.\n\
					\n\
					Utiliza {f5f5f5}/abrir{F5F5F5} para abrir las puertes de tu vehículo, utiliza {f5f5f5}/cerrar{F5F5F5} para cerrarlas.\n\
					Puedes estacionar tu vehículo con el comando {f5f5f5}/estacionar.\n\
					{F5F5F5}Cuando tu vehículo sea destruido recibirás uno nuevo en tu último estacionamiento.\n\
					Para pintar, tunear o modificar tu vehículo tendrás que hacerlo en el mecánico.\n\
					\n\
					Puedes guardar cosas en el maletero del vehículo con el comando {f5f5f5}/guardar.\n\
					{F5F5F5}Para sacar cosas del maletero puedes utilizar {f5f5f5}/maletero.\n\
					\n\
					{F5F5F5}Si quieres vender tu vehículo puedes hacerlo en \"Gobierno San Andreas\", localizaló en el GPS.\n\
					Puedes venderselo al banco, pero te darán solo el 25% de lo que te costó (50% VIP).\n\
					también se la puedes vender a otro jugador, dentro de un rango de precio pre-establecido.\n\
					Para vender tu vehículo a un jugador puedes ponerlo en {f5f5f5}/tienda.\n\
					{F5F5F5}Al vender tu vehículo se venderá con todo lo que haya en el maletero.\n\
					\n\
				"
		, "Cerrar", "");
			return 1;
		}
		case DIALOG_HELP_WORKS:
		{
			new dialog[45 * sizeof work_info], line_str[45];
			for (new i = 1; i != sizeof work_info; i ++)
			{
				format(line_str, sizeof line_str, "{f5f5f5}- %c%s\n", toupper(work_info[i][work_info_NAME][0]), work_info[i][work_info_NAME][1]);
				strcat(dialog, line_str);
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Trabajos", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_HELP_CREWS:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Bandas",
			
				"\
					{F5F5F5}Utiliza {f5f5f5}/banda{F5F5F5} para crear una banda o administrar la tuya.\n\
					{F5F5F5}Al entrar a una banda puedes conquistar territorios por todo San Andreas.\n\
					\n\
					{F5F5F5}Visita {FF846A}"SERVER_WEBSITE" {F5F5F5}para más información.\n\
					\n\
				"
			
		, "Cerrar", "");
			return 1;
		}
		case DIALOG_HELP_SU:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Membresia VIP",
			
				"\
					{f5f5f5}Puedes comprar VIP por 30 días con el comando /vip.\n\
					{f5f5f5}Se compra con "SERVER_COIN", para ver como comprar esta moneda visita nuestra web.\n\
					\n\
					{"#PRIMARY_COLOR"}Ventajas\n\
					{f5f5f5}- Tener "#MAX_SU_WORKS" trabajos.\n\
					{f5f5f5}- Tener "#MAX_SU_VEHICLES" vehículos.\n\
					{f5f5f5}- Tener "#MAX_SU_PROPERTIES" propiedades.\n\
					{f5f5f5}- No pagas seguro de propiedades ni vehículos en el Payday.\n\
					{f5f5f5}- No pierdes chaleco al morir.\n\
					{f5f5f5}- Al vender un vehículo o propiedad al banco recibes un 50%.\n\
					{f5f5f5}- Te recuperas el doble de rápido en el hospital.\n\
					{f5f5f5}- Al recuperarte tu vida es del 100%.\n\
					{f5f5f5}- Reducción de la condena a la mitad.\n\
					{f5f5f5}- Cuando un médico te cura vida al 50%.\n\
					{f5f5f5}- Pagas extras de 300$ en algunos trabajos.\n\
					\n\
					{f5f5f5}Visita {"#PRIMARY_COLOR"}"SERVER_WEBSITE" {f5f5f5}para más información.\n\
					\n\
				"
			
		, "Cerrar", "");
			return 1;
		}
		case DIALOG_ADMIN_LIST:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					new dialog[128 * 15], line_str[128], count, start_pos = PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] * PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT] + 1;
					format(dialog, sizeof dialog, "{f5f5f5}Nombre\t{f5f5f5}Rango\t{f5f5f5}Últ. conexión\n");
					for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
					for (new i = 0; i != rows; i++)
					{
						new id, name[24], last_connection[24], connected, pid, admin_level;
						cache_get_value_name_int(i, "id", id);
						cache_get_value_name(i, "name", name);
						cache_get_value_name(i, "last_connection", last_connection);
						cache_get_value_name_int(i, "connected", connected);
						cache_get_value_name_int(i, "playerid", pid);
						cache_get_value_name_int(i, "admin_level", admin_level);

						if (connected)
						{
							if (PLAYER_TEMP[pid][pt_ADMIN_SERVICE]) format(line_str, sizeof line_str, "{f5f5f5}%d. %s\t{f5f5f5}%s\t{"#GREEN_COLOR"}Duty (%d)\n", start_pos + i, name, ADMIN_LEVELS[admin_level], pid);
							else format(line_str, sizeof line_str, "{f5f5f5}%d. %s\t{f5f5f5}%s\t{"#GREEN_COLOR"}Conectado (%d)\n", start_pos + i, name, ADMIN_LEVELS[admin_level], pid);
						}
						else format(line_str, sizeof line_str, "{f5f5f5}%d. %s\t{f5f5f5}%s\t{f5f5f5}%s\n", start_pos + i, name, ADMIN_LEVELS[admin_level], last_connection);
						strcat(dialog, line_str);
						PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = id;
					}

					PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = -2;
					strcat(dialog, "{c9c9c9}- Siguiente\n");
					PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = -3;
					strcat(dialog, "{c9c9c9}- Anterior\n");
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Administradores", dialog, "»Aceptar", "xSalir");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name, last_connection, connected, playerid, admin_level FROM player WHERE admin_level > 0 ORDER BY connected DESC, admin_level DESC LIMIT %d, %d;", PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] * PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT], PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT]);
			MySQL_TQueryInline(handle_db, using inline OnDialogQueryLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_ADMIN_MODIFY:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					if (rows)
					{
						new name[24], admin_level;
						cache_get_value_name(0, "name", name);
						cache_get_value_name_int(0, "admin_level", admin_level);

						if (admin_level > PI[playerid][pi_ADMIN_LEVEL]) SendPlayerClientMessage(playerid, "No puedes modificar el rango de este admin porque es un rango superior al tuyo.");
						else
						{
							new caption[45], dialog[45 * sizeof(ADMIN_LEVELS)], line_str[45];
							format(caption, sizeof caption, "Admin - %s", name);
							format(dialog, sizeof dialog, "{f5f5f5}Normal (eliminar)\n");

							for (new i = 1; i != sizeof ADMIN_LEVELS; i ++)
							{
								if (i > PI[playerid][pi_ADMIN_LEVEL])
								{
									if (admin_level == i) format(line_str, sizeof line_str, "{666666}%s (actual)\n", ADMIN_LEVELS[i]);
									else format(line_str, sizeof line_str, "{666666}%s\n", ADMIN_LEVELS[i]);
								}
								else
								{
									if (admin_level == i) format(line_str, sizeof line_str, "{f5f5f5}%s (actual)\n", ADMIN_LEVELS[i]);
									else format(line_str, sizeof line_str, "{f5f5f5}%s\n", ADMIN_LEVELS[i]);
								}
								strcat(dialog, line_str);
							}
							
							ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "»Aceptar", "xSalir");
						}
					}
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT name, admin_level FROM player WHERE id = %d;", PLAYER_TEMP[playerid][pt_SELECTED_DB_PID]);
			MySQL_TQueryInline(handle_db, using inline OnDialogQueryLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_CHANGE_PASSWORD:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_PASSWORD, "Cambiar contraseña", "Introduce tu contraseña actual.", "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_CHANGE_PASSWORD_PASS:
		{
			new dialog[128];
			format(dialog, sizeof dialog, "Introduce tu nueva contraseña.\nLa contraseña debe contener entre %d-%d caracteres.", MIN_PASS_LENGTH, MAX_PASS_LENGTH);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_PASSWORD, "Cambiar contraseña", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_ANTI_CHEAT:
		{
			if (PI[playerid][pi_ADMIN_LEVEL] < 4) return 0;
			
			new dialog[115 * sizeof(ac_Info) + 1], line_str[115];
			dialog = "Tipo\tEstado\tAccionar\tAcción\n";
			
			for (new i = 0; i != sizeof(ac_Info); i ++)
			{
				format(line_str, sizeof line_str, "%02d %s\t%s\t%d:%d\t%s\n", i, ac_Info[i][ac_Name], ac_Info[i][ac_Enabled] ? "Activado" : "Desactivado", ac_Info[i][ac_Detections], ac_Info[i][ac_Interval], ac_Info[i][ac_Kick] ? "Kick" : "Aviso");
				strcat(dialog, line_str);
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Anticheat", dialog, "Continuar", "X");
			return 1;
		}
		case DIALOG_ANTI_CHEAT_MODIFY:
		{
			if (PI[playerid][pi_ADMIN_LEVEL] < 4) return 0;
			
			new caption[45], dialog[90];
			
			format(caption, sizeof caption, "ac %02d %s", PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM], ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Name]);
			format(dialog, sizeof dialog, "Estado\t%s\nAccionar\t(%d:%d)\nAccion\t%s", ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Enabled] ? "Activado" : "Desactivado", ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Detections], ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Interval], ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Kick] ? "Kick" : "Aviso");
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_ANTI_CHEAT_MODIFY_DETECT:
		{
			new caption[45], dialog[200];
			
			format(caption, sizeof caption, "ac %02d %s", PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM], ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Name]);
			format(dialog, sizeof dialog, "Estado actual de accioner en: (%d:%d)\n\nSintaxis: <detecciones>:<segundos>\nDeja segundos en 0 para que sea instantáneo.\n\nEjemplo de 2 detecciones en 10 segundos: 2:10", ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Detections], ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Interval]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_CREATE_CREW:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Banda", "No perteneces a ninguna banda.\n\n¿Quieres crear una?\nPara crear una banda necesitas ser nivel 5, además cuesta 600.000$.", "Si", "No");
			return 1;
		}
		case DIALOG_CREATE_CREW_NAME:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Crear banda", "Introduce el nombre de tu banda.\nHasta 32 caracteres.", "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_CREATE_CREW_COLOR:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Selecciona un color para tu banda", DIALOG_CREATE_CREW_COLOR_String, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_CREATE_CREW_CONFIRM:
		{
			new dialog[360];
			format(dialog, sizeof dialog,
					
					"\
						{f5f5f5}Nombre de la banda: %s\n\
						{f5f5f5}Color de la banda: {%06x}color %d\n\
						{f5f5f5}Coste de creación: 600.000$\n\
						\n\
						{f5f5f5}¿Quieres crear esta banda?\n\
						{f5f5f5}Una vez creada podrás crear rangos, modificarlos y mucho más.\n\
						\n\
					", 
						PLAYER_TEMP[playerid][pt_CREATE_CREW_NAME],
						RandomColors[ PLAYER_TEMP[playerid][pt_CREATE_CREW_COLOR] ] >>> 8, PLAYER_TEMP[playerid][pt_CREATE_CREW_COLOR] + 1
			);
					
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Crear banda", dialog, "Crear", "Cerrar");
			return 1;
		}
		case DIALOG_CREW_MENU:
		{
			for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new caption[64], dialog[360], listitem;
			format(caption, sizeof caption, "Mi banda  {%06x}%s", (CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8), CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_NAME]);
			
			format(dialog, sizeof dialog, " Ver miembros\n");
			PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_SIZE;
			listitem ++;

			if (CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_NAME])
			{
				strcat(dialog, " Cambiar nombre de la banda\n");
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_CHANGE_NAME;
				listitem ++;
			}
			if (CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CAST_MEMBERS])
			{
				strcat(dialog, " Echar a un miembro\n");
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_CAST_MEMBERS;
				listitem ++;
			}
			if (CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_MEMBERS])
			{
				strcat(dialog, " Cambiar rango de un miembro\n");
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_MODIFY_MEMBERS;
				listitem ++;
			}
			if (CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS])
			{
				strcat(dialog, " Crear rangos o modificarlos\n");
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_MODIFY_RANKS;
				listitem ++;
			}
			if (CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_COLOR])
			{
				strcat(dialog, " Cambiar color de la banda\n");
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_CHANGE_COLOR;
				listitem ++;
			}
			if (CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_DELETE])
			{
				strcat(dialog, " Eliminar la banda\n");
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_DELETE;
				listitem ++;
			}
			
			strcat(dialog, " Informacion banda\n");
			PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_SIZE + 1;
			listitem ++;
		
			strcat(dialog, "»Abandonar banda\n");
			PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = CREW_RANK_SIZE + 2;
			listitem ++;
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_CREW_MEMBER_LIST:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					new dialog[128 * 15], caption[64], line_str[128], count, start_pos = PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] * PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT] + 1;
					format(caption, sizeof caption, "{"#GREEN_COLOR"}%s{F5F5F5}  Miembros", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_NAME]);
					for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
					for (new i = 0; i != rows; i++)
					{
						new name[24], last_connection[24], connected, crew_rank, player_platform;
						cache_get_value_name(i, "name", name);
						cache_get_value_name(i, "last_connection", last_connection);
						cache_get_value_name_int(i, "connected", connected);
						cache_get_value_name_int(i, "crew_rank", crew_rank);
						cache_get_value_name_int(i, "player_platform", player_platform);

						if (connected && player_platform == 0) format(line_str, sizeof line_str, "{d1d1d1}%d. %s\t{"#GREEN_COLOR"}{d1d1d1}%s\t{"#GREEN_COLOR"}Conectado\n", start_pos + i, name, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ crew_rank ][crew_rank_NAME]);
						else if (connected && player_platform == 1) format(line_str, sizeof line_str, "{d1d1d1}%d. %s\t{"#BLUE_COLOR"}{d1d1d1}%s\t{"#GREEN_COLOR"}Conectado\n", start_pos + i, name, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ crew_rank ][crew_rank_NAME]);
						else format(line_str, sizeof line_str, "{d1d1d1}%d. %s\t{cccccc}{d1d1d1}%s\t{cccccc}%s\n", start_pos + i, name, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ crew_rank ][crew_rank_NAME], last_connection);
						strcat(dialog, line_str);
						count++;
					}

					/*PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = -2;
					strcat(dialog, "{c9c9c9}- Siguiente\n");
					PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = -3;
					strcat(dialog, "{c9c9c9}- Anterior\n");*/
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, caption, dialog, "»Aceptar", "«Volver");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT name, last_connection, connected, crew_rank, player_platform FROM player WHERE crew = %d ORDER BY connected DESC, crew_rank ASC LIMIT %d, %d;", PI[playerid][pi_CREW], PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] * PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT], PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT]);
			MySQL_TQueryInline(handle_db, using inline OnDialogQueryLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_CREW_CHANGE_NAME:
		{
			new dialog[128];
			format(dialog, sizeof dialog, "Nombre actual de la banda:\n\t\"%s\"\n\nIndica el nuevo nombre.\nMáximo 32 caracteres.", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Cambiar nombre de la banda", dialog, "Cambiar", "Atrás");
			return 1;
		}
		case DIALOG_CREW_MEMBER_LIST_DELETE:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					new dialog[128 * 15], line_str[128], count, start_pos = PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] * PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT] + 1;
					format(dialog, sizeof dialog, "{d1d1d1}Nombre\t{d1d1d1}Rango\t{d1d1d1}Últ. conexión\n");
					for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
					for (new i = 0; i != rows; i++)
					{
						new id, name[24], last_connection[24], connected, crew_rank;
						cache_get_value_name_int(i, "id", id);
						cache_get_value_name(i, "name", name);
						cache_get_value_name(i, "last_connection", last_connection);
						cache_get_value_name_int(i, "connected", connected);
						cache_get_value_name_int(i, "crew_rank", crew_rank);

						if (connected) format(line_str, sizeof line_str, "{d1d1d1}%d. %s\t{d1d1d1}%s\t{"#GREEN_COLOR"}Conectado\n", start_pos + i, name, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ crew_rank ][crew_rank_NAME]);
						else format(line_str, sizeof line_str, "{d1d1d1}%d. %s\t{d1d1d1}%s\t{d1d1d1}%s\n", start_pos + i, name, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ crew_rank ][crew_rank_NAME], last_connection);
						strcat(dialog, line_str);
						PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = id;
					}

					/*PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = -2;
					strcat(dialog, "{c9c9c9}- Siguiente\n");
					PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = -3;
					strcat(dialog, "{c9c9c9}- Anterior\n");*/
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Echar a un miembro", dialog, "»Aceptar", "xSalir");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name, last_connection, connected, crew_rank FROM player WHERE crew = %d ORDER BY connected DESC, crew_rank ASC LIMIT %d, %d;", PI[playerid][pi_CREW], PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] * PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT], PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT]);
			MySQL_TQueryInline(handle_db, using inline OnDialogQueryLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_CREW_CAST_MEMBER_CONFIRM:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Echar a un miembro", "¿Estás seguro de que quieres echar a este miembro de la banda?", "Echar", "Cancelar");
			return 1;
		}
		case DIALOG_CREW_INVITE_RANK:
		{
			for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[64 * MAX_CREW_RANKS], line_str[64], listitem;
			for (new i = 0; i != MAX_CREW_RANKS; i ++)
			{
				if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_VALID]) continue;
				
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				if (i < PI[playerid][pi_CREW_RANK]) format(line_str, sizeof line_str, "{666666}%d. %s\n", listitem + 1, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
				else format(line_str, sizeof line_str, "{f5f5f5}%d. %s\n", listitem + 1, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
				strcat(dialog, line_str);
				
				listitem ++;
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Invitar", dialog, "Invitar", "Cerrar");
			return 1;
		}
		case DIALOG_CREW_INVITE_ACCEPT:
		{
			new dialog[128];
			format(dialog, sizeof dialog, "Te han ofrecio unirte a una banda.\n\nBanda: %s\nRango: %s\n", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INVITE_INFO][1] ][crew_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INVITE_INFO][1] ][ PLAYER_TEMP[playerid][pt_CREW_INVITE_INFO][2] ][crew_rank_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Invitación", dialog, "Unirme", "Cerrar");
			return 1;
		}
		case DIALOG_CREW_RANKS:
		{
			new dialog[64 * MAX_CREW_RANKS], line_str[64];
			for (new i = 0; i != MAX_CREW_RANKS; i ++)
			{
				if (CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_VALID])
				{
					if (i < PI[playerid][pi_CREW_RANK]) format(line_str, sizeof line_str, "{666666}%d. %s\n", i + 1, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
					else format(line_str, sizeof line_str, "{f5f5f5}%d. %s\n", i + 1, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
				}
				else
				{
					if (i < PI[playerid][pi_CREW_RANK]) format(line_str, sizeof line_str, "{666666}%d. Slot vacío\n", i + 1, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
					else format(line_str, sizeof line_str, "{F5F5F5}%d. Slot vacío\n", i + 1, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
				}
				strcat(dialog, line_str);
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Rangos", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_CREW_RANK_MODIFY:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Modificar rango", "Cambiar nombre del rango\nModificar permisos\nEliminar rango", "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_CREW_RANK_MODIFY_NAME:
		{
			new dialog[145];
			format(dialog, sizeof dialog, "Nombre actual del rango:\n\t\"%s\"\n\nIndica el nuevo nombre del rango.\nMáximo 32 caracteres.", CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Modificar rango", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_CREW_RANK_MODIFY_PERMISS:
		{
			new caption[70];
			format(caption, sizeof caption, "Modificar permisos del rango '%s'", CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME]);
			
			new dialog[64 * (CREW_RANK_SIZE + 1)], line_str[64];
			format(dialog, sizeof dialog, "Permiso\tActivado\n");
			
			for (new i = 0; i != CREW_RANK_SIZE; i ++)
			{
				if (CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][i]) format(line_str, sizeof line_str, "%s\t%s\n", CREW_RANKS_PERMISSIONS[i], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][i] ? "Si" : "No");
				else format(line_str, sizeof line_str, "{666666}%s\t{666666}%s\n", CREW_RANKS_PERMISSIONS[i], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][i] ? "Si" : "No");
				
				strcat(dialog, line_str);
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "Cambiar", "Atrás");
			return 1;
		}
		case DIALOG_CREW_RANK_CREATE:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Crear nuevo rango", "Indica el nombre del rango.\nMáximo 32 caracteres.", "Crear", "Atrás");
			return 1;
		}
		case DIALOG_CREW_RANK_DELETE:
		{
			for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
			
			new dialog[64 * MAX_CREW_RANKS], line_str[64], listitem;
			for (new i = 0; i != MAX_CREW_RANKS; i ++)
			{
				if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_VALID]) continue;
				if (i == PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK]) continue;
				
				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = i;
				if (i < PI[playerid][pi_CREW_RANK]) format(line_str, sizeof line_str, "{666666}%d. %s\n", listitem + 1, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
				else format(line_str, sizeof line_str, "{f5f5f5}%d. %s\n", listitem + 1, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
				strcat(dialog, line_str);
				
				listitem ++;
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Seleccionar nuevo rango", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_CREW_RANK_DELETE_CONFIRM:
		{
			inline OnCrewInfoLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					if (rows)
					{
						new affected_members;
						cache_get_value_index_int(0, 0, affected_members);
						
						new dialog[400];
						format(dialog, sizeof dialog, 
								
							"\
								Rango que se eliminará:\n\
									\t'%s'\n\
								\n\
								Miembros afectados: %d\n\
								El nuevo rango de estos miembros será:\n\
									\t'%s'\n\
								\n\
								¿Seguro que quieres eliminar el rango? Esta opción no se puede deshacer.\n\
								\n\
							",
								CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME],
								affected_members,
								CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_NEW_RANK] ][crew_rank_NAME]
						);
						ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Eliminar rango", dialog, "Eliminar", "Cancelar");

					}
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND crew_rank = %d;", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_ID], PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK]);
			MySQL_TQueryInline(handle_db, using inline OnCrewInfoLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_CREW_MODIFY_COLOR:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Selecciona el nuevo color para tu banda", DIALOG_CREATE_CREW_COLOR_String, "Cambiar", "Atrás");
			return 1;
		}
		case DIALOG_CREW_DELETE:
		{
			inline OnCrewInfoLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					if (rows)
					{
						new affected_members, crew_territories;
						cache_get_value_index_int(0, 0, affected_members);
						cache_get_value_index_int(0, 0, crew_territories);

						new dialog[450];
						format(dialog, sizeof dialog, 
								
							"\
								Banda: %s\n\
								Miembros: %d\n\
								Territorios: %d\n\
								\n\
								¿De verdad quieres borrar la banda?\n\
								\n\
							",
								CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_NAME],
								affected_members,
								crew_territories
						);
						ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Eliminar banda", dialog, "Eliminar", "Cancelar");
					}
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(player.id), COUNT(territories.id) FROM player, territories WHERE player.crew = %d AND territories.id_crew = %d;", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_ID], CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_ID]);
			MySQL_TQueryInline(handle_db, using inline OnCrewInfoLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_CREW_LEAVE:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Abandonar banda", "¿Quieres abandonar la banda?\nEsta opción no se puede deshacer.", "Abandonar", "Cancelar");
			return 1;
		}
		case DIALOG_CREW_MODIFY_MEMBERS:
		{
			inline OnDialogQueryLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					new dialog[128 * 15], line_str[128], count, start_pos = PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] * PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT] + 1;
					format(dialog, sizeof dialog, "{f5f5f5}Nombre\t{f5f5f5}Rango\t{f5f5f5}Últ. conexión\n");
					for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
					for (new i = 0; i != rows; i++)
					{
						new id, name[24], last_connection[24], connected, crew_rank;
						cache_get_value_name_int(i, "id", id);
						cache_get_value_name(i, "name", name);
						cache_get_value_name(i, "last_connection", last_connection);
						cache_get_value_name_int(i, "connected", connected);
						cache_get_value_name_int(i, "crew_rank", crew_rank);

						if (connected) format(line_str, sizeof line_str, "{f5f5f5}%d. %s\t{f5f5f5}%s\t{"#GREEN_COLOR"}Conectado\n", start_pos + i, name, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ crew_rank ][crew_rank_NAME]);
						else format(line_str, sizeof line_str, "{f5f5f5}%d. %s\t{f5f5f5}%s\t{f5f5f5}%s\n", start_pos + i, name, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ crew_rank ][crew_rank_NAME], last_connection);
						strcat(dialog, line_str);
						PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = id;
					}
					ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, "Modificar rango de un miembro", dialog, "»Aceptar", "xSalir");
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name, last_connection, connected, crew_rank FROM player WHERE crew = %d ORDER BY connected DESC, crew_rank ASC LIMIT %d, %d;", PI[playerid][pi_CREW], PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] * PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT], PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT]);
			MySQL_TQueryInline(handle_db, using inline OnDialogQueryLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_CREW_MODIFY_MEMBER:
		{
			inline OnCrewInfoLoad()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					if (rows)
					{
						new name[24], crew_rank;
						cache_get_value_name(0, "name", name);
						cache_get_value_name_int(0, "crew_rank", crew_rank);

						if (crew_rank < PI[playerid][pi_CREW_RANK]) SendPlayerClientMessage(playerid, "No puedes modificar el rango de este miembro porque es un rango superior al tuyo.");
						else
						{
							if (crew_rank == 0)
							{
								inline OnCountQueryLoad()
								{
									if (cache_get_row_count(rows))
									{
										if (rows)
										{
											new total;
											cache_get_value_index_int(0, 0, total);
											if (total <= 1) SendPlayerClientMessage(playerid, "No se puede modificar el rango de este miembro ya que es el único miembro con el rango fundador.");
											else
											{
												new caption[45], dialog[45 * CREW_RANK_SIZE], line_str[45], count;
												format(caption, sizeof caption, "Miembro - %s", name);
												for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
												for (new i = 0; i != CREW_RANK_SIZE; i ++)
												{
													if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_VALID]) continue;
													
													if (i < PI[playerid][pi_CREW_RANK])
													{
														if (crew_rank == i) format(line_str, sizeof line_str, "{666666}%s (actual)\n", CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
														else format(line_str, sizeof line_str, "{666666}%s\n", CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
													}
													else
													{
														if (crew_rank == i) format(line_str, sizeof line_str, "{f5f5f5}%s (actual)\n", CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
														else format(line_str, sizeof line_str, "{f5f5f5}%s\n", CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
													}
													strcat(dialog, line_str);
													PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = i;
												}
												ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "»Aceptar", "xSalir");
											}
										}
									}
								}
								mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND crew_rank = 0;", PI[playerid][pi_CREW]);
								MySQL_TQueryInline(handle_db, using inline OnCountQueryLoad, QUERY_BUFFER);
							}
							else
							{
								new caption[45], dialog[45 * CREW_RANK_SIZE], line_str[45], count;
								format(caption, sizeof caption, "Miembro - %s", name);
								for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
								for (new i = 0; i != CREW_RANK_SIZE; i ++)
								{
									if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_VALID]) continue;
									
									if (i < PI[playerid][pi_CREW_RANK])
									{
										if (crew_rank == i) format(line_str, sizeof line_str, "{666666}%s (actual)\n", CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
										else format(line_str, sizeof line_str, "{666666}%s\n", CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
									}
									else
									{
										if (crew_rank == i) format(line_str, sizeof line_str, "{f5f5f5}%s (actual)\n", CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
										else format(line_str, sizeof line_str, "{f5f5f5}%s\n", CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i][crew_rank_NAME]);
									}
									strcat(dialog, line_str);
									PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count++] = i;
								}
								ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "»Aceptar", "xSalir");
							}
						}
					}
				}
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT name, crew_rank FROM player WHERE id = %d;",  PLAYER_TEMP[playerid][pt_SELECTED_DB_PID]);
			MySQL_TQueryInline(handle_db, using inline OnCrewInfoLoad, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_CREW_PROPERTY_CONFIRM:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Propiedad de banda", "¿Estás seguro que quieres pasar esta propiedad a banda?\nEsta opción no se puede deshacer.", "Continuar", "Cancelar");
			return 1;
		}
		case DIALOG_CREW_LEAVE_TERRITORY:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Abandonar territorio", "¿Estás seguro que quieres abandonar este territorio?\nEsta opción no se puede deshacer.", "Continuar", "Cancelar");
			return 1;
		}
		case DIALOG_CREW_LEAVE_PROPERTY:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Propiedad de banda", "¿Estás seguro que quieres liberar esta propiedad?\nEsta opción no se puede deshacer.", "Continuar", "Cancelar");
			return 1;
		}
		case DIALOG_POLICE_PENALTY:
		{
			new dialog[128];
			format(dialog, sizeof dialog, "El policia %s te ha puesto una multa.\nImporte: %s$\n", PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_POLICE_PEN_PID] ][pt_NAME], number_format_thousand(PLAYER_TEMP[playerid][pt_POLICE_PEN_IM]));
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Multa", dialog, "Pagar", "Cerrar");
			return 1;
		}
		case DIALOG_SU_BUY:
		{
			new dialog[1500];
			format(dialog, sizeof dialog, 
			
				"\
					{F5F5F5}El coste del VIP es de %d {"#YELLOW_COLOR"}"SERVER_COIN"s{F5F5F5}\n\
					\n\
					Ventajas de ser {"#YELLOW_COLOR"}VIP{F5F5F5}\n\
					-----------------------------\n\
					{"#YELLOW_COLOR"}{F5F5F5} Tener "#MAX_SU_WORKS" trabajos.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Tener "#MAX_SU_VEHICLES" vehículos.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Agregar hasta 5 espacios mas a la guantera.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Tener "#MAX_SU_PROPERTIES" propiedades.\n\
					{"#YELLOW_COLOR"}{F5F5F5} No pagas seguro de propiedades.\n\
					{"#YELLOW_COLOR"}{F5F5F5} No pagas seguro de vehiculos.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Ganaras el doble de interes bancario.\n\
					{"#YELLOW_COLOR"}{F5F5F5} No pierdes chaleco al morir.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Al vender una propiedad al banco recibes un 65%\n\
					{"#YELLOW_COLOR"}{F5F5F5} Al vender un vehiculo al banco recibes un 65%\n\
					{"#YELLOW_COLOR"}{F5F5F5} Te recuperas el doble de rápido en el hospital.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Al recuperarte tu vida es del 100%.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Reducción de la condena a la mitad.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Cuando un médico te cura vida al 50%.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Conseguir trabajo sin tener que esperar 5 minutos\n\
					{"#YELLOW_COLOR"}{F5F5F5} Pagas extras en algunos trabajos.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Se agregan 2 espacios adicionales al inventario.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Los objetos ilegales en el bolsillo no se caeran al agonizar.\n\
					-----------------------------\n\
				", 
					VIP_BUY_COINS_PRICE
			);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "COMPRAR {"#YELLOW_COLOR"}VIP", dialog, "Comprar", "xSalir");
			return 1;
		}
		case DIALOG_SU:
		{
			new dialog[1500], current_date[24];
			getDateTime(current_date);
			format(dialog, sizeof dialog, 
				
				"\
					{F5F5F5}Fecha actual: %s\n\
					Fecha caducidad: %s\n\
					\n\
					Ventajas de ser {"#YELLOW_COLOR"}VIP{F5F5F5}\n\
					-----------------------------\n\
					{"#YELLOW_COLOR"}{F5F5F5} Tener "#MAX_SU_WORKS" trabajos.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Tener "#MAX_SU_VEHICLES" vehículos.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Agregar hasta 5 espacios mas a la guantera.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Tener "#MAX_SU_PROPERTIES" propiedades.\n\
					{"#YELLOW_COLOR"}{F5F5F5} No pagas seguro de propiedades.\n\
					{"#YELLOW_COLOR"}{F5F5F5} No pagas seguro de vehiculos.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Ganaras el doble de interes bancario.\n\
					{"#YELLOW_COLOR"}{F5F5F5} No pierdes chaleco al morir.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Al vender una propiedad al banco recibes un 65%\n\
					{"#YELLOW_COLOR"}{F5F5F5} Al vender un vehiculo al banco recibes un 65%\n\
					{"#YELLOW_COLOR"}{F5F5F5} Te recuperas el doble de rápido en el hospital.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Al recuperarte tu vida es del 100%.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Reducción de la condena a la mitad.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Cuando un médico te cura vida al 50%.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Conseguir trabajo sin tener que esperar 5 minutos\n\
					{"#YELLOW_COLOR"}{F5F5F5} Pagas extras en algunos trabajos.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Se agregan 2 espacios adicionales al inventario.\n\
					{"#YELLOW_COLOR"}{F5F5F5} Los objetos ilegales en el bolsillo no se caeran al agonizar.\n\
					-----------------------------\n\
					Renuevalo {"#YELLOW_COLOR"}30 dias{F5F5F5} mas por %s {"#GREEN_COLOR"}$\n\
				",
					current_date,
					PI[playerid][pi_VIP_EXPIRE_DATE],
					number_format_thousand(VIP_CASH_PRICE)
			);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "USUARIO {"#YELLOW_COLOR"}VIP", dialog, "Renovar", "xSalir");
			return 1;
		}
		case DIALOG_VOBJECT_MENU:
		{
			new caption[45];
			format(caption, sizeof caption, "STC - '%s'", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, "1. Mis objetos\n2. Comprar objeto\n3. Añadir texto (500$)\n4. Añadir bandera de país (2.000$)\n5. Añadir panel de país (2.000$)", "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_VOBJECT_OBJECTS:
		{
			new caption[45], dialog[145 * (MAX_SU_VOBJECTS + 2)], line_str[145];
			format(caption, sizeof caption, "STC - '%s'", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
			
			format(dialog, sizeof dialog, "{f5f5f5}Objeto\t{"#BLUE_COLOR"}Colocado\n");
			for (new i = 0; i != MAX_SU_VOBJECTS; i ++)
			{
				if (VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][i][vobject_VALID])
				{
					if (VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][i][vobject_ATTACHED]) format(line_str, sizeof line_str, "{f5f5f5}%d. %s\t{"#BLUE_COLOR"}Si\n", i + 1, VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][i][vobject_NAME]);
					else format(line_str, sizeof line_str, "{f5f5f5}%d. %s\t{"#BLUE_COLOR"}No\n", i + 1, VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][i][vobject_NAME]);
				}
				else format(line_str, sizeof line_str, "{666666}%d. Slot vacío\n", i + 1);
				strcat(dialog, line_str);
			}
			strcat(dialog, "{c4290d}- Eliminar todo\n");
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_VOBJECT_OBJECT:
		{
			new caption[45], dialog[256];
			format(caption, sizeof caption, "Objeto '%s'", VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_NAME]);
			
			switch(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_TYPE])
			{
				case VOBJECT_TYPE_OBJECT:
				{
					if (VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ATTACHED]) format(dialog, sizeof dialog, "{f5f5f5}Guardar este objeto\n{f5f5f5}Cambiar el nombre del objeto\n{f5f5f5}Editar posición del objeto\n{f5f5f5}Colores\n{f5f5f5}Eliminar este objeto");
					else format(dialog, sizeof dialog, "{f5f5f5}Colocar este objeto\n{f5f5f5}Cambiar el nombre del objeto\n{666666}Editar posición del objeto\n{666666}Colores\n{f5f5f5}Eliminar este objeto");
				}
				case VOBJECT_TYPE_TEXT:
				{
					if (VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ATTACHED]) format(dialog, sizeof dialog, "{f5f5f5}Guardar este objeto\n{f5f5f5}Cambiar el nombre del objeto\n{f5f5f5}Editar posición del objeto\n{f5f5f5}Texto\n{f5f5f5}Eliminar este objeto");
					else format(dialog, sizeof dialog, "{f5f5f5}Colocar este objeto\n{f5f5f5}Cambiar el nombre del objeto\n{666666}Editar posición del objeto\n{666666}Texto\n{f5f5f5}Eliminar este objeto");
				}
				case VOBJECT_TYPE_COUNTRY_FLAG, VOBJECT_TYPE_COUNTRY_PANEL:
				{
					if (VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ATTACHED]) format(dialog, sizeof dialog, "{f5f5f5}Guardar este objeto\n{f5f5f5}Cambiar el nombre del objeto\n{f5f5f5}Editar posición del objeto\n{f5f5f5}Eliminar este objeto");
					else format(dialog, sizeof dialog, "{f5f5f5}Colocar este objeto\n{f5f5f5}Cambiar el nombre del objeto\n{666666}Editar posición del objeto\n{f5f5f5}Eliminar este objeto");
				}
			}
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_VOBJECT_OBJECT_CNAME:
		{		
			new dialog[145];
			format(dialog, sizeof dialog, "Nombre actual: \"%s\"\nIndica el nuevo nombre:", VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Objeto - Modificar nombre", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_VOBJECT_OBJECT_COLORS:
		{
			new caption[64];
			format(caption, sizeof caption, "Colores de '%s'", VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_NAME]);
			
			new dialog[45 * MAX_VEHICLE_OBJECTS_INDEXS], line_str[45];
			for (new i = 0; i != MAX_VEHICLE_OBJECTS_INDEXS; i ++)
			{
				if (!VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_COLORS][i]) format(line_str, sizeof line_str, "{F5F5F5}Color #%d (original)\n", i + 1);
				else format(line_str, sizeof line_str, "{%06x}Color #%d\n", ARGBToRGBA(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_COLORS][i]) >>> 8, i + 1);
				
				strcat(dialog, line_str);
			}
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_VOBJECT_OBJECT_COLOR:
		{
			new caption[64];
			format(caption, sizeof caption, "Color (%d) de '%s'", PLAYER_TEMP[playerid][pt_TUNING_EDIT_COLOR_SLOT], VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_NAME]);
			
			new dialog[145];
			format(dialog, sizeof dialog, 
					
					"\
						Color original\n\
						{%06x}Veh Color 1\n\
						{%06x}Veh Color 2\n\
						{F5F5F5}Otro (ARGB)\n\
					",
					VEHICLE_COLORS[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][gb_vehicle_COLOR_1] ] >>> 8,
					VEHICLE_COLORS[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][gb_vehicle_COLOR_2] ] >>> 8
			);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_VOBJECT_OBJECT_COLOR_HEX:
		{
			new caption[64];
			format(caption, sizeof caption, "Color (%d) de '%s'", PLAYER_TEMP[playerid][pt_TUNING_EDIT_COLOR_SLOT], VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_NAME]);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, caption, "Introduce el color en formato AARRGGBB\nPor ejemplo: FFCCCCCC", "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_VOBJECT_OBJECT_CDELETE:
		{
			new dialog[145];
			format(dialog, sizeof dialog, "¿Estás seguro que quieres borrar el siguiente objeto?\n\t\"%s\"", VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_NAME]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Objeto - Eliminar Objeto", dialog, "Eliminar", "Atrás");
			return 1;
		}
		case DIALOG_VOBJECT_DELETE_ALL: return ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_MSGBOX, "Objeto - Eliminar todo", "¿Estás seguro de que quiere eliminar todos los objetos de este vehículo?\nEsta opción no se puede deshacer.", "Eliminar", "Atrás");	
		case DIALOG_VOBJECT_TEXT_MENU:
		{
			new caption[64];
			format(caption, sizeof caption, "Texto '%s'", VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_NAME]);

			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, caption, "Editar texto\nCambiar fuente\nTamaño de letra\nNegrita\nColor de fuente", "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_VOBJECT_TEXT_TEXT:
		{
			new dialog[128];
			format(dialog, sizeof dialog, "Texto actual:\n\"%s\"\n\nIndica el nuevo texto (1-32 caracteres)\n", VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_text_TEXT]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Modificar texto", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_VOBJECT_TEXT_FONT:
		{
			new dialog[128];
			format(dialog, sizeof dialog, "Fuente actual:\n\"%s\"\n\nIndica la nueva fuente (1-24 caracteres)\n", VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_text_FONT]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Modificar fuente", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_VOBJECT_TEXT_FONT_SIZE:
		{
			new dialog[128];
			format(dialog, sizeof dialog, "Tamaño actual: %d\n\nIndica el nuevo tamaño\n", VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_text_FONT_SIZE]);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Modificar tamaño de letra", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_VOBJECT_TEXT_FONT_COLOR:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Selecciona color", DIALOG_CREATE_CREW_COLOR_String, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_VOBJECT_COUNTRY:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_LIST, "Selecciona país",
				
				"\
					Alemania\n\
					Argentina\n\
					Austria\n\
					Belgica\n\
					Bolivia\n\
					Bulgaria\n\
					Chile\n\
					Colombia\n\
					El Salvador\n\
					España\n\
					Estonia\n\
					Francia\n\
					Guatemala\n\
					Holanda\n\
					Hungrúa\n\
					India\n\
					Indonesia\n\
					Irlanda\n\
					Italia\n\
					Lituania\n\
					Luxemburgo\n\
					Madagascar\n\
					Malta\n\
					Malí\n\
					México\n\
					Nigeria\n\
					Panamá\n\
					Paraguay\n\
					Perú\n\
					Polonia\n\
					Rumanía\n\
					Rusia\n\
					Ucrania\n\
					Venezuela\n\
				"
				
		, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_PLAYER_CONFIG:
		{
			new dialog[512];
			format(dialog, sizeof dialog, 
				
				"\
					Audios del servidor\t%s\n\
					Barras indicadoras (hud)\t%s\n\
					Modo pasivo\t%s\n\
					Ver sanciones, kicks, baneos\t%s\n\
					Número en guía telefónica\t%s\n\
					Sonidos del servidor\t%s\n\
					Mostrar hora del servidor\t%s\n\
					Canal de Twitter\t%s\n\
					Canal de Anuncios\t%s\n\
					Canal de Dudas\t%s\n\
				",
					(PI[playerid][pi_CONFIG_AUDIO] ? 			"{"#GREEN_COLOR"}Si{F5F5F5}" : "{ff0000}No{F5F5F5}"),
					(PI[playerid][pi_CONFIG_HUD] ? 				"{"#GREEN_COLOR"}Si{F5F5F5}" : "{ff0000}No{F5F5F5}"),
					(PI[playerid][pi_PASSIVE_MODE] ? 			"{"#GREEN_COLOR"}Si{F5F5F5}" : "{ff0000}No{F5F5F5}"),
					(PI[playerid][pi_CONFIG_ADMIN] ? 			"{"#GREEN_COLOR"}Si{F5F5F5}" : "{ff0000}No{F5F5F5}"),
					(PI[playerid][pi_PHONE_VISIBLE_NUMBER] ? 	"{"#GREEN_COLOR"}Si{F5F5F5}" : "{ff0000}No{F5F5F5}"),
					(PI[playerid][pi_CONFIG_SOUNDS] ? 			"{"#GREEN_COLOR"}Si{F5F5F5}" : "{ff0000}No{F5F5F5}"),
					(PI[playerid][pi_CONFIG_TIME] ?	 			"{"#GREEN_COLOR"}Si{F5F5F5}" : "{ff0000}No{F5F5F5}"),
					(PI[playerid][pi_GLOBAL_CHANNEL] ? 			"{"#GREEN_COLOR"}Si{F5F5F5}" : "{ff0000}No{F5F5F5}"),
					(PI[playerid][pi_SELL_CHANNEL] ? 			"{"#GREEN_COLOR"}Si{F5F5F5}" : "{ff0000}No{F5F5F5}"),
					(PI[playerid][pi_DOUBT_CHANNEL] ? 			"{"#GREEN_COLOR"}Si{F5F5F5}" : "{ff0000}No{F5F5F5}")
			);
			
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_TABLIST, "[{"#GREEN_COLOR"}Usuario{F5F5F5}]  Ajustes", dialog, "Cambiar", "xSalir");	
			return 1;
		}
		case DIALOG_CHANGE_NAME:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_PASSWORD, "Cambiar nombre", "Introduce tu contraseña actual.", "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_CHANGE_NAME_NAME:
		{
			new dialog[128];
			format(dialog, sizeof dialog, "Introduce tu nuevo nombre.\nEl nombre debe respear el formato Nombre_Apellido.\n\nEl coste por el cambio de nombre es de %d "SERVER_COIN"", CNAME_COINS_PRICE);
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Cambiar nombre", dialog, "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_CHANGE_EMAIL:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_PASSWORD, "Cambiar correo electrónico", "Introduce tu contraseña actual.", "»Aceptar", "xSalir");
			return 1;
		}
		case DIALOG_CHANGE_EMAIL_EMAIL:
		{
			ShowPlayerDialog(playerid, dialogid, DIALOG_STYLE_INPUT, "Cambiar correo electrónico", "Introduce tu nuevo correo electrónico.", "»Aceptar", "xSalir");
			return 1;
		}
		default: return 0;
	}
	return 1;
}

public OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])
{
	if (PLAYER_TEMP[playerid][pt_DIALOG_RESPONDED] || PLAYER_TEMP[playerid][pt_DIALOG_ID] != dialogid) return Y_HOOKS_BREAK_RETURN_0;
	PLAYER_TEMP[playerid][pt_DIALOG_RESPONDED] = true;
	PLAYER_TEMP[playerid][pt_DIALOG_SHOW] = false;
	PLAYER_TEMP[playerid][pt_DIALOG_ID] = -1;
	PLAYER_TEMP[playerid][pt_PICKUP_TIMER] = gettime() + 3;
 
	if (!isnull(inputtext))
	{
		for (new i = 0; i != strlen(inputtext); i ++)
		{
			if (inputtext[i] == '%') inputtext[i] = '#';
		}
	}
	
	switch(dialogid)
	{
		case DIALOG_INFO: return 1;
		case DIALOG_REGISTER:
		{
			if (response)
			{
				if (strlen(inputtext) < MIN_PASS_LENGTH || strlen(inputtext) > MAX_PASS_LENGTH) return ShowDialog(playerid, dialogid);

				format(PLAYER_TEMP[playerid][pt_PASSWD], 24, "%s", inputtext);
				
				new salt[16];
				getRandomSalt(salt);
				format(PI[playerid][pi_SALT], 16, "%s", salt);

				SHA256_PassHash(inputtext, PI[playerid][pi_SALT], PI[playerid][pi_PASS], SHA256_HASH_LENGTH);

				ShowDialog(playerid, DIALOG_REGISTER_EMAIL);
			}
			else Kick(playerid);
			return 1;
		}
		case DIALOG_REGISTER_EMAIL:
		{
			if (!response) return Kick(playerid);

			new mail[32];
			format(mail, 32, "%s", inputtext);
			if (!IsValidEmail(mail))
			{
				SendPlayerClientMessage(playerid, "Correo no válido.");
				ShowDialog(playerid, DIALOG_REGISTER_EMAIL);
				return 1;	
			}

			inline OnCheckEmail()
			{
				new rows;
				if (cache_get_row_count(rows))
				{
					if (rows)
					{
						SendPlayerClientMessage(playerid, "Este correco electrónico ya está en uso, use otro distinto.");
						ShowDialog(playerid, dialogid);
					}
					else
					{
						format(PI[playerid][pi_EMAIL], 32, "%s", mail);
			
						for (new i = 0; i < LOAD_SCREEN_TEXTDRAWS_SIZE; i ++) {
							TextDrawHideForPlayer(playerid, Textdraws[textdraw_LOAD_SCREEN][i]);
						}

						PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][0]);
						PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][1]);
						PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2]);
						PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3]);
						PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4]);
						PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5]);
						PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6]);
						PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7]);
						PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8]);
						PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9]);
						
						PI[playerid][pi_GENDER] = -1;
						PLAYER_TEMP[playerid][pt_REGISTER_SELECTING_SKIN] = true;
						PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN] = 0;
					
						new td_str[64];
						format(td_str, sizeof td_str, "%d/%d", PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN] + 1, sizeof(Intro_Skins[]));
						PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9], td_str);
						
						ShowPlayerMessage(playerid, "~b~Configura~w~ tu personaje");
						SelectTextDrawEx(playerid, HexToIntEx(""#PRIMARY_COLOR""));
					}
				}
				else Kick(playerid);
			}
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE email = '%e';", mail);
			MySQL_TQueryInline(handle_db, using inline OnCheckEmail, QUERY_BUFFER);
			return 1;
		}
		case DIALOG_LOGIN:
		{
			if (!response) return Kick(playerid);
			if (!strlen(inputtext)) return ShowDialog(playerid, dialogid);

			if (SHA256_Verify(inputtext, PI[playerid][pi_SALT], PI[playerid][pi_PASS]))
			{
				LoadPlayerData(playerid);
			}
			else // Error
			{
				PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP] ++;
				if (PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP] > MAX_BAD_LOGIN_ATTEMPS) return Kick(playerid);
				ShowDialog(playerid, dialogid);
			}
			return 1;
		}
		case DIALOG_CLOTHES:
		{
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] == -1 && ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] == INTERIOR_NO_INFO) return 1;
				
				switch(listitem)
				{
					case 0:
					{
						PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
						SetPlayerPosEx(playerid, 257.251373, -40.797775, 1002.023437, 135.0, 14, playerid + MAX_PLAYERS, false); // World = Playerid + Max_players
						TogglePlayerControllableEx(playerid, false);
						
						SetPlayerCameraPos(playerid, 254.988632, -43.060516, 1002.9131);
						SetPlayerCameraLookAt(playerid, 257.251373, -40.797775, 1002.023437);
						
						UpdateClothingShop(playerid);
						ShowClothingShopTextdraws(playerid);
						
						ShowPlayerMessage(playerid, "Pulsa ~r~'ESCAPE' ~w~para dejar de probarte ropa.");
						SelectTextDrawEx(playerid, 0xe8d08fFF);
					}
					case 1:
					{
						PLAYER_TEMP[playerid][pt_TOYS_SHOP] = true;
						
						SetPlayerVirtualWorld(playerid, playerid + MAX_PLAYERS);
						TogglePlayerControllableEx(playerid, false);
						
						UpdateToysShop(playerid);
						ShowToysShopTextdraws(playerid);
						
						ShowPlayerMessage(playerid, "Pulsa ~r~'ESCAPE' ~w~para salir del menú.");
						SelectTextDrawEx(playerid, 0xe8d08fFF);
					}
				}
			}
			return 1;
		}
		case DIALOG_FOOD_PIZZA:
		{
			if (response)
			{
				if (PI[playerid][pi_CASH] >= PIZZA_FOOD[listitem][food_PRICE])
				{
					if (PI[playerid][pi_HUNGRY] >= 99.0 && PI[playerid][pi_THIRST] >= 99.0) return SendPlayerClientMessage(playerid, "¿Es que quieres reventar?");
					
					if (GivePlayerCash(playerid, -PIZZA_FOOD[listitem][food_PRICE], true, true)) {
						Add_Hungry_Thirst(playerid, PIZZA_FOOD[listitem][food_HUNGRY], PIZZA_FOOD[listitem][food_THIRST]);
						
						PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
						
						new action[64];
						format(action, sizeof action, "compra %s y lo consume.", PIZZA_FOOD[listitem][food_NAME]);
						Auto_SendPlayerAction(playerid, action);
						
						ApplyAnimation(playerid, "FOOD", "EAT_Pizza", 0, 0, 0, 0, 0, 0);
						ApplyAnimation(playerid, "FOOD", "EAT_Pizza", 4.1, false, true, true, false, 1000);
						
						ShowDialog(playerid, dialogid);
					}
				}
				else
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%d dólares ~w~para poder comprarlo.", PIZZA_FOOD[listitem][food_PRICE] - PI[playerid][pi_CASH]);
				}
			}
			else SendPlayerClientMessage(playerid, "Gracias por su visita a ~b~%s ~w~vuelva pronto.", ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_NAME]);
			return 1;
		}
		case DIALOG_FOOD_BURGER:
		{
			if (response)
			{
				if (PI[playerid][pi_CASH] >= BURGER_SHOT_FOOD[listitem][food_PRICE])
				{
					if (PI[playerid][pi_HUNGRY] >= 99.0 && PI[playerid][pi_THIRST] >= 99.0) return SendPlayerClientMessage(playerid, "¿Es que quieres reventar?");
					
					if (GivePlayerCash(playerid, -BURGER_SHOT_FOOD[listitem][food_PRICE], true, true)) {
						Add_Hungry_Thirst(playerid, BURGER_SHOT_FOOD[listitem][food_HUNGRY], BURGER_SHOT_FOOD[listitem][food_THIRST]);
						
						PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
						
						new action[64];
						format(action, sizeof action, "compra %s y lo consume.", BURGER_SHOT_FOOD[listitem][food_NAME]);
						Auto_SendPlayerAction(playerid, action);
						
						ApplyAnimation(playerid, "FOOD", "EAT_Pizza", 0, 0, 0, 0, 0, 0);
						ApplyAnimation(playerid, "FOOD", "EAT_Pizza", 4.1, false, true, true, false, 1000);
						
						ShowDialog(playerid, dialogid);
					}
				}
				else
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%d dólares ~w~para poder comprarlo.", BURGER_SHOT_FOOD[listitem][food_PRICE] - PI[playerid][pi_CASH]);
				}
			}
			else SendPlayerClientMessage(playerid, "Gracias por su visita a ~b~%s ~w~vuelva pronto.", ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_NAME]);
			return 1;
		}
		case DIALOG_FOOD_CLUCKIN:
		{
			if (response)
			{
				if (PI[playerid][pi_CASH] >= CLUCKIN_BELL_FOOD[listitem][food_PRICE])
				{
					if (PI[playerid][pi_HUNGRY] >= 99.0 && PI[playerid][pi_THIRST] >= 99.0) return SendPlayerClientMessage(playerid, "¿Es que quieres reventar?");
					
					if (GivePlayerCash(playerid, -CLUCKIN_BELL_FOOD[listitem][food_PRICE], true, true)) {
						Add_Hungry_Thirst(playerid, CLUCKIN_BELL_FOOD[listitem][food_HUNGRY], CLUCKIN_BELL_FOOD[listitem][food_THIRST]);
						
						PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
						
						new action[64];
						format(action, sizeof action, "compra %s y lo consume.", CLUCKIN_BELL_FOOD[listitem][food_NAME]);
						Auto_SendPlayerAction(playerid, action);
						
						ApplyAnimation(playerid, "FOOD", "EAT_Pizza", 0, 0, 0, 0, 0, 0);
						ApplyAnimation(playerid, "FOOD", "EAT_Pizza", 4.1, false, true, true, false, 1000);
						
						ShowDialog(playerid, dialogid);
					}
				}
				else
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%d dólares ~w~para poder comprarlo.", CLUCKIN_BELL_FOOD[listitem][food_PRICE] - PI[playerid][pi_CASH]);
				}
			}
			else SendPlayerClientMessage(playerid, "Gracias por su visita a ~b~%s ~w~vuelva pronto.", ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_NAME]);
			return 1;
		}
		case DIALOG_BANK:
		{
			if (response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_BANK_WITHDRAW);
					case 1: ShowDialog(playerid, DIALOG_BANK_DEPOSIT);
					case 2: ShowDialog(playerid, DIALOG_BANK_TRANSFER);
					case 3: ShowDialog(playerid, DIALOG_BANK_TRANSACTIONS);
				}
			}
			else PLAYER_TEMP[playerid][pt_PLAYER_IN_ATM] = false;
			return 1;
		}
		case DIALOG_BANK_WITHDRAW:
		{
			if (response)
			{
				if (sscanf(inputtext, "d", inputtext[0]))
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "Introduce un valor numérico.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (inputtext[0] <= 0)
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "Introduce un valor positivo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (inputtext[0] > PI[playerid][pi_BANK_MONEY])
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "Saldo insuficiente.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (PLAYER_TEMP[playerid][pt_PLAYER_IN_ATM])
				{
					if (inputtext[0] > 10000)
					{
						PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
						SendPlayerClientMessage(playerid, "Las operaciones de más de ~r~10.000$ ~w~no se pueden realizar desde un cajero, solo en el banco.");
						ShowDialog(playerid, dialogid);
						return 1;
					}
				}
				
				if (GivePlayerCash(playerid, inputtext[0], true, false)) {
					PI[playerid][pi_BANK_MONEY] -= inputtext[0];
					
					RegisterBankAccountTransaction(PI[playerid][pi_ID], PI[playerid][pi_ID], BANK_TRANSACTION_WITHDRAW, inputtext[0]);
					
					SendPlayerClientMessage(playerid, "Operación realizada con éxito, has retirado ~b~%s dólares~w~.", number_format_thousand(inputtext[0]));
					PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				}
				PLAYER_TEMP[playerid][pt_PLAYER_IN_ATM] = false;
			}
			else ShowDialog(playerid, DIALOG_BANK);
			return 1;
		}
		case DIALOG_BANK_DEPOSIT:
		{
			if (response)
			{
				if (sscanf(inputtext, "d", inputtext[0]))
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "Introduce un valor numérico.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (inputtext[0] <= 0)
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "Introduce un valor positivo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (inputtext[0] > PI[playerid][pi_CASH])
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "Dinero insuficiente.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (PLAYER_TEMP[playerid][pt_PLAYER_IN_ATM])
				{
					if (inputtext[0] > 10000)
					{
						PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
						SendPlayerClientMessage(playerid, "Las operaciones de más de ~r~10.000$ ~w~no se pueden realizar desde un cajero, solo en el banco.");
						ShowDialog(playerid, dialogid);
						return 1;
					}
				}
				
				if (GivePlayerCash(playerid, -inputtext[0], true, true)) {
					PI[playerid][pi_BANK_MONEY] += inputtext[0];
					
					RegisterBankAccountTransaction(PI[playerid][pi_ID], PI[playerid][pi_ID], BANK_TRANSACTION_DEPOSIT, inputtext[0]);
					
					SendPlayerClientMessage(playerid, "Operación realizada con éxito, has depositado ~b~%s dólares~w~.", number_format_thousand(inputtext[0]));
					PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				}
				PLAYER_TEMP[playerid][pt_PLAYER_IN_ATM] = false;
			}
			else ShowDialog(playerid, DIALOG_BANK);
			return 1;
		}
		case DIALOG_BANK_TRANSFER:
		{
			if (response)
			{
				new to_bank_account;
				if (sscanf(inputtext, "d", to_bank_account))
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "Introduce un valor numérico.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (to_bank_account <= 0)
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "Introduce un valor positivo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				inline OnBankAccountChecked()
				{
					new rows;
					if (cache_get_row_count(rows))
					{
						if (rows)
						{
							cache_get_value_index_int(0, 0, PLAYER_TEMP[playerid][pt_SELECT_BANK_TRANSFER_ID]);
							PLAYER_TEMP[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT] = to_bank_account;
							ShowDialog(playerid, DIALOG_BANK_TRANSFER_SEND);
						}
						else
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendPlayerClientMessage(playerid, "El número de cuenta introducido no existe o no es correcto.");
							PLAYER_TEMP[playerid][pt_PLAYER_IN_ATM] = false;
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE bank_account = %d;", to_bank_account);
				MySQL_TQueryInline(handle_db, using inline OnBankAccountChecked, QUERY_BUFFER);
			}
			else ShowDialog(playerid, DIALOG_BANK);
			return 1;
		}
		case DIALOG_BANK_TRANSFER_SEND:
		{
			if (response)
			{
				if (sscanf(inputtext, "d", inputtext[0]))
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "Introduce un valor numérico.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (inputtext[0] <= 0)
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "Introduce un valor positivo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (inputtext[0] > PI[playerid][pi_BANK_MONEY])
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "Saldo insuficiente.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (PLAYER_TEMP[playerid][pt_PLAYER_IN_ATM])
				{
					if (inputtext[0] > 10000)
					{
						PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
						SendPlayerClientMessage(playerid, "Las operaciones de más de ~r~10.000$ ~w~no se pueden realizar desde un cajero, solo en el banco.");
						ShowDialog(playerid, dialogid);
						return 1;
					}
				}
				
				PI[playerid][pi_BANK_MONEY] -= inputtext[0];
				new transfer_player_id = GetPlayerIdByBankAccountId(PLAYER_TEMP[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT]);
				
				new message[64];
				format(message, sizeof message, "Tranferencia recibida: +%s$", number_format_thousand(inputtext[0]));
				if (transfer_player_id == -1)
				{
					inline OnPhoneChecked()
					{
						new rows;
						if (cache_get_row_count(rows))
						{
							if (rows)
							{
								new id;
								cache_get_value_index_int(0, 0, id);
								if (id) RegisterPhoneMessage(0, id, message, true);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE bank_account = %d;", PLAYER_TEMP[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT]);
					MySQL_TQueryInline(handle_db, using inline OnPhoneChecked, QUERY_BUFFER);
				}
				else
				{
					PI[transfer_player_id][pi_BANK_MONEY] += inputtext[0];
					
					if (PI[transfer_player_id][pi_PHONE_NUMBER])
					{
						RegisterPhoneMessage(0, PI[transfer_player_id][pi_ID], message);
						if (PI[transfer_player_id][pi_PHONE_STATE] == PHONE_STATE_ON)
						{
							if ((PLAYER_TEMP[transfer_player_id][pt_GAME_STATE] == GAME_STATE_NORMAL || PLAYER_TEMP[transfer_player_id][pt_GAME_STATE] == GAME_STATE_DEAD))
							{
								SendPlayerClientMessage(transfer_player_id, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {f5f5f5}Remitente: {F5F5F5}%s {f5f5f5}Mensaje: {F5F5F5}%s", convertPhoneNumber(transfer_player_id, 6740), message);
							}
						}
					}	
				}
				

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = bank_money + %d WHERE bank_account = %d;", inputtext[0], PLAYER_TEMP[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT]);
				mysql_tquery(handle_db, QUERY_BUFFER);

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[playerid][pi_BANK_MONEY], PI[playerid][pi_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				RegisterBankAccountTransaction(PI[playerid][pi_ID], PLAYER_TEMP[playerid][pt_SELECT_BANK_TRANSFER_ID], BANK_TRANSACTION_TRANSFER, inputtext[0]);
				
				SendPlayerClientMessage(playerid, "Operación realizada con éxito, has transferido %s{"#GREEN_COLOR"}${F5F5F5} al número de cuenta {"#PRIMARY_COLOR"}%s{F5F5F5}.", number_format_thousand(inputtext[0]), number_format_thousand(PLAYER_TEMP[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT]));
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				PLAYER_TEMP[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT] = 0;
				PLAYER_TEMP[playerid][pt_PLAYER_IN_ATM] = false;
			}
			else
			{
				PLAYER_TEMP[playerid][pt_SELECT_BANK_TRANSFER_ACCOUNT] = 0;
				ShowDialog(playerid, DIALOG_BANK_TRANSFER);
			}
			return 1;
		}
		case DIALOG_CREATE_BANK_ACCOUNT:
		{
			if (response)
			{
				if (PI[playerid][pi_CASH] >= 500)
				{
					if (GivePlayerCash(playerid, -500, true, true)) {
						PI[playerid][pi_BANK_MONEY] = 500;
						PI[playerid][pi_BANK_ACCOUNT] = getBankAccountNumber(PI[playerid][pi_ID]);
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_account = %d, bank_money = %d WHERE id = %d;", PI[playerid][pi_BANK_ACCOUNT], PI[playerid][pi_BANK_MONEY], PI[playerid][pi_ID]);
						mysql_tquery(handle_db, QUERY_BUFFER);
						
						RegisterBankAccountTransaction(PI[playerid][pi_ID], PI[playerid][pi_ID], BANK_TRANSACTION_CREATE_ACCOUNT, 500);
						
						PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
						SendPlayerClientMessage(playerid, "Tu cuenta bancaria ha sido creada con exito, tu numero de cuenta es {"#PRIMARY_COLOR"}%s{F5F5F5}.", number_format_thousand(PI[playerid][pi_BANK_ACCOUNT]));
					}
				}
				else
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "No tienes dinero suficiente para crear la cuenta bancaria, te faltan ~r~%d dólares~w~.", 500 - PI[playerid][pi_CASH]);
				}
			}
			return 1;
		}
		case DIALOG_BANK_TRANSACTIONS:
		{
			if (response) PLAYER_TEMP[playerid][pt_PLAYER_IN_ATM] = false;
			else ShowDialog(playerid, DIALOG_BANK);
			return 1;
		}
		case DIALOG_247_LIST:
		{
			if (response)
			{
				switch(Supermarket_Product_List[listitem][product_TYPE])
				{
					case PRODUCT_TYPE_INVENTORY:
					{
						if (PI[playerid][pi_CASH] >= Supermarket_Product_List[listitem][product_PRICE])
						{
							new slot = GetPlayerValidInventoryPocket(playerid);

							if (j_PocketInfo[playerid][SLOT_HAND][pValid])
							{
								if (slot == -1)
								{
									PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
									ShowPlayerMessage(playerid, "No tienes más espacio entre tus bolsillos.");
									ShowDialog(playerid, DIALOG_247_LIST);
									return 1;
								}
							}
							
							if (GivePlayerCash(playerid, -Supermarket_Product_List[listitem][product_PRICE], true, true))
							{
								if (j_PocketInfo[playerid][SLOT_HAND][pValid])
								{
									j_PocketInfo[playerid][slot][pValid] = true;
									j_PocketInfo[playerid][slot][pType] = Supermarket_Product_List[listitem][product_EXTRA];
									j_PocketInfo[playerid][slot][pExtra] = Supermarket_Product_List[listitem][product_AMOUNT];
									InsertPlayerInventorySlot(playerid, slot);
								}
								else
								{
									j_PocketInfo[playerid][SLOT_HAND][pValid] = true;
									j_PocketInfo[playerid][SLOT_HAND][pType] = Supermarket_Product_List[listitem][product_EXTRA];
									j_PocketInfo[playerid][SLOT_HAND][pExtra] = Supermarket_Product_List[listitem][product_AMOUNT];
									InsertPlayerInventorySlot(playerid, SLOT_HAND);
								}
								
								ShowPlayerMessage(playerid, "Has comprado ~b~%s~w~ por %d~g~$~w~.", Supermarket_Product_List[listitem][product_NAME], Supermarket_Product_List[listitem][product_PRICE]);
								PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
							}
						}
						else
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							ShowPlayerMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder comprar este producto.", number_format_thousand(Supermarket_Product_List[listitem][product_PRICE] - PI[playerid][pi_CASH]));
						}
					}
					case PRODUCT_TYPE_PHONE:
					{						
						if (PI[playerid][pi_CASH] >= Supermarket_Product_List[listitem][product_PRICE])
						{
							if (PI[playerid][pi_PHONE_NUMBER])
							{
								ShowPlayerMessage(playerid, "Ya tienes un teléfono.");
								PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
								ShowDialog(playerid, DIALOG_247_LIST);
								return 1;
							}
							
							if (GivePlayerCash(playerid, -Supermarket_Product_List[listitem][product_PRICE], true, true)) {
								PI[playerid][pi_PHONE_NUMBER] = getPhoneNumber(PI[playerid][pi_ID]);
								PI[playerid][pi_PHONE_STATE] = PHONE_STATE_ON;
								PI[playerid][pi_PHONE_VISIBLE_NUMBER] = true;

								mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET phone_number = %d, phone_state = %d, phone_visible_number = %d WHERE id = %d;", PI[playerid][pi_PHONE_NUMBER], PI[playerid][pi_PHONE_STATE], PI[playerid][pi_PHONE_VISIBLE_NUMBER], PI[playerid][pi_ID]);
								mysql_tquery(handle_db, QUERY_BUFFER);
								
								ShowPlayerMessage(playerid, "Has comprado un ~b~%s ~w~por ~b~%d dólares~w~, tu número es ~y~%d~w~.", Supermarket_Product_List[listitem][product_NAME], Supermarket_Product_List[listitem][product_PRICE], PI[playerid][pi_PHONE_NUMBER]);
								PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
							}
						}
						else
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							ShowPlayerMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder comprar este producto.", number_format_thousand(Supermarket_Product_List[listitem][product_PRICE] - PI[playerid][pi_CASH]));
						}
						
					}
					case PRODUCT_TYPE_GPS:
					{
						if (PI[playerid][pi_CASH] >= Supermarket_Product_List[listitem][product_PRICE])
						{
							if (PI[playerid][pi_GPS])
							{
								ShowPlayerMessage(playerid, "Ya tienes un GPS.");
								PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
								ShowDialog(playerid, DIALOG_247_LIST);
								return 1;
							}
							
							if (GivePlayerCash(playerid, -Supermarket_Product_List[listitem][product_PRICE], true, true)) {	
								PI[playerid][pi_GPS] = true;
								ShowPlayerMessage(playerid, "Has comprado un ~b~%s ~w~por ~b~%d dólares~w~, usa ~b~/GPS ~w~para usarlo.", Supermarket_Product_List[listitem][product_NAME], Supermarket_Product_List[listitem][product_PRICE]);
								PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
							}
						}
						else
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							ShowPlayerMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder comprar este producto.", number_format_thousand(Supermarket_Product_List[listitem][product_PRICE] - PI[playerid][pi_CASH]));
						}
					}
					case PRODUCT_TYPE_PHONE_RESOLVER:
					{
						if (PI[playerid][pi_CASH] >= Supermarket_Product_List[listitem][product_PRICE])
						{
							if (PI[playerid][pi_PHONE_RESOLVER])
							{
								ShowPlayerMessage(playerid, "Ya tienes una guía telefónica.");
								PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
								ShowDialog(playerid, DIALOG_247_LIST);
								return 1;
							}
							
							if (GivePlayerCash(playerid, -Supermarket_Product_List[listitem][product_PRICE], true, true)) {
								PI[playerid][pi_PHONE_RESOLVER] = true;
								ShowPlayerMessage(playerid, "Has comprado una ~b~%s ~w~por ~b~%d dólares~w~, ~w~usa ~b~/guia ~w~para usarla.", Supermarket_Product_List[listitem][product_NAME], Supermarket_Product_List[listitem][product_PRICE]);
								PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
							}
						}
						else
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							ShowPlayerMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder comprar este producto.", number_format_thousand(Supermarket_Product_List[listitem][product_PRICE] - PI[playerid][pi_CASH]));
						}
					}
				}

				ShowDialog(playerid, DIALOG_247_LIST);
			}
			return 1;
		}
		case DIALOG_PHONE:
		{
			if (response)
			{
				switch(listitem)
				{
					case 0: //Agenda
					{
						if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_OFF)
						{
							PI[playerid][pi_PHONE_STATE] = PHONE_STATE_ON;
							ShowDialog(playerid, dialogid);
							return 1;
						}
						ShowDialog(playerid, DIALOG_PHONE_BOOK);
					}
					case 1: //Llamar
					{
						if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_OFF) return SendPlayerClientMessage(playerid, "Tu teléfono está apagado, enciéndelo para usarlo.");
						ShowDialog(playerid, DIALOG_PHONE_CALL_NUMBER);
					}
					case 2: //Enviar mensaje
					{
						if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_OFF) return SendPlayerClientMessage(playerid, "Tu teléfono está apagado, enciéndelo para usarlo.");
						ShowDialog(playerid, DIALOG_PHONE_SMS_NUMBER);
					}
					case 3: //Ver mensajes recibidos
					{
						if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_OFF) return SendPlayerClientMessage(playerid, "Tu teléfono está apagado, enciéndelo para usarlo.");
						ShowDialog(playerid, DIALOG_PHONE_RECEIVED_MESSAGES);
					}
					case 4: //Ver mensajes enviados
					{
						if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_OFF) return SendPlayerClientMessage(playerid, "Tu teléfono está apagado, enciéndelo para usarlo.");
						ShowDialog(playerid, DIALOG_PHONE_SENT_MESSAGES);
					}
					case 5: //Apagar
					{
						if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_OFF) return SendPlayerClientMessage(playerid, "Tu teléfono está apagado, enciéndelo para usarlo.");
						
						if (PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL]) EndPhoneCall(playerid);
						PI[playerid][pi_PHONE_STATE] = PHONE_STATE_OFF;
						SendPlayerClientMessage(playerid, "Has apagado tu teléfono, ahora no recibirás llamadas.");
					}
				}
			}
			return 1;
		}
		case DIALOG_PHONE_BOOK:
		{
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return ShowDialog(playerid, dialogid);
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == MAX_PHONE_CONTACTS + 10) return ShowDialog(playerid, DIALOG_PHONE_BOOK_ADD_NUMBER);
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == MAX_PHONE_CONTACTS + 20) return ShowDialog(playerid, DIALOG_PHONE_BOOK_DELETE_ALL);
				
				PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
				ShowDialog(playerid, DIALOG_PHONE_BOOK_OPTIONS);
			}
			else ShowDialog(playerid, DIALOG_PHONE);
			return 1;
		}
		case DIALOG_PHONE_BOOK_ADD_NUMBER:
		{
			if (response)
			{
				if (sscanf(inputtext, "d", inputtext[0]))
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "Introduce un valor numérico.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (inputtext[0] <= 0)
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "Introduce un valor positivo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_ADD_NUMBER] = inputtext[0];
				ShowDialog(playerid, DIALOG_PHONE_BOOK_ADD_NAME);
			}
			else ShowDialog(playerid, DIALOG_PHONE_BOOK);
			return 1;
		}
		case DIALOG_PHONE_BOOK_ADD_NAME:
		{
			if (response)
			{
				if (isnull(inputtext))
				{ 
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (strlen(inputtext) > 24)
				{
					SendPlayerClientMessage(playerid, "Caracteres: 1-24.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new slot = GetEmptyPlayerPhoneBookSlot(playerid);
				if (slot == -1) return SendPlayerClientMessage(playerid, "Memoria de la agenda llena.");
			
			
				PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_VALID] = true;
				format(PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], 24, "%s", inputtext);
				PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER] = PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_ADD_NUMBER];
				RegisterNewPlayerPhoneBook(playerid, slot);
				
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				SendPlayerClientMessage(playerid, "Nuevo contacto añadido a la agenda:~n~~n~~b~Nombre: ~w~%s~n~~b~Teléfono:~w~ %d.", PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER]);
				ShowDialog(playerid, DIALOG_PHONE_BOOK);
			}
			else ShowDialog(playerid, DIALOG_PHONE_BOOK_ADD_NUMBER);
			return 1;
		}
		case DIALOG_PHONE_BOOK_OPTIONS:
		{
			if (response)
			{
				switch(listitem)
				{
					case 0:  SendPlayerClientMessage(playerid, "Usa /llamar");
					case 1: ShowDialog(playerid, DIALOG_PHONE_BOOK_SEND_MESSAGE);
					case 2: ShowDialog(playerid, DIALOG_PHONE_BOOK_CHANGE_NAME);
					case 3: ShowDialog(playerid, DIALOG_PHONE_BOOK_CONFIRM_DELET);
				}
			}
			else ShowDialog(playerid, DIALOG_PHONE_BOOK);
			return 1;
		}
		case DIALOG_PHONE_BOOK_CHANGE_NAME:
		{
			if (response)
			{
				if (isnull(inputtext))
				{ 
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (strlen(inputtext) > 24)
				{
					SendPlayerClientMessage(playerid, "Caracteres: 1-24.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				format(PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME], 24, "%s", inputtext);
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pbook SET name = '%e' WHERE id = %d;", PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME], PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendPlayerClientMessage(playerid, "Contacto modificado.");
				ShowDialog(playerid, DIALOG_PHONE_BOOK);
			}
			else ShowDialog(playerid, DIALOG_PHONE_BOOK_OPTIONS);
			return 1;
		}
		case DIALOG_PHONE_BOOK_CONFIRM_DELET:
		{
			if (response)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pbook WHERE id = %d;", PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendPlayerClientMessage(playerid, "Contacto ~b~\"%s\" ~w~eliminado de tu agenda.", PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME]);
				
				PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_VALID] = false;
				PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_ID] = 0;
				format(PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_NAME], 24, "");
				PLAYER_PHONE_BOOK[playerid][ PLAYER_TEMP[playerid][pt_PLAYER_PHONE_BOOK_SELECTED] ][phone_book_contact_PHONE_NUMBER] = 0;
				
				ShowDialog(playerid, DIALOG_PHONE_BOOK);
			}
			else ShowDialog(playerid, DIALOG_PHONE_BOOK_OPTIONS);
			return 1;
		}
		case DIALOG_PHONE_BOOK_DELETE_ALL:
		{
			if (response)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pbook WHERE id_player = %d;", PI[playerid][pi_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				new temp_PLAYER_PHONE_BOOK[Phone_Book_Enum]; 
				for (new i = 0; i != MAX_PHONE_CONTACTS; i ++) PLAYER_PHONE_BOOK[playerid][i] = temp_PLAYER_PHONE_BOOK;
				
				SendPlayerClientMessage(playerid, "Ha eliminado todos sus contactos.");
			}
			else ShowDialog(playerid, DIALOG_PHONE_BOOK);
			return 1;
		}
		case DIALOG_PHONE_CALL_NUMBER:
		{
			if (response) SendPlayerClientMessage(playerid, "Usa /llamar");
			else ShowDialog(playerid, DIALOG_PHONE);
			return 1;
		}
		case DIALOG_PHONE_SMS_NUMBER:
		{
			if (response) SendPlayerClientMessage(playerid, "Usa /sms");
			else ShowDialog(playerid, DIALOG_PHONE);
			return 1;
		}
		case DIALOG_PHONE_SMS_MESSAGE:
		{
			if (response) SendPlayerClientMessage(playerid, "Usa /sms");
			else ShowDialog(playerid, DIALOG_PHONE_SMS_MESSAGE);
			return 1;
		}
		case DIALOG_PHONE_BOOK_SEND_MESSAGE:
		{
			if (response) SendPlayerClientMessage(playerid, "Usa /sms");
			else ShowDialog(playerid, DIALOG_PHONE_BOOK_OPTIONS);
			return 1;
		}
		case DIALOG_PHONE_SENT_MESSAGES:
		{
			if (!response) ShowDialog(playerid, DIALOG_PHONE);
			return 1;
		}
		case DIALOG_PHONE_RECEIVED_MESSAGES:
		{
			if (!response) ShowDialog(playerid, DIALOG_PHONE);
			return 1;
		}
		case DIALOG_CONFIRM_BUY_PROPERTY:
		{
			if (response)
			{
				if (PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_SOLD]) return SendPlayerClientMessage(playerid, "Está propiedad ya está vendida.");
				if (PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_LEVEL] > PI[playerid][pi_LEVEL]) return SendPlayerClientMessage(playerid, "Necesitas ser como mínimo nivel %d para comprar esta propiedad.", PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_LEVEL]);
				if (PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_PRICE] > PI[playerid][pi_BANK_MONEY]) return SendPlayerClientMessage(playerid, "No.");
				if (PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_VIP_LEVEL] && !PI[playerid][pi_VIP]) return SendPlayerClientMessage(playerid, "No.");
				if (PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_EXTRA] > PI[playerid][pi_COINS]) return SendPlayerClientMessage(playerid, "No.");
	
				if (!PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_EXTRA])
				{
					if (PI[playerid][pi_PHONE_NUMBER])
					{
						new message[64]; format(message, sizeof message, "PROPIEDAD COMPRADA: -%s$", number_format_thousand(PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_PRICE]));
						RegisterPhoneMessage(0, PI[playerid][pi_ID], message);
						if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_ON) SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {f5f5f5}Remitente: {F5F5F5}%s {f5f5f5}Mensaje: {F5F5F5}%s", convertPhoneNumber(playerid, 6740), message);
					}
					
					PI[playerid][pi_BANK_MONEY] -= PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_PRICE];
				
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[playerid][pi_BANK_MONEY], PI[playerid][pi_ID]);
					mysql_tquery(handle_db, QUERY_BUFFER);
					RegisterBankAccountTransaction(PI[playerid][pi_ID], PI[playerid][pi_ID], BANK_TRANSACTION_BUY_PROPERTY, PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_PRICE]);
				}
				else
				{
					GivePlayerCoins(playerid, -PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_EXTRA], true, true, "Compra de propiedad");

					SendPlayerClientMessage(playerid, "Has gastado %d "SERVER_COIN" en la compra de esta propiedad.", PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_EXTRA]);
				}
				
				
				PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_SOLD] = true;
				PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_CREW] = false;
				PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_OWNER_ID] = PI[playerid][pi_ID];
				CreatePropertyInfo(PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX], PI[playerid][pi_ID], PI[playerid][pi_NAME], 0, "");
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_player = %d, id_territory = NULL WHERE id = %d;", PI[playerid][pi_ID], PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				
				SendPlayerClientMessage(playerid, "~b~¡Propiedad %d comprada!~n~~n~ ~w~Ahora puedes ir a tu casa, si no sabes donde es puedes marcarla con el ~b~/GPS~w~.", PROPERTY_INFO[PLAYER_TEMP[playerid][pt_BUY_HOUSE_INDEX]][property_ID]);
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
			}
			return 1;
		}
		case DIALOG_PLAYER_GPS:
		{
			if (response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER);
					case 1: ShowDialog(playerid, DIALOG_PLAYER_GPS_PROPERTIES);
					case 2: ShowDialog(playerid, DIALOG_PLAYER_GPS_VEHICLES);
					case 3: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITES);
					case 4: ShowDialog(playerid, DIALOG_PLAYER_GPS_WORKS);
					case 5:
					{
						if (PLAYER_TEMP[playerid][pt_GPS_MAP]) HidePlayerGpsMap(playerid);
						else ShowPlayerGpsMap(playerid);
					}
				}
			}
			return 1;
		}
		case DIALOG_PLAYER_GPS_PLAYER:
		{
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return ShowDialog(playerid, dialogid);
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == MAX_PLAYER_GPS_SAVES + 10) return ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER_ADD);
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == MAX_PLAYER_GPS_SAVES + 20) return ShowDialog(playerid, DIALOG_PLAYER_GPS_DELETE_ALL);
				
				PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
				ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER_OPTION);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS);
			return 1;
		}
		case DIALOG_PLAYER_GPS_PLAYER_ADD:
		{
			if (response)
			{
				if (isnull(inputtext))
				{ 
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (strlen(inputtext) > 24)
				{
					SendPlayerClientMessage(playerid, "Caracteres: 1-24.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new slot = GetEmptyPlayer_GPS_Slot(playerid);
				if (slot == -1) return SendPlayerClientMessage(playerid, "Memoria del GPS llena.");
			
				PLAYER_GPS[playerid][slot][player_gps_VALID] = true;
				format(PLAYER_GPS[playerid][slot][player_gps_NAME], 24, "%s", inputtext);
				GetPlayerPos(playerid, PLAYER_GPS[playerid][slot][player_gps_X], PLAYER_GPS[playerid][slot][player_gps_Y], PLAYER_GPS[playerid][slot][player_gps_Z]);
				PLAYER_GPS[playerid][slot][player_gps_WORLD] = GetPlayerVirtualWorld(playerid);
				PLAYER_GPS[playerid][slot][player_gps_INTERIOR] = GetPlayerInterior(playerid);
				RegisterNewPlayer_GPS_Site(playerid, slot);
				
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				SendPlayerClientMessage(playerid, "Nuevo sitio añadido al GPS con el nombre: ~b~%s~w~.", PLAYER_GPS[playerid][slot][player_gps_NAME]);
				ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER);
			return 1;
		}
		case DIALOG_PLAYER_GPS_PLAYER_OPTION:
		{
			if (response)
			{
				switch(listitem)
				{
					case 0: SetPlayer_GPS_Checkpoint(playerid, PLAYER_GPS[playerid][PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED]][player_gps_X], PLAYER_GPS[playerid][PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED]][player_gps_Y], PLAYER_GPS[playerid][PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED]][player_gps_Z], PLAYER_GPS[playerid][PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED]][player_gps_WORLD], PLAYER_GPS[playerid][PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED]][player_gps_INTERIOR]);
					case 1: ShowDialog(playerid, DIALOG_PLAYER_GPS_CHANGE_NAME);
					case 2: ShowDialog(playerid, DIALOG_PLAYER_GPS_CONFIRM_DELET);
				}
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER);
			return 1;
		}
		case DIALOG_PLAYER_GPS_CHANGE_NAME:
		{
			if (response)
			{
				if (isnull(inputtext))
				{ 
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (strlen(inputtext) > 24)
				{
					SendPlayerClientMessage(playerid, "Caracteres: 1-24.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				format(PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_NAME], 24, "%s", inputtext);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pgps SET name = '%e' WHERE id = %d;", PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_NAME], PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				SendPlayerClientMessage(playerid, "Has modificado el nombre de este lugar correctamente");
				ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER_OPTION);
			return 1;
		}
		case DIALOG_PLAYER_GPS_CONFIRM_DELET:
		{
			if (response)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pgps WHERE id = %d;", PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);

				PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_VALID] = false;
				PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_ID] = 0;
				format(PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_NAME], 24, "");
				PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_X] = 0.0;
				PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_Y] = 0.0;
				PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_Z] = 0.0;
				PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_WORLD] = 0;
				PLAYER_GPS[playerid][ PLAYER_TEMP[playerid][pt_GPS_PLAYER_SELECTED] ][player_gps_INTERIOR] = 0;
				
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				SendPlayerClientMessage(playerid, "Has eliminado este lugar de tu GPS.");
				ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER_OPTION);
			return 1;
		}
		case DIALOG_PLAYER_GPS_DELETE_ALL:
		{
			if (response)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pgps WHERE id_player = %d;", PI[playerid][pi_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				new temp_PLAYER_GPS[Player_GPS_Enum]; 
				for (new i = 0; i != MAX_PLAYER_GPS_SAVES; i ++) PLAYER_GPS[playerid][i] = temp_PLAYER_GPS;
				
				SendPlayerClientMessage(playerid, "Ha eliminado todos tus lugares guardados.");
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_PLAYER);
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITES: {
			if (response) {
				switch(listitem) {
					case 0: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_10);
					case 1: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_0);
					case 2: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_1);
					case 3: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_2);
					case 4: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_3);
					case 5: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_4);
					case 6: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_5);
					case 7: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_6);
					case 8: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_7);
					case 9: SetPlayer_GPS_Checkpoint(playerid, 1480.966918, -1772.065673, 18.795755, 0, 0);
					case 10: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_8);
					case 11: ShowDialog(playerid, DIALOG_PLAYER_GPS_SITE_9);
				}
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS);
			return 1;
		}
		case DIALOG_PLAYER_GPS_WORKS:
		{
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return true;
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == WORK_MEDIC) SendPlayerClientMessage(playerid, "Este trabajo se puede conseguir en cualquier hospital.");
				else SetPlayer_GPS_Checkpoint(playerid, obtain_work_coords[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][obtain_work_MAP_ICON_X], obtain_work_coords[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][obtain_work_MAP_ICON_Y], obtain_work_coords[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][obtain_work_MAP_ICON_Z], 0, 0);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS);
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_0: //Hospitales
		{
			if (response) SetPlayer_GPS_Checkpoint(playerid, Hospital_Spawn_Positions[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][hspi_X], Hospital_Spawn_Positions[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][hspi_Y], Hospital_Spawn_Positions[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][hspi_Z], 0, 0);
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_SITES);
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_1 .. DIALOG_PLAYER_GPS_SITE_4, DIALOG_PLAYER_GPS_SITE_8, DIALOG_PLAYER_GPS_SITE_9, DIALOG_PLAYER_GPS_SITE_10: //EE
		{
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return ShowDialog(playerid, DIALOG_PLAYER_GPS);
				SetPlayer_GPS_Checkpoint(playerid, ENTER_EXIT[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][ee_EXT_X], ENTER_EXIT[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][ee_EXT_Y], ENTER_EXIT[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][ee_EXT_Z], ENTER_EXIT[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][ee_EXT_WORLD], ENTER_EXIT[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][ee_EXT_INTERIOR]);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_SITES);
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_5: //Cajeros
		{
			if (response) SetPlayer_GPS_Checkpoint(playerid, ATM_BANK[listitem][atm_X], ATM_BANK[listitem][atm_Y], ATM_BANK[listitem][atm_Z], 0, 0);
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_SITES);
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_6: //Gasolineras
		{
			if (response) SetPlayer_GPS_Checkpoint(playerid, Fuel_Stations[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][fs_X], Fuel_Stations[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][fs_Y], Fuel_Stations[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][fs_Z], 0, 0);
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_SITES);
			return 1;
		}
		case DIALOG_WORKS_TELEPORTS:
		{
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return true;
				else SetPlayerPosEx(playerid, obtain_work_coords[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][obtain_work_MAP_ICON_X], obtain_work_coords[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][obtain_work_MAP_ICON_Y], obtain_work_coords[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][obtain_work_MAP_ICON_Z], 0.0, 0, 0, true);
			}
			return 1;
		}
		case DIALOG_PLAYER_GPS_SITE_7: //Concesionarios
		{
			if (response) DealerShipGPSResponse(playerid, listitem);
			else ShowDialog(playerid, DIALOG_PLAYER_GPS_SITES);
			return 1;
		}
		case DIALOG_PLAYER_GPS_PROPERTIES:
		{
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_GPS_SELECTED_PROPERTY][listitem] == -1) return ShowDialog(playerid, DIALOG_PLAYER_GPS);
				
				new index = GetPropertyIndexByID(PLAYER_TEMP[playerid][pt_PLAYER_GPS_SELECTED_PROPERTY][listitem]);
				if (index != -1) SetPlayer_GPS_Checkpoint(playerid, PROPERTY_INFO[index][property_EXT_X], PROPERTY_INFO[index][property_EXT_Y], PROPERTY_INFO[index][property_EXT_Z], 0, PROPERTY_INFO[index][property_EXT_INTERIOR]);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS);
			return 1;
		}
		case DIALOG_PLAYER_GPS_VEHICLES:
		{
			if (response)
			{
				new const vehicleid = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
				new const p_vehicleid = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM_EX][listitem];
				
				if(p_vehicleid != -1) {
					if (ParkingVehicles[playerid][p_vehicleid][pvValid]) {
						if (ParkingVehicles[playerid][p_vehicleid][pvOwnerId] == PI[playerid][pi_ID]) {
							SetPlayer_GPS_Checkpoint(playerid, ParkingSlotInfo[ ParkingVehicles[playerid][p_vehicleid][pvParkingIndex] ][piPosX], ParkingSlotInfo[ ParkingVehicles[playerid][p_vehicleid][pvParkingIndex] ][piPosY], ParkingSlotInfo[ ParkingVehicles[playerid][p_vehicleid][pvParkingIndex] ][piPosZ], 0, 0);
							return 1;
						}
					}
				}

				if (vehicleid == -1) return ShowDialog(playerid, DIALOG_PLAYER_GPS);

				if (!PI[playerid][pi_VIP])
				{
					if (!PLAYER_VEHICLES[vehicleid][player_vehicle_ACCESSIBLE])
					{
						SendPlayerClientMessage(playerid, "No podrás usar este vehículo hasta que no consigas VIP.");
					}
				}
				
				new Float:pos[3];
				GetVehiclePos(vehicleid, pos[0], pos[1], pos[2]);
				SetPlayer_GPS_Checkpoint(playerid, pos[0], pos[1], pos[2], GLOBAL_VEHICLES[vehicleid][gb_vehicle_WORLD], 0);
			}
			else ShowDialog(playerid, DIALOG_PLAYER_GPS);
			return 1;
		}
		case DIALOG_PROPERTY_OPTIONS:
		{
			if (response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_PROPERTY_NAME);
					case 1:
					{
						new total;
						foreach (new i : Player)
						{
							if (IsPlayerConnected(i))
							{
								if ( PI[i][pi_STATE] == ROLEPLAY_STATE_GUEST_PROPERTY && PI[i][pi_LOCAL_INTERIOR] == PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID])
								{
									PI[i][pi_STATE] = ROLEPLAY_STATE_NORMAL;
									PI[i][pi_LOCAL_INTERIOR] = 0;
									PLAYER_TEMP[i][pt_PROPERTY_INDEX] = -1;
									SetPlayerPosEx(i, PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_X], PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_Y], PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_Z], PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_ANGLE], PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_INTERIOR], 0, PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_FREEZE], false);
									StopAudioStreamForPlayer(i);
									SendPlayerClientMessage(i, "~r~%s~w~ te ha echado de su propiedad.", PLAYER_TEMP[playerid][pt_NAME]);
									total ++;
								}
							}
						}
						if (total == 0) SendPlayerClientMessage(playerid, "No hay nadie en tu propiedad.");
						else SendPlayerClientMessage(playerid, "Has echado %d personas de tu propiedad.", total);
					}
					case 2:
					{
						if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
						if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_ADD_PROPERTIES]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
						
						
						for (new i = 0; i != MAX_TERRITORIES; i ++)
						{
							if (!TERRITORIES[i][territory_VALID]) continue;
							if (!TERRITORIES[i][territory_OCCUPIED]) continue;
							if (TERRITORIES[i][territory_CREW_ID] != PI[playerid][pi_CREW]) continue;
							
							if (IsPointInDynamicArea(TERRITORIES[i][territory_AREA], PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_X], PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_Y], PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_Z]))
							{
								PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] = i;
								ShowDialog(playerid, DIALOG_CREW_PROPERTY_CONFIRM);
								return 1;
							}
						}
						SendPlayerClientMessage(playerid, "Esta propiedad no está dentro de un territorio de tu banda.");
					}
				}
			}
			return 1;
		}
		case DIALOG_PROPERTY_NAME:
		{
			if (response)
			{
				if (!PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_VALID]) return 1;
				if (PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_OWNER_ID] != PI[playerid][pi_ID]) return 1;
				
				if (isnull(inputtext)) return ShowDialog(playerid, dialogid);
				if (strlen(inputtext) > 24)
				{
					ShowDialog(playerid, dialogid);
					SendPlayerClientMessage(playerid, "{f5f5f5}Caracteres: 1-24.");
					return 1;
				}
				
				format(PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME], 24, "%s", inputtext);
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET name = '%e' WHERE id = %d;", PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME], PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendPlayerClientMessage(playerid, "Nombre de la propiedad actualizado a ~b~'%s'~w~.", inputtext);
			}
			else ShowDialog(playerid, DIALOG_PROPERTY_OPTIONS);
			return 1;
		}
		case DIALOG_NOTARY:
		{
			if (response)
			{
				switch(listitem)
				{
					case 0:
					{
						PLAYER_TEMP[playerid][pt_NOTARY_OPTION] = 0;
						ShowDialog(playerid, DIALOG_NOTARY_SELECT_PROPERTY);
					}
					case 1:
					{
						PLAYER_TEMP[playerid][pt_NOTARY_OPTION] = 0;
						ShowDialog(playerid, DIALOG_NOTARY_SELECT_VEHICLE);
					}
					case 2:
					{
						PLAYER_TEMP[playerid][pt_NOTARY_OPTION] = 1;
						ShowDialog(playerid, DIALOG_NOTARY_SELECT_PROPERTY);
					}
					case 3:
					{
						PLAYER_TEMP[playerid][pt_NOTARY_OPTION] = 1;
						ShowDialog(playerid, DIALOG_NOTARY_SELECT_VEHICLE);
					}
				}
			}
			return 1;
		}
		case DIALOG_NOTARY_SELECT_PROPERTY:
		{
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				
				PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] = GetPropertyIndexByID(PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem]);
				if (PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] == -1) return SendPlayerClientMessage(playerid, "PROPIEDAD ID no encontrada.");
				
				switch(PLAYER_TEMP[playerid][pt_NOTARY_OPTION])
				{
					case 0: ShowDialog(playerid, DIALOG_PROPERTY_BANK_SELL);
					case 1: ShowDialog(playerid, DIALOG_PROPERTY_SELL_PRICE);
				}
			}
			else
			{
				ShowDialog(playerid, DIALOG_NOTARY);
			}
			return 1;
		}
		case DIALOG_PROPERTY_BANK_SELL:
		{
			if (response)
			{
				if (!PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_VALID]) return 1;
				if (PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_OWNER_ID] != PI[playerid][pi_ID]) return 1;
				if (PI[playerid][pi_BANK_ACCOUNT] == 0) return SendPlayerClientMessage(playerid, "Necesitas tener una cuenta bancaria para vender la propiedad.");

				PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_SOLD] = false;
				PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_CREW] = false;
				PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_OWNER_ID] = 0;
				format(PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME], 24, "PROPIEDAD %d", PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID]);
				
				new info[3];
				UpdateUnnocupiedPropertyLabel(PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED]);
				
				DestroyDynamicPickup(PROPERTY_INFO[PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_PICKUP_ID]);
				PROPERTY_INFO[PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_PICKUP_ID] = INVALID_STREAMER_ID;
				
				PROPERTY_INFO[PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_PICKUP_ID] = CreateDynamicPickup(1273, 1, PROPERTY_INFO[PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_X], PROPERTY_INFO[PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_Y], PROPERTY_INFO[PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_Z], 0, PROPERTY_INFO[PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_INTERIOR]);
				info[0] = PICKUP_TYPE_PROPERTY;
				info[1] = PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED]; // Index
				info[2] = 2; // Pickup Exterior
				Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED]][property_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
				
				new Float:price, payment;
				price = PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_PRICE_BASE];
				if (PI[playerid][pi_VIP]) payment = floatround( floatmul(price, 0.50) );
				else payment = floatround( floatmul(price, 0.25) );
				
				if (PI[playerid][pi_PHONE_NUMBER])
				{
					new message[64]; format(message, sizeof message, "PROPIEDAD VENDIDA: +%s$", number_format_thousand(payment));
					RegisterPhoneMessage(0, PI[playerid][pi_ID], message);
					if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_ON) SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {f5f5f5}Remitente: {F5F5F5}%s {f5f5f5}Mensaje: {F5F5F5}%s", convertPhoneNumber(playerid, 6740), message);
				}
				
				PI[playerid][pi_BANK_MONEY] += payment;
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[playerid][pi_BANK_MONEY], PI[playerid][pi_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_player = NULL, id_territory = NULL WHERE id = %d;", PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
						
				RegisterBankAccountTransaction(PI[playerid][pi_ID], PI[playerid][pi_ID], BANK_TRANSACTION_SOLD_PROPERTY, payment);
				SendPlayerClientMessage(playerid, "Has vendido esta propiedad, has recibido %s$ en tu cuenta bancaria.", number_format_thousand(payment));
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
			
			}
			else ShowDialog(playerid, DIALOG_NOTARY_SELECT_PROPERTY);
			return 1;
		}
		case DIALOG_PROPERTY_SELL_PRICE:
		{
			if (response)
			{
				if (sscanf(inputtext, "d", inputtext[0])) return ShowDialog(playerid, dialogid);
				
				new Float:price, min_price, max_price;
				price = PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_PRICE];
				min_price = floatround( floatmul(price, 0.15) );
				max_price = floatround( floatmul(price, 6.0) );
				
				if (inputtext[0] < min_price || inputtext[0] > max_price)
				{
					SendPlayerClientMessage(playerid, "Este precio no está dentro del rango ofrecido.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				PLAYER_TEMP[playerid][pt_NOTARY_PRICE] = inputtext[0];
				ShowDialog(playerid, DIALOG_PROPERTY_SELL_TO_PLAYER);
			}
			else ShowDialog(playerid, DIALOG_NOTARY_SELECT_PROPERTY);
			return 1;
		}
		case DIALOG_PROPERTY_SELL_TO_PLAYER:
		{
			if (response)
			{
				if (sscanf(inputtext, "u", inputtext[0])) return ShowDialog(playerid, dialogid);
				
				if (!IsPlayerConnected(inputtext[0])) return SendPlayerClientMessage(playerid, "Error, el comprador está desconectado.");
				if (inputtext[0] == playerid) return SendPlayerClientMessage(playerid, "¿Pero como te vas a vender algo a ti mismo?");
				if (PLAYER_TEMP[inputtext[0]][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "Error, el comprador no está disponible.");
				
				if (ENTER_EXIT[ PLAYER_TEMP[inputtext[0]][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] != INTERIOR_CITY_HALL_LS) return SendPlayerClientMessage(playerid, "El comprador no está en la sala.");
				if (!IsPlayerInRangeOfPoint(inputtext[0], 3.0, -474.596282, 289.679107, 2004.584960)) return SendPlayerClientMessage(playerid, "El comprador no está en la sala.");
				if (PI[inputtext[0]][pi_BANK_ACCOUNT] == 0) return SendPlayerClientMessage(playerid, "El comprador no tiene cuenta bancaria.");
				
				new player_properties = CountPlayerProperties(inputtext[0]);
				if (player_properties >= MAX_SU_PROPERTIES) return SendPlayerClientMessage(playerid, "El comprador no puede adquirir más propiedades.");
				if (!PI[inputtext[0]][pi_VIP])
				{
					if (player_properties >= MAX_NU_PROPERTIES) return SendPlayerClientMessage(playerid, "El comprador no puede adquirir más propiedades.");
				}
				
				if (PI[inputtext[0]][pi_LEVEL] < 2) return SendPlayerClientMessage(playerid, "Error, el comprador necesita ser al menos nivel 2.");
				if (PLAYER_TEMP[playerid][pt_NOTARY_PRICE] > PI[inputtext[0]][pi_BANK_MONEY]) return SendPlayerClientMessage(playerid, "Error, el comprador no tiene el dinero que pides.");
				
				SendPlayerClientMessage(playerid, "Tu oferta se ha enviado al comprador, espera para ver si la acepta.");
				
				new action[64]; format(action, sizeof action, "quiere llegar a un acuerdo con %s.", PLAYER_TEMP[inputtext[0]][pt_NAME]);
				Auto_SendPlayerAction(playerid, action);
				
				PLAYER_TEMP[inputtext[0]][pt_PLAYER_PROPERTY_SELECTED] = PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED];
				PLAYER_TEMP[inputtext[0]][pt_NOTARY_PRICE] = PLAYER_TEMP[playerid][pt_NOTARY_PRICE];
				PLAYER_TEMP[inputtext[0]][pt_NOTARY_TO_PLAYER] = playerid;
				PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER] = inputtext[0];
				
				ShowDialog(inputtext[0], DIALOG_SELL_CONFIRM_PROPERTY);
			}
			else ShowDialog(playerid, DIALOG_PROPERTY_SELL_PRICE);
			return 1;
		}
		case DIALOG_SELL_CONFIRM_PROPERTY:
		{
			if (response)
			{
				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER])) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor se ha desconectado.");
				if (PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER] ][pt_NOTARY_TO_PLAYER] != playerid) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor ya no está.");
				if (PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER] ][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "Error, el vendedor no está disponible.");
				if (ENTER_EXIT[ PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER] ][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] != INTERIOR_CITY_HALL_LS) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor no está en la sala.");
				if (!IsPlayerInRangeOfPoint(PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER], 3.0, -474.596282, 289.679107, 2004.584960)) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor no está en la sala.");
				if (PI[ PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER] ][pi_BANK_ACCOUNT] == 0) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor no tiene cuenta bancaria.");
				
				// Traspasar
				new label_str[256];
				format
				(
					label_str, 
					sizeof label_str, 
					"\
						Propiedad {"#PRIMARY_COLOR"}#%d\n\n\
						{F5F5F5}Propietario: {"#PRIMARY_COLOR"}%s\n\
						{F5F5F5}Presiona {"#PRIMARY_COLOR"}Y {F5F5F5}para entrar.\
					", PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID], PI[playerid][pi_NAME]
				);
				UpdateDynamic3DTextLabelText(PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
				
				PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_OWNER_ID] = PI[playerid][pi_ID];
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_player = %d, id_territory = NULL WHERE id = %d;", PI[playerid][pi_ID], PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				// Banco
				new price = PLAYER_TEMP[playerid][pt_NOTARY_PRICE], seller = PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER];
				
				if (PI[playerid][pi_PHONE_NUMBER])
				{
					new message[64]; format(message, sizeof message, "PROPIEDAD COMPRADA: -%s$", number_format_thousand(price));
					RegisterPhoneMessage(0, PI[playerid][pi_ID], message);
					if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_ON) SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {f5f5f5}Remitente: {F5F5F5}%s {f5f5f5}Mensaje: {F5F5F5}%s", convertPhoneNumber(playerid, 6740), message);
				}
				if (PI[seller][pi_PHONE_NUMBER])
				{
					new message[64]; format(message, sizeof message, "PROPIEDAD VENDIDA: +%s$", number_format_thousand(price));
					RegisterPhoneMessage(0, PI[seller][pi_ID], message);
					if (PI[seller][pi_PHONE_STATE] == PHONE_STATE_ON) SendPlayerClientMessage(seller, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {f5f5f5}Remitente: {F5F5F5}%s {f5f5f5}Mensaje: {F5F5F5}%s", convertPhoneNumber(seller, 6740), message);
				}
				
				PI[playerid][pi_BANK_MONEY] -= price;
				PI[seller][pi_BANK_MONEY] += price;
				RegisterBankAccountTransaction(PI[playerid][pi_ID], PI[seller][pi_ID], BANK_TRANSACTION_TRANSFER, price);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[playerid][pi_BANK_MONEY], PI[playerid][pi_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[seller][pi_BANK_MONEY], PI[seller][pi_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendPlayerClientMessage(playerid, "~b~¡Propiedad %d comprada!~n~~n~~w~Ahora puedes ir a tu casa, si no sabes donde es puedes marcarla con el ~b~/GPS~w~.", PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID]);
				SendPlayerClientMessage(seller, "~b~¡Propiedad %d vendida!~n~~n~~w~Has recibido ~b~%s dólares ~w~en tu cuenta bancaria.", PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID], number_format_thousand(price));
				PlayerPlaySoundEx(seller, 1058, 0.0, 0.0, 0.0);
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				
				new action[64]; format(action, sizeof action, "y %s han llegado a un acuerdo.", PLAYER_TEMP[seller][pt_NAME]);
				Auto_SendPlayerAction(playerid, action);
			}
			return 1;
		}
		case DIALOG_NOTARY_SELECT_VEHICLE:
		{
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
				
				switch(PLAYER_TEMP[playerid][pt_NOTARY_OPTION])
				{
					case 0: ShowDialog(playerid, DIALOG_VEHICLE_BANK_SELL);
					case 1: ShowDialog(playerid, DIALOG_VEHICLE_SELL_PRICE);
				}
			}
			else
			{
				ShowDialog(playerid, DIALOG_NOTARY);
			}
			return 1;
		}
		case DIALOG_VEHICLE_BANK_SELL:
		{
			if (response)
			{
				if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_VALID]) return 1;
				if (PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][player_vehicle_OWNER_ID] != PI[playerid][pi_ID]) return 1;
				if (PI[playerid][pi_BANK_ACCOUNT] == 0) return SendPlayerClientMessage(playerid, "Necesitas tener una cuenta bancaria para vender el vehículo.");

				new Float:price, payment;
				price = VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_PRICE];
				if (PI[playerid][pi_VIP]) payment = floatround( floatmul(price, 0.50) );
				else payment = floatround( floatmul(price, 0.25) );
				
				//Destruir veh
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM pvehicles WHERE id = %d;", PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][player_vehicle_ID]);
				mysql_query(handle_db, QUERY_BUFFER);
				
				DestroyVehicleEx(PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED]);
				
				
				if (PI[playerid][pi_PHONE_NUMBER])
				{
					new message[64]; format(message, sizeof message, "VEHICULO VENDIDO: +%s$", number_format_thousand(payment));
					RegisterPhoneMessage(0, PI[playerid][pi_ID], message);
					if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_ON) SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {f5f5f5}Remitente: {F5F5F5}%s {f5f5f5}Mensaje: {F5F5F5}%s", convertPhoneNumber(playerid, 6740), message);
				}
				PI[playerid][pi_BANK_MONEY] += payment;
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[playerid][pi_BANK_MONEY], PI[playerid][pi_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				RegisterBankAccountTransaction(PI[playerid][pi_ID], PI[playerid][pi_ID], BANK_TRANSACTION_SOLD_VEHICLE, payment);
				
				SendPlayerClientMessage(playerid, "Has vendido este vehículo, has recibido %s$ en tu cuenta bancaria.", number_format_thousand(payment));
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				
				if (!PI[playerid][pi_VIP]) ReLockPlayerVehicles(playerid);
			}
			else ShowDialog(playerid, DIALOG_NOTARY_SELECT_VEHICLE);
			return 1;
		}
		case DIALOG_VEHICLE_SELL_PRICE:
		{
			if (response)
			{
				if (sscanf(inputtext, "d", inputtext[0])) return ShowDialog(playerid, dialogid);
				
				new Float:price, min_price, max_price;
				price = VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_PRICE];
				min_price = floatround( floatmul(price, 0.15) );
				max_price = floatround( floatmul(price, 6.0) );
				
				if (inputtext[0] < min_price || inputtext[0] > max_price)
				{
					SendPlayerClientMessage(playerid, "Este precio no está dentro del rango ofrecido.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				PLAYER_TEMP[playerid][pt_NOTARY_PRICE] = inputtext[0];
				ShowDialog(playerid, DIALOG_VEHICLE_SELL_TO_PLAYER);
			}
			else ShowDialog(playerid, DIALOG_NOTARY_SELECT_VEHICLE);
			return 1;
		}
		case DIALOG_VEHICLE_SELL_TO_PLAYER:
		{
			if (response)
			{
				if (sscanf(inputtext, "u", inputtext[0])) return ShowDialog(playerid, dialogid);
				
				if (!IsPlayerConnected(inputtext[0])) return SendPlayerClientMessage(playerid, "Error, el comprador está desconectado.");
				if (inputtext[0] == playerid) return SendPlayerClientMessage(playerid, "¿Pero como te vas a vender algo a ti mismo?");
				if (PLAYER_TEMP[inputtext[0]][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "Error, el comprador no está disponible.");
				
				if (PLAYER_TEMP[inputtext[0]][pt_INTERIOR_INDEX] == -1 || ENTER_EXIT[ PLAYER_TEMP[inputtext[0]][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] != INTERIOR_CITY_HALL_LS) return SendPlayerClientMessage(playerid, "El comprador no está en la sala.");
				if (!IsPlayerInRangeOfPoint(inputtext[0], 3.0, -474.596282, 289.679107, 2004.584960)) return SendPlayerClientMessage(playerid, "El comprador no está en la sala.");
				if (PI[inputtext[0]][pi_BANK_ACCOUNT] == 0) return SendPlayerClientMessage(playerid, "El comprador no tiene cuenta bancaria.");
				
				new pvehicles = CountPlayerVehicles(inputtext[0]);
				if (pvehicles >= MAX_SU_VEHICLES) return SendPlayerClientMessage(playerid, "El comprador no puede adquirir más vehículos.");
				if (!PI[inputtext[0]][pi_VIP])
				{
					if (pvehicles >= MAX_NU_VEHICLES) return SendPlayerClientMessage(playerid, "El comprador no puede adquirir más vehículos.");
				}
				
				if (PI[inputtext[0]][pi_LEVEL] < 2) return SendPlayerClientMessage(playerid, "Error, el comprador necesita ser al menos nivel 2.");
				if (PLAYER_TEMP[playerid][pt_NOTARY_PRICE] > PI[inputtext[0]][pi_BANK_MONEY]) return SendPlayerClientMessage(playerid, "Error, el comprador no tiene el dinero que pides.");
				
				if (PI[inputtext[0]][pi_DRIVE_LICENSE] == 0)
				{
					SendPlayerClientMessage(playerid, "Tu oferta se ha enviado al comprador, pero el no tiene licencia de conducir y no puede aceptar tu oferta.");
					SendPlayerClientMessage(inputtext[0], "%s te ha ofrecido un vehículo, pero necesitas una licencia de conducir para aceptarlo.", PLAYER_TEMP[playerid][pt_NAME]);
					return 1;
				}

				SendPlayerClientMessage(playerid, "Tu oferta se ha enviado al comprador, espera para ver si la acepta.");
				
				new action[64]; format(action, sizeof action, "quiere llegar a un acuerdo con %s.", PLAYER_TEMP[inputtext[0]][pt_NAME]);
				Auto_SendPlayerAction(playerid, action);
				
				PLAYER_TEMP[inputtext[0]][pt_PLAYER_VEHICLE_SELECTED] = PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED];
				PLAYER_TEMP[inputtext[0]][pt_NOTARY_PRICE] = PLAYER_TEMP[playerid][pt_NOTARY_PRICE];
				PLAYER_TEMP[inputtext[0]][pt_NOTARY_TO_PLAYER] = playerid;
				PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER] = inputtext[0];
				
				ShowDialog(inputtext[0], DIALOG_SELL_CONFIRM_VEHICLE);
			}
			else ShowDialog(playerid, DIALOG_VEHICLE_SELL_PRICE);
			return 1;
		}
		case DIALOG_SELL_CONFIRM_VEHICLE:
		{
			if (response)
			{
				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER])) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor se ha desconectado.");
				if (PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER] ][pt_NOTARY_TO_PLAYER] != playerid) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor ya no está.");
				if (PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER] ][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "Error, el vendedor no está disponible.");
				if (ENTER_EXIT[ PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER] ][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] != INTERIOR_CITY_HALL_LS) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor no está en la sala.");
				if (!IsPlayerInRangeOfPoint(PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER], 3.0, -474.596282, 289.679107, 2004.584960)) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor no está en la sala.");
				if (PI[ PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER] ][pi_BANK_ACCOUNT] == 0) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor no tiene cuenta bancaria.");
				
				// Traspasar
				PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][player_vehicle_OWNER_ID] = PI[playerid][pi_ID];
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pvehicles SET id_player = %d WHERE id = %d;", PI[playerid][pi_ID], PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][player_vehicle_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				
				// Banco
				new price = PLAYER_TEMP[playerid][pt_NOTARY_PRICE], seller = PLAYER_TEMP[playerid][pt_NOTARY_TO_PLAYER];
				
				if (PI[playerid][pi_PHONE_NUMBER])
				{
					new message[64]; format(message, sizeof message, "VEHICULO COMPRADO: -%s$", number_format_thousand(price));
					RegisterPhoneMessage(0, PI[playerid][pi_ID], message);
					if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_ON) SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {f5f5f5}Remitente: {F5F5F5}%s {f5f5f5}Mensaje: {F5F5F5}%s", convertPhoneNumber(playerid, 6740), message);
				}
				if (PI[seller][pi_PHONE_NUMBER])
				{
					new message[64]; format(message, sizeof message, "VEHICULO VENDIDO: +%s$", number_format_thousand(price));
					RegisterPhoneMessage(0, PI[seller][pi_ID], message);
					if (PI[seller][pi_PHONE_STATE] == PHONE_STATE_ON) SendPlayerClientMessage(seller, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {f5f5f5}Remitente: {F5F5F5}%s {f5f5f5}Mensaje: {F5F5F5}%s", convertPhoneNumber(seller, 6740), message);
				}
				
				PI[playerid][pi_BANK_MONEY] -= price;
				PI[seller][pi_BANK_MONEY] += price;
				RegisterBankAccountTransaction(PI[playerid][pi_ID], PI[seller][pi_ID], BANK_TRANSACTION_TRANSFER, price);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[playerid][pi_BANK_MONEY], PI[playerid][pi_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET bank_money = %d WHERE id = %d;", PI[seller][pi_BANK_MONEY], PI[seller][pi_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				
				SendPlayerClientMessage(playerid, "~b~¡Vehículo %s comprado!~n~~n~~w~Utiliza ~b~/GPS ~w~para localizarlo.", VEHICLE_INFO[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_PLAYER_VEHICLE_SELECTED] ][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME]);
				SendPlayerClientMessage(seller, "~b~¡Vehículo vendido!~n~~n~~w~Has recibido ~b~%s dólares ~w~en tu cuenta bancaria.", number_format_thousand(price));
				PlayerPlaySoundEx(seller, 1058, 0.0, 0.0, 0.0);
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				
				new action[64]; format(action, sizeof action, "y %s han llegado a un acuerdo.", PLAYER_TEMP[seller][pt_NAME]);
				Auto_SendPlayerAction(playerid, action);
				
				if (!PI[seller][pi_VIP]) ReLockPlayerVehicles(seller);
				if (!PI[playerid][pi_VIP]) ReLockPlayerVehicles(playerid);
			}
			return 1;
		}
		case DIALOG_SELECT_TRUCK_TYPE:
		{
			if (response)
			{
				if (Truck_Contents[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][truck_content_EXP] > PLAYER_WORKS[playerid][WORK_TRUCK][pwork_LEVEL])
				{
					SendPlayerClientMessage(playerid, "Has realizado %d trabajos como camionero, necesitas %d para este viaje.", PLAYER_WORKS[playerid][WORK_TRUCK][pwork_LEVEL], Truck_Contents[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][truck_content_EXP]);
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new vehicleid = GetPlayerVehicleID(playerid);
				TRUCK_VEHICLE[vehicleid][truck_vehicle_POINT] = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
				
				PLAYER_TEMP[playerid][pt_TRUCK_LOADING_VALUE] = 35.0;
				
				KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][7]);
				KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][9]);
				PLAYER_TEMP[playerid][pt_TIMERS][9] = SetTimerEx("TruckLoadUp", 1000, false, "ii", playerid, vehicleid);
			}
			else
			{
				KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][9]);
				DestroyVehicleEx(GetPlayerVehicleID(playerid));
			}
			return 1;
		}
		case DIALOG_TUNING_MENU_PART:
		{
			if (response)
			{
				if (isnull(PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_NAME])) return 1;
				
				if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
				new Float:Vehicle_Pos[3];
				GetVehiclePos(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
				
				if (!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendPlayerClientMessage(playerid, "El vehículo está demasiado lejos.");
				
				format(PLAYER_TEMP[playerid][pt_TUNING_SELECTED_PART], 24, "%s", PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_NAME]);
				
				ShowDialog(playerid, DIALOG_TUNING_MENU_COMPONENT);
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_TUNING_MENU_COMPONENT:
		{
			if (response)
			{
				if (isnull(PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_NAME]) || !PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID]) return 1;
				
				if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
				new Float:Vehicle_Pos[3];
				GetVehiclePos(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
				
				if (!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendPlayerClientMessage(playerid, "El vehículo está demasiado lejos.");
				
				if (PI[playerid][pi_MECHANIC_PIECES] < PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_PIECES])
				{
					SendPlayerClientMessage(playerid, "No tienes suficientes piezas, puedes comprar más piezas en el taller.");
					return 1;
				}
				
				if (PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID] == PI[playerid][pi_ID])
				{
					new vehicleid = PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
					
					new slot = GetVehicleComponentType( PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID] );
					new current_component = GetVehicleComponentInSlot(vehicleid, slot);
					if (current_component) RemoveVehicleComponent(vehicleid, current_component);
					
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][slot] = PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID];
					AddVehicleComponent(vehicleid, PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID]);
					
					PI[playerid][pi_MECHANIC_PIECES] -= PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_PIECES];
					SendPlayerClientMessage(playerid, "Componente '%s' añadido, has necesitado %d piezas.", PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_NAME], PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_PIECES]);
				}
				else
				{
					format(PLAYER_TEMP[playerid][pt_TUNING_SELECTED_COMPONENT], 24, "%s", PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_NAME]);
					PLAYER_TEMP[playerid][pt_TUNING_SELECTED_COMPONENT_ID] = PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID];
					
					PLAYER_TEMP[playerid][pt_TUNING_SELECTED_PIECES] = PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_PIECES];
					ShowDialog(playerid, DIALOG_MECHANIC_TUNING_PRICE);
				}
			}
			else ShowDialog(playerid, DIALOG_TUNING_MENU_PART);
			return 1;
		}
		case DIALOG_MECHANIC_MENU:
		{
			if (response)
			{
				if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
				new Float:Vehicle_Pos[3];
				GetVehiclePos(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
				
				if (!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendPlayerClientMessage(playerid, "El vehículo está demasiado lejos.");
				
				if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_PARAMS_BONNET]) return ShowPlayerMessage(playerid, "EL ~b~CAPO~w~ DEBE ESTAR ABIERTO.");

				switch(listitem)
				{
					case 0: // Reparar
					{
						if (PI[playerid][pi_MECHANIC_PIECES] < 10) return SendPlayerClientMessage(playerid, "No tienes suficientes piezas, puedes comprar más piezas en el taller.");
						
						if (gettime() < GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_LAST_REPAIR_TIME] + 300)
						{
							new time = (300-(gettime()-GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_LAST_REPAIR_TIME]));
							SendPlayerClientMessage(playerid, "Tienes que esperar %s minutos para volver a reparar este vehículo.", TimeConvert(time));
							return 1;
						}
						
						if (PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID] == PI[playerid][pi_ID])
						{
							PI[playerid][pi_MECHANIC_PIECES] -= 10;
							RepairVehicleEx(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], playerid);
							
							SendPlayerClientMessage(playerid, "Este es tu vehículo por lo que no se cobrará.");
							SendPlayerClientMessage(playerid, "Has necesitado 10 piezas para la reparacion.");

							PLAYER_WORKS[ playerid ][WORK_MECHANIC][pwork_LEVEL] ++;
							GiveRandomMechanicCrowbar(playerid);
							return 1;
						}
						else
						{
							if (!PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_VALID])
							{
								if (GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_DRIVER] == playerid || GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_LAST_DRIVER] == playerid)
								{
									PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
									PI[playerid][pi_MECHANIC_PIECES] -= 10;
									RepairVehicleEx(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], playerid);
									
									SendPlayerClientMessage(playerid, "Eres el conductor o el último conductor de este vehículo por lo que no se cobrará.");
									SendPlayerClientMessage(playerid, "Has necesitado 10 piezas para la reparacion.");

									PLAYER_WORKS[ playerid ][WORK_MECHANIC][pwork_LEVEL] ++;
									GiveRandomMechanicCrowbar(playerid);
									return 1;
								}
							}
							ShowDialog(playerid, DIALOG_MECHANIC_REPAIR_PRICE);
						}
					}
					case 1:
					{
						if (PI[playerid][pi_MECHANIC_PIECES] < 5)
						{
							ShowDialog(playerid, dialogid);
							SendPlayerClientMessage(playerid, "No tienes suficientes piezas, puedes comprar más piezas en el taller.");
							return 1;
						}
						
						if (!PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_VALID])
						{
							ShowDialog(playerid, dialogid);
							SendPlayerClientMessage(playerid, "Solo los vehículos personales se pueden pintar.");
							return 1;
						}
						
						ShowDialog(playerid, DIALOG_MECHANIC_SELECT_COL_SLOT);
					}
					case 2:
					{
						if (100 > PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL])
						{
							SendPlayerClientMessage(playerid, "Has realizado %d reparaciones como mecánico, necesitas 100 para tunear vehículos.", PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL]);
							ShowDialog(playerid, dialogid);
							return 1;
						}
						
						ShowDialog(playerid, DIALOG_MECHANIC_REMOVE_COMPONEN);
					}
					case 3:
					{
						if (100 > PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL])
						{
							SendPlayerClientMessage(playerid, "Has realizado %d reparaciones como mecánico, necesitas 100 para tunear vehículos.", PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL]);
							ShowDialog(playerid, dialogid);
							return 1;
						}
						
						if (!PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_VALID])
						{
							ShowDialog(playerid, dialogid);
							SendPlayerClientMessage(playerid, "Solo los vehículos personales se pueden tunear.");
							return 1;
						}
						
						ShowDialog(playerid, DIALOG_TUNING_MENU_PART);
					}
					case 4:
					{
						if (100 > PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL])
						{
							SendPlayerClientMessage(playerid, "Has realizado %d reparaciones como mecánico, necesitas 100 para paintjobs.", PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL]);
							ShowDialog(playerid, dialogid);
							return 1;
						}
						
						if (!PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_VALID])
						{
							ShowDialog(playerid, dialogid);
							SendPlayerClientMessage(playerid, "Solo los vehículos personales se le pueden cambiar el paintjob.");
							return 1;
						}
						ShowDialog(playerid, DIALOG_TUNING_PAINTJOB);
					}
				}
			}
			return 1;
		}
		case DIALOG_MECHANIC_REPAIR_PRICE:
		{
			if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if (!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendPlayerClientMessage(playerid, "El vehículo está demasiado lejos.");
			
			if (response)
			{
				new price;
				if (sscanf(inputtext, "d", price))
				{
					ShowPlayerMessage(playerid, "El precio no es correcto.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (price < 0 || price > 5000)
				{
					ShowPlayerMessage(playerid, "El rango del precio es: 0$ - 5.000$.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				if (PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_VALID])
				{
					new buyer = GetPlayerIdFromAccountId(PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID]);
					if (buyer == INVALID_PLAYER_ID) return ShowPlayerMessage(playerid, "El dueño del vehículo no está cerca.");
					
					new Float:mechanic_pos[3];
					GetPlayerPos(playerid, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2]);
					if (!IsPlayerInRangeOfPoint(buyer, 10.0, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2])) return ShowPlayerMessage(playerid, "El dueño del vehículo está demasiado lejos.");
					
					PLAYER_TEMP[buyer][pt_MECHANIC_PID] = playerid;
					PLAYER_TEMP[buyer][pt_MECHANIC_AID] = PI[playerid][pi_ID];
					PLAYER_TEMP[buyer][pt_MECHANIC_PRICE] = price;
					format(PLAYER_TEMP[buyer][pt_MECHANIC_TEXT], 64, "Reparación completa del vehículo");
					PLAYER_TEMP[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_REPAIR;
					PLAYER_TEMP[buyer][pt_MECHANIC_EXTRA] = 0;
					PLAYER_TEMP[buyer][pt_MECHANIC_VEHICLE_ID] = PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
					PLAYER_TEMP[buyer][pt_MECHANIC_PIECES] = 10;
					PLAYER_TEMP[buyer][pt_MECHANIC_TIME] = gettime();
					
					ShowDialog(buyer, DIALOG_MECHANIC_ACCEPT);
					ShowPlayerMessage(playerid, "Le has ofrecido a ~b~%s~w~ reparar su vehículo por %s~b~$~w~.", PLAYER_TEMP[buyer][pt_NAME], number_format_thousand(PLAYER_TEMP[buyer][pt_MECHANIC_PRICE]));
				}
				else
				{
					if (GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_OCCUPIED])
					{
						new buyer = GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_DRIVER];
						if (buyer == INVALID_PLAYER_ID) return ShowPlayerMessage(playerid, "El conductor del vehículo no está cerca.");
					
						new Float:mechanic_pos[3];
						GetPlayerPos(playerid, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2]);
						if (!IsPlayerInRangeOfPoint(buyer, 10.0, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2])) return ShowPlayerMessage(playerid, "El conductor del vehículo está demasiado lejos.");
						
						PLAYER_TEMP[buyer][pt_MECHANIC_PID] = playerid;
						PLAYER_TEMP[buyer][pt_MECHANIC_AID] = PI[playerid][pi_ID];
						PLAYER_TEMP[buyer][pt_MECHANIC_PRICE] = price;
						format(PLAYER_TEMP[buyer][pt_MECHANIC_TEXT], 64, "Reparación completa del vehículo");
						PLAYER_TEMP[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_REPAIR;
						PLAYER_TEMP[buyer][pt_MECHANIC_EXTRA] = 0;
						PLAYER_TEMP[buyer][pt_MECHANIC_VEHICLE_ID] = PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
						PLAYER_TEMP[buyer][pt_MECHANIC_PIECES] = 10;
						PLAYER_TEMP[buyer][pt_MECHANIC_TIME] = gettime();
						
						ShowDialog(buyer, DIALOG_MECHANIC_ACCEPT);
						SendPlayerClientMessage(playerid, "Le has ofrecido a ~b~%s~w~ reparar el vehículo por %s~b~$~w~.", PLAYER_TEMP[buyer][pt_NAME], number_format_thousand(PLAYER_TEMP[buyer][pt_MECHANIC_PRICE]));
					}
					else
					{
						new buyer = GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_LAST_DRIVER];
						if (buyer == INVALID_PLAYER_ID) return ShowPlayerMessage(playerid, "Este vehículo no tiene conductor.");
					
						new Float:mechanic_pos[3];
						GetPlayerPos(playerid, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2]);
						if (!IsPlayerInRangeOfPoint(buyer, 10.0, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2])) return ShowPlayerMessage(playerid, "El conductor del vehículo está demasiado lejos.");
						
						PLAYER_TEMP[buyer][pt_MECHANIC_PID] = playerid;
						PLAYER_TEMP[buyer][pt_MECHANIC_AID] = PI[playerid][pi_ID];
						PLAYER_TEMP[buyer][pt_MECHANIC_PRICE] = price;
						format(PLAYER_TEMP[buyer][pt_MECHANIC_TEXT], 64, "Reparación completa del vehículo");
						PLAYER_TEMP[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_REPAIR;
						PLAYER_TEMP[buyer][pt_MECHANIC_EXTRA] = 0;
						PLAYER_TEMP[buyer][pt_MECHANIC_VEHICLE_ID] = PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
						PLAYER_TEMP[buyer][pt_MECHANIC_PIECES] = 10;
						PLAYER_TEMP[buyer][pt_MECHANIC_TIME] = gettime();
						
						ShowDialog(buyer, DIALOG_MECHANIC_ACCEPT);
						SendPlayerClientMessage(playerid, "Le has ofrecido a %s reparar el vehículo por %s$.", PLAYER_TEMP[buyer][pt_NAME], number_format_thousand(PLAYER_TEMP[buyer][pt_MECHANIC_PRICE]));
					}
				}
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_MECHANIC_COLOR_PRICE:
		{
			if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if (!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendPlayerClientMessage(playerid, "El vehículo está demasiado lejos.");
			
			if (response)
			{
				new price;
				if (sscanf(inputtext, "d", price))
				{
					SendPlayerClientMessage(playerid, "El precio no es correcto.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (price < 0 || price > 1750)
				{
					SendPlayerClientMessage(playerid, "El rango del precio es: 0$ - 1.750$.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new buyer = GetPlayerIdFromAccountId(PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID]);
				if (buyer == INVALID_PLAYER_ID) return SendPlayerClientMessage(playerid, "El dueño del vehículo no está cerca.");
				
				new Float:mechanic_pos[3];
				GetPlayerPos(playerid, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2]);
				if (!IsPlayerInRangeOfPoint(buyer, 10.0, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2])) return SendPlayerClientMessage(playerid, "El dueño del vehículo está demasiado lejos.");
				
				PLAYER_TEMP[buyer][pt_MECHANIC_PID] = playerid;
				PLAYER_TEMP[buyer][pt_MECHANIC_AID] = PI[playerid][pi_ID];
				PLAYER_TEMP[buyer][pt_MECHANIC_PRICE] = price;
				
				switch(PLAYER_TEMP[playerid][pt_MECHANIC_COLOR_SLOT])
				{
					case 0:
					{
						format(PLAYER_TEMP[buyer][pt_MECHANIC_TEXT], 64, "Pintar color primario {%06x}(%d)", VEHICLE_COLORS[ PLAYER_TEMP[playerid][pt_MECHANIC_SELECTED_COLOR] ] >>> 8, PLAYER_TEMP[playerid][pt_MECHANIC_SELECTED_COLOR]);
						PLAYER_TEMP[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_COLOR_1;
					}
					case 1:
					{
						format(PLAYER_TEMP[buyer][pt_MECHANIC_TEXT], 64, "Pintar color secundario {%06x}(%d)", VEHICLE_COLORS[ PLAYER_TEMP[playerid][pt_MECHANIC_SELECTED_COLOR] ] >>> 8, PLAYER_TEMP[playerid][pt_MECHANIC_SELECTED_COLOR]);
						PLAYER_TEMP[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_COLOR_2;
					}
				}
				
				PLAYER_TEMP[buyer][pt_MECHANIC_EXTRA] = PLAYER_TEMP[playerid][pt_MECHANIC_SELECTED_COLOR];
				PLAYER_TEMP[buyer][pt_MECHANIC_VEHICLE_ID] = PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
				PLAYER_TEMP[buyer][pt_MECHANIC_PIECES] = 5;
				PLAYER_TEMP[buyer][pt_MECHANIC_TIME] = gettime();
				
				ShowDialog(buyer, DIALOG_MECHANIC_ACCEPT);
				
				SendPlayerClientMessage(playerid, "Le has ofrecido a %s pintar su vehículo por %s$.", PLAYER_TEMP[buyer][pt_NAME], number_format_thousand(PLAYER_TEMP[buyer][pt_MECHANIC_PRICE]));
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_MECHANIC_TUNING_PRICE:
		{
			if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if (!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendPlayerClientMessage(playerid, "El vehículo está demasiado lejos.");
			
			if (response)
			{
				new price;
				if (sscanf(inputtext, "d", price))
				{
					SendPlayerClientMessage(playerid, "El precio no es correcto.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (price < 0 || price > ((PLAYER_TEMP[playerid][pt_TUNING_SELECTED_PIECES] * 50) + 2000))
				{
					SendPlayerClientMessage(playerid, "El rango del precio es: 0$ - %s$.", number_format_thousand((PLAYER_TEMP[playerid][pt_TUNING_SELECTED_PIECES] * 50) + 2000));
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new buyer = GetPlayerIdFromAccountId(PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID]);
				if (buyer == INVALID_PLAYER_ID) return SendPlayerClientMessage(playerid, "El dueño del vehículo no está cerca.");
				
				new Float:mechanic_pos[3];
				GetPlayerPos(playerid, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2]);
				if (!IsPlayerInRangeOfPoint(buyer, 10.0, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2])) return SendPlayerClientMessage(playerid, "El dueño del vehículo está demasiado lejos.");
				
				PLAYER_TEMP[buyer][pt_MECHANIC_PID] = playerid;
				PLAYER_TEMP[buyer][pt_MECHANIC_AID] = PI[playerid][pi_ID];
				PLAYER_TEMP[buyer][pt_MECHANIC_PRICE] = price;
				format(PLAYER_TEMP[buyer][pt_MECHANIC_TEXT], 64, "'%s' > '%s'", PLAYER_TEMP[playerid][pt_TUNING_SELECTED_PART], PLAYER_TEMP[playerid][pt_TUNING_SELECTED_COMPONENT]);
				PLAYER_TEMP[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_TUNING;
				PLAYER_TEMP[buyer][pt_MECHANIC_EXTRA] = PLAYER_TEMP[playerid][pt_TUNING_SELECTED_COMPONENT_ID];
				PLAYER_TEMP[buyer][pt_MECHANIC_VEHICLE_ID] = PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
				PLAYER_TEMP[buyer][pt_MECHANIC_PIECES] = PLAYER_TEMP[playerid][pt_TUNING_SELECTED_PIECES];
				PLAYER_TEMP[buyer][pt_MECHANIC_TIME] = gettime();
				
				ShowDialog(buyer, DIALOG_MECHANIC_ACCEPT);
				
				SendPlayerClientMessage(playerid, "Le has ofrecido a %s tunear su vehículo por %s$.", PLAYER_TEMP[buyer][pt_NAME], number_format_thousand(PLAYER_TEMP[buyer][pt_MECHANIC_PRICE]));
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_MECHANIC_PAINTJOB_PRICE:
		{
			if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if (!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendPlayerClientMessage(playerid, "El vehículo está demasiado lejos.");
			
			if (response)
			{
				new price;
				if (sscanf(inputtext, "d", price))
				{
					SendPlayerClientMessage(playerid, "El precio no es correcto.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (price < 0 || price > 2750)
				{
					SendPlayerClientMessage(playerid, "El rango del precio es: 0$ - 2.750$.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new buyer = GetPlayerIdFromAccountId(PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID]);
				if (buyer == INVALID_PLAYER_ID) return SendPlayerClientMessage(playerid, "El dueño del vehículo no está cerca.");
				
				new Float:mechanic_pos[3];
				GetPlayerPos(playerid, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2]);
				if (!IsPlayerInRangeOfPoint(buyer, 10.0, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2])) return SendPlayerClientMessage(playerid, "El dueño del vehículo está demasiado lejos.");
				
				PLAYER_TEMP[buyer][pt_MECHANIC_PID] = playerid;
				PLAYER_TEMP[buyer][pt_MECHANIC_AID] = PI[playerid][pi_ID];
				PLAYER_TEMP[buyer][pt_MECHANIC_PRICE] = price;
				if (PLAYER_TEMP[playerid][pt_PAINTJOB_SELECTED_ID] == 3)
					format(PLAYER_TEMP[buyer][pt_MECHANIC_TEXT], 64, "Eliminar Paintjob", PLAYER_TEMP[playerid][pt_PAINTJOB_SELECTED_ID]);
				else
					format(PLAYER_TEMP[buyer][pt_MECHANIC_TEXT], 64, "Paintjob (%d)", PLAYER_TEMP[playerid][pt_PAINTJOB_SELECTED_ID]);
				PLAYER_TEMP[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_PAINTJOB;
				PLAYER_TEMP[buyer][pt_MECHANIC_EXTRA] = PLAYER_TEMP[playerid][pt_PAINTJOB_SELECTED_ID];
				PLAYER_TEMP[buyer][pt_MECHANIC_VEHICLE_ID] = PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
				PLAYER_TEMP[buyer][pt_MECHANIC_PIECES] = 15;
				PLAYER_TEMP[buyer][pt_MECHANIC_TIME] = gettime();
				
				ShowDialog(buyer, DIALOG_MECHANIC_ACCEPT);
				
				SendPlayerClientMessage(playerid, "Le has ofrecido a %s cambiar el paintjob de su vehículo por %s$.", PLAYER_TEMP[buyer][pt_NAME], number_format_thousand(PLAYER_TEMP[buyer][pt_MECHANIC_PRICE]));
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_MECHANIC_REM_COM_PRICE:
		{
			if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if (!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendPlayerClientMessage(playerid, "El vehículo está demasiado lejos.");
			
			if (response)
			{
				new price;
				if (sscanf(inputtext, "d", price))
				{
					SendPlayerClientMessage(playerid, "El precio no es correcto.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (price < 0 || price > 2750)
				{
					SendPlayerClientMessage(playerid, "El rango del precio es: 0$ - 2.750$.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new buyer = GetPlayerIdFromAccountId(PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID]);
				if (buyer == INVALID_PLAYER_ID) return SendPlayerClientMessage(playerid, "El dueño del vehículo no está cerca.");
				
				new Float:mechanic_pos[3];
				GetPlayerPos(playerid, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2]);
				if (!IsPlayerInRangeOfPoint(buyer, 10.0, mechanic_pos[0], mechanic_pos[1], mechanic_pos[2])) return SendPlayerClientMessage(playerid, "El dueño del vehículo está demasiado lejos.");

				inline OnComponentsInfoLoad()
				{
					new rows;
					if (cache_get_row_count(rows))
					{
						if (rows)
						{
							new part[24], name[24];
							cache_get_value_name(0, "part", part);
							cache_get_value_name(0, "name", name);

							PLAYER_TEMP[buyer][pt_MECHANIC_PID] = playerid;
							PLAYER_TEMP[buyer][pt_MECHANIC_AID] = PI[playerid][pi_ID];
							PLAYER_TEMP[buyer][pt_MECHANIC_PRICE] = price;
							format(PLAYER_TEMP[buyer][pt_MECHANIC_TEXT], 64, "Eliminar componente (%s > %s)", part, name);
							PLAYER_TEMP[buyer][pt_MECHANIC_TYPE] = MECHANIC_OPTION_REMOVE_COMPONEN;
							PLAYER_TEMP[buyer][pt_MECHANIC_EXTRA] = PLAYER_TEMP[playerid][pt_MECHANIC_SELECTED_COMPONENT];
							PLAYER_TEMP[buyer][pt_MECHANIC_VEHICLE_ID] = PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID];
							PLAYER_TEMP[buyer][pt_MECHANIC_PIECES] = PLAYER_TUNING_MENU[playerid][ PLAYER_TEMP[playerid][pt_MECHANIC_SELECTED_COMPONENT] ][tuning_menu_PIECES];
							PLAYER_TEMP[buyer][pt_MECHANIC_TIME] = gettime();
							ShowDialog(buyer, DIALOG_MECHANIC_ACCEPT);
							SendPlayerClientMessage(playerid, "Le has ofrecido a %s quitar un componente de su vehículo por %s$.", PLAYER_TEMP[buyer][pt_NAME], number_format_thousand(PLAYER_TEMP[buyer][pt_MECHANIC_PRICE]));
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM vcomponents_info WHERE id = %d;", GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][ PLAYER_TUNING_MENU[playerid][ PLAYER_TEMP[playerid][pt_MECHANIC_SELECTED_COMPONENT] ][tuning_menu_ID] ]);
				MySQL_TQueryInline(handle_db, using inline OnComponentsInfoLoad, QUERY_BUFFER);
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_MECHANIC_ACCEPT:
		{
			if (response)
			{
				if (gettime() > PLAYER_TEMP[playerid][pt_MECHANIC_TIME] + 20) return SendPlayerClientMessage(playerid, "Has tardardo mucho en aceptarlo.");
				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_MECHANIC_PID])) return SendPlayerClientMessage(playerid, "El mecánico ya no está en el servidor.");
				if (PI[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][pi_ID] != PLAYER_TEMP[playerid][pt_MECHANIC_AID]) return SendPlayerClientMessage(playerid, "El mecánico ya no está en el servidor.");

				new Float:pos[3]; GetPlayerPos(PLAYER_TEMP[playerid][pt_MECHANIC_PID], pos[0], pos[1], pos[2]);
				if (!IsPlayerInRangeOfPoint(playerid, 10.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "El mecánico está demasiado lejos.");
				if (PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "El mecánico no está disponible.");
				
				if (PLAYER_TEMP[playerid][pt_MECHANIC_PRICE] > PI[playerid][pi_CASH])
				{
					SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_MECHANIC_PID], "{f5f5f5}La persona no tiene suficiente dinero.");
					SendPlayerClientMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder aceptarlo.", number_format_thousand(PLAYER_TEMP[playerid][pt_MECHANIC_PRICE] - PI[playerid][pi_CASH]));
					return 1;
				}
				if (PLAYER_TEMP[playerid][pt_MECHANIC_PIECES] > PI[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][pi_MECHANIC_PIECES])
				{
					SendPlayerClientMessage(playerid, "Al mecánico no le quedan piezas para el trabajo.");
					SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_MECHANIC_PID], "{f5f5f5}La persona ha aceptado pero no tienes piezas suficientes para el trabajo.");
					return 1;
				}
				
				if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID])
				{
					SendPlayerClientMessage(playerid, "El vehículo está muy lejos.");
					SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_MECHANIC_PID], "{f5f5f5}La persona ha aceptado pero el vehículo está muy lejos.");
					return 1;
				}
				if (GetVehicleDistanceFromPoint(PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID], pos[0], pos[1], pos[2]) > 10.0)
				{
					SendPlayerClientMessage(playerid, "El vehículo está muy lejos del mecánico.");
					SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_MECHANIC_PID], "{f5f5f5}La persona ha aceptado pero estás muy lejos del vehículo.");
					return 1;
				}
				
				if (GivePlayerCash(playerid, -PLAYER_TEMP[playerid][pt_MECHANIC_PRICE], true, true) && GivePlayerCash(PLAYER_TEMP[playerid][pt_MECHANIC_PID], PLAYER_TEMP[playerid][pt_MECHANIC_PRICE], true, false)) {
					switch(PLAYER_TEMP[playerid][pt_MECHANIC_TYPE])
					{
						case MECHANIC_OPTION_REPAIR:
						{
							PI[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][pi_MECHANIC_PIECES] -= PLAYER_TEMP[playerid][pt_MECHANIC_PIECES];
							PLAYER_WORKS[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][WORK_MECHANIC][pwork_LEVEL] ++;
							GiveRandomMechanicCrowbar( PLAYER_TEMP[playerid][pt_MECHANIC_PID] );
							
							RepairVehicleEx(PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID], playerid);
							SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_MECHANIC_PID], "{f5f5f5}Has necesitado 10 piezas para la reparacion.");
						}
						case MECHANIC_OPTION_COLOR_1:
						{
							PI[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][pi_MECHANIC_PIECES] -= 5;
							GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_1] = PLAYER_TEMP[playerid][pt_MECHANIC_EXTRA];
							ChangeVehicleColorEx(PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_2]);
							
							SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_MECHANIC_PID], "{f5f5f5}Has necesitado 5 piezas para pintar el vehículo.");
						
							PLAYER_WORKS[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][WORK_MECHANIC][pwork_LEVEL] ++;
							GiveRandomMechanicCrowbar( PLAYER_TEMP[playerid][pt_MECHANIC_PID] );
						}
						case MECHANIC_OPTION_COLOR_2:
						{
							PI[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][pi_MECHANIC_PIECES] -= 5;
							GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_2] = PLAYER_TEMP[playerid][pt_MECHANIC_EXTRA];
							ChangeVehicleColorEx(PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_2]);
							
							SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_MECHANIC_PID], "{f5f5f5}Has necesitado 5 piezas para pintar el vehículo.");
						
							PLAYER_WORKS[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][WORK_MECHANIC][pwork_LEVEL] ++;
							GiveRandomMechanicCrowbar( PLAYER_TEMP[playerid][pt_MECHANIC_PID] );
						}
						case MECHANIC_OPTION_TUNING:
						{
							new slot = GetVehicleComponentType(PLAYER_TEMP[playerid][pt_MECHANIC_EXTRA]);
							new current_component = GetVehicleComponentInSlot(PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID], slot);
							if (current_component) RemoveVehicleComponent(PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID], current_component);
							
							GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][slot] = PLAYER_TEMP[playerid][pt_MECHANIC_EXTRA];
							AddVehicleComponent(PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID], PLAYER_TEMP[playerid][pt_MECHANIC_EXTRA]);
							
							PI[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][pi_MECHANIC_PIECES] -= PLAYER_TEMP[playerid][pt_MECHANIC_PIECES];
							SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_MECHANIC_PID], "Has necesitado ~r~%d piezas~w~ para tunear el vehículo.", PLAYER_TEMP[playerid][pt_MECHANIC_PIECES]);
						
							PLAYER_WORKS[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][WORK_MECHANIC][pwork_LEVEL] ++;
							GiveRandomMechanicCrowbar( PLAYER_TEMP[playerid][pt_MECHANIC_PID] );
						}
						case MECHANIC_OPTION_PAINTJOB:
						{
							if (PLAYER_TEMP[playerid][pt_MECHANIC_EXTRA] == 3)
							{
								PI[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][pi_MECHANIC_PIECES] += 15;
								SendPlayerClientMessage(playerid, "Paintjob eliminado, piezas ganadas: 15, piezas totales: %d.", PI[playerid][pi_MECHANIC_PIECES]);
						
								PLAYER_WORKS[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][WORK_MECHANIC][pwork_LEVEL] ++;
								GiveRandomMechanicCrowbar( PLAYER_TEMP[playerid][pt_MECHANIC_PID] );
							}
							else
							{
								PI[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][pi_MECHANIC_PIECES] -= 15;
								SendPlayerClientMessage(playerid, "Has necesitado 15 piezas para el paintjob de el vehículo.");
						
								PLAYER_WORKS[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][WORK_MECHANIC][pwork_LEVEL] ++;
								GiveRandomMechanicCrowbar( PLAYER_TEMP[playerid][pt_MECHANIC_PID] );
							}
							GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_PAINTJOB] = PLAYER_TEMP[playerid][pt_MECHANIC_EXTRA];
							ChangeVehiclePaintjob(PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_PAINTJOB]);
						}

						case MECHANIC_OPTION_REMOVE_COMPONEN:
						{
							new slot = PLAYER_TUNING_MENU[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][ PLAYER_TEMP[playerid][pt_MECHANIC_EXTRA] ][tuning_menu_ID];
							RemoveVehicleComponent(PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][slot]);
							GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][slot] = 0;
							
							PI[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][pi_MECHANIC_PIECES] += PLAYER_TEMP[playerid][pt_MECHANIC_PIECES];
							ShowPlayerMessage(PLAYER_TEMP[playerid][pt_MECHANIC_PID], "Componente eliminado, piezas ganadas: ~b~%d~w~, piezas totales: ~b~%d~w~.", PLAYER_TEMP[playerid][pt_MECHANIC_PIECES], PI[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][pi_MECHANIC_PIECES]);
						
							PLAYER_WORKS[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][WORK_MECHANIC][pwork_LEVEL] ++;
							GiveRandomMechanicCrowbar( PLAYER_TEMP[playerid][pt_MECHANIC_PID] );
						}
					}
					
					ShowPlayerMessage(playerid, "Le has pagado ~r~%s$~w~ al mecánico por su trabajo.", number_format_thousand(PLAYER_TEMP[playerid][pt_MECHANIC_PRICE]));
					ShowPlayerMessage(PLAYER_TEMP[playerid][pt_MECHANIC_PID], "%s te ha pagado ~b~%s dólares~w~ por tu trabajo.", PLAYER_TEMP[playerid][pt_NAME], number_format_thousand(PLAYER_TEMP[playerid][pt_MECHANIC_PRICE]));
				}
			}
			else
			{
				if (gettime() > PLAYER_TEMP[playerid][pt_MECHANIC_TIME] + 30) return 1;
				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_MECHANIC_PID])) return 1;
				if (PI[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][pi_ID] != PLAYER_TEMP[playerid][pt_MECHANIC_AID]) return 1;

				SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_MECHANIC_PID], "{f5f5f5}La persona no aceptó lo que le ofreciste.");
			}
			return 1;
		}
		case DIALOG_MECHANIC_SELECT_COL_SLOT:
		{
			if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if (!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendPlayerClientMessage(playerid, "El vehículo está demasiado lejos.");
			
			if (response)
			{
				PLAYER_TEMP[playerid][pt_MECHANIC_COLOR_SLOT] = listitem;
				ShowDialog(playerid, DIALOG_MECHANIC_SELECT_COLOR);
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_MECHANIC_SELECT_COLOR:
		{
			if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
				
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if (!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendPlayerClientMessage(playerid, "El vehículo está demasiado lejos.");
			
			if (response)
			{
				if (PI[playerid][pi_MECHANIC_PIECES] < 5) return SendPlayerClientMessage(playerid, "No tienes suficientes piezas, puedes comprar más piezas en el taller.");

				if (PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID] == PI[playerid][pi_ID])
				{
					PI[playerid][pi_MECHANIC_PIECES] -= 5;
					switch(PLAYER_TEMP[playerid][pt_MECHANIC_COLOR_SLOT])
					{
						case 0: GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_1] = listitem;
						case 1: GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_2] = listitem;
					}
					ChangeVehicleColorEx(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COLOR_2]);
					
					SendPlayerClientMessage(playerid, "Has necesitado 5 piezas para pintar el vehículo.");
				}
				else
				{
					PLAYER_TEMP[playerid][pt_MECHANIC_SELECTED_COLOR] = listitem;
					ShowDialog(playerid, DIALOG_MECHANIC_COLOR_PRICE);
				}
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_SELECT_COL_SLOT);
			return 1;
		}
		case DIALOG_MECHANIC_REMOVE_COMPONEN:
		{
			if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
			
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if (!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendPlayerClientMessage(playerid, "El vehículo está demasiado lejos.");
		
			if (response)
			{
				if (100 > PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL])
				{
					SendPlayerClientMessage(playerid, "Has realizado %d reparaciones como mecánico, necesitas 100 para tunear vehículos.", PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL]);
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID] < 0) return ShowDialog(playerid, dialogid);

				if (PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID] == PI[playerid][pi_ID])
				{
					RemoveVehicleComponent(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][ PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID] ]);
					GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_COMPONENTS][ PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_ID] ] = 0;
					
					PI[playerid][pi_MECHANIC_PIECES] += PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_PIECES];
					SendPlayerClientMessage(playerid, "Componente eliminado, piezas ganadas: %d, piezas totales: %d.", PLAYER_TUNING_MENU[playerid][listitem][tuning_menu_PIECES], PI[playerid][pi_MECHANIC_PIECES]);
				}
				else
				{
					PLAYER_TEMP[playerid][pt_MECHANIC_SELECTED_COMPONENT] = listitem;
					ShowDialog(playerid, DIALOG_MECHANIC_REM_COM_PRICE);
				}
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_TUNING_PAINTJOB:
		{
			if (!GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_VALID]) return 1;
			
			new Float:Vehicle_Pos[3];
			GetVehiclePos(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2]);
			
			if (!IsPlayerInRangeOfPoint(playerid, 5.0, Vehicle_Pos[0], Vehicle_Pos[1], Vehicle_Pos[2])) return SendPlayerClientMessage(playerid, "El vehículo está demasiado lejos.");
			
			if (response)
			{
				if (100 > PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL])
				{
					SendPlayerClientMessage(playerid, "Has realizado %d reparaciones como mecánico, necesitas 100 para cambiar el paintjob de vehículos.", PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_LEVEL]);
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (PI[playerid][pi_MECHANIC_PIECES] < 15) return SendPlayerClientMessage(playerid, "No tienes suficientes piezas, puedes comprar más piezas en el taller.");
				
				if (listitem == 0)
				{
					if (GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_PAINTJOB] == 3)
					{
						SendPlayerClientMessage(playerid, "El vehículo no tiene ningún paintjob.");
						return 1;
					}

					if (PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID] == PI[playerid][pi_ID])
					{
						GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_PAINTJOB] = 3;
						ChangeVehiclePaintjob(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_PAINTJOB]);
						PI[ PLAYER_TEMP[playerid][pt_MECHANIC_PID] ][pi_MECHANIC_PIECES] += 15;
						SendPlayerClientMessage(playerid, "Paintjob eliminado, piezas ganadas: 15, piezas totales: %d.", PI[playerid][pi_MECHANIC_PIECES]);
					}
					else
					{
						PLAYER_TEMP[playerid][pt_PAINTJOB_SELECTED_ID] = 3;
						ShowDialog(playerid, DIALOG_MECHANIC_PAINTJOB_PRICE);
					}
					
					return 1;
				}
				
				if (PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][player_vehicle_OWNER_ID] == PI[playerid][pi_ID])
				{
					GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_PAINTJOB] = listitem - 1;
					ChangeVehiclePaintjob(PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID], GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_SELECTED_MECHANIC_VEHICLE_ID] ][gb_vehicle_PAINTJOB]);
					PI[playerid][pi_MECHANIC_PIECES] -= 15;
					SendPlayerClientMessage(playerid, "Has necesitado 15 piezas para el paintjob de el vehículo.");
				}
				else
				{
					PLAYER_TEMP[playerid][pt_PAINTJOB_SELECTED_ID] = listitem - 1;
					ShowDialog(playerid, DIALOG_MECHANIC_PAINTJOB_PRICE);
				}
			}
			else ShowDialog(playerid, DIALOG_MECHANIC_MENU);
			return 1;
		}
		case DIALOG_SEED_LIST:
		{
			if (response)
			{
				if (seed_info[listitem][seed_info_EXP] > PLAYER_WORKS[playerid][WORK_FARMER][pwork_LEVEL]) return SendPlayerClientMessage(playerid, "Necesitas haber plantado al menos %d plantas como agricultor para poder comprar esta semilla.", seed_info[listitem][seed_info_EXP]);
				
				PLAYER_TEMP[playerid][pt_SELECTED_BUY_SEED_ID] = listitem;
				ShowDialog(playerid, DIALOG_SEED_BUY);
			}
			return 1;
		}
		case DIALOG_SEED_BUY:
		{
			if (response)
			{
				if (sscanf(inputtext, "d", inputtext[0])) return SendPlayerClientMessage(playerid, "La cantidad de semillas no es correcta.");
				if (inputtext[0] <= 0 || inputtext[0] > 100000) return SendPlayerClientMessage(playerid, "La cantidad de semillas no es correcta.");
				
				new price = seed_info[ PLAYER_TEMP[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_PRICE] * inputtext[0];

				if (seed_info[ PLAYER_TEMP[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_TYPE] == TYPE_LEGAL)
				{
					if (price > PI[playerid][pi_CASH]) return ShowPlayerMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder comprar las semillas.", number_format_thousand(price - PI[playerid][pi_CASH]));
					
					if (GivePlayerCash(playerid, -price, true, true))
					{
						switch(seed_info[ PLAYER_TEMP[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_PLANT_TYPE])
						{
							case PLANT_TYPE_MEDICINE: PI[playerid][pi_SEED_MEDICINE] += inputtext[0];
							case PLANT_TYPE_CANNABIS: PI[playerid][pi_SEED_CANNABIS] += inputtext[0];
							case PLANT_TYPE_CRACK: PI[playerid][pi_SEED_CRACK] += inputtext[0];
						}
						
						SendPlayerClientMessage(playerid, "Has comprado %s semillas de %s por %s$.", number_format_thousand(inputtext[0]), seed_info[ PLAYER_TEMP[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_NAME], number_format_thousand(price));
					}
				}
				else
				{
					new result = GivePlayerBlackCash(playerid, -price, true);

					if (result == -1) return ShowPlayerMessage(playerid, "No tienes ~r~nada~w~ en la mano.");
					if (result == -2) return ShowPlayerMessage(playerid, "No tienes la cantidad suficiente de ~r~dinero negro~w~.");
					if (result == 0) return ShowPlayerMessage(playerid, "No tienes ~r~dinero negro~w~ en la mano.");

					if (result == 1) {
						switch(seed_info[ PLAYER_TEMP[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_PLANT_TYPE]) {
							case PLANT_TYPE_MEDICINE: PI[playerid][pi_SEED_MEDICINE] += inputtext[0];
							case PLANT_TYPE_CANNABIS: PI[playerid][pi_SEED_CANNABIS] += inputtext[0];
							case PLANT_TYPE_CRACK: PI[playerid][pi_SEED_CRACK] += inputtext[0];
						}
						
						ShowPlayerMessage(playerid, "Has comprado %s semillas de %s por %s~b~B$~w~.", number_format_thousand(inputtext[0]), seed_info[ PLAYER_TEMP[playerid][pt_SELECTED_BUY_SEED_ID] ][seed_info_NAME], number_format_thousand(price));
					}
				}
			}
			else ShowDialog(playerid, DIALOG_SEED_LIST);
			return 1;
		}
		case DIALOG_PLANT_PLANTS:
		{
			if (response)
			{
				if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return ShowPlayerMessage(playerid, "No estás depie.");
				if (!IsPlayerInDynamicArea(playerid, Farmer_Area)) return ShowPlayerMessage(playerid, "No estás en la zona para plantar, está marcada en el mapa con una bandera.");
				
				for (new i = 0; i != MAX_PLANTS; i ++)
				{
					if (!PLANTS[i][plant_VALID]) continue;
					
					new Float:pos[3];
					GetDynamicObjectPos(PLANTS[i][plant_OBJECT_ID], pos[0], pos[1], pos[2]);
					if (IsPlayerInRangeOfPoint(playerid, 3.0, pos[0], pos[1], pos[2]))
					{
						ShowPlayerMessage(playerid, "Aquí ya hay una planta, aléjate un poco para plantar.");
						return 1;
					}
				}

				switch(seed_info[listitem][seed_info_PLANT_TYPE])
				{
					case PLANT_TYPE_MEDICINE:
					{
						if (plant_info[listitem][plant_info_SEEDS] > PI[playerid][pi_SEED_MEDICINE])
						{
							ShowPlayerMessage(playerid, "No tienes las semillas necesarias para plantar esta planta.");
							return 1;
						}
						PI[playerid][pi_SEED_MEDICINE] -= plant_info[listitem][plant_info_SEEDS];
					}
					case PLANT_TYPE_CANNABIS:
					{
						if (plant_info[listitem][plant_info_SEEDS] > PI[playerid][pi_SEED_CANNABIS])
						{
							ShowPlayerMessage(playerid, "No tienes las semillas necesarias para plantar esta planta.");
							return 1;
						}
						PI[playerid][pi_SEED_CANNABIS] -= plant_info[listitem][plant_info_SEEDS];
					}
					case PLANT_TYPE_CRACK:
					{
						if (plant_info[listitem][plant_info_SEEDS] > PI[playerid][pi_SEED_CRACK])
						{
							ShowPlayerMessage(playerid, "No tienes las semillas necesarias para plantar esta planta.");
							return 1;
						}
						PI[playerid][pi_SEED_CRACK] -= plant_info[listitem][plant_info_SEEDS];
					}
				}
				
				SendPlayerClientMessage(playerid, "{"#GREEN_COLOR"}{F5F5F5}Vas a plantar {"#GREEN_COLOR"}%s{F5F5F5} y vas a necesitar {"#RED_COLOR"}%d{F5F5F5} semillas.", plant_info[listitem][plant_info_NAME], plant_info[listitem][plant_info_SEEDS]);
				
				
				new Float:offset = floatdiv(PLAYER_WORKS[playerid][WORK_FARMER][pwork_LEVEL], 10);
				if (offset > 30.0) offset = 30.0;
				
				PLAYER_TEMP[playerid][pt_LAST_PLANT_TIME] = gettime();
				PLAYER_TEMP[playerid][pt_PLANTING_PLANT_SELECTED] = listitem;
				PLAYER_TEMP[playerid][pt_PLANTING] = true;
				PLAYER_TEMP[playerid][pt_WORKING_IN] = WORK_FARMER;
				PLAYER_TEMP[playerid][pt_PLANTING_PROGRESS] = frandom(10.0, 8.0, 2) + offset;
				UpdatePlantSizeTextdrawPlant(playerid);
				
				PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0]);
				PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1]);
				PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2]);
				PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][3]);
				
				TogglePlayerControllable(playerid, false);
				SetCameraBehindPlayer(playerid);
				ApplyAnimation(playerid, "BOMBER", "BOM_Plant_Loop", 4.1, true, false, false, false, 0);
				
				KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][12]);
				PLAYER_TEMP[playerid][pt_TIMERS][12] = SetTimerEx("PlantingUp", 1000, false, "id", playerid, plant_info[listitem][plant_info_SEEDS]);
			}
			return 1;
		}
		case DIALOG_ANIMS:
		{
		    if (response)
		    {
		        switch(listitem)
		        {
		            case 0: SetPlayerSpecialAction(playerid,SPECIAL_ACTION_HANDSUP);//rendirse
		            case 1: ApplyAnimation(playerid, "BLOWJOBZ", "BJ_COUpi_LOOP_W", 4.0, 1, 1, 1, 0, 0);//blowjob
		            case 2: ApplyAnimation(playerid,"PED","BIKE_fallR",4.0,0,1,1,1,0);//rodar
		            case 3: ApplyAnimation(playerid,"PED", "WALK_DRUNK",4.0,1,1,1,1,500);//borracho
		            case 4: ApplyAnimation(playerid, "BOMBER", "BOM_Plant", 4.0, 0, 1, 1, 0,0);//bomba
		            case 5: ApplyAnimation( playerid,"ped", "ARRESTgun", 4.0, 0, 1, 1, 1,500);//apuntar
		            case 6: ApplyAnimation(playerid, "RAPPING", "Laugh_01", 4.0, 0, 0, 0, 0,0);//reir
		            case 7: ApplyAnimation(playerid, "SHOP", "ROB_Loop_Threat", 4.0, 0, 0, 0, 1,500);//amenazar
		            case 8: ApplyAnimation(playerid, "PAULNMAC", "wank_loop", 4.0, 1, 0, 0, 1, 0);//paja
		            case 9: ApplyAnimation(playerid, "SWEET", "LaFin_Sweet", 4.0, 0, 1, 1, 1, 0);//herido
		            case 10: ApplyAnimation(playerid, "COP_AMBIENT", "Coplook_loop", 4.0, 1, 1, 1, 0, 4000);//cruzarbrazos
		            case 11: ApplyAnimation(playerid,"SUNBATHE", "Lay_Bpi_in", 4.0, 0, 0, 0, 1, 0);//recostarse
		            case 12: ApplyAnimation(playerid, "ped", "cower", 4.0, 1, 0, 0, 0, 0);//crubrirse
		            case 13: ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);//vomitar
		            case 14: ApplyAnimation(playerid, "FOOD", "EAT_Burger", 3.00, 0, 0, 0, 0, 0);//comer
		            case 15: ApplyAnimation(playerid, "KISSING", "BD_GF_Wave", 3.0, 0, 0, 0, 0, 0);//despedir
		            case 16: ApplyAnimation(playerid, "SWEET", "sweet_ass_slap", 4.0, 0, 0, 0, 0, 0);//nalgada
		            case 17: ApplyAnimation(playerid, "WUZI", "CS_Dead_Guy", 4.0, 0, 0, 0, 1, 0);//agonizar
		            case 18: ApplyAnimation(playerid, "KISSING", "Playa_Kiss_02", 4.0, 0, 0, 0, 0, 0);//besar
		            case 19: ApplyAnimation(playerid, "CRACK", "crckdeth2", 4.0, 0, 0, 0, 1, 0);//crack
		            case 20: SetPlayerSpecialAction(playerid, SPECIAL_ACTION_PISSING);//mear
		            case 21: ApplyAnimation(playerid, "SUNBATHE", "ParkSit_M_in", 4.000000, 0, 1, 1, 1, 0);//sentarse
		            case 22: ApplyAnimation( playerid,"ped", "fucku", 4.0, 0, 1, 1, 1, 1 );//fucku
		            case 23: ApplyAnimation(playerid, "ped", "phone_in", 4.000000, 0, 0, 0, 1, 4000);//llamar
		            case 24: ApplyAnimation(playerid, "PARK", "Tai_Chi_Loop",  4.1,7,5,1,1,1);//taichi
		            case 25: ApplyAnimation(playerid, "BAR", "dnk_stndM_loop", 4.0, 0, 1, 1, 0, 4000);//beber
		            case 26: ApplyAnimation(playerid, "GYMNASIUM", "gym_shadowbox",  4.1,7,5,1,1,1);//boxear
		            case 27: ApplyAnimation(playerid,"GANGS","hndshkfa_swt",4.1,0,0,0,0,0);//saludar
		            case 28: ApplyAnimation(playerid,"GRAVEYARD","mrnF_loop",4.1,0,0,0,0,0);//llorar
		            case 29: ApplyAnimation(playerid,"INT_HOUSE","BED_In_R",4.1,0,0,0,1,0);//dormir
		            case 30: ApplyAnimation(playerid,"RAPPING","RAP_B_Loop",4.0,1,0,0,0,8000);//rapear
		            case 31: ApplyAnimation(playerid,"STRIP","strip_A",4.1,7,5,1,1,1);//strip
		            case 32: ApplyAnimation(playerid,"DANCING","DAN_Down_A",4.1,7,5,1,1,1);//bailar
		            case 33: ApplyAnimation(playerid,"ON_LOOKERS","shout_02",4.1,7,5,1,1,1);//alentar
		            case 34: ApplyAnimation(playerid,"PED","IDLE_chat",4.1,7,5,1,1,1);//hablar
					case 35: ApplyAnimation(playerid, "ped", "SEAT_down", 4.000000, 0, 1, 1, 1, 0);//asiento
		        }
				SendPlayerClientMessage(playerid, "Para detener la animacion utiliza ~b~/parar~w~.");
			}
			return 1;
		}
		case DIALOG_TRICKS_MEDICINE: {
			if (response) {
				if (gettime() > PLAYER_TEMP[playerid][pt_TRICK_TIME] + 20) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}Has tardardo mucho en aceptarlo.");
				if (PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] == -1) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor ya no esta en el servidor.");
				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID])) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor ya no está en el servidor.");
				if (PI[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pi_ID] != PLAYER_TEMP[playerid][pt_TRICK_SELLER_AID]) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor ya no está en el servidor.");

				new Float:pos[3]; GetPlayerPos(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], pos[0], pos[1], pos[2]);
				if (!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor está demasiado lejos.");
				if (PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor no está disponible.");

				
				if (GivePlayerCash(playerid, -PLAYER_TEMP[playerid][pt_TRICK_PRICE], true, true) && GivePlayerCash(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], PLAYER_TEMP[playerid][pt_TRICK_PRICE], true, false)) {
					PI[playerid][pi_MEDICINE] += PLAYER_TEMP[playerid][pt_TRICK_SELLER_EXTRA];
					PI[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pi_MEDICINE] -= PLAYER_TEMP[playerid][pt_TRICK_SELLER_EXTRA];
				
					SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}Has gastado {"#PRIMARY_COLOR"}%s${f5f5f5} con esta compra.", number_format_thousand(PLAYER_TEMP[playerid][pt_TRICK_PRICE]));
					SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], "{"#PRIMARY_COLOR"}{f5f5f5}Has ganado {"#PRIMARY_COLOR"}%s${f5f5f5} con esta venta.", number_format_thousand(PLAYER_TEMP[playerid][pt_TRICK_PRICE]));
					
					new action[64];
					format(action, sizeof action, "y %s llegan a un acuerdo.", PLAYER_TEMP[playerid][pt_NAME]);
					Auto_SendPlayerAction(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], action);

					PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] = -1;
					PLAYER_TEMP[playerid][pt_TRICK_SELLER_AID] = -1;
				}
			} else {
				if (gettime() > PLAYER_TEMP[playerid][pt_TRICK_TIME] + 20) return 1;
				PLAYER_TEMP[playerid][pt_TRICK_TIME] = 0;
				
				if (PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] == -1) return 1;
				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID])) return 1;
				if (PI[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pi_ID] != PLAYER_TEMP[playerid][pt_TRICK_SELLER_AID]) return 1;

				SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], "{666666}El comprador no ha aceptado tu trato.");
			}
			return 1;
		}
		case DIALOG_TRICKS_CANNABIS: {
			if (response) {
				if (gettime() > PLAYER_TEMP[playerid][pt_TRICK_TIME] + 20) return SendPlayerClientMessage(playerid, "Has tardardo mucho en aceptarlo.");
				if (PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] == -1) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor ya no esta en el servidor.");
				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID])) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor ya no está en el servidor.");
				if (PI[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pi_ID] != PLAYER_TEMP[playerid][pt_TRICK_SELLER_AID]) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor ya no está en el servidor.");

				new Float:pos[3]; GetPlayerPos(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], pos[0], pos[1], pos[2]);
				if (!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor está demasiado lejos.");
				if (PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor no está disponible.");				
				
				if (GivePlayerCash(playerid, -PLAYER_TEMP[playerid][pt_TRICK_PRICE], true, true) && GivePlayerCash(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], PLAYER_TEMP[playerid][pt_TRICK_PRICE], true, false)) {
					PI[playerid][pi_CANNABIS] += PLAYER_TEMP[playerid][pt_TRICK_SELLER_EXTRA];
					PI[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pi_CANNABIS] -= PLAYER_TEMP[playerid][pt_TRICK_SELLER_EXTRA];
				
					SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}Has gastado {"#PRIMARY_COLOR"}%s${f5f5f5} con esta compra.", number_format_thousand(PLAYER_TEMP[playerid][pt_TRICK_PRICE]));
					SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], "{"#PRIMARY_COLOR"}{f5f5f5}Has ganado {"#PRIMARY_COLOR"}%s${f5f5f5} con esta venta", number_format_thousand(PLAYER_TEMP[playerid][pt_TRICK_PRICE]));
					
					new action[64];
					format(action, sizeof action, "y %s llegan a un acuerdo.", PLAYER_TEMP[playerid][pt_NAME]);
					Auto_SendPlayerAction(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], action);
				}
			} else {
				if (gettime() > PLAYER_TEMP[playerid][pt_TRICK_TIME] + 20) return 1;
				PLAYER_TEMP[playerid][pt_TRICK_TIME] = 0;
				
				if (PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] == -1) return 1;
				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID])) return 1;
				if (PI[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pi_ID] != PLAYER_TEMP[playerid][pt_TRICK_SELLER_AID]) return 1;

				SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], "{666666}El comprador no ha aceptado tu trato.");
			}
			return 1;
		}
		case DIALOG_TRICKS_CRACK: {
			if (response) {
				if (gettime() > PLAYER_TEMP[playerid][pt_TRICK_TIME] + 20) return SendPlayerClientMessage(playerid, "Has tardardo mucho en aceptarlo.");
				if (PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] == -1) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor ya no esta en el servidor.");
				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID])) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor ya no está en el servidor.");
				if (PI[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pi_ID] != PLAYER_TEMP[playerid][pt_TRICK_SELLER_AID]) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor ya no está en el servidor.");

				new Float:pos[3]; GetPlayerPos(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], pos[0], pos[1], pos[2]);
				if (!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor está demasiado lejos.");
				if (PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor no está disponible.");
				
				if (GivePlayerCash(playerid, -PLAYER_TEMP[playerid][pt_TRICK_PRICE], true, true) && GivePlayerCash(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], PLAYER_TEMP[playerid][pt_TRICK_PRICE], true, false)) {
					PI[playerid][pi_CRACK] += PLAYER_TEMP[playerid][pt_TRICK_SELLER_EXTRA];
					PI[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pi_CRACK] -= PLAYER_TEMP[playerid][pt_TRICK_SELLER_EXTRA];
				
					SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}Has gastado {"#PRIMARY_COLOR"}%s${f5f5f5} con esta compra.", number_format_thousand(PLAYER_TEMP[playerid][pt_TRICK_PRICE]));
					SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], "{"#PRIMARY_COLOR"}{f5f5f5}Has ganado {"#PRIMARY_COLOR"}%s${f5f5f5} con esta venta", number_format_thousand(PLAYER_TEMP[playerid][pt_TRICK_PRICE]));
					
					new action[64];
					format(action, sizeof action, "y %s llegan a un acuerdo.", PLAYER_TEMP[playerid][pt_NAME]);
					Auto_SendPlayerAction(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], action);
				}
			} else {
				if (gettime() > PLAYER_TEMP[playerid][pt_TRICK_TIME] + 20) return 1;
				PLAYER_TEMP[playerid][pt_TRICK_TIME] = 0;
				
				if (PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] == -1) return 1;
				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID])) return 1;
				if (PI[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pi_ID] != PLAYER_TEMP[playerid][pt_TRICK_SELLER_AID]) return 1;

				SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], "{666666}El comprador no ha aceptado tu trato.");
			}
			return 1;
		}
		case DIALOG_TRICKS_SU: {
			if (response) {
				if (gettime() > PLAYER_TEMP[playerid][pt_TRICK_TIME] + 20) return SendPlayerClientMessage(playerid, "Has tardardo mucho en aceptarlo.");
				if (PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] == -1) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor ya no esta en el servidor.");
				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID])) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor ya no está en el servidor.");
				if (PI[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pi_ID] != PLAYER_TEMP[playerid][pt_TRICK_SELLER_AID]) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor ya no está en el servidor.");

				new Float:pos[3]; GetPlayerPos(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], pos[0], pos[1], pos[2]);
				if (!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor está demasiado lejos.");
				if (PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}El vendedor no está disponible.");
				
				if (GivePlayerCash(playerid, -PLAYER_TEMP[playerid][pt_TRICK_PRICE], true, true) && GivePlayerCash(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], PLAYER_TEMP[playerid][pt_TRICK_PRICE], true, false)) {
					if (GivePlayerCoins(playerid, PLAYER_TEMP[playerid][pt_TRICK_SELLER_EXTRA], true, false, "Compra de coins jugador.") && GivePlayerCoins(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], -PLAYER_TEMP[playerid][pt_TRICK_SELLER_EXTRA], true, true, "Venta de coins jugador.")) {
						SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}{f5f5f5}Has gastado {"#PRIMARY_COLOR"}%s${f5f5f5} con esta compra.", number_format_thousand(PLAYER_TEMP[playerid][pt_TRICK_PRICE]));
						SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], "{"#PRIMARY_COLOR"}{f5f5f5}Has ganado {"#PRIMARY_COLOR"}%s${f5f5f5} con esta venta", number_format_thousand(PLAYER_TEMP[playerid][pt_TRICK_PRICE]));
						
						new action[64];
						format(action, sizeof action, "y %s llegan a un acuerdo.", PLAYER_TEMP[playerid][pt_NAME]);
						Auto_SendPlayerAction(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], action);
					}
				}
			} else {
				if (gettime() > PLAYER_TEMP[playerid][pt_TRICK_TIME] + 20) return 1;
				PLAYER_TEMP[playerid][pt_TRICK_TIME] = 0;

				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID])) return 1;
				if (PI[ PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID] ][pi_ID] != PLAYER_TEMP[playerid][pt_TRICK_SELLER_AID]) return 1;

				SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_TRICK_SELLER_PID], "{666666}El comprador no ha aceptado tu trato.");
			}
			return 1;
		}
		case DIALOG_SELECT_POLICE_SKIN:
		{
			if (response)
			{
				if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return 1;
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				if (POLICE_SKINS[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][police_skin_RANK] > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL]) return ShowDialog(playerid, dialogid);

				PI[playerid][pi_POLICE_DUTY] = POLICE_SKINS[ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][police_skin_SKIN];
				CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_POLICE, INVALID_VEHICLE_ID);
			}
			return 1;
		}
		case DIALOG_POLICE_RADIOS:
		{
			if (response)
			{
				PLAYER_TEMP[playerid][pt_POLICE_RADIO] = listitem;
				SendPlayerClientMessage(playerid, "Tu radio ha sido ajustada a la frecuencia %d.", listitem + 1);
			}
			return 1;
		}
		case DIALOG_POLICE_LIST:
		{
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -2) // Siguiente
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if (cache_get_row_count(rows))
						{
							if (rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT]);

								if (PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] >= pages - 1) PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] = 0;
								else PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] ++;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id_player) FROM pworks WHERE pworks.id_work = %d AND pworks.`set` = 1;", WORK_POLICE);
					MySQL_TQueryInline(handle_db, using inline OnCountQueryLoad, QUERY_BUFFER);
					return 1;
				}
				
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -3) //Anterior
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if (cache_get_row_count(rows))
						{
							if (rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT]);

								if (PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] <= 0) PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] = pages - 1;
								else PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] --;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id_player) FROM pworks WHERE pworks.id_work = %d AND pworks.`set` = 1;", WORK_POLICE);
					MySQL_TQueryInline(handle_db, using inline OnCountQueryLoad, QUERY_BUFFER);
					return 1;
				}

				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -4)
				{
					return 1;
				}

				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -5)
				{
					PC_EmulateCommand(playerid, "/ref");
					return 1;
				}

				if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] >= 11)
				{
					PLAYER_TEMP[playerid][pt_SELECTED_DB_PID] = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
					ShowDialog(playerid, DIALOG_POLICE_MODIFY);
				}
			}
			return 1;
		}
		case DIALOG_POLICE_MODIFY:
		{
			if (response)
			{
				if (listitem > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL])
				{
					SendPlayerClientMessage(playerid, "El rango que has seleccionado es superior al tuyo.");
					return 1;
				}

				inline OnDialogQueryLoad()
				{
					new rows;
					if (cache_get_row_count(rows))
					{
						if (rows)
						{
							new level, name[24], connected, pid;
							cache_get_value_name_int(0, "level", level);
							cache_get_value_name(0, "name", name);
							cache_get_value_name_int(0, "connected", connected);
							cache_get_value_name_int(0, "playerid", pid);

							if (level > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL]) SendPlayerClientMessage(playerid, "No puedes modificar el rango de este policia porque es un rango superior al tuyo.");
							else
							{
								SendPlayerClientMessage(playerid, "El nuevo rango de %s es: '%s'.", name, POLICE_RANKS[listitem]);
								if (listitem == 0)
								{
									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET `set` = 0, level = 0 WHERE id_player = %d AND id_work = %d;", PLAYER_TEMP[playerid][pt_SELECTED_DB_PID], WORK_POLICE);
									mysql_tquery(handle_db, QUERY_BUFFER);

									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET police_duty = 0 WHERE id = %d;", PLAYER_TEMP[playerid][pt_SELECTED_DB_PID]);
									mysql_tquery(handle_db, QUERY_BUFFER);

									if (connected)
									{
										if (PLAYER_TEMP[pid][pt_WORKING_IN] == WORK_POLICE) CallLocalFunction("EndPlayerJob", "iib", pid, PLAYER_TEMP[pid][pt_WORKING_IN], true);
										SendPlayerClientMessage(pid, "El %s %s te ha expulsado del cuerpo de policia.", POLICE_RANKS[ PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] ], PLAYER_TEMP[playerid][pt_NAME]);

										PLAYER_WORKS[pid][WORK_POLICE][pwork_SET] = 0;
										PLAYER_WORKS[pid][WORK_POLICE][pwork_LEVEL] = 0;
										PI[pid][pi_POLICE_DUTY] = 0;
									}
								}
								else
								{
									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET level = %d WHERE id_player = %d AND id_work = %d;", listitem, PLAYER_TEMP[playerid][pt_SELECTED_DB_PID], WORK_POLICE);
									mysql_tquery(handle_db, QUERY_BUFFER);

									if (connected)
									{
										PLAYER_WORKS[pid][WORK_POLICE][pwork_LEVEL] = listitem;
										SendPlayerClientMessage(pid, "{f5f5f5}El %s %s ha modificado tu rango del cuerpo de policia a '%s'.", POLICE_RANKS[ PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] ], PLAYER_TEMP[playerid][pt_NAME], POLICE_RANKS[listitem]);
									}
								}
							}
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT pworks.level, player.name, player.connected, player.playerid FROM pworks INNER JOIN player ON pworks.id_player = player.id WHERE pworks.id_player = %d AND pworks.id_work = %d;", PLAYER_TEMP[playerid][pt_SELECTED_DB_PID], WORK_POLICE);
				MySQL_TQueryInline(handle_db, using inline OnDialogQueryLoad, QUERY_BUFFER);
			}
			else ShowDialog(playerid, DIALOG_POLICE_LIST);
			return 1;
		}
		case DIALOG_HELP:
		{
			if (response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_HELP_GENERAL);
					case 1: ShowDialog(playerid, DIALOG_HELP_INFO);
					case 2: ShowDialog(playerid, DIALOG_HELP_CHARACTER);
					case 3: ShowDialog(playerid, DIALOG_HELP_PROPERTIES);
					case 4: ShowDialog(playerid, DIALOG_HELP_REPORT);
					case 5: ShowDialog(playerid, DIALOG_HELP_WORKS);
					case 6: ShowDialog(playerid, DIALOG_HELP_VEHICLES);
					case 7: ShowDialog(playerid, DIALOG_HELP_CREWS);
					case 8: ShowDialog(playerid, DIALOG_HELP_SU);
				}
			}
			return 1;
		}
		case DIALOG_HELP_WORKS:
		{
			if (response)
			{
				new caption[45], dialog[1800], work = listitem + 1;
				format(caption, sizeof caption, "Trabajo - %c%s", toupper(work_info[work][work_info_NAME][0]), work_info[work][work_info_NAME][1]);
			
				new header[350];
				if (work_info[work][work_info_TYPE] != WORK_TYPE_FAMILY)
				{
					if (work_info[work][work_info_EXTRA_PAY] > 0 && work_info[work][work_info_EXTRA_PAY_EXP] > 0) // con paga extra
					{
						if (!work_info[work][work_info_EXTRA_PAY_LIMIT]) // sin limite
						{
							format(header, sizeof header, 
						
								"\
									Trabajo: %s\n\
									Tipo: %s\n\
									Nivel necesario: %d\n\
									Paga extra: por cada %s trabajos realizados recibes %s$ extra.\n\
									Puedes localizar donde adquirir este trabajo desde el GPS.\n\
								",
									work_info[work][work_info_NAME],
									(work_info[work][work_info_TYPE] == WORK_TYPE_NORMAL) ? ("normal") : ("complementario"),
									work_info[work][work_info_LEVEL],
									number_format_thousand(work_info[work][work_info_EXTRA_PAY_EXP]),
									number_format_thousand(work_info[work][work_info_EXTRA_PAY])
							);
						}
						else // con limite
						{
							format(header, sizeof header, 
						
								"\
									Trabajo: %s\n\
									Tipo: %s\n\
									Nivel necesario: %d\n\
									Paga extra: por cada %s trabajos realizados recibes %s$ extra con un límite de %s$.\n\
									Puedes localizar donde adquirir este trabajo desde el GPS.\n\
								",
									work_info[work][work_info_NAME],
									(work_info[work][work_info_TYPE] == WORK_TYPE_NORMAL) ? ("normal") : ("complementario"),
									work_info[work][work_info_LEVEL],
									number_format_thousand(work_info[work][work_info_EXTRA_PAY_EXP]),
									number_format_thousand(work_info[work][work_info_EXTRA_PAY]),
									number_format_thousand(work_info[work][work_info_EXTRA_PAY_LIMIT])
							);
						}
					}
					else
					{
						format(header, sizeof header, 
						
							"\
								Trabajo: %s\n\
								Tipo: %s\n\
								Nivel necesario: %d\n\
								Puedes localizar donde adquirir este trabajo desde el GPS.\n\
							",
								work_info[work][work_info_NAME],
								(work_info[work][work_info_TYPE] == WORK_TYPE_NORMAL) ? ("normal") : ("complementario"),
								work_info[work][work_info_LEVEL]
						);
					}
				}
				
				switch(work)
				{
					case WORK_TAXI:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Solo súbete a un taxi y empieza a trabajar, recibirás las llamadas de los clientes.\n\
							Las personas que hayan llamado a la central de taxi aparecerán marcados de color amarillo.\n\
							Si tienes un GPS puedes utilizar /mapa para ver las personas que necesitan un taxi.\n\
							\n\
							El taxímetro se pondrá en marcha para el primer pasajero que se suba al taxi, el precio se\n\
							mide en precio por km, puedes ajustarlo con el comando /tarifa.\n\
							\n\
							",
								header
						);
					}
					case WORK_TRUCK:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Súbete a cualquier camión de la empresa y ve a cargarlo en cualquier punto de carga.\n\
							Según tu experiencia en el trabajo podrás transportar diferentes productos de más valor.\n\
							\n\
							",
								header
						);
					}
					case WORK_MECHANIC:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Para empezar a trabajar ve al taller y utiliza /mecanico para empezar a trabajar o dejar de trabajar.\n\
							Con este trabajo podrás reparar los vehículos dañados en el taller o ir a arreglarlos por San Andreas.\n\
							Las personas que hayan llamado al mecánico aparecerán marcados en el mapa.\n\
							Si tienes un GPS puedes utilizar /mapa para ver las personas que necesitan un mecánico.\n\
							Para reparar o tunear un vehículo usa /vmenu tras elegir una opción se le ofrecerá al dueño del vehículo\n\
							en caso de ser un vehículo personal, si no se le ofrecerá al conductor o el último conductor del vehículo.\n\
							\n\
							Puedes utilizar los vehículos de tu trabajo o tu vehículo personal.\n\
							Para cualquier reparación o modificación necesitarás piezas que puedes comprar en el taller.\n\
							Para reparar o modificar un vehículo utiliza cerca del vehículo el comando /vmenu.\n\
							\n\
							Si el vehículo no está en el mecánico y se puede remolcar tendrás que remolcarlo hasta el mecánico\n\
							para repararlo, se usa el comando /remolcar.\n\
							\n\
							En el taller también podrás pintar los vehículos.\n\
							Para tunearlos o remover componentes tendrás que haber realizado al menos 100 reparaciones en vehículos ajenos.\n\
							\n\
							",
								header
						);
					}
					case WORK_HARVESTER:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Súbete a una cosechadora y empieza a cosechar.\n\
							\n\
							",
								header
						);
					}
					case WORK_TRASH:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Para este trabajo se necesitan 2 personas, uno que conduzca el camión y otro que recoja la basura.\n\
							Para empezar a trabajar sube a alguien a un camión y selecciona la ruta que queráis realizar.\n\
							\n\
							Dependiendo de tu experiencia recogerás más rápido la basura.\n\
							\n\
							",
								header
						);
					}
					case WORK_LUMBERJACK:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Para empezar a trabajar ve a los árboles asignados y empieza a talar.\n\
							Dependiendo de tu experiencia tu velocidad talando irá aumentando.\n\
							\n\
							",
								header
						);
					}
					case WORK_FARMER:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Necesitarás semillas para poder plantar que puedes comprar en la granja.\n\
							Dependiendo de tu experiencia tu velocidad plantando irá aumentando.\n\
							\n\
							Después de que la planta crezca tienes 5 minutos para recogerla si no la planta se secará y se destruirá.\n\
							Cuando termines de plantar espera a que la planta termine de crecer, para recogerla.\n\
							Una vez recogida puedes vender el producto adquirido o usarlo para consumo propio.\n\
							\n\
							Cuida tus plantas, la gente puede destuirlas si le disparan.\n\
							\n\
							",
								header
						);
					}
					case WORK_POLICE:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Los policias en servicio aparecerán de color azul.\n\
							Utiliza /policias para ver la lista de policias, los rangos altos podrán desde aquí\n\
							bajar, subir el rango de los policias, también pueden expulsarlos del cuerpo.\n\
							\n\
							Utiliza /esposar para esposar o desesposar a alguien que tenga nivel de búsqueda.\n\
							Utiliza /revisar para ver las pertenencias del jugador esposado, utiliza /requisar para requisar las pertenencias ilegales.\n\
							Utiliza /arrestar en tu vehículo personal para detener a alguien que está esposado.\n\
							Utiliza /ref para pedir refuerzos.\n\
							Para utiliza el megáfono utiliza /m dentro de un vehículo policial.\n\
							Para entregar a alguien tiene que estar arrestado en un vehículo policial\n\
							y llevarlo a cualquiera de las 3 comisarías de San Andreas al parking y utilizar /entregar.\n\
							\n\
							Usa /control para añadir objetos como barreras etc.\n\
							Usa /allanar para entrar a una casa.\n\
							Usa /cepo para multar a un vehículo mal aparcado.\n\
							\n\
							Para ponerte de servicio ve a cualquier comisaría y busca el vestuario para /policia.\n\
							Los policias pueden equiparse en la comisaría.\n\
							Para utilizar la radio debes estar de servicio, puedes seleccionar la frecuencia con /frecuencias, uso: !texto.\n\
							Puedes abrir cualquier puerta de la comisaría pulsando la tecla F cerca de la puerta.\n\
							Los policias recibirán la paga en el payday, su paga dependerá de su rango.\n\
							\n\
							",
								header
						);
					}
					case WORK_PIZZA:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Súbete a una moto y empieza a repartir pizzas.\n\
							\n\
							",
								header
						);
					}
					case WORK_MEDIC:
					{
						format(dialog, sizeof dialog, 
						
							"\
							%s\
							\n\
							Ponte de servicio en cualquier hospital, tras esto verás a las personas que necesiten un médico\n\
							marcadas en el mapa, ve rápido hasta ellas para poder salvarlos a tiempo.\n\
							Para salvar la vida a alguien que este herido usa /curar.\n\
							\n\
							Cuando estás de servicio solo puedes conducir ambulancias.\n\
							\n\
							",
								header
						);
					}
				}
				
				ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, caption, dialog, "Cerrar", "");
			}
			return 1;
		}
		case DIALOG_ADMIN_LIST:
		{
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				else if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -2) // Siguiente
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if (cache_get_row_count(rows))
						{
							if (rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT]);

								if (PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] >= pages - 1) PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] = 0;
								else PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] ++;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					MySQL_TQueryInline(handle_db,  using inline OnCountQueryLoad, "SELECT COUNT(id) FROM player WHERE admin_level > 0;");
				}
				else if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -3) //Anterior
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if (cache_get_row_count(rows))
						{
							if (rows)
							{
								new count, pages;
								cache_get_value_index_int(0, 0, count);
								pages = GetDatabasePages(count, PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT]);

								if (PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] <= 0) PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] = pages - 1;
								else PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] --;
								ShowDialog(playerid, dialogid);
							}
						}
					}
					MySQL_TQueryInline(handle_db, using inline OnCountQueryLoad, "SELECT COUNT(id) FROM player WHERE admin_level > 0;");
				}
				else
				{
					if (PI[playerid][pi_ADMIN_LEVEL] >= 4)
					{
						PLAYER_TEMP[playerid][pt_SELECTED_DB_PID] = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
						ShowDialog(playerid, DIALOG_ADMIN_MODIFY);
					}
				}
			}
			return 1;
		}
		case DIALOG_ADMIN_MODIFY:
		{
			if (response)
			{
				if (listitem > PI[playerid][pi_ADMIN_LEVEL])
				{
					SendPlayerClientMessage(playerid, "El rango que has seleccionado es superior al tuyo.");
					return 1;
				}					
				
				inline OnDialogQueryLoad()
				{
					new rows;
					if (cache_get_row_count(rows))
					{
						if (rows)
						{
							new name[24], connected, pid, admin_level;
							cache_get_value_name(0, "name", name);
							cache_get_value_name_int(0, "connected", connected);
							cache_get_value_name_int(0, "playerid", pid);
							cache_get_value_name_int(0, "admin_level", admin_level);

							if (admin_level > PI[playerid][pi_ADMIN_LEVEL]) SendPlayerClientMessage(playerid, "No puedes modificar el rango de este admin porque es un rango superior al tuyo.");
							else
							{
								mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET admin_level = %d WHERE id = %d;", listitem, PLAYER_TEMP[playerid][pt_SELECTED_DB_PID]);
								mysql_tquery(handle_db, QUERY_BUFFER);
								SendPlayerClientMessage(playerid, "El nuevo rango de %s es: '%s'.", name, ADMIN_LEVELS[listitem]);
								if (connected)
								{
									PI[pid][pi_ADMIN_LEVEL] = listitem;
									SendPlayerClientMessage(pid, "%s cambió tu rango administrativo a: %s.", PI[playerid][pi_NAME], ADMIN_LEVELS[listitem]);
								}
							}
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT name, connected, playerid, admin_level FROM player WHERE id = %d;", PLAYER_TEMP[playerid][pt_SELECTED_DB_PID]);
				MySQL_TQueryInline(handle_db, using inline OnDialogQueryLoad, QUERY_BUFFER);
			}
			else ShowDialog(playerid, DIALOG_ADMIN_LIST);
			return 1;
		}
		case DIALOG_CHANGE_PASSWORD:
		{
			if (response)
			{
				if (!strlen(inputtext)) return ShowDialog(playerid, dialogid);

				if (SHA256_Verify(inputtext, PI[playerid][pi_SALT], PI[playerid][pi_PASS]))
				{
					ShowDialog(playerid, DIALOG_CHANGE_PASSWORD_PASS);
					PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP] = 0;
				}
				else // Error
				{
					PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP] ++;
					if (PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP] > MAX_BAD_LOGIN_ATTEMPS) return Kick(playerid);
					SendPlayerClientMessage(playerid, "Contraseña incorrecta, aviso %d/%d.", PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP], MAX_BAD_LOGIN_ATTEMPS);
				}
			}
			return 1;
		}
		case DIALOG_CHANGE_PASSWORD_PASS:
		{
			if (response)
			{
				if (strlen(inputtext) < MIN_PASS_LENGTH || strlen(inputtext) > MAX_PASS_LENGTH) return ShowDialog(playerid, dialogid);
				
				new salt[16];
				getRandomSalt(salt);
				format(PI[playerid][pi_SALT], 16, "%s", salt);
				SHA256_PassHash(inputtext, PI[playerid][pi_SALT], PI[playerid][pi_PASS], SHA256_HASH_LENGTH);
	
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET salt = '%e', pass = '%e' WHERE id = %d;", PI[playerid][pi_SALT], PI[playerid][pi_PASS], PI[playerid][pi_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendPlayerClientMessage(playerid, "Tu contraseña ha sido cambiada correctamente.");
			}
			return 1;
		}
		case DIALOG_ANTI_CHEAT:
		{
			if (PI[playerid][pi_ADMIN_LEVEL] < 4) return 1;
			
			if (response)
			{
				PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] = listitem;
				ShowDialog(playerid, DIALOG_ANTI_CHEAT_MODIFY);
			}
			return 1;
		}
		case DIALOG_ANTI_CHEAT_MODIFY:
		{
			if (PI[playerid][pi_ADMIN_LEVEL] < 4) return 1;
			
			if (response)
			{
				switch(listitem)
				{
					case 0:
					{
						if (ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Enabled]) ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Enabled] = false;
						else ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Enabled] = true;
					}
					case 1: return ShowDialog(playerid, DIALOG_ANTI_CHEAT_MODIFY_DETECT);
					case 2:
					{
						if (ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Kick]) ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Kick] = false;
						else ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Kick] = true;
					}
				}
				WriteAnticheatRules();
				ShowDialog(playerid, DIALOG_ANTI_CHEAT_MODIFY);
			}
			else ShowDialog(playerid, DIALOG_ANTI_CHEAT);
			return 1;
		}
		case DIALOG_ANTI_CHEAT_MODIFY_DETECT:
		{
			if (PI[playerid][pi_ADMIN_LEVEL] < 4) return 1;
			
			if (response)
			{
				new detections, seconds;
				if (sscanf(inputtext, "p<:>dd", detections, seconds))
				{
					SendPlayerClientMessage(playerid, "Sintaxis no válida.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (detections < 1 || detections > 99999)
				{
					SendPlayerClientMessage(playerid, "El número de detecciones debe ser 1 o mayor.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (seconds < 0 || seconds > 99999)
				{
					SendPlayerClientMessage(playerid, "Los segundos no pueden ser un valor negativo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Detections] = detections;
				ac_Info[ PLAYER_TEMP[playerid][pt_SELECTED_AC_LISTITEM] ][ac_Interval] = seconds;
				
				WriteAnticheatRules();
				ShowDialog(playerid, DIALOG_ANTI_CHEAT_MODIFY);
			}
			else ShowDialog(playerid, DIALOG_ANTI_CHEAT_MODIFY);
			return 1;
		}
		case DIALOG_CREATE_CREW:
		{
			if (response)
			{
				if (PI[playerid][pi_LEVEL] < 5) return SendPlayerClientMessage(playerid, "Necesitas ser nivel 5 para poder crear una banda.");
				ShowDialog(playerid, DIALOG_CREATE_CREW_NAME);
			}
			return 1;
		}
		case DIALOG_CREATE_CREW_NAME:
		{
			if (response)
			{
				if (strlen(inputtext) >= 32)
				{
					SendPlayerClientMessage(playerid, "Como máximo puedes introducir un nombre de 32 caracteres.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new crew_name[32];
				if (sscanf(inputtext, "s[32]", crew_name))
				{
					SendPlayerClientMessage(playerid, "Introduce un nombre para tu banda.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				format(PLAYER_TEMP[playerid][pt_CREATE_CREW_NAME], 32, "%s", crew_name);
				ShowDialog(playerid, DIALOG_CREATE_CREW_COLOR);
			}
			return 1;
		}
		case DIALOG_CREATE_CREW_COLOR:
		{
			if (response)
			{
				PLAYER_TEMP[playerid][pt_CREATE_CREW_COLOR] = listitem;
				ShowDialog(playerid, DIALOG_CREATE_CREW_CONFIRM);
			}
			else ShowDialog(playerid, DIALOG_CREATE_CREW_NAME);
			return 1;
		}
		case DIALOG_CREATE_CREW_CONFIRM:
		{
			if (response)
			{
				new index = GetAvaibleCrewIndex();
				if (index == -1)
				{
					SendPlayerClientMessage(playerid, "No se puede crear la banda porque no hay espacio disponible, el límite de bandas es %d.", MAX_CREWS);
					return 1;
				}
				
				if (600000 > PI[playerid][pi_CASH])
				{
					SendPlayerClientMessage(playerid, "Necesitas 600.000$ para crear la banda.");
					return 1;
				}
				
				if (GivePlayerCash(playerid, -600000, true, true)) {
					CREW_INFO[index][crew_VALID] = true;
					format(CREW_INFO[index][crew_NAME], 32, "%s", PLAYER_TEMP[playerid][pt_CREATE_CREW_NAME]);
					CREW_INFO[index][crew_COLOR] = RandomColors[ PLAYER_TEMP[playerid][pt_CREATE_CREW_COLOR] ];
		
					CREW_RANK_INFO[index][0][crew_rank_VALID] = true;
					format(CREW_RANK_INFO[index][0][crew_rank_NAME], 32, "Fundador");
					
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_CHANGE_NAME] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_INVITE] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_CAST_MEMBERS] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_MODIFY_MEMBERS] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_ADD_PROPERTIES] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_DELETE_PROPERTIES] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_CHANGE_COLOR] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_LEAVE_TERRITORY] =
					CREW_RANK_INFO[index][0][crew_rank_PERMISSION][CREW_RANK_DELETE] =
						
					NewCrewRegister(index, playerid);
					SetPlayerGangZones(playerid);				
					SendPlayerClientMessage(playerid, "La banda {%06x}'%s' {F5F5F5}se ha creado correctamente, usa {"#YELLOW_COLOR"}/banda {F5F5F5}para administrarla.", (CREW_INFO[index][crew_COLOR] >>> 8), CREW_INFO[index][crew_NAME]);
				}
			}
			return 1;
		}
		case DIALOG_CREW_MENU:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				
				switch(PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem])
				{
					case CREW_RANK_SIZE: //Lista de miembros
					{
						PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT] = 10;
						PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] = 0;
						ShowDialog(playerid, DIALOG_CREW_MEMBER_LIST);
					}
					case CREW_RANK_CHANGE_NAME:
					{
						if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_NAME]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
						if (CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendPlayerClientMessage(playerid, "No se puede cambiar el nombre de la banda cuando la banda está en combate.");
						ShowDialog(playerid, DIALOG_CREW_CHANGE_NAME);
					}
					case CREW_RANK_CAST_MEMBERS:
					{
						if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CAST_MEMBERS]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
						
						PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT] = 10;
						PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] = 0;						
						ShowDialog(playerid, DIALOG_CREW_MEMBER_LIST_DELETE);
					}
					
					case CREW_RANK_MODIFY_RANKS:
					{
						if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
						
						ShowDialog(playerid, DIALOG_CREW_RANKS);
					}
					case CREW_RANK_CHANGE_COLOR:
					{
						if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_COLOR]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
						
						if (CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendPlayerClientMessage(playerid, "No se puede cambiar el color cuando la banda está en combate.");
						ShowDialog(playerid, DIALOG_CREW_MODIFY_COLOR);
					}
					case CREW_RANK_DELETE:
					{
						if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_DELETE]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
						
						ShowDialog(playerid, DIALOG_CREW_DELETE);
					}
					case CREW_RANK_MODIFY_MEMBERS:
					{
						if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_MEMBERS]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
						
						PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT] = 10;
						PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] = 0;
						ShowDialog(playerid, DIALOG_CREW_MODIFY_MEMBERS);
					}
					case CREW_RANK_SIZE + 1: {
						new dialog[1000];
						strcatf(dialog, "{F5F5F5}Territorios\t{%06x}%d/%d\n", (CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8), GetCrewTerritories(PI[playerid][pi_CREW]), TOTAL_TERRITORIES);
						strcatf(dialog, "{F5F5F5}Tiempo de espera\t{%06x}%s\n", (CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8), TimeConvertAsText(300 - (gettime() - CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_LAST_ATTACK])));
						Dialog_Show(playerid, "CrewInfoResponse", DIALOG_STYLE_TABLIST, "Informacion de banda", dialog, "»Aceptar", "«Volver");
					}
					case CREW_RANK_SIZE + 2: //Abandonar banda
					{
						if (PI[playerid][pi_CREW_RANK] == 0)
						{
							inline OnCrewInfoLoad()
							{
								new rows;
								if (cache_get_row_count(rows))
								{
									new total;
									cache_get_value_index_int(0, 0, total);
									if (total <= 1) SendPlayerClientMessage(playerid, "No puedes abandonar la banda porque eres el único miembro con el rango fundador.");
									else ShowDialog(playerid, DIALOG_CREW_LEAVE);
								}
							}
							mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND crew_rank = 0;", PI[playerid][pi_CREW]);
							MySQL_TQueryInline(handle_db, using inline OnCrewInfoLoad, QUERY_BUFFER);
						}
						else ShowDialog(playerid, DIALOG_CREW_LEAVE);
					}
				}
			}
			return 1;
		}
		case DIALOG_CREW_MEMBER_LIST:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			
			ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_CHANGE_NAME:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_NAME]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendPlayerClientMessage(playerid, "No se puede cambiar el nombre de la banda cuando la banda está en combate.");
				if (strlen(inputtext) >= 32)
				{
					SendPlayerClientMessage(playerid, "Como máximo puedes introducir un nombre de 32 caracteres.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new crew_name[32];
				if (sscanf(inputtext, "s[32]", crew_name))
				{
					SendPlayerClientMessage(playerid, "Introduce un nombre para tu banda.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				format(CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_NAME], 32, "%s", crew_name);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE crews SET name = '%e' WHERE id = %d;", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_NAME], CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				//actualizar nombre casas pickups
				
				
				new message[145], label_str[256];
				format(message, sizeof message, "{%06x}[Banda] {F5F5F5}%s (%s) cambió el nombre de la banda a '%s'.", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_NAME], CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_NAME]);
				SendMessageToCrewMembers(PI[playerid][pi_CREW], message);
				
				
				for (new i = 0; i != MAX_PROPERTIES; i ++)
				{
					if (!PROPERTY_INFO[i][property_VALID]) continue;
					if (!PROPERTY_INFO[i][property_CREW]) continue;
					if (PROPERTY_INFO[i][property_CREW_ID] != PI[playerid][pi_CREW]) continue;
		
					format
					(
						label_str, 
						sizeof label_str, 
						"\
							Propiedad {"#PRIMARY_COLOR"}#%d\n\n\
							{F5F5F5}Banda: {"#PRIMARY_COLOR"}%s\n\
							{F5F5F5}Presiona {"#PRIMARY_COLOR"}Y {F5F5F5}para entrar.\
						", PROPERTY_INFO[i][property_ID], CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_NAME]
					);
					
					UpdateDynamic3DTextLabelText(PROPERTY_INFO[i][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
				}
				
				ShowDialog(playerid, DIALOG_CREW_MENU);
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_MEMBER_LIST_DELETE:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CAST_MEMBERS]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				PLAYER_TEMP[playerid][pt_SELECTED_DB_PID] = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
				
				inline OnCrewInfoLoad()
				{
					new rows;
					if (cache_get_row_count(rows))
					{
						if (rows)
						{
							new name[24], crew_rank;
							cache_get_value_index(0, 0, name);
							cache_get_value_index_int(0, 1, crew_rank);

							if (crew_rank < PI[playerid][pi_CREW_RANK]) SendPlayerClientMessage(playerid, "No puedes echar a este miembro porque es un rango superior al tuyo.");
							else
							{
								if (crew_rank == 0)
								{
									inline OnCountQueryLoad()
									{
										if (cache_get_row_count(rows))
										{
											if (rows)
											{
												new total;
												cache_get_value_index_int(0, 0, total);
												if (total <= 1) SendPlayerClientMessage(playerid, "No se puede echar a este miembro ya que es el único miembro con el rango fundador.");
												else ShowDialog(playerid, DIALOG_CREW_CAST_MEMBER_CONFIRM);
											}
										}
									}
									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND crew_rank = 0;", PI[playerid][pi_CREW]);
									MySQL_TQueryInline(handle_db, using inline OnCountQueryLoad, QUERY_BUFFER);
								}
								else ShowDialog(playerid, DIALOG_CREW_CAST_MEMBER_CONFIRM);
							}
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT name, crew_rank FROM player WHERE id = %d;", PLAYER_TEMP[playerid][pt_SELECTED_DB_PID]);
				MySQL_TQueryInline(handle_db, using inline OnCrewInfoLoad, QUERY_BUFFER);
				
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_CAST_MEMBER_CONFIRM:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CAST_MEMBERS]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				inline OnCrewInfoLoad()
				{
					new rows;
					if (cache_get_row_count(rows))
					{
						new name[24], connected, pid, crew_rank;
						cache_get_value_name(0, "name", name);
						cache_get_value_name_int(0, "connected", connected);
						cache_get_value_name_int(0, "playerid", pid);
						cache_get_value_name_int(0, "crew_rank", crew_rank);
						if (crew_rank < PI[playerid][pi_CREW_RANK]) SendPlayerClientMessage(playerid, "No puedes echar a este miembro porque es un rango superior al tuyo.");
						else
						{
							if (crew_rank == 0)
							{
								inline OnCountQueryLoad()
								{
									if (cache_get_row_count(rows))
									{
										if (rows)
										{
											new total;
											cache_get_value_index_int(0, 0, total);
											if (total <= 1) SendPlayerClientMessage(playerid, "No se puede echar a este miembro ya que es el único miembro con el rango fundador.");
											else
											{
												new message[145];
												format(message, sizeof message, "{%06x}[Banda] {F5F5F5}%s (%s) ha echado a %s de la banda.", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_NAME], name);
												SendMessageToCrewMembers(PI[playerid][pi_CREW], message);
											
												mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = NULL, crew_rank = 0 WHERE id = %d;", PLAYER_TEMP[playerid][pt_SELECTED_DB_PID]);
												mysql_tquery(handle_db, QUERY_BUFFER);
												
												CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_MEMBERS] --;
												if (connected)
												{
													CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_ONLINE_MEMBERS] --;
													SetPlayerNormalColor(pid);
													if (PLAYER_TEMP[playerid][pt_LAST_TERRITORY] != INVALID_STREAMER_ID)
													{
														TextDrawHideForPlayer(pid, TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_TEXTDRAW][1]);
														TextDrawHideForPlayer(pid, TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_TEXTDRAW][0]);
													}

													PI[pid][pi_CREW] = 0;
													PI[pid][pi_CREW_RANK] = 0;
													PLAYER_TEMP[pid][pt_CREW_INDEX] = 0;
													HidePlayerGangZones(pid);
												}
											}
										}
									}
								}
								mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND crew_rank = 0;", PI[playerid][pi_CREW]);
								MySQL_TQueryInline(handle_db, using inline OnCountQueryLoad, QUERY_BUFFER);
							}
							else
							{
								new message[145];
								format(message, sizeof message, "{%06x}[Banda] {F5F5F5}%s (%s) ha echado a %s de la banda.", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_NAME], name);
								SendMessageToCrewMembers(PI[playerid][pi_CREW], message);
							
								mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = NULL, crew_rank = 0 WHERE id = %d;", PLAYER_TEMP[playerid][pt_SELECTED_DB_PID]);
								mysql_tquery(handle_db, QUERY_BUFFER);
								
								CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_MEMBERS] --;
								if (connected)
								{
									CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_ONLINE_MEMBERS] --;
									SetPlayerNormalColor(pid);
									if (PLAYER_TEMP[playerid][pt_LAST_TERRITORY] != INVALID_STREAMER_ID)
									{
										TextDrawHideForPlayer(pid, TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_TEXTDRAW][1]);
										TextDrawHideForPlayer(pid, TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_TEXTDRAW][0]);
									}

									PI[pid][pi_CREW] = 0;
									PI[pid][pi_CREW_RANK] = 0;
									PLAYER_TEMP[pid][pt_CREW_INDEX] = 0;
									HidePlayerGangZones(pid);
								}
							}
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT name, connected, playerid, crew_rank FROM player WHERE id = %d;", PLAYER_TEMP[playerid][pt_SELECTED_DB_PID]);
				MySQL_TQueryInline(handle_db, using inline OnCrewInfoLoad, QUERY_BUFFER);
			}
			else ShowDialog(playerid, DIALOG_CREW_MEMBER_LIST_DELETE);
			return 1;
		}
		case DIALOG_CREW_INVITE_RANK:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_INVITE]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] < PI[playerid][pi_CREW_RANK])
				{
					SendPlayerClientMessage(playerid, "No puedes invitar con este rango porque es superior al tuyo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_CREW_INVITE_PID])) return SendPlayerClientMessage(playerid, "El jugador está desconectado.");
				
				new Float:pos[3]; GetPlayerPos(PLAYER_TEMP[playerid][pt_CREW_INVITE_PID], pos[0], pos[1], pos[2]);
				if (!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "Este jugador no está cerca tuya.");
				if (PLAYER_WORKS[ PLAYER_TEMP[playerid][pt_CREW_INVITE_PID] ][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "Esta persona es policia y no puede tener banda.");
				if (PI[ PLAYER_TEMP[playerid][pt_CREW_INVITE_PID] ][pi_CREW]) return SendPlayerClientMessage(playerid, "Esta persona pertenece a otra banda.");
				if (PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_CREW_INVITE_PID] ][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "No puedes invitar a este jugador ahora.");
				if (PI[ PLAYER_TEMP[playerid][pt_CREW_INVITE_PID] ][pi_ID] != PLAYER_TEMP[playerid][pt_CREW_INVITE_AID]) return SendPlayerClientMessage(playerid, "El jugador está desconectado.");
				
				SendPlayerClientMessage(playerid, "Has ofrecido a {"#BLUE_COLOR"}%s{F5F5F5} unirse a la banda con el rango {"#BLUE_COLOR"}%s{F5F5F5}.", PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_CREW_INVITE_PID] ][pt_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][crew_rank_NAME]);
				
				PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_CREW_INVITE_PID] ][pt_CREW_INVITE_INFO][0] = PI[playerid][pi_CREW];
				PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_CREW_INVITE_PID] ][pt_CREW_INVITE_INFO][1] = PLAYER_TEMP[playerid][pt_CREW_INDEX];
				PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_CREW_INVITE_PID] ][pt_CREW_INVITE_INFO][2] = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
				PLAYER_TEMP[ PLAYER_TEMP[playerid][pt_CREW_INVITE_PID] ][pt_CREW_INVITE_INFO][3] = gettime();
				ShowDialog(PLAYER_TEMP[playerid][pt_CREW_INVITE_PID], DIALOG_CREW_INVITE_ACCEPT);
			}
			return 1;
		}
		case DIALOG_CREW_INVITE_ACCEPT:
		{
			if (response)
			{
				if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INVITE_INFO][1] ][crew_VALID]) return SendPlayerClientMessage(playerid, "Esta banda ya no existe.");
				if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INVITE_INFO][1] ][ PLAYER_TEMP[playerid][pt_CREW_INVITE_INFO][2] ][crew_rank_VALID]) return SendPlayerClientMessage(playerid, "El rango que te han ofrecio ya no existe.");
				if (gettime() > PLAYER_TEMP[playerid][pt_CREW_INVITE_INFO][3] + 20) return SendPlayerClientMessage(playerid, "Has tardado mucho en aceptar.");
				if (CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INVITE_INFO][1] ][crew_FIGHTING]) return SendPlayerClientMessage(playerid, "No puedes unirte a la banda cuando la banda está en combate.");
				
				PI[playerid][pi_CREW] = PLAYER_TEMP[playerid][pt_CREW_INVITE_INFO][0];
				PI[playerid][pi_CREW_RANK] = PLAYER_TEMP[playerid][pt_CREW_INVITE_INFO][2];
				PLAYER_TEMP[playerid][pt_CREW_INDEX] = PLAYER_TEMP[playerid][pt_CREW_INVITE_INFO][1];
				CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_MEMBERS] ++;
				CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_ONLINE_MEMBERS] ++;
				PLAYER_TEMP[playerid][pt_LAST_GOT_CREW] = gettime();
				SetPlayerGangZones(playerid);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = %d, crew_rank = %d WHERE id = %d;", PI[playerid][pi_CREW], PI[playerid][pi_CREW_RANK], PI[playerid][pi_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				new message[145];
				format(message, sizeof message, "{%06x}[Banda] {F5F5F5}%s se ha unido a la banda con el rango %s.", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_NAME]);
				SendMessageToCrewMembers(PI[playerid][pi_CREW], message);
			}
			return 1;
		}
		case DIALOG_CREW_RANKS:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (listitem < PI[playerid][pi_CREW_RANK])
				{
					if (CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][listitem][crew_rank_VALID]) SendPlayerClientMessage(playerid, "No puedes modificar este rango porque es un rango superior al tuyo.");
					else SendPlayerClientMessage(playerid, "No puedes crear un rango en este puesto porque es superior al tuyo.");
					return 1;
				}
				
				PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] = listitem;
				if (CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][listitem][crew_rank_VALID]) ShowDialog(playerid, DIALOG_CREW_RANK_MODIFY);
				else ShowDialog(playerid, DIALOG_CREW_RANK_CREATE);
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_RANK_MODIFY:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_CREW_RANK_MODIFY_NAME);
					case 1:
					{
						if (PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] == 0)
						{
							SendPlayerClientMessage(playerid, "No se pueden modificar los permisos de este rango porque es el rango fundador.");
							return 1;
						}
						
						ShowDialog(playerid, DIALOG_CREW_RANK_MODIFY_PERMISS);
					}
					case 2:
					{
						if (PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] == 0)
						{
							SendPlayerClientMessage(playerid, "No se puede eliminar este rango porque es el rango fundador.");
							return 1;
						}
						
						SendPlayerClientMessage(playerid, "~r~[Atención] ~w~Selecciona el nuevo rango para los miembros que actualmente tienen el rango ~r~'%s'.", CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME]);
						ShowDialog(playerid, DIALOG_CREW_RANK_DELETE);
					}
				}
			}
			else ShowDialog(playerid, DIALOG_CREW_RANKS);
			return 1;
		}
		case DIALOG_CREW_RANK_MODIFY_NAME:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (strlen(inputtext) >= 32)
				{
					SendPlayerClientMessage(playerid, "Como máximo puedes introducir un nombre de 32 caracteres.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new rank_name[32];
				if (sscanf(inputtext, "s[32]", rank_name))
				{
					SendPlayerClientMessage(playerid, "Introduce el nuevo nombre para el rango.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				SendPlayerClientMessage(playerid, "Has modificado el nombre del rango '%s' a '%s'.", CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME], rank_name);
				format(CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME], 32, "%s", rank_name);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE crew_ranks SET rank_name = '%e' WHERE id = %d;",  CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
			}
			else ShowDialog(playerid, DIALOG_CREW_RANK_MODIFY);
			return 1;
		}
		case DIALOG_CREW_RANK_CREATE:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (strlen(inputtext) >= 32)
				{
					SendPlayerClientMessage(playerid, "Como máximo puedes introducir un nombre de 32 caracteres.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				new rank_name[32];
				if (sscanf(inputtext, "s[32]", rank_name))
				{
					SendPlayerClientMessage(playerid, "Introduce un nombre para el rango.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				if (CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_VALID])
				{
					SendPlayerClientMessage(playerid, "Parece que alguien ya ha creado un rango en este espacio.");
					return 1;
				}
				
				
				CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_VALID] = true;
				format(CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME], 32, "%s", rank_name);
				
				CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_NAME] =
				CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_INVITE] =
				CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_CAST_MEMBERS] =
				CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_MEMBERS] =
				CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS] =
				CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_ADD_PROPERTIES] =
				CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_DELETE_PROPERTIES] =
				CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_COLOR] =
				CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_LEAVE_TERRITORY] =
				CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][CREW_RANK_DELETE] = 0;
				RegisterNewCrewRank(PLAYER_TEMP[playerid][pt_CREW_INDEX], PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK]);
								
				SendPlayerClientMessage(playerid, "El rango '%s' ha sido creado, ahora puedes editarlo y darle permisos.", rank_name);
				ShowDialog(playerid, DIALOG_CREW_RANKS);
			}
			else ShowDialog(playerid, DIALOG_CREW_RANKS);
			return 1;
		}
		case DIALOG_CREW_RANK_MODIFY_PERMISS:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][listitem])
				{
					SendPlayerClientMessage(playerid, "No puedes cambiar este permiso porque tu no tienes este permiso.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				if (CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][listitem]) CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][listitem] = false;
				else CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][listitem] = true;
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE crew_ranks SET permission%d = %d WHERE id = %d;", listitem, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][listitem], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				ShowDialog(playerid, dialogid);
			}
			else ShowDialog(playerid, DIALOG_CREW_RANK_MODIFY);
			return 1;
		}
		case DIALOG_CREW_RANK_DELETE:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] < PI[playerid][pi_CREW_RANK])
				{
					SendPlayerClientMessage(playerid, "No puedes seleccionar este rango porque es superior al tuyo.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				PLAYER_TEMP[playerid][pt_CREW_SELECTED_NEW_RANK] = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
				ShowDialog(playerid, DIALOG_CREW_RANK_DELETE_CONFIRM);
			}
			return 1;
		}
		case DIALOG_CREW_RANK_DELETE_CONFIRM:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_RANKS]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew_rank = %d WHERE crew = %d AND crew_rank = %d;", PLAYER_TEMP[playerid][pt_CREW_SELECTED_NEW_RANK], PI[playerid][pi_CREW], PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK]);
				mysql_tquery(handle_db, QUERY_BUFFER);

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM crew_ranks WHERE id = %d;", CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
			
				SendPlayerClientMessage(playerid, "Has eliminado el rango '%s'.", CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME]);
			
				new message[145];
				format(message, sizeof message, "{%06x}[Banda] {F5F5F5}%s (%s) cambió tu rango al rango '%s'.", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_NEW_RANK] ][crew_rank_NAME]);
				
				foreach (new i : Player)
				{
					if (IsPlayerConnected(i))
					{
						if (PI[i][pi_CREW])
						{
							if (PI[i][pi_CREW] == PI[playerid][pi_CREW])
							{
								if (PI[i][pi_CREW_RANK] == PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK])
								{
									PI[i][pi_CREW_RANK] = PLAYER_TEMP[playerid][pt_CREW_SELECTED_NEW_RANK];
									SendPlayerClientMessage(i, message);
								}
							}
						}
					}
				}
				
				CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_VALID] = false;
				CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_ID] = 0;
				CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_NAME][0] = EOS;
				for (new i = 0; i != CREW_RANK_SIZE; i ++) CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_CREW_SELECTED_RANK] ][crew_rank_PERMISSION][i] = 0;
			
			}
			else ShowDialog(playerid, DIALOG_CREW_RANKS);
			return 1;
		}
		case DIALOG_CREW_MODIFY_COLOR:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_CHANGE_COLOR]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendPlayerClientMessage(playerid, "No se puede cambiar el color cuando la banda está en combate.");
				
				CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] = RandomColors[listitem];
				
				
				new r, g, b, a,		new_territory_color;
				HexToRGBA(CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR], r, g, b, a);
				new_territory_color = RGBAToHex(r, g, b, 135);
				for (new i = 0; i != MAX_TERRITORIES; i ++)
				{
					if (!TERRITORIES[i][territory_VALID]) continue;
					if (!TERRITORIES[i][territory_OCCUPIED]) continue;
					
					if (TERRITORIES[i][territory_CREW_ID] == PI[playerid][pi_CREW])
					{
						TERRITORIES[i][territory_COLOR] = new_territory_color;
						UpdateGangZoneColor(i);
					}
				}

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE crews SET color = %d WHERE id = %d;", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR], CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendPlayerClientMessage(playerid, "El color de la banda se ha cambiado.");
				ShowDialog(playerid, DIALOG_CREW_MENU);
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_DELETE:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_DELETE]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendPlayerClientMessage(playerid, "No se puede borrar la banda cuando está en combate.");
				
				new message[145];
				format(message, sizeof message, "{%06x}[Banda] {F5F5F5}%s (%s) ha eliminado la banda.", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_NAME]);

				new tmp_crew_id = PI[playerid][pi_CREW];
				new tmp_CREW_INFO[enum_CREW_INFO], old_crew_id = PI[playerid][pi_CREW];
				CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ] = tmp_CREW_INFO;
				
				new tmp_CREW_RANK_INFO[enum_CREW_RANK_INFO];
				for (new i = 0; i != MAX_CREW_RANKS; i ++) CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][i] = tmp_CREW_RANK_INFO;
				
				foreach (new i : Player)
				{
					if (IsPlayerConnected(i))
					{
						if (PI[i][pi_CREW])
						{
							if (PI[i][pi_CREW] == PI[playerid][pi_CREW])
							{
								SetPlayerNormalColor(i);
								HidePlayerGangZones(i);
								if (PLAYER_TEMP[i][pt_LAST_TERRITORY] != INVALID_STREAMER_ID)
								{
									TextDrawHideForPlayer(i, TERRITORIES[ PLAYER_TEMP[i][pt_LAST_TERRITORY] ][territory_TEXTDRAW][1]);
									TextDrawHideForPlayer(i, TERRITORIES[ PLAYER_TEMP[i][pt_LAST_TERRITORY] ][territory_TEXTDRAW][0]);
								}
								PI[i][pi_CREW] = 0;
								PI[i][pi_CREW_RANK] = 0;
								PLAYER_TEMP[i][pt_CREW_INDEX] = 0;
								SendPlayerClientMessage(i, message);
							}
						}
					}
				}
				
				for (new i = 0; i != MAX_TERRITORIES; i ++)
				{
					if (!TERRITORIES[ i ][territory_VALID]) continue;
					if (!TERRITORIES[ i ][territory_OCCUPIED]) continue;
					if (TERRITORIES[ i ][territory_CREW_ID] != old_crew_id) continue;
					
					TERRITORIES[ i ][territory_OCCUPIED] = false;
					TERRITORIES[ i ][territory_CREW_ID] = 0;
					TERRITORIES[ i ][territory_CREW_INDEX] = 0;
					TERRITORIES[ i ][territory_COLOR] = 0xCCCCCC55;
					UpdateGangZoneColor(i);
				}
				
				for (new i = 0; i != MAX_PROPERTIES; i ++)
				{
					if (!PROPERTY_INFO[i][property_VALID]) continue;
					if (!PROPERTY_INFO[i][property_CREW]) continue;
					if (PROPERTY_INFO[i][property_CREW_ID] != old_crew_id) continue;
					
					PROPERTY_INFO[ i ][property_SOLD] = false;
					PROPERTY_INFO[ i ][property_CREW] = false;
					PROPERTY_INFO[ i ][property_OWNER_ID] = 0;
					PROPERTY_INFO[ i ][property_CREW_ID] = 0;
					format(PROPERTY_INFO[ i ][property_NAME], 24, "PROPIEDAD %d", PROPERTY_INFO[ i ][property_ID]);
					
					new info[3];
					UpdateUnnocupiedPropertyLabel(i);
					
					DestroyDynamicPickup(PROPERTY_INFO[ i ][property_EXT_PICKUP_ID]);
					PROPERTY_INFO[ i ][property_EXT_PICKUP_ID] = INVALID_STREAMER_ID;
					
					PROPERTY_INFO[ i ][property_EXT_PICKUP_ID] = CreateDynamicPickup(1273, 1, PROPERTY_INFO[ i ][property_EXT_X], PROPERTY_INFO[ i ][property_EXT_Y], PROPERTY_INFO[ i ][property_EXT_Z], 0, PROPERTY_INFO[ i ][property_EXT_INTERIOR]);
					info[0] = PICKUP_TYPE_PROPERTY;
					info[1] = i; // Index
					info[2] = 2; // Pickup Exterior
					Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[ i ][property_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);

					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_player = NULL, id_territory = NULL WHERE id = %d;", PROPERTY_INFO[i][property_ID]);
					mysql_tquery(handle_db, QUERY_BUFFER);
				}

				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM crews WHERE id = %d;", tmp_crew_id);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				CallLocalFunction("OnCrewDeleted", "i", tmp_crew_id);
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_LEAVE:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			
			if (response)
			{
				if (PI[playerid][pi_CREW_RANK] == 0)
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if (cache_get_row_count(rows))
						{
							if (rows)
							{
								new total;
								cache_get_value_index_int(0, 0, total);
								if (total <= 1) SendPlayerClientMessage(playerid, "No puedes abandonar la banda porque eres el único miembro con el rango fundador.");
								else
								{
									new message[145];
									format(message, sizeof message, "{%06x}[Banda] {F5F5F5}%s (%s) ha abandonado la banda.", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_NAME]);
									SendMessageToCrewMembers(PI[playerid][pi_CREW], message);
									
									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = NULL, crew_rank = 0 WHERE id = %d;", PI[playerid][pi_ID]);
									mysql_tquery(handle_db, QUERY_BUFFER);
									
									SetPlayerNormalColor(playerid);
									CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_MEMBERS] --;
									CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_ONLINE_MEMBERS] --;
									HidePlayerGangZones(playerid);
									
									PI[playerid][pi_CREW] = 0;
									PI[playerid][pi_CREW_RANK] = 0;
									PLAYER_TEMP[playerid][pt_CREW_INDEX] = 0;
								}
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND crew_rank = 0;", PI[playerid][pi_CREW]);
					MySQL_TQueryInline(handle_db, using inline OnCountQueryLoad, QUERY_BUFFER);
				}
				else
				{
					new message[145];
					format(message, sizeof message, "{%06x}[Banda] {F5F5F5}%s (%s) ha abandonado la banda.", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_NAME]);
					SendMessageToCrewMembers(PI[playerid][pi_CREW], message);
					
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = NULL, crew_rank = 0 WHERE id = %d;", PI[playerid][pi_ID]);
					mysql_tquery(handle_db, QUERY_BUFFER);
					
					SetPlayerNormalColor(playerid);
					CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_MEMBERS] --;
					CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_ONLINE_MEMBERS] --;
					HidePlayerGangZones(playerid);
					
					PI[playerid][pi_CREW] = 0;
					PI[playerid][pi_CREW_RANK] = 0;
					PLAYER_TEMP[playerid][pt_CREW_INDEX] = 0;
				}
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_MODIFY_MEMBERS:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_MEMBERS]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				else
				{
					PLAYER_TEMP[playerid][pt_SELECTED_DB_PID] = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
					ShowDialog(playerid, DIALOG_CREW_MODIFY_MEMBER);
				}
			}
			else ShowDialog(playerid, DIALOG_CREW_MENU);
			return 1;
		}
		case DIALOG_CREW_MODIFY_MEMBER:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_MODIFY_MEMBERS]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -1) return 1;
				
				if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] < PI[playerid][pi_CREW_RANK])
				{
					SendPlayerClientMessage(playerid, "No puedes dar este rango porque es un rango superior al tuyo.");
					return 1;
				}
				
				inline OnCrewInfoLoad()
				{
					new rows;
					if (cache_get_row_count(rows))
					{
						if (rows)
						{
							new name[24], connected, pid, crew_rank;
							cache_get_value_name(0, "name", name);
							cache_get_value_name_int(0, "connected", connected);
							cache_get_value_name_int(0, "playerid", pid);
							cache_get_value_name_int(0, "crew_rank", crew_rank);

							if (crew_rank < PI[playerid][pi_CREW_RANK]) SendPlayerClientMessage(playerid, "No puedes modificar el rango de este miembro porque es un rango superior al tuyo.");
							else
							{
								if (crew_rank == 0)
								{
									inline OnCountQueryLoad()
									{
										if (cache_get_row_count(rows))
										{
											if (rows)
											{
												new total;
												cache_get_value_index_int(0, 0, total);
												if (total <= 1) SendPlayerClientMessage(playerid, "No se puede modificar el rango de este miembro ya que es el único miembro con el rango fundador.");
												else
												{
													mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew_rank = %d WHERE id = %d;", PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem], PLAYER_TEMP[playerid][pt_SELECTED_DB_PID]);
													mysql_tquery(handle_db, QUERY_BUFFER);

													new message[145];
													if (connected)
													{
														PI[pid][pi_CREW_RANK] = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
														format(message, sizeof message, "{%06x}[Banda] {F5F5F5}%s (%s) cambió tu rango al rango '%s'.", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][crew_rank_NAME]);
														SendPlayerClientMessage(pid, message);
													}
													format(message, sizeof message, "Has modificado el rango de '%s' al rango '%s'.", name, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][crew_rank_NAME]);
													SendPlayerClientMessage(playerid, message);
												}
											}
										}
									}
									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND crew_rank = 0;", PI[playerid][pi_CREW]);
									MySQL_TQueryInline(handle_db, using inline OnCountQueryLoad, QUERY_BUFFER);
								}
								else
								{
									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew_rank = %d WHERE id = %d;", PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem], PLAYER_TEMP[playerid][pt_SELECTED_DB_PID]);
									mysql_tquery(handle_db, QUERY_BUFFER);

									new message[145];
									if (connected)
									{
										PI[pid][pi_CREW_RANK] = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
										format(message, sizeof message, "{%06x}[Banda] {F5F5F5}%s (%s) cambió tu rango al rango '%s'.", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][crew_rank_NAME]);
										SendPlayerClientMessage(pid, message);
									}
									format(message, sizeof message, "Has modificado el rango de '%s' al rango '%s'.", name, CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] ][crew_rank_NAME]);
									SendPlayerClientMessage(playerid, message);
								}
							}							
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT name, connected, playerid, crew_rank FROM player WHERE id = %d;", PLAYER_TEMP[playerid][pt_SELECTED_DB_PID]);
				MySQL_TQueryInline(handle_db, using inline OnCrewInfoLoad, QUERY_BUFFER);
			}
			else ShowDialog(playerid, DIALOG_CREW_MODIFY_MEMBERS);
			return 1;
		}
		case DIALOG_CREW_PROPERTY_CONFIRM:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_ADD_PROPERTIES]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (!TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_VALID]) return SendPlayerClientMessage(playerid, "La propiedad no está dentro de un territorio de tu banda.");
				if (!TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_OCCUPIED]) return SendPlayerClientMessage(playerid, "La propiedad no está dentro de un territorio de tu banda.");
				if (TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_CREW_ID] != PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "La propiedad no está dentro de un territorio de tu banda.");
				if (!IsPointInDynamicArea(TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_AREA], PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_X], PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_Y], PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_Z])) return SendPlayerClientMessage(playerid, "La propiedad no está dentro de un territorio de tu banda.");
				if (PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_OWNER_ID] != PI[playerid][pi_ID]) return SendPlayerClientMessage(playerid, "Esta no es tu propiedad.");
				
				
				new index = PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED];
				PROPERTY_INFO[ index ][property_CREW] = true;
				PROPERTY_INFO[ index ][property_OWNER_ID] = 0;
				PROPERTY_INFO[ index ][property_CREW_ID] = PI[playerid][pi_CREW];
				format(PROPERTY_INFO[ index ][property_NAME], 24, "PROPIEDAD %d", PROPERTY_INFO[ index ][property_ID]);
				
				new label_str[256];
				format
				(
					label_str, 
					sizeof label_str, 
					"\
						Propiedad {"#PRIMARY_COLOR"}#%d\n\n\
						{F5F5F5}Banda: {"#PRIMARY_COLOR"}%s\n\
						{F5F5F5}Presiona {"#PRIMARY_COLOR"}Y {F5F5F5}para entrar.\
					", PROPERTY_INFO[index][property_ID], CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_NAME]
				);
				UpdateDynamic3DTextLabelText(PROPERTY_INFO[ index ][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_player = NULL, id_territory = %d WHERE id = %d;", TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_ID], PROPERTY_INFO[index][property_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				new message[145];

				new territory_zone[32];
				GetAreaZone(
					TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_MIN_X],
					TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_MIN_Y],
					territory_zone
				);

				format(message, sizeof message, "{%06x}[Banda] {F5F5F5}%s (%s) ha añadido una nueva propiedad en %s.", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME], CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_NAME], territory_zone);
				SendMessageToCrewMembers(PI[playerid][pi_CREW], message);
			}
			return 1;
		}
		case DIALOG_CREW_LEAVE_TERRITORY:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_LEAVE_TERRITORY]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (!IsPlayerInDynamicArea(playerid, TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_AREA])) return SendPlayerClientMessage(playerid, "No estás en un territorio de tu banda.");
				if (TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_CREW_ID] != PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No estás en un territorio de tu banda.");			
				if (CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendPlayerClientMessage(playerid, "No puedes abandonar territorios mientras tu banda está en combate.");
				if (TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_WAR]) return SendPlayerClientMessage(playerid, "No se puede abandonar este territorio cuando está siendo conquistado.");

				TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_OCCUPIED] = false;
				TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_CREW_ID] = 0;
				TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_CREW_INDEX] = 0;
				TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_COLOR] = 0xCCCCCC55;
				UpdateGangZoneColor(PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO]);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE territories SET id_crew = NULL WHERE id = %d;", TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				CallLocalFunction("OnCrewLeftTerritory", "iiii", PI[playerid][pi_CREW], PLAYER_TEMP[playerid][pt_CREW_INDEX], TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_ID], PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO]);
				
				for (new i = 0; i != MAX_PROPERTIES; i ++)
				{
					if (!PROPERTY_INFO[i][property_VALID]) continue;
					if (!PROPERTY_INFO[i][property_CREW]) continue;
					if (PROPERTY_INFO[i][property_CREW_ID] != PI[playerid][pi_CREW]) continue;
					
					if (IsPointInDynamicArea(TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_AREA], PROPERTY_INFO[i][property_EXT_X], PROPERTY_INFO[i][property_EXT_Y], PROPERTY_INFO[i][property_EXT_Z]))
					{
						PROPERTY_INFO[ i ][property_SOLD] = false;
						PROPERTY_INFO[ i ][property_CREW] = false;
						PROPERTY_INFO[ i ][property_OWNER_ID] = 0;
						PROPERTY_INFO[ i ][property_CREW_ID] = 0;
						format(PROPERTY_INFO[ i ][property_NAME], 24, "PROPIEDAD %d", PROPERTY_INFO[ i ][property_ID]);
						
						new info[3];
						UpdateUnnocupiedPropertyLabel(i);
						
						DestroyDynamicPickup(PROPERTY_INFO[ i ][property_EXT_PICKUP_ID]);
						PROPERTY_INFO[ i ][property_EXT_PICKUP_ID] = INVALID_STREAMER_ID;
						
						PROPERTY_INFO[ i ][property_EXT_PICKUP_ID] = CreateDynamicPickup(1273, 1, PROPERTY_INFO[ i ][property_EXT_X], PROPERTY_INFO[ i ][property_EXT_Y], PROPERTY_INFO[ i ][property_EXT_Z], 0, PROPERTY_INFO[ i ][property_EXT_INTERIOR]);
						info[0] = PICKUP_TYPE_PROPERTY;
						info[1] = i; // Index
						info[2] = 2; // Pickup Exterior
						Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[ i ][property_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
							
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_player = NULL, id_territory = NULL WHERE id = %d;", PROPERTY_INFO[ i ][property_ID]);
						mysql_tquery(handle_db, QUERY_BUFFER);
					}
				}
				
				new message[145];

				new territory_zone[32];
				GetAreaZone(
					TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_MIN_X],
					TERRITORIES[ PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] ][territory_MIN_Y],
					territory_zone
				);

				format(message, sizeof message, "{%06x}[BANDAS] {F5F5F5}La banda '%s' ha abandonado un territorio en %s.", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_NAME], territory_zone);
				foreach (new i : Player)
				{
					if (IsPlayerConnected(i))
					{
						if (PI[i][pi_CREW])
						{
							SendPlayerClientMessage(i, message);
						}
					}
				}
			}
			return 1;
		}
		case DIALOG_CREW_LEAVE_PROPERTY:
		{
			if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
			if (!CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_VALID]) return SendPlayerClientMessage(playerid, "La banda ya no existe.");
			if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_DELETE_PROPERTIES]) return SendPlayerClientMessage(playerid, "No tienes permiso.");
			
			if (response)
			{
				if (!PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_CREW]) return SendPlayerClientMessage(playerid, "Esta no es una propiedad de tu banda.");
				if (PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_CREW_ID] != PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "Esta no es una propiedad de tu banda.");
				if (CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendPlayerClientMessage(playerid, "No puedes liberar una propiedad cuando tu banda está en combate.");
			
				PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_SOLD] = false;
				PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_CREW] = false;
				PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_OWNER_ID] = 0;
				PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_CREW_ID] = 0;
				format(PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_NAME], 24, "PROPIEDAD %d", PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID]);
				
				new info[3];
				UpdateUnnocupiedPropertyLabel(PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED]);
				
				DestroyDynamicPickup(PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_PICKUP_ID]);
				PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_PICKUP_ID] = INVALID_STREAMER_ID;
				
				PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_PICKUP_ID] = CreateDynamicPickup(1273, 1, PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_X], PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_Y], PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_Z], 0, PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_INTERIOR]);
				info[0] = PICKUP_TYPE_PROPERTY;
				info[1] = PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED]; // Index
				info[2] = 2; // Pickup Exterior
				Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
						
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_player = NULL, id_territory = NULL WHERE id = %d;", PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PLAYER_PROPERTY_SELECTED] ][property_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendPlayerClientMessage(playerid, "La propiedad ha sido liberada.");
			}
			return 1;
		}
		case DIALOG_POLICE_PENALTY:
		{
			if (response)
			{
				if (gettime() > PLAYER_TEMP[playerid][pt_POLICE_PEN_TIME] + 20) return SendPlayerClientMessage(playerid, "Has tardardo mucho en aceptarlo.");
				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_POLICE_PEN_PID])) return SendPlayerClientMessage(playerid, "El policia ya no está en el servidor.");
				if (PI[ PLAYER_TEMP[playerid][pt_POLICE_PEN_PID] ][pi_ID] != PLAYER_TEMP[playerid][pt_POLICE_PEN_AID]) return SendPlayerClientMessage(playerid, "El policia ya no está en el servidor.");

				new Float:pos[3]; GetPlayerPos(PLAYER_TEMP[playerid][pt_POLICE_PEN_PID], pos[0], pos[1], pos[2]);
				if (!IsPlayerInRangeOfPoint(playerid, 5.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "El policia no está cerca tuya.");
				
				if (PLAYER_TEMP[playerid][pt_POLICE_PEN_IM] > PI[playerid][pi_CASH])
				{
					SendPlayerClientMessage(playerid, "No tienes dinero para pagar la multa.");
					SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_POLICE_PEN_PID], "{f5f5f5}La persona ha aceptado la multa pero no tiene dinero para pagarla.");
					return 1;
				}
				
				if (GivePlayerCash(playerid, -PLAYER_TEMP[playerid][pt_POLICE_PEN_IM], true, true) && GivePlayerCash(PLAYER_TEMP[playerid][pt_POLICE_PEN_PID], PLAYER_TEMP[playerid][pt_POLICE_PEN_IM]/2, true, false)) {
					SetPlayerWantedLevelEx(playerid, 0);

					SendPlayerClientMessage(playerid, "La multa ha sido pagada.");
					SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_POLICE_PEN_PID], "{f5f5f5}La persona ha pagado la multa, la mitad del importe es para ti.");
				}
			
			}
			else
			{
				if (gettime() > PLAYER_TEMP[playerid][pt_POLICE_PEN_TIME] + 20) return 1;
				if (!IsPlayerConnected(PLAYER_TEMP[playerid][pt_POLICE_PEN_PID])) return 1;
				if (PI[ PLAYER_TEMP[playerid][pt_POLICE_PEN_PID] ][pi_ID] != PLAYER_TEMP[playerid][pt_POLICE_PEN_AID]) return 1;
				
				SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_POLICE_PEN_PID], "{f5f5f5}La persona se ha negado a pagar la multa.");
				if (PI[playerid][pi_WANTED_LEVEL] < 6) SetPlayerWantedLevelEx(playerid, PI[playerid][pi_WANTED_LEVEL] + 1);
			}
			return 1;
		}
		case DIALOG_SU_BUY:
		{
			if (response)
			{
				if (VIP_BUY_COINS_PRICE > PI[playerid][pi_COINS])
				{
					SendPlayerClientMessage(playerid, "{666666}Te faltan %d "SERVER_COIN" para poder comprar VIP.", VIP_BUY_COINS_PRICE - PI[playerid][pi_COINS]);
					return 1;
				}
				
				SetPlayerVip(playerid, true, VIP_BUY_COINS_PRICE, 30);
			}
			return 1;
		}
		case DIALOG_SU:
		{
			if (response)
			{
				if (VIP_CASH_PRICE > PI[playerid][pi_CASH])
				{
					SendPlayerClientMessage(playerid, "Te faltan %s$ para poder renovar VIP.", number_format_thousand(VIP_CASH_PRICE - PI[playerid][pi_CASH]));
					return 1;
				}

				PI[playerid][pi_CASH] -= VIP_CASH_PRICE;
				ResetPlayerMoney(playerid);
				GivePlayerMoney(playerid, PI[playerid][pi_CASH]);

				inline OnInfoQueryLoad()
				{
					inline OnCountQueryLoad()
					{
						new rows;
						if (cache_get_row_count(rows))
						{
							if (rows)
							{
								cache_get_value_index(0, 0, PI[playerid][pi_VIP_EXPIRE_DATE]);
								SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}¡Felicidades! {F5F5F5}Has renovado tu VIP (%d) por 30 días, fecha de caducidad: %s.", PI[playerid][pi_VIP], PI[playerid][pi_VIP_EXPIRE_DATE]);
								SendPlayerClientMessage(playerid, "Puedes utilizar {"#PRIMARY_COLOR"}/vip {F5F5F5}para ver el tiempo restante o renovar.");
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT vip_expire_date FROM player WHERE id = %d;", PI[playerid][pi_ID]);
					MySQL_TQueryInline(handle_db, using inline OnCountQueryLoad, QUERY_BUFFER);
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET cash = %d, vip = %d, vip_expire_date = DATE_ADD(NOW(), INTERVAL 30 DAY) WHERE id = %d;", PI[playerid][pi_CASH], PI[playerid][pi_VIP], PI[playerid][pi_ID]);
				MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
			}
			return 1;
		}
		case DIALOG_VOBJECT_MENU:
		{
			if (response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_VOBJECT_OBJECTS);
					case 1: //Comprar
					{
						new slot = GetVehicleFreeObjectSlot(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID]);
						if (!PI[playerid][pi_VIP] && slot >= MAX_NU_VOBJECTS)
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendPlayerClientMessage(playerid, "¡Los jugadores ~y~VIP ~w~pueden tener hasta %d objetos en vehículos! Usa ~y~/ayuda ~w~si quieres ser ~y~VIP.", MAX_SU_VOBJECTS);
							ShowDialog(playerid, dialogid);
							return 1;
						}
						if (slot == -1)
						{
							SendPlayerClientMessage(playerid, "No hay más espacio para objetos en este vehículo.");
							ShowDialog(playerid, dialogid);
							return 1;
						}
						
						PLAYER_TEMP[playerid][pt_TUNING_GARAGE_SHOP] = true;
						
						new Float:p[6];
						GetPlayerCameraPos(playerid, p[0], p[1], p[2]);
						GetPlayerCameraLookAt(playerid, p[3], p[4], p[5]);
						InterpolateCameraPos(playerid, p[0], p[1], p[2], 265.3348, 14.0199, 3.6937, 2000);
						InterpolateCameraLookAt(playerid, p[3], p[4], p[5], 268.2404, 11.4559, 2.2, 2000);
						
						TextDrawShowForPlayer(playerid, Textdraws[textdraw_SHOP_TUNING][0]);
						TextDrawShowForPlayer(playerid, Textdraws[textdraw_SHOP_TUNING][1]);
						TextDrawShowForPlayer(playerid, Textdraws[textdraw_SHOP_TUNING][2]);
						TextDrawShowForPlayer(playerid, Textdraws[textdraw_SHOP_TUNING][3]);
						TextDrawShowForPlayer(playerid, Textdraws[textdraw_SHOP_TUNING][4]);
						PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TUNING_SHOP]);
						//PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] = 0;
						
						UpdateTuningShop(playerid);
						
						SendPlayerClientMessage(playerid, "Pulsa ~r~'ESCAPE' ~w~para dejar de comprar objetos.");
						SelectTextDrawEx(playerid, 0xe8d08fFF);
					}
					case 2:
					{
						new slot = GetVehicleFreeObjectSlot(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID]);
						if (!PI[playerid][pi_VIP] && slot >= MAX_NU_VOBJECTS)
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendPlayerClientMessage(playerid, "¡Los jugadores ~y~VIP ~w~pueden tener hasta %d objetos en vehículos! Usa ~y~/ayuda ~w~si quieres ser ~y~VIP.", MAX_SU_VOBJECTS);
							ShowDialog(playerid, dialogid);
							return 1;
						}
						if (slot == -1)
						{
							SendPlayerClientMessage(playerid, "No hay más espacio para objetos en este vehículo.");
							ShowDialog(playerid, dialogid);
							return 1;
						}
						
						if (500 > PI[playerid][pi_CASH])
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendPlayerClientMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder comprar este objeto.", number_format_thousand(500 - PI[playerid][pi_CASH]));
							ShowDialog(playerid, dialogid);
							return 1;
						}
						
						if (GivePlayerCash(playerid, -500, true, true)) {
							VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_VALID] = true;
							VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_TYPE] = VOBJECT_TYPE_TEXT;
							VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_ID] = 0;
							VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_MODELID] = 19327;
							format(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_NAME], 32, "Texto");
							VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_ATTACHED] = true;
							
							format(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_text_TEXT], 32, "Mi texto");
							format(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_text_FONT], 24, "Arial");
							VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_text_FONT_SIZE] = 24;
							VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_text_BOLD] = false;
							VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_text_FONT_COLOR] = 0xFF000000;
							
							RegisterNewVehicleObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], slot);
							UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], slot, true);
							
							SendPlayerClientMessage(playerid, "El objeto de texto ha sido añadido.");
							PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] = slot;
							ShowDialog(playerid, DIALOG_VOBJECT_OBJECT);
						}
						else ShowDialog(playerid, dialogid);
					}
					case 3:
					{
						new slot = GetVehicleFreeObjectSlot(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID]);
						if (!PI[playerid][pi_VIP] && slot >= MAX_NU_VOBJECTS)
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendPlayerClientMessage(playerid, "¡Los jugadores ~y~VIP ~w~pueden tener hasta %d objetos en vehículos! Usa ~y~/ayuda ~w~si quieres ser ~y~VIP.", MAX_SU_VOBJECTS);
							ShowDialog(playerid, dialogid);
							return 1;
						}
						if (slot == -1)
						{
							SendPlayerClientMessage(playerid, "No hay más espacio para objetos en este vehículo.");
							ShowDialog(playerid, dialogid);
							return 1;
						}
						
						if (2000 > PI[playerid][pi_CASH])
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendPlayerClientMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder comprar este objeto.", number_format_thousand(2000 - PI[playerid][pi_CASH]));
							ShowDialog(playerid, dialogid);
							return 1;
						}
						
						PLAYER_TEMP[playerid][pt_COUNTRY_TYPE] = 0;
						ShowDialog(playerid, DIALOG_VOBJECT_COUNTRY);
					}
					case 4:
					{
						new slot = GetVehicleFreeObjectSlot(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID]);
						if (!PI[playerid][pi_VIP] && slot >= MAX_NU_VOBJECTS)
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendPlayerClientMessage(playerid, "¡Los jugadores ~y~VIP ~w~pueden tener hasta %d objetos en vehículos! Usa ~y~/ayuda ~w~si quieres ser ~y~VIP.", MAX_SU_VOBJECTS);
							ShowDialog(playerid, dialogid);
							return 1;
						}
						if (slot == -1)
						{
							SendPlayerClientMessage(playerid, "No hay más espacio para objetos en este vehículo.");
							ShowDialog(playerid, dialogid);
							return 1;
						}
						
						if (2000 > PI[playerid][pi_CASH])
						{
							PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
							SendPlayerClientMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder comprar este objeto.", number_format_thousand(2000 - PI[playerid][pi_CASH]));
							ShowDialog(playerid, dialogid);
							return 1;
						}
						
						PLAYER_TEMP[playerid][pt_COUNTRY_TYPE] = 1;
						ShowDialog(playerid, DIALOG_VOBJECT_COUNTRY);
					}
				}
			}
			else
			{
				PLAYER_TEMP[playerid][pt_IN_TUNING_GARAGE] = false;
				SetVehicleVirtualWorldEx(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], 0);
				SetPlayerVirtualWorld(playerid, 0);
				SetVehiclePosEx(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], 246.551910, 17.474195, 2.363841);
				SetVehicleZAngle(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], 0.0);
				
				GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][gb_vehicle_PARAMS_ENGINE] = 1;
				UpdateVehicleParams(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID]);
				
				if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) PutPlayerInVehicleEx(playerid, PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], 0);
				
				ShowPlayerSpeedoMeter(playerid);
				SetCameraBehindPlayer(playerid);
			}
			return 1;
		}
		case DIALOG_VOBJECT_COUNTRY:
		{
			if (response)
			{
				new slot = GetVehicleFreeObjectSlot(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID]);
				if (!PI[playerid][pi_VIP] && slot >= MAX_NU_VOBJECTS)
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "¡Los jugadores ~y~VIP ~w~pueden tener hasta %d objetos en vehículos! Usa ~y~/ayuda ~w~si quieres ser ~y~VIP.", MAX_SU_VOBJECTS);
					ShowDialog(playerid, DIALOG_VOBJECT_MENU);
					return 1;
				}
				if (slot == -1)
				{
					SendPlayerClientMessage(playerid, "No hay más espacio para objetos en este vehículo.");
					ShowDialog(playerid, DIALOG_VOBJECT_MENU);
					return 1;
				}
				
				if (2000 > PI[playerid][pi_CASH])
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder comprar este objeto.", number_format_thousand(2000 - PI[playerid][pi_CASH]));
					ShowDialog(playerid, DIALOG_VOBJECT_MENU);
					return 1;
				}
				
				if (GivePlayerCash(playerid, -2000, true, true)) {
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_VALID] = true;
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_ID] = 0;
					if (PLAYER_TEMP[playerid][pt_COUNTRY_TYPE] == 0)
					{
						VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_TYPE] = VOBJECT_TYPE_COUNTRY_FLAG;
						VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_MODELID] = 19307;
					}
					else if (PLAYER_TEMP[playerid][pt_COUNTRY_TYPE] == 1)
					{
						VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_TYPE] = VOBJECT_TYPE_COUNTRY_PANEL;
						VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_MODELID] = 2661;
					}
					format(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_NAME], 32, "Pais");
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_ATTACHED] = true;
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_COLORS][0] = listitem;
					
					RegisterNewVehicleObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], slot);
					UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], slot, true);
					
					SendPlayerClientMessage(playerid, "El objeto ha sido añadido.");
					PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] = slot;
					ShowDialog(playerid, DIALOG_VOBJECT_OBJECT);
				}
				else ShowDialog(playerid, DIALOG_VOBJECT_MENU);
			}
			else ShowDialog(playerid, DIALOG_VOBJECT_MENU);
			return 1;
		}
		case DIALOG_VOBJECT_OBJECTS:
		{
			if (response)
			{
				if (listitem == MAX_SU_VOBJECTS) return ShowDialog(playerid, DIALOG_VOBJECT_DELETE_ALL);
				if (!VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][listitem][vobject_VALID])
				{
					SendPlayerClientMessage(playerid, "Este slot está vacío, aquí puedes comprar un nuevo objeto.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] = listitem;
				ShowDialog(playerid, DIALOG_VOBJECT_OBJECT);
			}
			else ShowDialog(playerid, DIALOG_VOBJECT_MENU);
			return 1;
		}
		case DIALOG_VOBJECT_OBJECT:
		{
			if (response)
			{
				switch(listitem)
				{
					case 0:
					{
						if (VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ATTACHED])
						{
							SendPlayerClientMessage(playerid, "Objeto guardado.");
							VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ATTACHED] = false;
							UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT]);
							ShowDialog(playerid, DIALOG_VOBJECT_OBJECT);
						}
						else
						{
							SendPlayerClientMessage(playerid, "Objeto colocado.");
							VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ATTACHED] = true;
							UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT], true);
							ShowDialog(playerid, DIALOG_VOBJECT_OBJECT);
						}
					}
					case 1: ShowDialog(playerid, DIALOG_VOBJECT_OBJECT_CNAME);
					case 2:
					{
						if (!VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ATTACHED])
						{
							SendPlayerClientMessage(playerid, "Debes colocar el objeto primero.");
							ShowDialog(playerid, dialogid);
							return 1;
						}
							
						EditVehicleObject(playerid, PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT]);
					}
					case 3:
					{
						switch(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_TYPE])
						{
							case VOBJECT_TYPE_OBJECT:
							{
								if (!VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ATTACHED])
								{
									SendPlayerClientMessage(playerid, "Debes colocar el objeto primero.");
									ShowDialog(playerid, dialogid);
									return 1;
								}
								ShowDialog(playerid, DIALOG_VOBJECT_OBJECT_COLORS);
							}
							case VOBJECT_TYPE_TEXT:
							{
								if (!VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ATTACHED])
								{
									SendPlayerClientMessage(playerid, "Debes colocar el objeto primero.");
									ShowDialog(playerid, dialogid);
									return 1;
								}
								ShowDialog(playerid, DIALOG_VOBJECT_TEXT_MENU);
							}
							case VOBJECT_TYPE_COUNTRY_FLAG, VOBJECT_TYPE_COUNTRY_PANEL: ShowDialog(playerid, DIALOG_VOBJECT_OBJECT_CDELETE);
						}
					}
					case 4: ShowDialog(playerid, DIALOG_VOBJECT_OBJECT_CDELETE);
				}
			
			}
			else
			{
				UpdateVehicleObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT]);
				ShowDialog(playerid, DIALOG_VOBJECT_OBJECTS);
			}
			return 1;
		}
		case DIALOG_VOBJECT_OBJECT_CNAME:
		{
			if (response)
			{
				if (!strlen(inputtext) || strlen(inputtext) > 32)
				{
					SendPlayerClientMessage(playerid, "El nombre del objeto debe contener de 1 a 32 caracteres.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				format(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_NAME], 32, "%s", inputtext);
				ShowDialog(playerid, DIALOG_VOBJECT_OBJECT);
			}
			else ShowDialog(playerid, DIALOG_VOBJECT_OBJECT);
			return 1;
		}
		case DIALOG_VOBJECT_OBJECT_COLORS:
		{
			if (response)
			{
				PLAYER_TEMP[playerid][pt_TUNING_EDIT_COLOR_SLOT] = listitem;
				ShowDialog(playerid, DIALOG_VOBJECT_OBJECT_COLOR);
			}
			else ShowDialog(playerid, DIALOG_VOBJECT_OBJECT);
			return 1;
		}
		case DIALOG_VOBJECT_OBJECT_COLOR:
		{
			if (response)
			{
				switch(listitem)
				{
					case 0:
					{
						VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_COLORS][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_COLOR_SLOT] ] = 0;
						UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT], true);
						SendPlayerClientMessage(playerid, "Color actualizado.");
						ShowDialog(playerid, DIALOG_VOBJECT_OBJECT_COLORS);
					}
					case 1:
					{
						VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_COLORS][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_COLOR_SLOT] ] = RGBAToARGB(VEHICLE_COLORS[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][gb_vehicle_COLOR_1] ]);
						UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT], true);
						SendPlayerClientMessage(playerid, "Color actualizado.");
						ShowDialog(playerid, DIALOG_VOBJECT_OBJECT_COLORS);
					}
					case 2:
					{
						VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_COLORS][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_COLOR_SLOT] ] = RGBAToARGB(VEHICLE_COLORS[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][gb_vehicle_COLOR_2] ]);
						UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT], true);
						SendPlayerClientMessage(playerid, "Color actualizado.");
						ShowDialog(playerid, DIALOG_VOBJECT_OBJECT_COLORS);
					}
					case 3: ShowDialog(playerid, DIALOG_VOBJECT_OBJECT_COLOR_HEX);
				}
			}
			else ShowDialog(playerid, DIALOG_VOBJECT_OBJECT_COLORS);
			return 1;
		}
		case DIALOG_VOBJECT_OBJECT_COLOR_HEX:
		{
			if (response)
			{
				if (strlen(inputtext) < 8) return ShowDialog(playerid, dialogid);
				
				new hexcolor;
				if (sscanf(inputtext, "h", hexcolor))
				{
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_COLORS][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_COLOR_SLOT] ] = hexcolor;
				UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT], true);
				SendPlayerClientMessage(playerid, "Color actualizado.");
				ShowDialog(playerid, DIALOG_VOBJECT_OBJECT_COLORS);
			}
			else ShowDialog(playerid, DIALOG_VOBJECT_OBJECT_COLOR);
			return 1;
		}
		case DIALOG_VOBJECT_OBJECT_CDELETE:
		{
			if (response)
			{
				if (VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OBJECT_ID] != INVALID_STREAMER_ID)
				{
					DestroyDynamicObject(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OBJECT_ID]);
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OBJECT_ID] = INVALID_STREAMER_ID;
				}
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM vobjects WHERE id = %d;", VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				new temp_VEHICLE_OBJECTS[e_VEHICLE_OBJECTS];
				VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ] = temp_VEHICLE_OBJECTS;
				
				SendPlayerClientMessage(playerid, "Objeto eliminado.");
				ShowDialog(playerid, DIALOG_VOBJECT_OBJECTS);
			}
			else ShowDialog(playerid, DIALOG_VOBJECT_OBJECT);
			return 1;
		}
		case DIALOG_VOBJECT_DELETE_ALL:
		{
			if (response)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM vobjects WHERE id_vehicle = %d;", PLAYER_VEHICLES[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][player_vehicle_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);

				new temp_VEHICLE_OBJECTS[e_VEHICLE_OBJECTS];
				for (new i = 0; i != MAX_SU_VOBJECTS; i ++)
				{
					if (VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][i][vobject_OBJECT_ID] != INVALID_STREAMER_ID)
					{
						DestroyDynamicObject(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][i][vobject_OBJECT_ID]);
						VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][i][vobject_OBJECT_ID] = INVALID_STREAMER_ID;
					}
					
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][i] = temp_VEHICLE_OBJECTS;
				}
				
				SendPlayerClientMessage(playerid, "Todos los objetos de este vehículo han sido eliminados.");
				ShowDialog(playerid, DIALOG_VOBJECT_OBJECTS);
			}
			else ShowDialog(playerid, DIALOG_VOBJECT_OBJECT);
			return 1;
		}
		case DIALOG_VOBJECT_TEXT_MENU:
		{
			if (response)
			{
				switch(listitem)
				{
					case 0: ShowDialog(playerid, DIALOG_VOBJECT_TEXT_TEXT);
					case 1: ShowDialog(playerid, DIALOG_VOBJECT_TEXT_FONT);
					case 2: ShowDialog(playerid, DIALOG_VOBJECT_TEXT_FONT_SIZE);
					case 3:
					{
						if (VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_text_BOLD])
						{
							VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_text_BOLD] = false;
							SendPlayerClientMessage(playerid, "Negrita deshabilitada.");
						}
						else
						{
							VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_text_BOLD] = true;
							SendPlayerClientMessage(playerid, "Negrita habilitada.");
						}
						UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT], true);
						ShowDialog(playerid, dialogid);
					}
					case 4: ShowDialog(playerid, DIALOG_VOBJECT_TEXT_FONT_COLOR);
				}
			}
			else ShowDialog(playerid, DIALOG_VOBJECT_OBJECT);
			return 1;
		}
		case DIALOG_VOBJECT_TEXT_TEXT:
		{
			if (response)
			{
				if (strlen(inputtext) >= 32)
				{
					SendPlayerClientMessage(playerid, "Como máximo puedes introducir un texto de 32 caracteres.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				if (sscanf(inputtext, "s[32]", inputtext))
				{
					SendPlayerClientMessage(playerid, "Introduce un texto.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				format(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_text_TEXT], 32, "%s", inputtext);
				UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT], true);
				SendPlayerClientMessage(playerid, "Texto actualizado.");
			}
			ShowDialog(playerid, DIALOG_VOBJECT_TEXT_MENU);
			return 1;
		}
		case DIALOG_VOBJECT_TEXT_FONT:
		{
			if (response)
			{
				if (strlen(inputtext) >= 24)
				{
					SendPlayerClientMessage(playerid, "Como máximo puedes introducir una fuente de 24 caracteres.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				
				if (sscanf(inputtext, "s[24]", inputtext))
				{
					SendPlayerClientMessage(playerid, "Introduce un texto.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				format(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_text_FONT], 24, "%s", inputtext);
				UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT], true);
				SendPlayerClientMessage(playerid, "Fuente actualizada.");
			}
			ShowDialog(playerid, DIALOG_VOBJECT_TEXT_MENU);
			return 1;
		}
		case DIALOG_VOBJECT_TEXT_FONT_SIZE:
		{
			if (response)
			{
				if (sscanf(inputtext, "d", inputtext[0]))
				{
					SendPlayerClientMessage(playerid, "Introduce un valor numérico.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				if (inputtext[0] <= 0 || inputtext[0] >= 255)
				{
					SendPlayerClientMessage(playerid, "Introduce un valor entre 1 y 255.");
					ShowDialog(playerid, dialogid);
					return 1;
				}
				VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_text_FONT_SIZE] = inputtext[0];
				UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT], true);
				SendPlayerClientMessage(playerid, "Tamaño de letra actualizado.");
			}
			ShowDialog(playerid, DIALOG_VOBJECT_TEXT_MENU);
			return 1;
		}
		case DIALOG_VOBJECT_TEXT_FONT_COLOR:
		{
			if (response)
			{
				VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_text_FONT_COLOR] = RGBAToARGB(RandomColors[listitem]);
				UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT], true);
				SendPlayerClientMessage(playerid, "Color de letra actualizado.");
			}
			ShowDialog(playerid, DIALOG_VOBJECT_TEXT_MENU);
			return 1;
		}
		case DIALOG_PLAYER_CONFIG:
		{
			if (response)
			{
				switch(listitem)
				{
					case 0: {
						if (PI[playerid][pi_CONFIG_AUDIO])
						{
							PI[playerid][pi_CONFIG_AUDIO] = false;
							StopAudioStreamForPlayer(playerid);
						}
						else PI[playerid][pi_CONFIG_AUDIO] = true;
					}
					case 1: {
						if (PI[playerid][pi_CONFIG_HUD])
						{
							PI[playerid][pi_CONFIG_HUD] = false;
							for (new i = 0; i < HUD_TEXTDRAWS_SIZE; i ++) {
								TextDrawHideForPlayer(playerid, Textdraws[textdraw_HUD][i]);
							}
							
							for (new i = 0; i < HUD_PTEXTDRAWS_SIZE; i ++) {
								PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][i]);
							}

							HidePlayerProgressBar(playerid, j_Pb[playerid][pbRep]);
							HidePlayerProgressBar(playerid, j_Pb[playerid][pbHungry]);
							HidePlayerProgressBar(playerid, j_Pb[playerid][pbThirst]);
						}
						else
						{
							PI[playerid][pi_CONFIG_HUD] = true;
							for (new i = 0; i < HUD_TEXTDRAWS_SIZE; i ++) {
								TextDrawShowForPlayer(playerid, Textdraws[textdraw_HUD][i]);	
							}
							
							for (new i = 0; i < HUD_PTEXTDRAWS_SIZE; i ++) {
								PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][i]);
							}

							ShowPlayerProgressBar(playerid, j_Pb[playerid][pbRep]);
							ShowPlayerProgressBar(playerid, j_Pb[playerid][pbHungry]);
							ShowPlayerProgressBar(playerid, j_Pb[playerid][pbThirst]);
						}
					}
					case 2: {
						if (gettime() < PI[playerid][pi_PASSIVE_MODE_TIMER] + 480) {
							new time = 480 - (gettime() - PI[playerid][pi_PASSIVE_MODE_TIMER]);
							ShowPlayerMessage(playerid, "Debes esperar %s.", TimeConvertExAsText(time, true));
							return 1;
						}

						if (PI[playerid][pi_PASSIVE_MODE]) {
							PI[playerid][pi_PASSIVE_MODE] = false;
							ShowPlayerMessage(playerid, "Modo pasivo ~r~desactivado~w~.");
						} else {
							if (PI[playerid][pi_WANTED_LEVEL] > 0) return ShowPlayerMessage(playerid, "Tienes ~y~nivel de busqueda~w~.");

							PI[playerid][pi_PASSIVE_MODE] = true;
							ShowPlayerMessage(playerid, "Modo pasivo ~b~activado~w~.");
						}

						UpdateAllPlayerInventoryData(playerid, false, false);
						PI[playerid][pi_PASSIVE_MODE_TIMER] = gettime();

						GetPlayerHealth(playerid, PLAYER_TEMP[playerid][pt_PASSIVE_HEALTH]);
					}
					case 3: {
						if (PI[playerid][pi_CONFIG_ADMIN]) PI[playerid][pi_CONFIG_ADMIN] = false;
						else PI[playerid][pi_CONFIG_ADMIN] = true;
					}
					case 4: {
						if (PI[playerid][pi_PHONE_VISIBLE_NUMBER]) PI[playerid][pi_PHONE_VISIBLE_NUMBER] = false;
						else PI[playerid][pi_PHONE_VISIBLE_NUMBER] = true;
					}
					case 5: {
						if (PI[playerid][pi_CONFIG_SOUNDS]) PI[playerid][pi_CONFIG_SOUNDS] = false;
						else PI[playerid][pi_CONFIG_SOUNDS] = true;
					}
					case 6: {
						if (PI[playerid][pi_CONFIG_TIME])
						{
							PI[playerid][pi_CONFIG_TIME] = false;
							TextDrawHideForPlayer(playerid, Textdraws[textdraw_SERVER_TIME]);
						}
						else
						{
							PI[playerid][pi_CONFIG_TIME] = true;
							TextDrawShowForPlayer(playerid, Textdraws[textdraw_SERVER_TIME]);
						}
					}
					case 7: {
						if (PI[playerid][pi_GLOBAL_CHANNEL]) PI[playerid][pi_GLOBAL_CHANNEL] = false;
						else PI[playerid][pi_GLOBAL_CHANNEL] = true;
					}
					case 8: {
						if (PI[playerid][pi_SELL_CHANNEL]) PI[playerid][pi_SELL_CHANNEL] = false;
						else PI[playerid][pi_SELL_CHANNEL] = true;
					}
					case 9: {
						if (PI[playerid][pi_DOUBT_CHANNEL]) PI[playerid][pi_DOUBT_CHANNEL] = false;
						else PI[playerid][pi_DOUBT_CHANNEL] = true;
					}
				}
				ShowDialog(playerid, dialogid);
			}
			return 1;
		}
		case DIALOG_CHANGE_NAME:
		{
			if (response)
			{
				if (!strlen(inputtext)) return ShowDialog(playerid, dialogid);

				if (SHA256_Verify(inputtext, PI[playerid][pi_SALT], PI[playerid][pi_PASS]))
				{
					ShowDialog(playerid, DIALOG_CHANGE_NAME_NAME);
					PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP] = 0;
				}
				else // Error
				{
					PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP] ++;
					if (PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP] > MAX_BAD_LOGIN_ATTEMPS) return Kick(playerid);
					SendPlayerClientMessage(playerid, "Contraseña incorrecta, aviso %d/%d.", PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP], MAX_BAD_LOGIN_ATTEMPS);
				}
			}
			return 1;
		}
		case DIALOG_CHANGE_NAME_NAME:
		{
			if (response)
			{
				new length = strlen(inputtext);
				if (length < 3 || length > 20) return ShowDialog(playerid, dialogid);

				new name[24];
				format(name, 24, "%s", inputtext);
				if (!IsValidRPName(name)) return SendPlayerClientMessage(playerid, "El nombre '%s' no cumple con el formato.", name);
	
				inline OnDialogQueryLoad()
				{
					new rows;
					if (cache_get_row_count(rows))
					{
						if (rows) SendPlayerClientMessage(playerid, "El nombre '%s' está en uso.", name);
						else
						{
							printf("/cname: %d, '%s'", PI[playerid][pi_ID], name);
							if (SetPlayerName(playerid, name) == 1) {
								format(PLAYER_TEMP[playerid][pt_NAME], 24, "%s", name);
								format(PI[playerid][pi_NAME], 24, "%s", name);
								
								for (new i = 0; i != MAX_PROPERTIES; i ++)
								{
									if (!PROPERTY_INFO[i][property_VALID]) continue;
									if (PROPERTY_INFO[i][property_OWNER_ID] != PI[playerid][pi_ID]) continue;
									
									new label_str[256];
									format
									(
										label_str, 
										sizeof label_str, 
										"\
											Propiedad {"#PRIMARY_COLOR"}#%d\n\n\
											{F5F5F5}Propietario: {"#PRIMARY_COLOR"}%s\n\
											{F5F5F5}Presiona {"#PRIMARY_COLOR"}Y {F5F5F5}para entrar.\
										", PROPERTY_INFO[i][property_ID], PI[playerid][pi_NAME]
									);
									UpdateDynamic3DTextLabelText(PROPERTY_INFO[i][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
								}

								GivePlayerCoins(playerid, -PI[playerid][pi_COINS], true, false, "Cambio de nombre.");

								mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET name = '%e', coins = %d WHERE id = %d;", PI[playerid][pi_NAME], PI[playerid][pi_COINS], PI[playerid][pi_ID]);
								printf(QUERY_BUFFER);
								mysql_tquery(handle_db, QUERY_BUFFER);

								SendPlayerClientMessage(playerid, "Tu nombre ha sido cambiado a '%s' por %d "SERVER_COIN"", name, CNAME_COINS_PRICE);
							}
							else SendPlayerClientMessage(playerid, "No se ha podido cambiar tu nombre.");
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE name = '%e';", name);
 				MySQL_TQueryInline(handle_db, using inline OnDialogQueryLoad, QUERY_BUFFER, "s", name);

			}
			return 1;
		}
		case DIALOG_CHANGE_EMAIL:
		{
			if (response)
			{
				if (!strlen(inputtext)) return ShowDialog(playerid, dialogid);

				if (SHA256_Verify(inputtext, PI[playerid][pi_SALT], PI[playerid][pi_PASS]))
				{
					ShowDialog(playerid, DIALOG_CHANGE_EMAIL_EMAIL);
					PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP] = 0;
				}
				else // Error
				{
					PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP] ++;
					if (PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP] > MAX_BAD_LOGIN_ATTEMPS) return Kick(playerid);
					SendPlayerClientMessage(playerid, "Contraseña incorrecta, aviso %d/%d.", PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP], MAX_BAD_LOGIN_ATTEMPS);
				}
			}
			return 1;
		}
		case DIALOG_CHANGE_EMAIL_EMAIL:
		{
			if (response)
			{
				new length = strlen(inputtext);
				if (length > 32) return ShowDialog(playerid, dialogid);

				new email[32];
				format(email, 32, "%s", inputtext);
				if (!IsValidEmail(email)) return SendPlayerClientMessage(playerid, "Correo no válido.");
	
				inline OnDialogQueryLoad()
				{
					new rows;
					if (cache_get_row_count(rows))
					{
						if (rows) SendPlayerClientMessage(playerid, "El correo electrónico introducido está en uso.");
						else
						{
							format(PI[playerid][pi_EMAIL], 32, "%s", email);
							
							mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET email = '%e' WHERE id = %d;", PI[playerid][pi_EMAIL], PI[playerid][pi_ID]);
							mysql_tquery(handle_db, QUERY_BUFFER);
							SendPlayerClientMessage(playerid, "Tu correo electrónico ha sido cambiado correctamente.");
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE email = '%e';", email);
				MySQL_TQueryInline(handle_db,  using inline OnDialogQueryLoad, QUERY_BUFFER, "s", email);
			}
			return 1;
		}
	}
	return 0;
} //OnDialogResponse

Dialog:OnPlayerBuyPiecesRespons(playerid, response, listitem, inputtext[])
{
	if (response)
	{
		if (!PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_SET]) return ShowPlayerMessage(playerid, "No eres mecánico.");
		if (GetPlayerInterior(playerid) != 0) return ShowPlayerMessage(playerid, "No estás en el lugar adecuado.");
		if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return ShowPlayerMessage(playerid, "No estás depie.");
		
		if (sscanf(inputtext, "d", inputtext[0])) return ShowPlayerMessage(playerid, "CANTIDAD INCORRECTA");
		if (inputtext[0] <= 0 || inputtext[0] >= 10000) return ShowPlayerMessage(playerid, "CANTIDAD INCORRECTA");

		new price = inputtext[0] * 50;
		if (price > PI[playerid][pi_CASH])
		{
			ShowPlayerMessage(playerid, "Necesitas %s$ para poder comprar %d piezas.", number_format_thousand(price), inputtext[0]);
			return 1;
		}
		if (price < 0) return 1;

		if (GivePlayerCash(playerid, -price, true, true))
		{
			PI[playerid][pi_MECHANIC_PIECES] += inputtext[0];
			ShowPlayerMessage(playerid, "Has comprado %s piezas por %s$, ahora tienes %s piezas.", number_format_thousand(inputtext[0]), number_format_thousand(price), number_format_thousand(PI[playerid][pi_MECHANIC_PIECES]));
		}

	}
	return 1;
}

Dialog:OnPlayerStandUpResponse(playerid, response, listitem, inputtext[])
{
	if (response) {
		new to_playerid;
		if (sscanf(inputtext, "u", to_playerid)) return ShowPlayerMessage(playerid, "ESCRIBE LA ID DE EL JUGADOR PARA CURAR.");
		if (!IsPlayerConnected(to_playerid)) return ShowPlayerMessage(playerid, "El jugador no está conectado.");
		if (to_playerid == playerid) return ShowPlayerMessage(playerid, "NO PUEDES CURARTE ATI MISMO.");
		
		new Float:pos[3];
		GetPlayerPos(to_playerid, pos[0], pos[1], pos[2]);
		if (!IsPlayerInRangeOfPoint(playerid, NEARS_PLAYERS_DISTANCE, pos[0], pos[1], pos[2])) return ShowPlayerMessage(playerid, "Este jugador no está cerca tuya.");

		if (PI[to_playerid][pi_STATE] != ROLEPLAY_STATE_CRACK) return ShowPlayerMessage(playerid, "Esta persona no está herida.");
		if (PI[to_playerid][pi_CREW] && CREW_INFO[ PLAYER_TEMP[to_playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return ShowPlayerMessage(playerid, "No puedes curar a esta persona porque su banda está en combate.");
		
		if (IsValidPlayerInventoryObjectSlo(playerid, SLOT_HAND, INVENTORY_TYPE_MEDICAL_KIT)) {
			DeleteInventorySlot(j_PocketInfo[playerid][ SLOT_HAND ][pId]);
			ClearPlayerInventorySlot(playerid, SLOT_HAND, true);
		}

		KillTimer(PLAYER_TEMP[to_playerid][pt_TIMERS][16]);
		PLAYER_TEMP[to_playerid][pt_TIMERS][16] = SetTimerEx("StandUp", 5000, false, "ii", playerid, to_playerid);
		DisablePlayerInjuredMark(to_playerid);
		
		ApplyAnimation(playerid, "MEDIC", "CPR", 4.1, false, 0, 0, 0, 0, 1);
		ShowPlayerMessage(playerid, "Curando...");
	}
	return 1;
}

Dialog:OnFarmerPackResponse(playerid, response, listitem, inputtext[]) {
	if (response) {
		PLAYER_TEMP[playerid][pt_PACK_SELECTION] = listitem;

		switch(listitem) {
			case 0: {
				Dialog_Show(playerid, "OnFarmerPackDrugResponse", DIALOG_STYLE_INPUT, "Empaquetar", "{F5F5F5}Introduce la cantidad de {"#GREEN_COLOR"}Medicamentos{F5F5F5}\npara empezar a {"#GREEN_COLOR"}empaquetar{F5F5F5}.", "Empaquetar", "xSalir");
			} case 1: {
				Dialog_Show(playerid, "OnFarmerPackDrugResponse", DIALOG_STYLE_INPUT, "Empaquetar", "{F5F5F5}Introduce la cantidad de {"#GREEN_COLOR"}Marihuana{F5F5F5}\npara empezar a {"#GREEN_COLOR"}empaquetar{F5F5F5}.", "Empaquetar", "xSalir");
			} case 2: {
				Dialog_Show(playerid, "OnFarmerPackDrugResponse", DIALOG_STYLE_INPUT, "Empaquetar", "{F5F5F5}Introduce la cantidad de {"#GREEN_COLOR"}Coca{F5F5F5}\npara empezar a {"#GREEN_COLOR"}empaquetar{F5F5F5}.", "Empaquetar", "xSalir");
			}
		}
	}
	return 1;
}

Dialog:OnFarmerPackBuyResponse(playerid, response, listitem, inputtext[]) {
	if (response) {
		switch(listitem) {
			case 0: {
				new result = GivePlayerBlackCash(playerid, -1000, true);

				if (result == -1) return ShowPlayerMessage(playerid, "No tienes ~r~nada~w~ en la mano.");
				if (result == -2) return ShowPlayerMessage(playerid, "No tienes la cantidad suficiente de ~r~dinero negro~w~.");
				if (result == 0) return ShowPlayerMessage(playerid, "No tienes ~r~dinero negro~w~ en la mano.");

				if (result == 1) {
					ShowPlayerMessage(playerid, "Medicamento");

					SendPlayerClientMessage(playerid, "Has comprado un {00ff00}Medicamento{F5F5F5} por {00ff00}1000{666666}B${F5F5F5}.");

					if (!j_PocketInfo[playerid][SLOT_HAND][pValid]) {
						j_PocketInfo[playerid][SLOT_HAND][pValid] = true;
						j_PocketInfo[playerid][SLOT_HAND][pType] = INVENTORY_TYPE_MEDICINE_PACK;
						j_PocketInfo[playerid][SLOT_HAND][pExtra] = 0;
						InsertPlayerInventorySlot(playerid, SLOT_HAND);
					} else {
						new pocket_slot = GetPlayerValidInventoryPocket(playerid);
						if (pocket_slot == -1) return SendPlayerClientMessage(playerid, "NO TIENES ESPACIO.");

						j_PocketInfo[playerid][pocket_slot][pValid] = true;
						j_PocketInfo[playerid][pocket_slot][pType] = INVENTORY_TYPE_MEDICINE_PACK;
						j_PocketInfo[playerid][pocket_slot][pExtra] = 0;
						InsertPlayerInventorySlot(playerid, pocket_slot);
					}
				}
			} case 1: {
				new result = GivePlayerBlackCash(playerid, -3000, true);

				if (result == -1) return ShowPlayerMessage(playerid, "No tienes ~r~nada~w~ en la mano.");
				if (result == -2) return ShowPlayerMessage(playerid, "No tienes la cantidad suficiente de ~r~dinero negro~w~.");
				if (result == 0) return ShowPlayerMessage(playerid, "No tienes ~r~dinero negro~w~ en la mano.");

				if (result == 1) {
					ShowPlayerMessage(playerid, "Marihuana");

					SendPlayerClientMessage(playerid, "Has comprado un {00ff00}Marihuana{F5F5F5} por {00ff00}3000{666666}B${F5F5F5}.");

					if (!j_PocketInfo[playerid][SLOT_HAND][pValid]) {
						j_PocketInfo[playerid][SLOT_HAND][pValid] = true;
						j_PocketInfo[playerid][SLOT_HAND][pType] = INVENTORY_TYPE_CANNABIS_PACK;
						j_PocketInfo[playerid][SLOT_HAND][pExtra] = 0;
						InsertPlayerInventorySlot(playerid, SLOT_HAND);
					} else {
						new pocket_slot = GetPlayerValidInventoryPocket(playerid);
						if (pocket_slot == -1) return SendPlayerClientMessage(playerid, "NO TIENES ESPACIO.");

						j_PocketInfo[playerid][pocket_slot][pValid] = true;
						j_PocketInfo[playerid][pocket_slot][pType] = INVENTORY_TYPE_CANNABIS_PACK;
						j_PocketInfo[playerid][pocket_slot][pExtra] = 0;
						InsertPlayerInventorySlot(playerid, pocket_slot);
					}
				}
			} case 2: {
				new result = GivePlayerBlackCash(playerid, -5000, true);

				if (result == -1) return ShowPlayerMessage(playerid, "No tienes ~r~nada~w~ en la mano.");
				if (result == -2) return ShowPlayerMessage(playerid, "No tienes la cantidad suficiente de ~r~dinero negro~w~.");
				if (result == 0) return ShowPlayerMessage(playerid, "No tienes ~r~dinero negro~w~ en la mano.");

				if (result == 1) {
					ShowPlayerMessage(playerid, "Coca");

					SendPlayerClientMessage(playerid, "Has comprado un {00ff00}Coca{F5F5F5} por {00ff00}5000{666666}B${F5F5F5}.");

					if (!j_PocketInfo[playerid][SLOT_HAND][pValid]) {
						j_PocketInfo[playerid][SLOT_HAND][pValid] = true;
						j_PocketInfo[playerid][SLOT_HAND][pType] = INVENTORY_TYPE_CRACK_PACK;
						j_PocketInfo[playerid][SLOT_HAND][pExtra] = 0;
						InsertPlayerInventorySlot(playerid, SLOT_HAND);
					} else {
						new pocket_slot = GetPlayerValidInventoryPocket(playerid);
						if (pocket_slot == -1) return SendPlayerClientMessage(playerid, "NO TIENES ESPACIO.");

						j_PocketInfo[playerid][pocket_slot][pValid] = true;
						j_PocketInfo[playerid][pocket_slot][pType] = INVENTORY_TYPE_CRACK_PACK;
						j_PocketInfo[playerid][pocket_slot][pExtra] = 0;
						InsertPlayerInventorySlot(playerid, pocket_slot);
					}
				}
			}
		}
	}
	return 1;
}

Dialog:OnFarmerPackDrugResponse(playerid, response, listitem, inputtext[]) {
	if (response) {
		new amount;

		if (sscanf(inputtext, "d", amount)) return ShowPlayerMessage(playerid, "CANTIDAD ~r~INCORRECTA~w~.");

		switch(PLAYER_TEMP[playerid][pt_PACK_SELECTION]) {
			case 0:
			{
				if (amount < 1 || amount > 50) return ShowPlayerMessage(playerid, "Debes introducir una cantidad entre 1 y 50.");
				if (PI[playerid][pi_MEDICINE] < amount) return ShowPlayerMessage(playerid, "no tienes esa cantidad de ~b~medicamentos~w~.");

				if (!j_PocketInfo[playerid][SLOT_HAND][pValid]) return ShowPlayerMessage(playerid, "Necesitas un paquete de medicamentos.");
				if (j_PocketInfo[playerid][SLOT_HAND][pType] != INVENTORY_TYPE_MEDICINE_PACK) return ShowPlayerMessage(playerid, "Necesitas un paquete de medicamentos.");

				if (j_PocketInfo[playerid][SLOT_HAND][pExtra] + amount > 50) return ShowPlayerMessage(playerid, "Solo puedes empaquetar 50g de medicamentos.");

				j_PocketInfo[playerid][SLOT_HAND][pExtra] += amount;
				PI[playerid][pi_MEDICINE] -= amount;
				MySQL_UpdateInt(playerid, "medicine", PI[playerid][pi_MEDICINE]);

				ShowPlayerMessage(playerid, "Has empaquedado %dG de ~b~Medicamentos~w~.", amount);
			} case 1: {
				if (amount < 1 || amount > 100) return ShowPlayerMessage(playerid, "Debes introducir una cantidad entre 1 y 100.");
				if (PI[playerid][pi_CANNABIS] < amount) return ShowPlayerMessage(playerid, "no tienes esa cantidad de ~b~marihuana~w~.");

				if (!j_PocketInfo[playerid][SLOT_HAND][pValid]) return ShowPlayerMessage(playerid, "Necesitas un paquete de marihuana.");
				if (j_PocketInfo[playerid][SLOT_HAND][pType] != INVENTORY_TYPE_CANNABIS_PACK) return ShowPlayerMessage(playerid, "Necesitas un paquete de marihuana.");

				if (j_PocketInfo[playerid][SLOT_HAND][pExtra] + amount > 100) return ShowPlayerMessage(playerid, "Solo puedes empaquetar 100g de marihuana.");

				j_PocketInfo[playerid][SLOT_HAND][pExtra] += amount;
				PI[playerid][pi_CANNABIS] -= amount;
				MySQL_UpdateInt(playerid, "cannabis", PI[playerid][pi_CANNABIS]);

				ShowPlayerMessage(playerid, "Has empaquedado %dG de ~b~Marihuana~w~.", amount);
			} case 2: {
				if (amount < 1 || amount > 200) return ShowPlayerMessage(playerid, "Debes introducir una cantidad entre 1 y 200.");
				if (PI[playerid][pi_CRACK] < amount) return ShowPlayerMessage(playerid, "no tienes esa cantidad de ~b~coca~w~.");

				if (!j_PocketInfo[playerid][SLOT_HAND][pValid]) return ShowPlayerMessage(playerid, "Necesitas un paquete de crack.");
				if (j_PocketInfo[playerid][SLOT_HAND][pType] != INVENTORY_TYPE_CRACK_PACK) return ShowPlayerMessage(playerid, "Necesitas un paquete de crack.");

				if (j_PocketInfo[playerid][SLOT_HAND][pExtra] + amount > 200) return ShowPlayerMessage(playerid, "Solo puedes empaquetar 200g de crack.");

				j_PocketInfo[playerid][SLOT_HAND][pExtra] += amount;
				PI[playerid][pi_CRACK] -= amount;
				MySQL_UpdateInt(playerid, "crack", PI[playerid][pi_CRACK]);

				ShowPlayerMessage(playerid, "Has empaquedado %dG de ~b~coca~w~.", amount);
			}
			default: { return 0; }
		}
	}
	return 1;
}

#define POLICE_ARMOUR_PERCENT 100 //Max: 100
Dialog:OnPoliceBuyArmour(playerid, response, listitem, inputtext[])
{
	if (response)
	{
		if (PI[playerid][pi_CASH] >= 300) {
			if (!j_PocketInfo[playerid][SLOT_BACK][pValid]) {
				if (GivePlayerCash(playerid, -300, true, true)) {
					j_PocketInfo[playerid][SLOT_BACK][pValid] = true;
					j_PocketInfo[playerid][SLOT_BACK][pType] = INVENTORY_TYPE_POLICE_VEST;
					j_PocketInfo[playerid][SLOT_BACK][pExtra] = POLICE_ARMOUR_PERCENT;
					InsertPlayerInventorySlot(playerid, SLOT_BACK);
					GivePlayerArmourEx(playerid, j_PocketInfo[playerid][SLOT_BACK][pExtra]);
				}
			}
			else {
				new pocket_slot = GetPlayerValidInventoryPocket(playerid);
				if (pocket_slot == -1) return SendPlayerClientMessage(playerid, "NO TIENES ESPACIO.");

				if (GivePlayerCash(playerid, -300, true, true)) {
					j_PocketInfo[playerid][pocket_slot][pValid] = true;
					j_PocketInfo[playerid][pocket_slot][pType] = INVENTORY_TYPE_POLICE_VEST;
					j_PocketInfo[playerid][pocket_slot][pExtra] = POLICE_ARMOUR_PERCENT;
					InsertPlayerInventorySlot(playerid, pocket_slot);
				}
			}
			ShowPlayerMessage(playerid, "Has comprado ~b~Chaleco antibalas~w~ por 300~b~$~w~.");
		}
		else
		{
			ShowPlayerMessage(playerid, "No tienes el ~b~dinero~w~ suficiente para comprar el chaleco.");
		}
	}
	return 1;
}

Dialog:OnPoliceBuyWeapons(playerid, response, listitem, inputtext[])
{
	if (response)
	{
		new index = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
		if (index == -1) return 0;

		ShowPoliceBuyWeaponsDialog(playerid);

		if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == sizeof(pWeapon_Shop) + 10) {
			ShowPoliceBuyAmmoDialog(playerid);
			return 1;
		}

		if (PI[playerid][pi_CASH] >= pWeapon_Shop[index][wPrice])
		{
			if (pWeapon_Shop[index][wRank] > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL]) {
				ShowPlayerMessage(playerid, "No tienes el ~r~rango~w~ necesario.");
				return 0;
			}

			if (!j_PocketInfo[playerid][SLOT_HAND][pValid]) {
				if (GivePlayerCash(playerid, -pWeapon_Shop[index][wPrice], true, true)) {
					j_PocketInfo[playerid][SLOT_HAND][pValid] = true;
					j_PocketInfo[playerid][SLOT_HAND][pType] = pWeapon_Shop[index][wType];
					j_PocketInfo[playerid][SLOT_HAND][pExtra] = pWeapon_Shop[index][wExtra];
					InsertPlayerInventorySlot(playerid, SLOT_HAND);
				}
			} else {
				new pocket_slot = GetPlayerValidInventoryPocket(playerid);
				if (pocket_slot == -1) return SendPlayerClientMessage(playerid, "NO TIENES ESPACIO.");

				if (GivePlayerCash(playerid, -pWeapon_Shop[index][wPrice], true, true)) {
					j_PocketInfo[playerid][pocket_slot][pValid] = true;
					j_PocketInfo[playerid][pocket_slot][pType] = pWeapon_Shop[index][wType];
					j_PocketInfo[playerid][pocket_slot][pExtra] = pWeapon_Shop[index][wExtra];
					InsertPlayerInventorySlot(playerid, pocket_slot);
				}
			}

			ShowPlayerMessage(playerid, "Has comprado ~b~%s~w~ por %s~b~$~w~.", GetObjectInfoName(pWeapon_Shop[index][wType]), number_format_thousand(pWeapon_Shop[index][wPrice]));
		}
		else ShowPlayerMessage(playerid, "No tienes suficiente ~b~dinero~w~ para comprar %s.", GetObjectInfoName(pWeapon_Shop[index][wType]));
	}
	return 1;
}

Dialog:OnPoliceBuyAmmo(playerid, response, listitem, inputtext[]) {
	if (response) {
		new const index = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];
		if (index == -1) return 0;

		ShowPoliceBuyAmmoDialog(playerid);

		if (PI[playerid][pi_CASH] >= pAmmo_Shop[index][aPrice])
		{
			if (pAmmo_Shop[index][aRank] > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL]) {
				ShowPlayerMessage(playerid, "No tienes el ~r~rango~w~ necesario.");
				return 0;
			}

			if (IsValidPlayerInventorySlot(playerid, SLOT_HAND)) {
				new pocket_slot = GetPlayerValidInventoryPocket(playerid);
				if (pocket_slot == -1) return SendPlayerClientMessage(playerid, "NO TIENES ESPACIO.");
			}

			if (!IsValidPlayerInventorySlot(playerid, SLOT_HAND))
			{
				if (GivePlayerCash(playerid, -pAmmo_Shop[index][aPrice], true, true))
				{
					j_PocketInfo[playerid][SLOT_HAND][pValid] = true;
					j_PocketInfo[playerid][SLOT_HAND][pType] = pAmmo_Shop[index][aType];
					j_PocketInfo[playerid][SLOT_HAND][pExtra] = i_ObjectData[ pAmmo_Shop[index][aType] ][i_Data_Extra];
					InsertPlayerInventorySlot(playerid, SLOT_HAND);
				}
			}
			else
			{
				new pocket_slot = GetPlayerValidInventoryPocket(playerid);
				if (pocket_slot == -1) return SendPlayerClientMessage(playerid, "NO TIENES ESPACIO.");

				if (GivePlayerCash(playerid, -pAmmo_Shop[index][aPrice], true, true))
				{
					j_PocketInfo[playerid][pocket_slot][pValid] = true;
					j_PocketInfo[playerid][pocket_slot][pType] = pAmmo_Shop[index][aType];
					j_PocketInfo[playerid][pocket_slot][pExtra] = i_ObjectData[ pAmmo_Shop[index][aType] ][i_Data_Extra];
					InsertPlayerInventorySlot(playerid, pocket_slot);
				}
			}

			ShowPlayerMessage(playerid, "cargador ~b~%s~w~ comprado por %s~b~$~w~.", GetObjectInfoName(pAmmo_Shop[index][aType]), number_format_thousand(pAmmo_Shop[index][aPrice]));
		}
		else ShowPlayerMessage(playerid, "No tienes suficiente ~b~dinero~w~ para comprar %s.", GetObjectInfoName(pAmmo_Shop[index][aType]));
	}
	return 1;
}

Dialog:PoliceSpawnVehicResponse(playerid, response, listitem, inputtext[]) {
	if (response) {
		new index = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem], Float:pos[2];
		if (index == -1) return 0;

		if (pVehicle_Spawn[index][vRank] > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL]) return 0;

		PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] = INVALID_VEHICLE_ID;

		pos[0] = 1587.9720;
		pos[0] += (8.0 * floatsin(-360.0, degrees));
		pos[1] = -1636.9628;
		pos[1] += (8.0 * floatcos(-360.0, degrees));

		new vehicle_id = CreateVehicle(
			pVehicle_Spawn[index][vModel], pos[0], pos[1], 13.3828, 360.0, pVehicle_Spawn[index][vColor1], 
			pVehicle_Spawn[index][vColor2], -1, false
		);

		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VALID] = true;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TYPE] = VEHICLE_TYPE_WORK;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] = pVehicle_Spawn[index][vModel];
		format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE], 32, "{%06x}SA{F5F5F5}%d", VEHICLE_COLORS[ pVehicle_Spawn[index][vColor2] ] >>> 8, vehicle_id);
		format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE_NAME], 32, "SA%d", vehicle_id);
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X] = pos[0];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y] = pos[1];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z] = 13.3828;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_ANGLE] = 360.0;
		
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][0] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][1] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][2] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z];
		
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_HEALTH] = 1000.0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_PANELS] = 0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_DOORS] = 0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_LIGHTS] = 0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_TIRES] = 0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_1] = pVehicle_Spawn[index][vColor1];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_2] = pVehicle_Spawn[index][vColor2];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PAINTJOB] = 3; // No paintjob
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS] = VEHICLE_INFO[ GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400 ][vehicle_info_MAX_GAS];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_GAS] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS];
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_INTERIOR] = 0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_WORLD] = 0;
		GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TEMP] = true;

		WORK_VEHICLES[vehicle_id][work_vehicle_VALID] = true;
		WORK_VEHICLES[vehicle_id][work_vehicle_WORK] = WORK_POLICE;
		WORK_VEHICLES[vehicle_id][work_vehicle_EXP] = pVehicle_Spawn[index][vRank];
		WORK_VEHICLES[vehicle_id][work_vehicle_NEED_DUTY] = work_info[ WORK_VEHICLES[vehicle_id][work_vehicle_WORK] ][work_info_NEED_DUTY];

		SetVehicleVirtualWorldEx(vehicle_id, 0);
		SetVehicleToRespawnEx(vehicle_id);

		PutPlayerInVehicleEx(playerid, vehicle_id, 0);

		PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] = vehicle_id;
		PLAYER_TEMP[playerid][pt_WORK_VEHICLE_SPAWN_TIMER] = gettime() + 15;
	}
	return 1;
}

Dialog:OnBuyMedicMedicineRespon(playerid, response, listitem, inputtext[]) {
	if (response) {
		if (GivePlayerCash(playerid, -200, true, true)) {
			ShowPlayerMessage(playerid, "Medicamento ~b~Comprado~w~~n~Usa ~b~/consumir medicamento~w~ para consumirlo.");
			PI[playerid][pi_MEDICINE] += 1;
		} else {
			ShowPlayerMessage(playerid, "No tienes el ~r~dinero~w~ suficiente.");
		}
	}
	return 1;
}

Dialog:FuelDrumBuyResponse(playerid, response, listitem, inputtext[]) {
	if (response) {
		if (j_PocketInfo[playerid][SLOT_HAND][pValid]) {
			new pocket_slot = GetPlayerValidInventoryPocket(playerid);
			if (pocket_slot == -1) return SendPlayerClientMessage(playerid, "NO TIENES ESPACIO.");
		}

		if (PI[playerid][pi_CASH] >= 500) {
			if (!j_PocketInfo[playerid][SLOT_HAND][pValid]) {
				if (GivePlayerCash(playerid, -500, true, true)) {
					j_PocketInfo[playerid][SLOT_HAND][pValid] = true;
					j_PocketInfo[playerid][SLOT_HAND][pType] = INVENTORY_TYPE_FUEL_DRUM;
					j_PocketInfo[playerid][SLOT_HAND][pExtra] = 30;
					InsertPlayerInventorySlot(playerid, SLOT_HAND);
				}
			} else {
				new pocket_slot = GetPlayerValidInventoryPocket(playerid);
				if (pocket_slot == -1) return SendPlayerClientMessage(playerid, "NO TIENES ESPACIO.");

				if (GivePlayerCash(playerid, -500, true, true)) {
					j_PocketInfo[playerid][pocket_slot][pValid] = true;
					j_PocketInfo[playerid][pocket_slot][pType] = INVENTORY_TYPE_FUEL_DRUM;
					j_PocketInfo[playerid][pocket_slot][pExtra] = 30;
					InsertPlayerInventorySlot(playerid, pocket_slot);
				}
			}

			ShowPlayerMessage(playerid, "BIDON GASOLINA");
		}
		else ShowPlayerMessage(playerid, "No tienes suficiente ~b~dinero~w~ para comprar ~r~bidon gasolina~w~.");
	}
	return 1;
}

Dialog:RefuelAmountResponse(playerid, response, listitem, inputtext[]) {
	if (response) {
		if (GetPlayerInterior(playerid) != 0) return 0;
		if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 0;
		
		new vehicleid = GetPlayerVehicleID(playerid), modelid = GetVehicleModel(vehicleid);
		
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 1;
		UpdateVehicleParams(vehicleid);

		if (!VEHICLE_INFO[modelid - 400][vehicle_info_NORMAL_SPEEDO]) return ShowPlayerMessage(playerid, "No puedes repostar este vehículo.");
		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] <= 0.0) return ShowPlayerMessage(playerid, "Este vehículo no tiene depósito de gasolina.");

		if (!sscanf(inputtext, "d", inputtext[0]))
		{
			new Float:amount = float(inputtext[0]);
			if (amount < 0.0) return 0;
			if (amount + GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] > GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS]) amount = GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] - GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS];
			
			new price = floatround( floatmul(amount, 9.0) );
			
			if (PI[playerid][pi_CASH] >= price)
			{
				if (GivePlayerCash(playerid, -price, true, true)) {
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] += amount;
					
					PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
					ShowPlayerMessage(playerid, "Cantidad: ~b~%.1f litros~n~~w~Precio: ~b~%s dólares~w~", amount, number_format_thousand(price));
					Auto_SendPlayerAction(playerid, "ha repostado el vehículo.");
				}
			}
			else
			{
				PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
				ShowPlayerMessage(playerid, "No tienes dinero suficiente~n~te faltan ~r~%s$~w~ para poder repostar ~y~%.1f~w~.", number_format_thousand(price - PI[playerid][pi_CASH]), amount);
			}
			return 1;
		}
		
		new text[24];
		if (!sscanf(inputtext, "s[24]", text))
		{
			if (!strcmp(text, "lleno", true))
			{
				new Float:amount = floatsub(GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS]);

				new price = floatround( floatmul(amount, 9.0) );
				
				if (PI[playerid][pi_CASH] >= price)
				{
					if (GivePlayerCash(playerid, -price, true, true)) {
						GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] = GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS];
						
						PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
						ShowPlayerMessage(playerid, "Cantidad: ~b~%.1f litros~n~~w~Precio: ~b~%s dólares~w~", amount, number_format_thousand(price));
						Auto_SendPlayerAction(playerid, "ha repostado el vehículo.");
					}
				}
				else
				{
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					ShowPlayerMessage(playerid, "No tienes dinero suficiente~n~te faltan ~r~%s$~w~ para poder repostar ~y~%.1f~w~.", number_format_thousand(price - PI[playerid][pi_CASH]), amount);
				}
			}
			return 1;
		}
	}
	return 1;
}

Dialog:OnBuyPharmMedicineRespon(playerid, response, listitem, inputtext[]) {
	if (response) {
		switch (listitem) {
			case 0: {
				if (j_PocketInfo[playerid][SLOT_HAND][pValid]) {
					new pocket_slot = GetPlayerValidInventoryPocket(playerid);
					if (pocket_slot == -1) return SendPlayerClientMessage(playerid, "NO TIENES ESPACIO.");
				}

				if (GivePlayerCash(playerid, -2400, true, true)) {
					if (!j_PocketInfo[playerid][SLOT_HAND][pValid]) {
						j_PocketInfo[playerid][SLOT_HAND][pValid] = true;
						j_PocketInfo[playerid][SLOT_HAND][pType] = INVENTORY_TYPE_MEDICINE_PACK;
						j_PocketInfo[playerid][SLOT_HAND][pExtra] = 10;
						InsertPlayerInventorySlot(playerid, SLOT_HAND);

						ShowPlayerMessage(playerid, "%s", GetObjectInfoName(j_PocketInfo[playerid][SLOT_HAND][pType]));
					} else {
						new pocket_slot = GetPlayerValidInventoryPocket(playerid);
						if (pocket_slot == -1) return SendPlayerClientMessage(playerid, "NO TIENES ESPACIO.");

						j_PocketInfo[playerid][pocket_slot][pValid] = true;
						j_PocketInfo[playerid][pocket_slot][pType] = INVENTORY_TYPE_MEDICINE_PACK;
						j_PocketInfo[playerid][pocket_slot][pExtra] = 10;
						InsertPlayerInventorySlot(playerid, pocket_slot);

						ShowPlayerMessage(playerid, "%s", GetObjectInfoName(j_PocketInfo[playerid][pocket_slot][pType]));
					}
				}
			}
			case 1: {
				if (j_PocketInfo[playerid][SLOT_HAND][pValid]) {
					new pocket_slot = GetPlayerValidInventoryPocket(playerid);
					if (pocket_slot == -1) return SendPlayerClientMessage(playerid, "NO TIENES ESPACIO.");
				}

				if (GivePlayerCash(playerid, -5000, true, true)) {
					if (!j_PocketInfo[playerid][SLOT_HAND][pValid]) {
						j_PocketInfo[playerid][SLOT_HAND][pValid] = true;
						j_PocketInfo[playerid][SLOT_HAND][pType] = INVENTORY_TYPE_MEDICAL_KIT;
						j_PocketInfo[playerid][SLOT_HAND][pExtra] = 1;
						InsertPlayerInventorySlot(playerid, SLOT_HAND);

						ShowPlayerMessage(playerid, "%s", GetObjectInfoName(j_PocketInfo[playerid][SLOT_HAND][pType]));
					} else {
						new pocket_slot = GetPlayerValidInventoryPocket(playerid);
						if (pocket_slot == -1) return SendPlayerClientMessage(playerid, "NO TIENES ESPACIO.");

						j_PocketInfo[playerid][pocket_slot][pValid] = true;
						j_PocketInfo[playerid][pocket_slot][pType] = INVENTORY_TYPE_MEDICAL_KIT;
						j_PocketInfo[playerid][pocket_slot][pExtra] = 1;
						InsertPlayerInventorySlot(playerid, pocket_slot);

						ShowPlayerMessage(playerid, "%s", GetObjectInfoName(j_PocketInfo[playerid][pocket_slot][pType]));
					}
				}
			}
		}
	}
	return 1;
}

Dialog:NoMedicsDeath(playerid, response, listitem, inputtext[]) {
	if (response) {
		PLAYER_TEMP[playerid][pt_DEATH_HEALTH] = 0;
		SetPlayerHealthEx(playerid, 0);
		Auto_SendPlayerAction(playerid, "ha elegido la salida rápida.");
	}
	return 1;
}

Dialog:InventoryPlayerResponse(playerid, response, listitem, inputtext[]) {
	if (response) {
		if (PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] == -2) {
			ShowPlayerPockets(playerid, PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM_EX][listitem]);
		}
	}
	return 1;
}

Dialog:DrivingLicenseResponse(playerid, response, listitem, inputtext[]) {
	if (response) {
		if (GivePlayerCash(playerid, -2500, true, true)) {
			PI[playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
			PI[playerid][pi_LOCAL_INTERIOR] = 0;

			SetPlayerPosEx(playerid, ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_EXT_X], ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_EXT_Y], ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_EXT_Z], ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_EXT_ANGLE], ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_EXT_INTERIOR], ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_EXT_WORLD], false);
			SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
			StopAudioStreamForPlayer(playerid);
			CallLocalFunction("OnPlayerExitInterior", "ii", playerid, PLAYER_TEMP[playerid][pt_INTERIOR_INDEX]);

			PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] = -1;

			PLAYER_TEMP[playerid][pt_DL_EXAM] = true;
			PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] = 0;

			new vehicle_id = CreateVehicle(
				426, Driving_School_Vehicle_Info[0], Driving_School_Vehicle_Info[1], 
				Driving_School_Vehicle_Info[2], Driving_School_Vehicle_Info[3], 1, 
				1, -1, false
			);

			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VALID] = true;
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TYPE] = VEHICLE_TYPE_DRIVING_SCHOOL;
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] = 426;
			format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE], 32, "{%06x}SA{f5f5f5}%d", VEHICLE_COLORS[ 1 ] >>> 8, vehicle_id);
			format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE_NAME], 32, "SA%d", vehicle_id);
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X] = Driving_School_Vehicle_Info[0];
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y] = Driving_School_Vehicle_Info[1];
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z] = Driving_School_Vehicle_Info[2];
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_ANGLE] = Driving_School_Vehicle_Info[3];
			
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][0] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X];
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][1] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y];
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][2] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z];
			
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_HEALTH] = 1250.0;
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_PANELS] = 0;
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_DOORS] = 0;
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_LIGHTS] = 0;
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_TIRES] = 0;
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_1] = 1;
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_2] = 1;
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PAINTJOB] = 3; // No paintjob
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS] = VEHICLE_INFO[ GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400 ][vehicle_info_MAX_GAS];
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_GAS] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS];
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_INTERIOR] = 0;
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_WORLD] = 0;
			GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TEMP] = true;

			TRUCK_VEHICLE[vehicle_id][truck_vehicle_LOADED] = false;
			TRUCK_VEHICLE[vehicle_id][truck_vehicle_LOADING] = false;
			TRUCK_VEHICLE[vehicle_id][truck_vehicle_UNLOADING] = false;
			TRUCK_VEHICLE[vehicle_id][truck_vehicle_DELIVERED] = false;

			ResetVehicleTaxiMeter(vehicle_id);
			ResetTruckInfo(vehicle_id);
			ResetTrashInfo(vehicle_id);
			ResetPizzaInfo(vehicle_id);

			SetVehicleVirtualWorldEx(vehicle_id, 0);
			SetVehicleToRespawnEx(vehicle_id);

			PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] = vehicle_id;
			PLAYER_TEMP[playerid][pt_WORK_VEHICLE_SPAWN_TIMER] = gettime() + 15;

			wait_ms(500);
			PutPlayerInVehicleEx(playerid, vehicle_id, 0);
			SetPlayerDrivingSchoolCP(playerid);
		}
		else ShowPlayerMessage(playerid, "No tienes el ~r~dinero~w~ suficiente.");
	}
	return 1;
}

GetDatabasePages(count, limit)
{
	return floatround(floatdiv(count, limit), floatround_ceil);
}

GetEmptyPlayer_GPS_Slot(playerid)
{
	for (new i = 0; i != MAX_PLAYER_GPS_SAVES; i ++)
	{
		if (!PLAYER_GPS[playerid][i][player_gps_VALID]) return i;
	}
	return -1;
}

SetPlayer_GPS_Checkpoint(playerid, Float:x, Float:y, Float:z, world, interior)
{
	if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT]))
	{
		DestroyDynamicCP(PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT]);
		PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT] = CreateDynamicCP(x, y, z, 5.0, world, interior, playerid, 9999999999.0);
	
	new info[1];
	info[0] = CHECKPOINT_TYPE_GPS;
	Streamer_SetArrayData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	Streamer_Update(playerid, STREAMER_TYPE_CP);

	if (GetPlayerState(playerid) == PLAYER_STATE_PASSENGER)
	{
		new vehicleid = GetPlayerVehicleID(playerid);
		if (WORK_VEHICLES[vehicleid][work_vehicle_VALID])
		{
			if (WORK_VEHICLES[vehicleid][work_vehicle_WORK] == WORK_TAXI)
			{
				if (TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_ENABLED])
				{
					if (IsPlayerConnected(GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER]))
					{
						if (IsValidDynamicCP(PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT]))
						{
							DestroyDynamicCP(PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT]);
							PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT] = INVALID_STREAMER_ID;
						}
						PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT] = CreateDynamicCP(x, y, z, 5.0, world, interior, GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER], 9999999999.0);
						
						new taxi_info[1];
						taxi_info[0] = CHECKPOINT_TYPE_GPS;
						Streamer_SetArrayData(STREAMER_TYPE_CP, PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT], E_STREAMER_EXTRA_ID, taxi_info);
						
						Streamer_Update(GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER], STREAMER_TYPE_CP);
						Auto_SendPlayerAction(playerid, "configura su GPS y se lo muestra al taxista.");
						return 1;
					}
				}
			}
		}

		if (WORK_VEHICLES[vehicleid][work_vehicle_VALID]) {
			if (WORK_VEHICLES[vehicleid][work_vehicle_WORK] == WORK_POLICE) {
				if (PLAYER_TEMP[playerid][pt_WORKING_IN] == WORK_POLICE) {
					if (IsPlayerConnected(GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER])) {
						if (IsValidDynamicCP(PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT]))
						{
							DestroyDynamicCP(PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT]);
							PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT] = INVALID_STREAMER_ID;
						}
						PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT] = CreateDynamicCP(x, y, z, 5.0, world, interior, GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER], 9999999999.0);
						
						new taxi_info[1];
						taxi_info[0] = CHECKPOINT_TYPE_GPS;
						Streamer_SetArrayData(STREAMER_TYPE_CP, PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_GPS_CHECKPOINT], E_STREAMER_EXTRA_ID, taxi_info);
						
						Streamer_Update(GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER], STREAMER_TYPE_CP);
						Auto_SendPlayerAction(playerid, "configura su GPS y se lo muestra al conductor.");
						return 1;
					}
				}
			}
		}
	}
	
	Auto_SendPlayerAction(playerid, "configura su GPS.");
	return 1;
}
	
public OnPlayerEnterDynamicArea(playerid, areaid)
{
	PLAYER_TEMP[playerid][pt_LAST_AREA_ID] = areaid;

	new info[2];
	Streamer_GetArrayData(STREAMER_TYPE_AREA, areaid, E_STREAMER_EXTRA_ID, info);
	switch(info[0])
	{
		case AREA_TYPE_GANGZONE:
		{
			new index = info[1];
			
			if (TERRITORIES[index][territory_VALID])
			{
				PLAYER_TEMP[playerid][pt_LAST_TERRITORY] = index;
				if (PI[playerid][pi_CREW])
				{
					if (TERRITORIES[index][territory_WAR])
					{
						SendPlayerClientMessage(playerid, "{%06x}{f5f5f5}Este territorio está siendo atacado por la banda '{%06x}%s{f5f5f5}'.", (CREW_INFO[ TERRITORIES[index][territory_ATTACKER_CREW_INDEX] ][crew_COLOR] >>> 8), (CREW_INFO[ TERRITORIES[index][territory_ATTACKER_CREW_INDEX] ][crew_COLOR] >>> 8), CREW_INFO[ TERRITORIES[index][territory_ATTACKER_CREW_INDEX] ][crew_NAME]);
						
						new r, g, b, a;
						HexToRGBA(CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR], r, g, b, a);
						SetPlayerColorEx(playerid, RGBAToHex(r, g, b, 0));
						
						TextDrawShowForPlayer(playerid, TERRITORIES[index][territory_TEXTDRAW][1]);
						TextDrawShowForPlayer(playerid, TERRITORIES[index][territory_TEXTDRAW][0]);
					}
				}
			}
		}
	}

	return 1;
}

public OnPlayerLeaveDynamicArea(playerid, areaid)
{
	new info[2];
	Streamer_GetArrayData(STREAMER_TYPE_AREA, areaid, E_STREAMER_EXTRA_ID, info);
	
	switch(info[0])
	{
		case AREA_TYPE_NONE:
		{
			if (areaid == Lumberjack_Area)
			{
				if (PLAYER_TEMP[playerid][pt_WORKING_IN] == WORK_LUMBERJACK)
				{
					SendPlayerClientMessage(playerid, "Has abandonado el trabajo de lecador porque te has alejado demasiado de la zona.");
					CallLocalFunction("EndPlayerJob", "iib", playerid, PLAYER_TEMP[playerid][pt_WORKING_IN], true);
				}
			}
			else if (areaid == Farmer_Area)
			{
				if (PLAYER_TEMP[playerid][pt_WORKING_IN] == WORK_FARMER) CallLocalFunction("EndPlayerJob", "iib", playerid, PLAYER_TEMP[playerid][pt_WORKING_IN], true);
			}
			else if (areaid == Harvest_Area)
			{
				if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
				{
					if (PLAYER_TEMP[playerid][pt_WORKING_IN] == WORK_HARVESTER)
					{
						SendPlayerClientMessage(playerid, "Has abandonado tu trabajo de cosechador porque te has alejado demasiado de la zona.");
						CallLocalFunction("EndPlayerJob", "iib", playerid, PLAYER_TEMP[playerid][pt_WORKING_IN], true);
					}
				}
			}
			
			if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL)
			{
				if (areaid == Jail_Areas[0] || areaid == Jail_Areas[1] || areaid == Jail_Areas[2] || areaid == Jail_Areas[3] )
				{
					SetPlayerPosEx(playerid, JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID] ][jail_X], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_Y], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_Z], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_ANGLE], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_INTERIOR], 0, true);
				}
			}
		}
		case AREA_TYPE_GANGZONE:
		{
			new index = info[1];
			
			if (TERRITORIES[index][territory_VALID])
			{
				if (PI[playerid][pi_CREW])
				{
					SetPlayerNormalColor(playerid);
					TextDrawHideForPlayer(playerid, TERRITORIES[index][territory_TEXTDRAW][1]);
					TextDrawHideForPlayer(playerid, TERRITORIES[index][territory_TEXTDRAW][0]);
				}
			}
		}
	}
	return 1;
}

public OnPlayerEnterDynamicCP(playerid, checkpointid)
{
	new info[1];
	Streamer_GetArrayData(STREAMER_TYPE_CP, checkpointid, E_STREAMER_EXTRA_ID, info);

	switch(info[0])
	{
		case CHECKPOINT_TYPE_GPS:
		{
			DestroyDynamicCP(PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT]);
			PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT] = INVALID_STREAMER_ID;
		}
		case CHECKPOINT_TYPE_UNLOAD_TRUCK:
		{
			if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 1;
			if (!PLAYER_WORKS[playerid][WORK_TRUCK][pwork_SET]) return 1;
			if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_TRUCK) return 1;
	
			new vehicleid = GetPlayerVehicleID(playerid);
			if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] != VEHICLE_TYPE_WORK) return 1;
			if (WORK_VEHICLES[vehicleid][work_vehicle_WORK] != WORK_TRUCK) return 1;
			if (TRUCK_VEHICLE[vehicleid][truck_vehicle_DELIVERED]) return 1;
			if (TRUCK_VEHICLE[vehicleid][truck_vehicle_UNLOADING]) return 1;
			if (TRUCK_VEHICLE[vehicleid][truck_vehicle_DRIVER_USER_ID] != PI[playerid][pi_ID]) return SendPlayerClientMessage(playerid, "Solo aceptaremos la carga del conductor de este camión.");
			
			DestroyDynamicCP(PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT]);
			PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT] = INVALID_STREAMER_ID;
			
			SetVehicleVelocity(vehicleid, 0.0, 0.0, 0.0);
				
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
			UpdateVehicleParams(vehicleid);
			
			TRUCK_VEHICLE[vehicleid][truck_vehicle_UNLOADING] = true;
				
			PLAYER_TEMP[playerid][pt_TRUCK_LOADING_VALUE] = 40.0;
			
			KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][7]);
			KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][9]);
			PLAYER_TEMP[playerid][pt_TIMERS][9] = SetTimerEx("TruckUnLoadUp", 1000, false, "ii", playerid, vehicleid);
		}
		case CHECKPOINT_TYPE_FINISH_TRUCK:
		{
			if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 1;
			if (!PLAYER_WORKS[playerid][WORK_TRUCK][pwork_SET]) return 1;
			if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_TRUCK) return 1;
	
			new vehicleid = GetPlayerVehicleID(playerid);
			if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] != VEHICLE_TYPE_WORK) return 1;
			if (WORK_VEHICLES[vehicleid][work_vehicle_WORK] != WORK_TRUCK) return 1;
			if (!TRUCK_VEHICLE[vehicleid][truck_vehicle_DELIVERED]) return 1;
			if (TRUCK_VEHICLE[vehicleid][truck_vehicle_UNLOADING]) return 1;
			if (TRUCK_VEHICLE[vehicleid][truck_vehicle_DRIVER_USER_ID] != PI[playerid][pi_ID]) return SendPlayerClientMessage(playerid, "Solo le pagaremos al conductor que entregó la mercancía.");
			
			DestroyDynamicCP(PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT]);
			PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT] = INVALID_STREAMER_ID;
			
			SetVehicleVelocity(vehicleid, 0.0, 0.0, 0.0);
			
			new work_extra_payment;
			if (work_info[WORK_TRUCK][work_info_EXTRA_PAY] > 0 && work_info[WORK_TRUCK][work_info_EXTRA_PAY_EXP] > 0)
			{
				work_extra_payment = (work_info[WORK_TRUCK][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[playerid][WORK_TRUCK][pwork_LEVEL], work_info[WORK_TRUCK][work_info_EXTRA_PAY_EXP])));
				if (work_info[WORK_TRUCK][work_info_EXTRA_PAY_LIMIT] != 0) if (work_extra_payment > work_info[WORK_TRUCK][work_info_EXTRA_PAY_LIMIT]) work_extra_payment = work_info[WORK_TRUCK][work_info_EXTRA_PAY_LIMIT];
			
				if (PI[playerid][pi_VIP]) work_extra_payment += VIP_WORK_EXTRA_PAY;
			}
			
			if (GivePlayerCash(playerid, Truck_Contents[ TRUCK_VEHICLE[vehicleid][truck_vehicle_POINT] ][truck_content_MONEY] + work_extra_payment, true, false)) {
				PLAYER_WORKS[playerid][WORK_TRUCK][pwork_LEVEL] ++;

				ShowPlayerMessage(playerid, "Has recibido %s~b~$~w~ por entregar ~b~%s~w~.", number_format_thousand(Truck_Contents[ TRUCK_VEHICLE[vehicleid][truck_vehicle_POINT] ][truck_content_MONEY] + work_extra_payment), Truck_Contents[ TRUCK_VEHICLE[vehicleid][truck_vehicle_POINT] ][truck_content_NAME]);

				PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] = INVALID_VEHICLE_ID;
				DestroyVehicleEx(vehicleid);
			}
		}
		case CHECKPOINT_TYPE_TRASH:
		{
			if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return 1;
			if (!PLAYER_WORKS[playerid][WORK_TRASH][pwork_SET]) return DestroyPlayerTrashCheckpoint(playerid);
			if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_TRASH) return DestroyPlayerTrashCheckpoint(playerid);
			if (!PLAYER_TEMP[playerid][pt_TRASH_PASSENGER]) return 1;
			
			new driver = TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID];
			SendPlayerClientMessage(driver, "{f5f5f5}Espera mientras tu compañero recoge la basura.");
			
			new Float:offset = floatdiv(PLAYER_WORKS[playerid][WORK_TRASH][pwork_LEVEL], 10);
			if (offset > 30.0) offset = 30.0;
			
			PLAYER_TEMP[playerid][pt_RECYCLE_BIN_VALUE] = 10.0 + offset;
			UpdatePlayerTrashRecycleSize(playerid);
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0]);
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1]);
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2]);
			
			TogglePlayerControllableEx(playerid, false);
			SetCameraBehindPlayer(playerid);
			ApplyAnimation(playerid, "ROB_BANK", "CAT_Safe_Rob", 4.1, true, false, false, false, 0);
			
			KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][10]);
			PLAYER_TEMP[playerid][pt_TIMERS][10] = SetTimerEx("RecycleUp", 1000, false, "i", playerid);
		}
		case CHECKPOINT_TYPE_FINISH_TRASH:
		{
			if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 1;
			if (!PLAYER_WORKS[playerid][WORK_TRASH][pwork_SET]) return DestroyPlayerTrashCheckpoint(playerid);
			if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_TRASH) return DestroyPlayerTrashCheckpoint(playerid);
			if (!PLAYER_TEMP[playerid][pt_TRASH_DRIVER]) return 1;
			
			new route = TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE];
			new money = TRASH_OBJECTS[route][trash_route_MONEY];
			
			
			new driver_work_extra_payment, passenger_work_extra_payment;
			if (work_info[WORK_TRASH][work_info_EXTRA_PAY] > 0 && work_info[WORK_TRASH][work_info_EXTRA_PAY_EXP] > 0)
			{
				driver_work_extra_payment = (work_info[WORK_TRASH][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[playerid][WORK_TRASH][pwork_LEVEL], work_info[WORK_TRASH][work_info_EXTRA_PAY_EXP])));
				if (work_info[WORK_TRASH][work_info_EXTRA_PAY_LIMIT] != 0) if (driver_work_extra_payment > work_info[WORK_TRASH][work_info_EXTRA_PAY_LIMIT]) driver_work_extra_payment = work_info[WORK_TRASH][work_info_EXTRA_PAY_LIMIT];
				if (PI[playerid][pi_VIP]) driver_work_extra_payment += VIP_WORK_EXTRA_PAY;
				
				passenger_work_extra_payment = (work_info[WORK_TRASH][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[ TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID] ][WORK_TRASH][pwork_LEVEL], work_info[WORK_TRASH][work_info_EXTRA_PAY_EXP])));
				if (work_info[WORK_TRASH][work_info_EXTRA_PAY_LIMIT] != 0) if (passenger_work_extra_payment > work_info[WORK_TRASH][work_info_EXTRA_PAY_LIMIT]) passenger_work_extra_payment = work_info[WORK_TRASH][work_info_EXTRA_PAY_LIMIT];
				if (PI[ TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID] ][pi_VIP]) passenger_work_extra_payment += VIP_WORK_EXTRA_PAY;
			}
			
			if (PI[playerid][pi_VIP]) money = TRASH_OBJECTS[route][trash_route_VIP_MONEY];

			GivePlayerCash(playerid, money + driver_work_extra_payment, true, false);
			SendPlayerClientMessage(playerid, "Trabajo finalizado, has ganado %s~g~$~w~.", number_format_thousand(money + driver_work_extra_payment));
			PLAYER_WORKS[playerid][WORK_TRASH][pwork_LEVEL] ++;
			
			money = TRASH_OBJECTS[route][trash_route_MONEY];
			if (PI[ TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID] ][pi_VIP]) money = TRASH_OBJECTS[route][trash_route_VIP_MONEY];

			GivePlayerCash(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], money + passenger_work_extra_payment, true, false);
			SendPlayerClientMessage(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], "Trabajo finalizado, has ganado %s~g~$~w~.", number_format_thousand(money + passenger_work_extra_payment));
			PLAYER_WORKS[ TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID] ][WORK_TRASH][pwork_LEVEL] ++;
			
			CancelTrashWork(playerid, TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID]);
		}
		case CHECKPOINT_TYPE_LUMBERJACK:
		{
			if (PLAYER_TEMP[playerid][pt_WORKING_IN] == WORK_LUMBERJACK)
			{
				DestroyDynamicCP(PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT]);
				PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT] = INVALID_STREAMER_ID;
				
				SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
				RemovePlayerAttachedObject(playerid, 1);
				PLAYER_TEMP[playerid][pt_PLAYER_CARRYING_TREE] = false;
				ApplyAnimation(playerid, "CARRY", "putdwn05", 4.1, 0, 1, 1, 0, 0, 1);
				
				new work_extra_payment;
				if (work_info[WORK_LUMBERJACK][work_info_EXTRA_PAY] > 0 && work_info[WORK_LUMBERJACK][work_info_EXTRA_PAY_EXP] > 0)
				{
					work_extra_payment = (work_info[WORK_LUMBERJACK][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[playerid][WORK_LUMBERJACK][pwork_LEVEL], work_info[WORK_LUMBERJACK][work_info_EXTRA_PAY_EXP])));
					if (work_info[WORK_LUMBERJACK][work_info_EXTRA_PAY_LIMIT] != 0) if (work_extra_payment > work_info[WORK_LUMBERJACK][work_info_EXTRA_PAY_LIMIT]) work_extra_payment = work_info[WORK_LUMBERJACK][work_info_EXTRA_PAY_LIMIT];
					
					if (PI[playerid][pi_VIP]) work_extra_payment += VIP_WORK_EXTRA_PAY;
				}
				PLAYER_WORKS[playerid][WORK_LUMBERJACK][pwork_LEVEL] ++;
				GiveRandomLumberjackScrew(playerid);
				
				new amount = minrand(70, 100) + work_extra_payment;
				GivePlayerCash(playerid, amount, true, false);
			}
			else
			{
				DestroyDynamicCP(PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT]);
				PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT] = INVALID_STREAMER_ID;
			}
		}
		case CHECKPOINT_TYPE_PIZZA_DEL:
		{
			if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return 1;
			PLAYER_TEMP[playerid][pt_PIZZA_PROCCESS] --;
			PLAYER_TEMP[playerid][pt_DELIVERED_PIZZAS] ++;
			RemovePlayerAttachedObject(playerid, 2);
			SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
			ApplyDynamicActorAnimation(PLAYER_TEMP[playerid][pt_PIZZA_ACTOR], "FOOD", "EAT_Pizza", 4.1, false, true, true, false, 0);
			ApplyDynamicActorAnimation(PLAYER_TEMP[playerid][pt_PIZZA_ACTOR], "FOOD", "EAT_Pizza", 4.1, false, true, true, false, 0);
			DestroyDynamicCP(PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT]);
			PIZZA_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][pizza_vehicle_PIZZA_POINT_DELI] = true;
			PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
			
			SendPlayerClientMessage(playerid, "Genial, vuelve a subir a la moto para continuar.");
		}
		case CHECKPOINT_TYPE_PIZZA_FINISH:
		{
			if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return 1;
			
			new vehicleid = GetPlayerVehicleID(playerid);
			if (!PIZZA_VEHICLE[vehicleid][pizza_vehicle_STARTED]) return 1;
			if (PIZZA_VEHICLE[vehicleid][pizza_vehicle_DRIVER_AID] != PI[playerid][pi_ID]) return SendPlayerClientMessage(playerid, "Solo le pagaremos al conductor que realizó el trabajo.");
		
			new work_extra_payment;
			if (work_info[WORK_PIZZA][work_info_EXTRA_PAY] > 0 && work_info[WORK_PIZZA][work_info_EXTRA_PAY_EXP] > 0)
			{
				work_extra_payment = (work_info[WORK_PIZZA][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[playerid][WORK_PIZZA][pwork_LEVEL], work_info[WORK_PIZZA][work_info_EXTRA_PAY_EXP])));
				if (work_info[WORK_PIZZA][work_info_EXTRA_PAY_LIMIT] != 0) if (work_extra_payment > work_info[WORK_PIZZA][work_info_EXTRA_PAY_LIMIT]) work_extra_payment = work_info[WORK_PIZZA][work_info_EXTRA_PAY_LIMIT];
			
				if (PI[playerid][pi_VIP]) work_extra_payment += VIP_WORK_EXTRA_PAY;
			}
			
			PLAYER_WORKS[playerid][WORK_PIZZA][pwork_LEVEL] ++;
			new money = (PLAYER_TEMP[playerid][pt_DELIVERED_PIZZAS] * 200) + work_extra_payment;
			GivePlayerCash(playerid, money, true, false);
			SendPlayerClientMessage(playerid, "{ff0000} {f5f5f5}Gracias por tu trabajo, has repartido {ff0000}%d pizzas{f5f5f5} y has ganado %s{"#GREEN_COLOR"}${f5f5f5}.", PLAYER_TEMP[playerid][pt_DELIVERED_PIZZAS], number_format_thousand(money));
			
			CallLocalFunction("EndPlayerJob", "iib", playerid, PLAYER_TEMP[playerid][pt_WORKING_IN], true);
		}
		default: return 1;
	}
	return 1;
}

forward UpdateDialogShow(playerid, bool: toggle); //EasyDialog
public UpdateDialogShow(playerid, bool: toggle) {
	PLAYER_TEMP[playerid][pt_PICKUP_TIMER] = gettime() + 3;
	return PLAYER_TEMP[playerid][pt_DIALOG_SHOW] = toggle;
}

RegisterNewPlayer_GPS_Site(playerid, slot)
{
	inline OnPgpsInserted()
	{
		PLAYER_GPS[playerid][slot][player_gps_ID] = cache_insert_id();
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO pgps (id_player, name, x, y, z, world, interior) VALUES(%d, '%e', %f, %f, %f, %d, %d);", PI[playerid][pi_ID], PLAYER_GPS[playerid][slot][player_gps_NAME], PLAYER_GPS[playerid][slot][player_gps_X], PLAYER_GPS[playerid][slot][player_gps_Y], PLAYER_GPS[playerid][slot][player_gps_Z], PLAYER_GPS[playerid][slot][player_gps_WORLD], PLAYER_GPS[playerid][slot][player_gps_INTERIOR]);
	MySQL_TQueryInline(handle_db, using inline OnPgpsInserted,QUERY_BUFFER );
	return 1;
}

ConnectDatabase()
{
	print("[MySQL] Conectando a la base de datos...");
	mysql_log(ERROR | WARNING);

	handle_db = mysql_connect_file("mysql_db.ini");
	if (handle_db == MYSQL_INVALID_HANDLE || mysql_errno(handle_db) != 0)
	{
		printf("[MySQL] No se pudo conectar con la base de datos (handle_db) (%d)", mysql_errno(handle_db));
		SendRconCommand("exit");
	}
	else
	{
		mysql_tquery(handle_db, "UPDATE player SET connected = 0, playerid = 0;");
  		printf("[MySQL] Base de datos conectada (handle_db) (%d)", _:handle_db);
		SanAndreas();
	 	LoadServerInfo();
	}
	return 1;
}

public OnQueryError(errorid, const error[], const callback[], const query[], MySQL:handle)
{
	switch(errorid) 
	{
		case CR_SERVER_GONE_ERROR: printf("[MySQL] [ERROR]: Se ha perdido la conexión con el servidor (%d)", _:handle);
		case ER_SYNTAX_ERROR: printf("[MySQL] [ERROR]: Syntax error, query: %s (%d)", query, _:handle);
		default: printf("[MySQL] [ERROR] errorid: %d, error: %s, callback: %s, query: %s, handle: %d", errorid, error, callback, query, _:handle);
	}
	return 1;
}

ClearPlayerChat(playerid)
{
	for (new i = 0; i != 32; i++) SendPlayerClientMessage(playerid, " ");
	return 1;
}

RegisterBankAccountTransaction(from_id, to_id, transaction_type, amount)
{
	new date[24];
	getDateTime(date);
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO bank_movements (date, type, from_id, to_id, amount) VALUES('%e', %d, %d, %d, %d);", date, transaction_type, from_id, to_id, amount);
	mysql_tquery(handle_db, QUERY_BUFFER);
	return 1;
}

RegisterNewPlayer(playerid)
{
	if (PLAYER_TEMP[playerid][pt_USER_EXIST]) return 0;
	
	inline OnPlayerInserted()
	{
		PI[playerid][pi_ID] = cache_insert_id();
		if (PI[playerid][pi_ID])
		{
			PLAYER_TEMP[playerid][pt_USER_EXIST] = true;
			PI[playerid][pi_PHONE_NUMBER] = getPhoneNumber(PI[playerid][pi_ID]);
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET phone_number = %d WHERE id = %d;", PI[playerid][pi_PHONE_NUMBER], PI[playerid][pi_ID]);
			mysql_tquery(handle_db, QUERY_BUFFER);
			CreateDefaultContacts(playerid);
			CallLocalFunction("OnPlayerRegister", "i", playerid);
		}
		else Kick(playerid);
		return 1;
	}

	mysql_format
	(
		handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, 
		"\
			INSERT INTO player\
			(\
				name,\
				ip,\
				email,\
				salt,\
				pass,\
				reg_date,\
				last_connection_timestamp,\
				level,\
				rep,\
				connected,\
				playerid,\
				time_for_rep,\
				skin,\
				cash,\
				pos_x,\
				pos_y,\
				pos_z,\
				angle,\
				state,\
				fight_style,\
				health,\
				hungry,\
				thirst,\
				config_sounds,\
				config_audio,\
				config_time,\
				config_hud,\
				config_admin,\
				phone_visible_number,\
				doubt_channel,\
				vip_expire_date\
			) \
			VALUES\
			(\
				'%e', '%e', '%e', '%e', '%e', '%e', %d, %d, %d, %d, %d, %d, %d, %d, %f, %f, %f, %f, %d, %d, %f, %f, %f, %d, %d, %d, %d, %d, %d, %d, '0000-00-00 00:00:00'\
			);\
		",
			PI[playerid][pi_NAME], PI[playerid][pi_IP], PI[playerid][pi_EMAIL],
			PI[playerid][pi_SALT], PI[playerid][pi_PASS], PI[playerid][pi_REG_DATE], PI[playerid][pi_LAST_CONNECTION], PI[playerid][pi_LAST_CONNECTION_TIMESTAMP],
			PI[playerid][pi_LEVEL], PI[playerid][pi_REP], PI[playerid][pi_CONNECTED], PI[playerid][pi_PLAYERID],
			PI[playerid][pi_TIME_FOR_REP], PI[playerid][pi_SKIN], PI[playerid][pi_CASH], PI[playerid][pi_POS_X],
			PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z], PI[playerid][pi_ANGLE], PI[playerid][pi_STATE],
			PI[playerid][pi_FIGHT_STYLE], PI[playerid][pi_HEALTH], PI[playerid][pi_HUNGRY], PI[playerid][pi_THIRST],
			PI[playerid][pi_CONFIG_SOUNDS], PI[playerid][pi_CONFIG_AUDIO], PI[playerid][pi_CONFIG_TIME],
			PI[playerid][pi_CONFIG_HUD], PI[playerid][pi_CONFIG_ADMIN], PI[playerid][pi_PHONE_VISIBLE_NUMBER], PI[playerid][pi_DOUBT_CHANNEL]
	);
	MySQL_TQueryInline(handle_db, using inline OnPlayerInserted, QUERY_BUFFER );
	return 1;
}

CreateDefaultContacts(playerid)
{
	new slot;
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_VALID] = true;
	format(PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], 24, "Policia");
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER] = 911;
	RegisterNewPlayerPhoneBook(playerid, slot);
	slot ++;
	
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_VALID] = true;
	format(PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], 24, "Banco");
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER] = 6740;
	RegisterNewPlayerPhoneBook(playerid, slot);
	slot ++;
	
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_VALID] = true;
	format(PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], 24, "Aseguradora");
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER] = 38350;
	RegisterNewPlayerPhoneBook(playerid, slot);
	slot ++;
	
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_VALID] = true;
	format(PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], 24, "Taxi");
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER] = 450;
	RegisterNewPlayerPhoneBook(playerid, slot);
	slot ++;

	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_VALID] = true;
	format(PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], 24, "Grua");
	PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER] = 580;
	RegisterNewPlayerPhoneBook(playerid, slot);
	return 1;
}

stock TimeConvert(seconds)
{
	new tmp[16];
 	new minutes = floatround(seconds/60);
  	seconds -= minutes*60;
	format(tmp, sizeof(tmp), "%d:%02d", minutes, seconds);
   	return tmp;
}

stock TimeConvertEx(sec, &days = 0, &hours = 0, &minutes = 0, &seconds = 0)
{
	days = floatround(sec / 86400);
	hours = floatround((sec - (days * 86400)) / 3600);
	minutes = floatround((sec - (days * 86400) - (hours * 3600)) / 60);
	seconds = sec % 60;
   	return 1;
}

stock TimeConvertAsText(sec)
{
	new string[128] = "";
	
	if (sec <= 0)
	{
		string = "0 minutos";
		return string;
	}

	new days, hours, minutes, seconds;
	TimeConvertEx(sec, days, hours, minutes, seconds);

	format(string, sizeof string, "%d segundos", seconds);
	if (minutes > 0) format(string, sizeof string, "%d minutos", minutes);
	if (hours > 0) format(string, sizeof string, "%d horas", hours);
	if (days > 0) format(string, sizeof string, "%d días", days);
   	return string;
}

stock TimeConvertExAsText(sec, bool:lastMinute = false)
{
	new string[128] = "";
	
	if (lastMinute && sec < 60)
	{
		string = "menos de 1 minuto";
		return string;
	}

	if (sec <= 0)
	{
		string = "nada";
		return string;
	}

	new days, hours, minutes, seconds;
	TimeConvertEx(sec, days, hours, minutes, seconds);

	if (days)
	{
		strcatf(string, "%d días", days);
	}

	if (hours)
	{
		if (strlen(string) > 0) strcat(string, " ");
		strcatf(string, "%d horas", hours);
	}

	if (minutes)
	{
		strcatf(string, "%d minutos", minutes);
	}

	if (seconds)
	{
		if (strlen(string) > 0) strcat(string, " ");
		strcatf(string, "%d segundos", seconds);
	}
   	return string;
}

ProxDetector(playerid, Float:radi, string[], col1, col2, col3, col4, col5, div = 0)
{
	new line1_str[165], line2_str[165], bool:line2_used;
	
	if (div)
	{
		format(line1_str, div + 1, "%s", string);
		if (strlen(string) > div)
		{
			format(line2_str, sizeof line2_str, " %s", string[div]);
			line2_used = true;
		}
	}
	else format(line1_str, sizeof line1_str, "%s", string);
	
	new Float:oldposx, Float:oldposy, Float:oldposz, current_vw = GetPlayerVirtualWorld(playerid), current_int = GetPlayerInterior(playerid);
	GetPlayerPos(playerid, oldposx, oldposy, oldposz);
	
	foreach (new i : Player) 					
	{
		if (!IsPlayerConnected(i)) continue;
		if (!PLAYER_TEMP[i][pt_USER_LOGGED]) continue;
		if (GetPlayerVirtualWorld(i) != current_vw) continue;
		if (GetPlayerInterior(i) != current_int) continue;
		
		if (IsPlayerInRangeOfPoint(i, radi/16, oldposx, oldposy, oldposz))
		{
			SendClientMessage(i, col1, line1_str);
			if (div && line2_used) SendClientMessage(i, col1, line2_str);
		}
		else if (IsPlayerInRangeOfPoint(i, radi/8, oldposx, oldposy, oldposz))
		{
			SendClientMessage(i, col2, line1_str);
			if (div && line2_used) SendClientMessage(i, col2, line2_str);
		}
		else if (IsPlayerInRangeOfPoint(i, radi/4, oldposx, oldposy, oldposz))
		{
			SendClientMessage(i, col3, line1_str);			
			if (div && line2_used) SendClientMessage(i, col3, line2_str);
		}
		else if (IsPlayerInRangeOfPoint(i, radi/2, oldposx, oldposy, oldposz))
		{
			SendClientMessage(i, col4, line1_str);	
			if (div && line2_used) SendClientMessage(i, col4, line2_str);
		}
		else if (IsPlayerInRangeOfPoint(i, radi, oldposx, oldposy, oldposz))
		{
			SendClientMessage(i, col5, line1_str);
			if (div && line2_used) SendClientMessage(i, col5, line2_str);
		}
	}
	return 1;
}

NearbyMessage(Float:pos_x, Float:pos_y, Float:pos_z, current_int, current_vw, Float:radi, const string[])
{
	foreach (new i : Player) 					
	{
		if (!IsPlayerConnected(i)) continue;
		if (!PLAYER_TEMP[i][pt_USER_LOGGED]) continue;
		if (GetPlayerVirtualWorld(i) != current_vw) continue;
		if (GetPlayerInterior(i) != current_int) continue;
		
		if (IsPlayerInRangeOfPoint(i, radi, pos_x, pos_y, pos_z)) SendPlayerClientMessage(i, string);
	}
	return 1;
}

IsValidRPName(const string[])
{
	/*new Regex:reg_exp = Regex_New("[A-Z][a-z]+_[A-Z][a-z]{1,3}[A-Z]?[a-z]*");
	new result = Regex_Check(string, reg_exp);
	Regex_Delete(reg_exp);
	return result;*/

	if(strlen(string) < 4) {
		return 0;
	}

	return 1;
}

IsValidEmail(const string[])
{
	new Regex:reg_exp = Regex_New("[a-zA-Z0-9_\\.]+@([a-zA-Z0-9\\-]+\\.)+[a-zA-Z]{2,4}"); 
	new result = Regex_Check(string, reg_exp); 
	Regex_Delete(reg_exp); 
	return result; 
}

KickEx(playerid, time = 0)
{
	PLAYER_TEMP[playerid][pt_KICKED] = true;
	if (!time) Kick(playerid);
	else
	{
		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][0]);
		PLAYER_TEMP[playerid][pt_TIMERS][0] = SetTimerEx("KickPlayer", time, false, "i", playerid);
	}
	return 1;
}

forward KickPlayer(playerid);
public KickPlayer(playerid)
{
	return Kick(playerid);
}

LoadPlayerPhoneBook(playerid)
{
	if (PI[playerid][pi_ID] == 0) return 0;
	
	inline OnPhoneBookLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			for (new i = 0; i != rows; i ++)
			{
				new id, name[24], number;
				cache_get_value_name_int(i, "id", id);
				cache_get_value_name(i, "name", name);
				cache_get_value_name_int(i, "number", number);
				
				PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_VALID] = true;
				PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_ID] = id;
				format(PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_NAME], 24, "%s", name);
				PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_PHONE_NUMBER] = number;
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM pbook WHERE id_player = %d LIMIT %d;", PI[playerid][pi_ID], MAX_PHONE_CONTACTS);
	MySQL_TQueryInline(handle_db,  using inline OnPhoneBookLoad, QUERY_BUFFER);
	return 1;
}

RegisterNewPlayerPhoneBook(playerid, slot)
{
	inline OnContactInserted()
	{
		PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_ID] = cache_insert_id();
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO pbook (id_player, name, number) VALUES (%d, '%e', %d);", PI[playerid][pi_ID], PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_NAME], PLAYER_PHONE_BOOK[playerid][slot][phone_book_contact_PHONE_NUMBER]);
	MySQL_TQueryInline(handle_db,  using inline OnContactInserted, QUERY_BUFFER);
	return 1;
}

RegisterPhoneMessage(from_id, to_id, message[], offline = 0)
{
	new date[24], from_id_insert[24] = "NULL", to_id_insert[24] = "NULL";
	getDateTime(date);
	if (from_id) format(from_id_insert, 24, "%d", from_id);
	if (to_id) format(to_id_insert, 24, "%d", to_id);

	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO pmessages (from_id, to_id, message, date, offline) VALUES (%s, %s, '%e', '%e', %d);", from_id_insert, to_id_insert, message, date, offline);
	mysql_tquery(handle_db, QUERY_BUFFER);
	return 1;
}


forward NoCallResponse(playerid);
public NoCallResponse(playerid)
{
	if (!PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL]) return 0;
	if (PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] == INVALID_PLAYER_ID) return 0;
	if (PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_STATE] != CALL_STATE_WAITING_RESPONSE) return 0;
	
	EndPhoneCall(playerid);
	return 1;
}

EndPhoneCall(playerid)
{
	if (!PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL]) return 0;
	
	if (PLAYER_TEMP[playerid][pt_POLICE_CALL_NAME] || PLAYER_TEMP[playerid][pt_POLICE_CALL_DESCRIPTION])
	{
		PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL] = false;
		PLAYER_TEMP[playerid][pt_POLICE_CALL_NAME] = false;
		PLAYER_TEMP[playerid][pt_POLICE_CALL_DESCRIPTION] = false;
		return 1;
	}
	
	if (PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] == INVALID_PLAYER_ID) return 0;
	if (PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_STATE] == CALL_GAME_STATE_NONE) return 0;
	
	new to_playerid = PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_PLAYERID];
	switch(PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_STATE])
	{
		case CALL_STATE_WAITING_RESPONSE:
		{
			KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][6]);
			
			PLAYER_TEMP[to_playerid][pt_PLAYER_IN_CALL] = false;
			PLAYER_TEMP[to_playerid][pt_PLAYER_PHONE_CALL_STATE] = CALL_GAME_STATE_NONE;
			PLAYER_TEMP[to_playerid][pt_PLAYER_PHONE_CALL_PLAYERID] = INVALID_PLAYER_ID;
		}
		case CALL_STATE_INCOMING_CALL:
		{
			SendPlayerClientMessage(to_playerid, "{f5f5f5}No respondieron el teléfono...");
			KillTimer(PLAYER_TEMP[to_playerid][pt_TIMERS][6]);
			
			PLAYER_TEMP[to_playerid][pt_PLAYER_IN_CALL] = false;
			PLAYER_TEMP[to_playerid][pt_PLAYER_PHONE_CALL_STATE] = CALL_GAME_STATE_NONE;
			PLAYER_TEMP[to_playerid][pt_PLAYER_PHONE_CALL_PLAYERID] = INVALID_PLAYER_ID;
		}
		case CALL_STATE_ESTABLISHED:
		{
			SendPlayerClientMessage(to_playerid, "{"#PRIMARY_COLOR"}Llamada finalizada.");
			PLAYER_TEMP[to_playerid][pt_PLAYER_IN_CALL] = false;
			PLAYER_TEMP[to_playerid][pt_PLAYER_PHONE_CALL_STATE] = CALL_GAME_STATE_NONE;
			PLAYER_TEMP[to_playerid][pt_PLAYER_PHONE_CALL_PLAYERID] = INVALID_PLAYER_ID;
			
			SetPlayerSpecialAction(playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
			SetPlayerSpecialAction(to_playerid, SPECIAL_ACTION_STOPUSECELLPHONE);
		}
	}
	
	PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL] = false;
	PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_STATE] = CALL_GAME_STATE_NONE;
	PLAYER_TEMP[playerid][pt_PLAYER_PHONE_CALL_PLAYERID] = INVALID_PLAYER_ID;
	return 1;
}

convertPhoneNumber(playerid, number)
{
	new f_string[24], bool:exists;
	for (new i = 0; i != MAX_PHONE_CONTACTS; i ++)
	{
		if (!PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_VALID]) continue;
		if (number == PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_PHONE_NUMBER])
		{
			exists = true;
			format(f_string, sizeof f_string, "%s", PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_NAME]);
			break;
		}
	}

	if (!exists) format(f_string, sizeof f_string, "%d", number);
	return f_string;
}

GetEmptyPlayerPhoneBookSlot(playerid)
{
	for (new i = 0; i != MAX_PHONE_CONTACTS; i ++)
	{
		if (!PLAYER_PHONE_BOOK[playerid][i][phone_book_contact_VALID]) return i;
	}
	return -1;
}

LoadPlayerGPSData(playerid)
{
	if (PI[playerid][pi_ID] == 0) return 0;
	
	inline OnPgpsLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			for (new i = 0; i != rows; i ++)
			{
				PLAYER_GPS[playerid][i][player_gps_VALID] = true;
				cache_get_value_name_int(i, "id", PLAYER_GPS[playerid][i][player_gps_ID]);
				cache_get_value_name(i, "name", PLAYER_GPS[playerid][i][player_gps_NAME]);
				cache_get_value_name_float(i, "x", PLAYER_GPS[playerid][i][player_gps_X]);
				cache_get_value_name_float(i, "y", PLAYER_GPS[playerid][i][player_gps_Y]);
				cache_get_value_name_float(i, "z", PLAYER_GPS[playerid][i][player_gps_Z]);
				cache_get_value_name_int(i, "world", PLAYER_GPS[playerid][i][player_gps_WORLD]);
				cache_get_value_name_int(i, "interior", PLAYER_GPS[playerid][i][player_gps_INTERIOR]);
				
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM pgps WHERE id_player = %d;", PI[playerid][pi_ID]);
	MySQL_TQueryInline(handle_db,  using inline OnPgpsLoad, QUERY_BUFFER);
	return 1;
}

stock minrand(min, max) //By Alex "Y_Less" Cole
{
	return random(max - min) + min;
}

stock ConvertTime_SecondsToHours(sec, &hours, &minutes, &seconds)
{
	hours = floatround(sec / 3600);
	minutes = floatround((sec - (hours * 3600)) / 60);
	seconds = sec % 60;
   	return 1;
}

#define DEFAULT_PC_HEALTH_BAR_POS_SIZE 546.500000,66.000000,60.000000,8.200000
#define DEFAULT_PC_ARMOUR_BAR_POS_SIZE 546.500000,45.500000,60.000000,8.200000

#define DEFAULT_MOBILE_HEALTH_BAR_POS_SIZE 515.000000,65.000000,50.000000,10.000000
#define DEFAULT_MOBILE_ARMOUR_BAR_POS_SIZE 515.000000,81.000000,50.000000,10.000000

stock CreatePlayerBars(const playerid) {
	j_Pb[playerid][pbRep] = CreatePlayerProgressBar(playerid, 2.000000, 439.000000, 474.500000,  5.200000, 0xe13434ff, 0.0, BAR_DIRECTION_RIGHT);
	SetPlayerProgressBarFillColour(playerid, j_Pb[playerid][pbRep], 0x505050ff);
	j_Pb[playerid][pbHungry] = CreatePlayerProgressBar(playerid, 477.000000, 439.000000, 81.000000, 5.200000, 0xffb623ff, 100.0, BAR_DIRECTION_RIGHT);
    j_Pb[playerid][pbThirst] = CreatePlayerProgressBar(playerid, 559.000000, 439.000000, 82.000000, 5.200000, 0x23cdffff, 100.0, BAR_DIRECTION_RIGHT);
	return 1;
}

CreatePlayerTextDraws(playerid)
{
	for (new i; i < sizeof(PlayerTextdraws[]); i++) PlayerTextdraws[playerid][Player_Textdraws_Enum:i] = INVALID_TEXT_DRAW;

	PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0] = CreatePlayerTextDraw(playerid, 320.000000, 380.000000, "_");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0], 0.400000, 1.600000);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0], 0.000000, 100.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0], 255);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0], 0);

	PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1] = CreatePlayerTextDraw(playerid, 272.000000, 382.000000, "_");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1], 0.400000, 1.127111);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1], 368.000000, 0.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1], -16777123);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1], 0);
	
	PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2] = CreatePlayerTextDraw(playerid, 272.000000, 382.000000, "_");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2], 0.400000, 1.127111);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2], 270.000000, 0.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2], -16777123);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2], 0);
	
	PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0] = CreatePlayerTextDraw(playerid, 320.000000, 350.000000, "I");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 27.410259, 5.897183);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 145);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 2);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0], 0);

	PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1] = CreatePlayerTextDraw(playerid, 320.000000, 358.000000, "Tienda");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 0.361666, 1.400889);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], -1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 1);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 90);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 0);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], 0);

	PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2] = CreatePlayerTextDraw(playerid, 320.000000, 377.000000, "COMPRAR");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 0.193666, 0.915556);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 10.000000, 34.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -201); // Money = 9306312   ,  -1459617611  No money
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], true);

	PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3] = CreatePlayerTextDraw(playerid, 363.000000, 377.000000, "SIGUIENTE");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 0.193666, 0.915556);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 10.000000, 34.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], -132);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3], true);

	PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4] = CreatePlayerTextDraw(playerid, 277.000000, 377.000000, "ANTERIOR");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 0.193666, 0.915556);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 10.000000, 34.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], -132);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4], true);

	PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5] = CreatePlayerTextDraw(playerid, 320.000000, 398.000000, "Precio:_0$~n~Ropa:_0/0");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 0.171666, 0.782815);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], -86);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], 0);
	
	PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][0] = CreatePlayerTextDraw(playerid, 320.000000, 298.000000, "l");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][0], 33.579376, 12.750882);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][0], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][0], 172);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][0], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][0], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][0], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][0], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][0], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][0], 0);

	PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][1] = CreatePlayerTextDraw(playerid, 320.000000, 316.000000, "Ropa_del_personaje");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][1], 0.400000, 1.600000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][1], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][1], -81);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][1], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][1], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][1], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][1], 0);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][1], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][1], 0);

	PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2] = CreatePlayerTextDraw(playerid, 290.000000, 340.000000, "_");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2], 0.221999, 1.558518);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2], 0.000000, 50.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2], -256); // seleccionado -94);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2], 2);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2], 0);

	PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3] = CreatePlayerTextDraw(playerid, 290.000000, 342.000000, "hombre");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3], 0.221999, 1.147852);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3], 13.000000, 47.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3], -1936945921);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3], 2);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3], true);

	PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4] = CreatePlayerTextDraw(playerid, 350.000000, 340.000000, "_");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4], 0.221999, 1.558518);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4], 0.000000, 50.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4], -256);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4], 2);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4], 0);

	PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5] = CreatePlayerTextDraw(playerid, 350.000000, 342.000000, "mujer");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5], 0.221999, 1.147852);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5], 13.000000, 47.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5], -1936945921);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5], 2);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5], true);
	
	PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6] = CreatePlayerTextDraw(playerid, 320.000000, 365.000000, "continuar");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6], 0.221999, 1.147852);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6], 13.000000, 50.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6], -1936945921);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6], 2);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6], true);

	PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7] = CreatePlayerTextDraw(playerid, 362.000000, 365.000000, ">>");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7], 0.221999, 1.147852);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7], 13.000000, 23.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7], -1936945921);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7], 2);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7], true);

	PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8] = CreatePlayerTextDraw(playerid, 278.000000, 365.000000, "<<");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8], 0.221999, 1.147852);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8], 13.000000, 23.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8], -1936945921);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8], 2);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8], true);

	PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9] = CreatePlayerTextDraw(playerid, 320.000000, 380.000000, "0/0");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9], 0.158000, 0.770370);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9], -171);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9], 0);

	PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0] = CreatePlayerTextDraw(playerid, 320.000000, 159.000000, "box");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0], 0.000000, 15.033352);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0], 0.000000, 240.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0], 1869574143);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0], 0);

	PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1] = CreatePlayerTextDraw(playerid, 320.000000, 156.000000, "Tienda");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1], 0.400000, 1.600000);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1], 0.000000, 240.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1], -1633916417);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1], 0);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1], 0);

	PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2] = CreatePlayerTextDraw(playerid, 215.000000, 184.000000, "");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2], 80.000000, 85.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2], -1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2], -19201);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2], 5);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2], 0);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2], 0);
	PlayerTextDrawSetPreviewModel(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2], 18864);
	PlayerTextDrawSetPreviewRot(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2], 344.000000, 0.000000, 109.000000, 1.000000);

	PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3] = CreatePlayerTextDraw(playerid, 217.000000, 186.000000, "");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3], 0.000000, 0.000000);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3], 76.000000, 81.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3], -1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3], -926365441);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3], 5);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3], 0);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3], 0);
	PlayerTextDrawSetPreviewModel(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3], 0);
	PlayerTextDrawSetPreviewRot(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3], 344.000000, 0.000000, 109.000000, 1.000000);

	PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][4] = CreatePlayerTextDraw(playerid, 311.000000, 207.000000, "Modelo:__~n~Precio:__$");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][4], 0.219000, 1.081481);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][4], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][4], -1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][4], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][4], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][4], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][4], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][4], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][4], 0);

	PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5] = CreatePlayerTextDraw(playerid, 363.000000, 233.000000, "Comprar");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], 0.188333, 1.189333);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], 13.000000, 50.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], 1855979775); // sin dinero color = -900267777
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], 2);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], true);

	PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6] = CreatePlayerTextDraw(playerid, 404.000000, 233.000000, ">>");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6], 0.188333, 1.189333);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6], 13.000000, 20.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6], -1094795521);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6], 2);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6], true);

	PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7] = CreatePlayerTextDraw(playerid, 322.000000, 233.000000, "<<");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7], 0.188333, 1.189333);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7], 13.000000, 20.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7], -1094795521);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7], 2);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7], true);

	PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][8] = CreatePlayerTextDraw(playerid, 255.000000, 271.000000, "0/0");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][8], 0.163666, 0.832593);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][8], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][8], -66);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][8], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][8], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][8], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][8], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][8], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][8], 0);

	PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9] = CreatePlayerTextDraw(playerid, 320.000000, 284.000000, "Accesorios");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9], 0.400000, 1.600000);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9], 0.000000, 240.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9], -1633916417);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9], 0);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9], 0);
	
	PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0] = CreatePlayerTextDraw(playerid, 553.000000, 176.000000, "box");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 0.000000, 8.766664);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 0.000000, 108.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 255);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][0], 0);

	PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1] = CreatePlayerTextDraw(playerid, 505.000000, 181.000000, "Interior:_0/0");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 0.300000, 1.438221);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], -1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], 0);

	PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2] = CreatePlayerTextDraw(playerid, 505.000000, 206.000000, "Anterior");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 0.300000, 1.438221);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 546.000000, 15.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 1684301055);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2], true);

	PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3] = CreatePlayerTextDraw(playerid, 555.000000, 206.000000, "Siguiente");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 0.300000, 1.438221);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 600.000000, 15.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 1684301055);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3], true);

	PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4] = CreatePlayerTextDraw(playerid, 505.000000, 230.000000, "Crear");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 0.300000, 1.438221);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 533.000000, 15.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 1684301055);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4], true);

	PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5] = CreatePlayerTextDraw(playerid, 542.000000, 230.000000, "Cancelar");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 0.300000, 1.438221);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 583.000000, 15.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 1684301055);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], 0);
	PlayerTextDrawSetSelectable(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5], true);

	PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0] = CreatePlayerTextDraw(playerid, 320.000000, 315.000000, "");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 0.298999, 1.483852);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], -161);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0], 0);

	PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1] = CreatePlayerTextDraw(playerid, 320.000000, 333.000000, "box");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 0.000000, 0.766669);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 0.000000, 130.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 2021161125);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1], 0);

	PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2] = CreatePlayerTextDraw(playerid, 320.000000, 333.000000, "box");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 0.000000, 0.766669);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 0.000000, 0.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 1988896255);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 0);

	PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0] = CreatePlayerTextDraw(playerid, 260.000000, 350.000000, "Borde");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0], 0.000000, 2.633335);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0], 380.000000, 0.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0], 110);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0], 0);

	PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1] = CreatePlayerTextDraw(playerid, 260.000000, 353.000000, "Lleno");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1], 0.000000, 1.933335);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1], 380.000000, 0.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1], HexToIntEx("a2becd", 100));
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1], 0);

	PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2] = CreatePlayerTextDraw(playerid, 260.000000, 353.000000, "Sellena");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2], 0.000000, 1.933335);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2], 260.000000, 0.000000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2], -1);
	PlayerTextDrawUseBox(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2], 1);
	PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2], HexToIntEx("3284ff", 100));
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2], 0);

	PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][3] = CreatePlayerTextDraw(playerid, 320.000000, 335.000000, "Plantando...");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][3], 0.213333, 1.131259);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][3], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][3], -111);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][3], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][3], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][3], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][3], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][3], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][3], 0);

	PlayerTextdraws[playerid][ptextdraw_TUNING_SHOP] = CreatePlayerTextDraw(playerid, 320.000000, 350.000000, "Objeto:_0/0~n~Precio:_0$");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TUNING_SHOP], 0.200333, 1.098074);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TUNING_SHOP], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TUNING_SHOP], -121);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TUNING_SHOP], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TUNING_SHOP], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TUNING_SHOP], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TUNING_SHOP], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TUNING_SHOP], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TUNING_SHOP], 0);
	
	PlayerTextdraws[playerid][ptextdraw_MESSAGE] = CreatePlayerTextDraw(playerid, 320.000000, 365.000000, "_");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE], 0.298333, 1.376000);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE], -1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE], 1);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE], 2);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE], 0);
	
    PlayerTextdraws[playerid][ptextdraw_HUD][0] = CreatePlayerTextDraw(playerid, 6.000, 426.000, "Nivel_0__(0/0)");
    PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], 0.230, 1.099);
    PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], 1);
    PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], HexToIntEx("FFFFFF", 155));
    PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], 0);
    PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], 0);
    PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], 150);
    PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], 1);
    PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], 1);

	PlayerTextdraws[playerid][ptextdraw_TERRITORY_BOX] = CreatePlayerTextDraw(playerid, 320.000000, 355.000000, "-");
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_TERRITORY_BOX], 12.321674, 9.937778);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_TERRITORY_BOX], 2);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_TERRITORY_BOX], 167);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TERRITORY_BOX], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_TERRITORY_BOX], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_TERRITORY_BOX], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_TERRITORY_BOX], 1);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_TERRITORY_BOX], 1);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_TERRITORY_BOX], 0);
	return 1;
}

DestroyPlayerTextDraws(playerid)
{
	for (new i; i < sizeof(PlayerTextdraws[]); i++)
	{
		if (PlayerTextdraws[playerid][Player_Textdraws_Enum:i] == INVALID_TEXT_DRAW) continue;
		PlayerTextDrawDestroy(playerid, PlayerText:PlayerTextdraws[playerid][Player_Textdraws_Enum:i]);
		PlayerTextdraws[playerid][Player_Textdraws_Enum:i] = INVALID_TEXT_DRAW;
	}
	return 1;
}

public OnPlayerClickTextDraw(playerid, Text:clickedid)
{
    if (clickedid == Text:INVALID_TEXT_DRAW)
    {
		PLAYER_TEMP[playerid][pt_SELECT_TEXTDRAW] = false;
	
		if (PLAYER_TEMP[playerid][pt_REGISTER_SELECTING_SKIN])
		{
			ShowPlayerMessage(playerid, "Antes de continuar debes elegir tu sexo y tu ropa.");
			SelectTextDrawEx(playerid, 0xe8d08fFF);
			return 1;
		}

		if (PLAYER_TEMP[playerid][pt_PLAYER_PLAY_MENU])
		{
			SelectTextDrawEx(playerid, -1);
			return 1;
		}

		if (PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_ENABLED])
		{
			ExitPlayerPropertyConstructor(playerid);
			return 1;
		}
		
		if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP] != -1) // Tiene abierto el menú de ropa
		{
			ClosePlayerClothingMenu(playerid);
			ExitPlayerWardrobe(playerid);
		}
		
		if (PLAYER_TEMP[playerid][pt_TOYS_SHOP]) ClosePlayerToysMenu(playerid);
		
		if (PLAYER_TEMP[playerid][pt_DEALER_SHOP]) HidePlayerDealerShipMenu(playerid);
		
		if (PLAYER_TEMP[playerid][pt_TUNING_GARAGE_SHOP])
		{
			CancelPlayerTuningShop(playerid);
			ShowDialog(playerid, DIALOG_VOBJECT_MENU);
		}

		if (IsValidShowPlayerWorkContract(playerid))
		{
			HidePlayerWorkContract(playerid);
		}
		return 1;
	}

	if (PLAYER_TEMP[playerid][pt_PLAYER_PLAY_MENU])
	{
		TextDrawHideForPlayer(playerid, Textdraws[textdraw_PLAY_MENU][0]);
		TextDrawHideForPlayer(playerid, Textdraws[textdraw_PLAY_MENU][1]);
		TextDrawHideForPlayer(playerid, Textdraws[textdraw_PLAY_MENU][2]);
		PLAYER_TEMP[playerid][pt_PLAYER_PLAY_MENU] = false;
		CancelSelectTextDrawEx(playerid);

		//TextDrawShowForPlayer(playerid, Textdraws[textdraw_LOAD_SCREEN][0]);
		TextDrawShowForPlayer(playerid, Textdraws[textdraw_LOAD_SCREEN][1]);
		TextDrawShowForPlayer(playerid, Textdraws[textdraw_LOAD_SCREEN][2]);
		TextDrawShowForPlayer(playerid, Textdraws[textdraw_LOAD_SCREEN][3]);

		if (PLAYER_TEMP[playerid][pt_USER_EXIST])
		{
			if (!strcmp(PI[playerid][pi_IP], PLAYER_TEMP[playerid][pt_IP], false))
			{
				LoadPlayerData(playerid);
			}
			else ShowDialog(playerid, DIALOG_LOGIN);
		}
		else
		{
			PLAYER_TEMP[playerid][pt_REGISTER_ACTOR] = INVALID_ACTOR_ID;

			SetPlayerVirtualWorld(playerid, playerid + 10);

			InterpolateCameraPos(playerid, 1114.217407, -831.201049, 114.312110, 1114.217407, -831.201049, 114.312110, 1000, CAMERA_CUT);
			InterpolateCameraLookAt(playerid, 1116.866333, -829.249755, 111.592124, 1116.866333, -829.249755, 111.592124, 1000, CAMERA_CUT);
			
			SetPlayerInterior(playerid, 0);
			
			ShowDialog(playerid, DIALOG_REGISTER);
		}
		return 1;
	}
	
	if (PLAYER_TEMP[playerid][pt_TUNING_GARAGE_SHOP])
	{
		if (clickedid == Textdraws[textdraw_SHOP_TUNING][2]) //Comprar
		{
			new slot = GetVehicleFreeObjectSlot(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID]);
			if (!PI[playerid][pi_VIP] && slot >= MAX_NU_VOBJECTS)
			{
				PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
				SendPlayerClientMessage(playerid, "¡Los jugadores ~y~VIP ~w~pueden tener hasta %d objetos en vehículos! Usa ~y~/ayuda ~w~si quieres ser ~y~VIP.", MAX_SU_VOBJECTS);
				return 1;
			}
			if (slot == -1)
			{
				SendPlayerClientMessage(playerid, "No hay más espacio para objetos en este vehículo.");
				return 1;
			}
			
			if (Tuning_Shop_Objects[ PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] ][tuning_object_PRICE] > PI[playerid][pi_CASH])
			{
				PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
				SendPlayerClientMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder comprar este objeto.", number_format_thousand(Tuning_Shop_Objects[ PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] ][tuning_object_PRICE] - PI[playerid][pi_CASH]));
				return 1;
			}
			
			if (GivePlayerCash(playerid, -Tuning_Shop_Objects[ PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] ][tuning_object_PRICE], true, true)) {
				VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_VALID] = true;
				VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_TYPE] = VOBJECT_TYPE_OBJECT;
				VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_ID] = 0;
				VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_MODELID] = Tuning_Shop_Objects[ PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] ][tuning_object_MODELID];
				format(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_NAME], 32, "%s", Tuning_Shop_Objects[ PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] ][tuning_object_NAME]);
				VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][slot][vobject_ATTACHED] = true;
				UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], slot);
				
				RegisterNewVehicleObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], slot);
				CancelPlayerTuningShop(playerid);
				
				SendPlayerClientMessage(playerid, "Ajusta el objeto y haz clic en el icono de guardar, si pulsas ~r~'ESCAPE' ~w~no se guardará la configuración.");
				SendPlayerClientMessage(playerid, "Mantén presionado ~r~'W' ~w~para mover la cámara.");
				EditVehicleObject(playerid, PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], slot);
			}
			return 1;
		}
		else if (clickedid == Textdraws[textdraw_SHOP_TUNING][3]) //Siguiente
		{
			if (PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] == (sizeof(Tuning_Shop_Objects) - 1)) PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] = 0;			
			else PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] ++;
			UpdateTuningShop(playerid);
			return 1;
		}
		else if (clickedid == Textdraws[textdraw_SHOP_TUNING][4]) //Anterior
		{
			if (PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] == 0) PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] = sizeof(Tuning_Shop_Objects) - 1;
			else PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] --;
			UpdateTuningShop(playerid);
			return 1;
		}
		return 1;
	}
	
	return 1;
}

public OnPlayerClickPlayerTextDraw(playerid, PlayerText:playertextid)
{
	if (PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_ENABLED])
	{
		if (playertextid == PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][2]) //Anterior
		{
			if (PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] == 0) PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] = sizeof(PROPERTY_INTERIORS) - 1;
			else PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] --;
			UpdatePlayerPropertyContructor(playerid);
			return 1;
		}
		else if (playertextid == PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][3]) //Siguiente
		{
			if (PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] == (sizeof(PROPERTY_INTERIORS) - 1)) PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] = 0;			
			else PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] ++;
			UpdatePlayerPropertyContructor(playerid);
			return 1;
		}
		else if (playertextid == PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][4]) //Crear
		{
			Create_PlayerPropertyConstructo(playerid);
			return 1;
		}
		else if (playertextid == PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][5]) //Cancelar
		{
			ExitPlayerPropertyConstructor(playerid);
			return 1;
		}
		return 1;
	}
	
	if (PLAYER_TEMP[playerid][pt_REGISTER_SELECTING_SKIN])
	{
		if (playertextid == PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3]) // Hombre
		{
			if (PLAYER_TEMP[playerid][pt_REGISTER_ACTOR] == INVALID_ACTOR_ID) {
				PLAYER_TEMP[playerid][pt_REGISTER_ACTOR] = CreateActor(Intro_Skins[0][0], 1117.0544, -829.1986, 112.0899, 72.1918);
				SetActorVirtualWorld(PLAYER_TEMP[playerid][pt_REGISTER_ACTOR], playerid + 10);
			}

			PI[playerid][pi_GENDER] = 0;
			
			PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2], -94);
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2]);
			PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4], -256);
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4]);
			
			SetActorSkin(PLAYER_TEMP[playerid][pt_REGISTER_ACTOR], Intro_Skins[PI[playerid][pi_GENDER]][PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN]], PLAYER_TEMP[playerid][pt_REGISTER_ACTOR]);
			return 1;
		}
		else if (playertextid == PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5]) // Mujer
		{
			if (PLAYER_TEMP[playerid][pt_REGISTER_ACTOR] == INVALID_ACTOR_ID) {
				PLAYER_TEMP[playerid][pt_REGISTER_ACTOR] = CreateActor(Intro_Skins[0][0], 1117.0544, -829.1986, 112.0899, 72.1918);
				SetActorVirtualWorld(PLAYER_TEMP[playerid][pt_REGISTER_ACTOR], playerid + 10);
			}

			PI[playerid][pi_GENDER] = 1;
			
			PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2], -256);
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2]);
			PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4], -94);
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4]);
			
			SetActorSkin(PLAYER_TEMP[playerid][pt_REGISTER_ACTOR], Intro_Skins[PI[playerid][pi_GENDER]][PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN]], PLAYER_TEMP[playerid][pt_REGISTER_ACTOR]);
			return 1;
		}
		else if (playertextid == PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6]) // Continuar
		{
			if (PI[playerid][pi_GENDER] == -1)
			{
				SendPlayerClientMessage(playerid, "Antes de continuar debes optar por un género para tu personaje.");
				SelectTextDrawEx(playerid, 0xe8d08fFF);
				return 1;
			}
			
			TextDrawShowForPlayer(playerid, Textdraws[textdraw_LOAD_SCREEN][0]);
			PI[playerid][pi_SKIN] = Intro_Skins[PI[playerid][pi_GENDER]][PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN]];
			
			PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][0]);
			PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][1]);
			PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][2]);
			PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][3]);
			PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][4]);
			PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][5]);
			PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][6]);
			PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7]);
			PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8]);
			PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9]);
			
			PLAYER_TEMP[playerid][pt_REGISTER_SELECTING_SKIN] = false;
			PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN] = 0;

			CancelSelectTextDrawEx(playerid);
			DestroyActor(PLAYER_TEMP[playerid][pt_REGISTER_ACTOR]);
			PLAYER_TEMP[playerid][pt_REGISTER_ACTOR] = INVALID_ACTOR_ID;			

			// Spawn 
			SetPlayerScore(playerid, PI[playerid][pi_LEVEL]);
			PLAYER_TEMP[playerid][pt_DOUBT_CHANNEL_TIME] = gettime();
			PLAYER_TEMP[playerid][pt_GLOBAL_CHANNEL_TIME] = gettime();
			ResetPlayerWeapons(playerid);
			ResetPlayerMoney(playerid);
			GivePlayerMoney(playerid, PI[playerid][pi_CASH]);
			SetPlayerFightingStyle(playerid, PI[playerid][pi_FIGHT_STYLE]);
			SetPlayerHealthEx(playerid, PI[playerid][pi_HEALTH]);
			SetPlayerArmourEx(playerid, PI[playerid][pi_ARMOUR]);
			SetPlayerVirtualWorld(playerid, 0);
			SetSpawnInfo(playerid, NO_TEAM, PI[playerid][pi_SKIN], PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z], PI[playerid][pi_ANGLE], 0, 0, 0, 0, 0, 0);
			SetPlayerInterior(playerid, PI[playerid][pi_INTERIOR]);
			
			//
			RegisterNewPlayer(playerid);
			return 1;
		}
		else if (playertextid == PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][7]) // Siguiente ropa
		{
			if (PI[playerid][pi_GENDER] == -1) return SendPlayerClientMessage(playerid, "Debes optar por un género antes de cambiar de ropa.");
			
			if (PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN] == (sizeof(Intro_Skins[]) - 1)) PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN] = 0;			
			else PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN] ++;
			
			new td_str[64];
			format(td_str, sizeof td_str, "%d/%d", PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN] + 1, sizeof(Intro_Skins[]));
			PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9], td_str);
			
			SetActorSkin(PLAYER_TEMP[playerid][pt_REGISTER_ACTOR], Intro_Skins[PI[playerid][pi_GENDER]][PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN]], PLAYER_TEMP[playerid][pt_REGISTER_ACTOR]);
			return 1;
		}
		else if (playertextid == PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][8]) // Anterior ropa
		{
			if (PI[playerid][pi_GENDER] == -1) return SendPlayerClientMessage(playerid, "Debes optar por un género antes de cambiar de ropa.");
			
			if (PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN] == 0) PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN] = sizeof(Intro_Skins[]) - 1;
			else PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN] --;
			
			new td_str[64];
			format(td_str, sizeof td_str, "%d/%d", PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN] + 1, sizeof(Intro_Skins[]));
			PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_REGISTER_SKIN][9], td_str);
			
			SetActorSkin(PLAYER_TEMP[playerid][pt_REGISTER_ACTOR], Intro_Skins[PI[playerid][pi_GENDER]][PLAYER_TEMP[playerid][pt_REGISTER_SELECTED_SKIN]], PLAYER_TEMP[playerid][pt_REGISTER_ACTOR]);
			return 1;
		}
		return 1;
	}
	
	if (PLAYER_TEMP[playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return 0;
	
	if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP] != -1)
	{
		if (playertextid == PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2]) // Comprar
		{
			new clothe_info[3];
			switch(ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE])
			{
				case INTERIOR_BINCO:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE: clothe_info = Binco_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
						case SEX_FEMALE: clothe_info = Binco_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
					}
				}
				case INTERIOR_SUBURBAN:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE: clothe_info = Suburban_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
						case SEX_FEMALE: clothe_info = Suburban_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
					}
				}
				case INTERIOR_PROLAPS:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE: clothe_info = Prolaps_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
						case SEX_FEMALE: clothe_info = Prolaps_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
					}
				}
				case INTERIOR_DIDIER_SACHS:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE: clothe_info = Didier_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
						case SEX_FEMALE: clothe_info = Didier_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
					}
				}
				case INTERIOR_VICTIM:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE: clothe_info = Victim_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
						case SEX_FEMALE: clothe_info = Victim_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
					}
				}
				case INTERIOR_ZIP:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE: clothe_info = Zip_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
						case SEX_FEMALE: clothe_info = Zip_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]];
					}
				}
			}
			
			if (PI[playerid][pi_CASH] >= clothe_info[1])
			{
				if (GivePlayerCash(playerid, -clothe_info[1], true, true)) {
					PI[playerid][pi_SKIN] = clothe_info[0];
					
					PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
					SendPlayerClientMessage(playerid, "Gracias por comprar ropa en ~b~%s~w~, vuelva pronto.", Clothing_Shop_Positions[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP]][clothing_shop_NAME]);
					
					ClosePlayerClothingMenu(playerid);
					ExitPlayerWardrobe(playerid);
				}
			}
			else
			{
				PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
				SendPlayerClientMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder comprar esta ropa.", number_format_thousand(clothe_info[1] - PI[playerid][pi_CASH]));
			}
			return 1;
		}
		else if (playertextid == PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3]) // Siguiente
		{
			PlayerPlaySoundEx(playerid, 1052, 0.0, 0.0, 0.0);
			
			switch(ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE])
			{
				case INTERIOR_BINCO:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Binco_Shop_Male_Skins) - 1)) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
						case SEX_FEMALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Binco_Shop_Female_Skins) - 1)) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
					}
				}
				case INTERIOR_SUBURBAN:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Suburban_Shop_Male_Skins) - 1)) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
						case SEX_FEMALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Suburban_Shop_Female_Skins) - 1)) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
					}
				}
				case INTERIOR_PROLAPS:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Prolaps_Shop_Male_Skins) - 1)) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
						case SEX_FEMALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Prolaps_Shop_Female_Skins) - 1)) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
					}
				}
				case INTERIOR_DIDIER_SACHS:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Didier_Shop_Male_Skins) - 1)) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
						case SEX_FEMALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Didier_Shop_Female_Skins) - 1)) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
					}
				}
				case INTERIOR_VICTIM:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Victim_Shop_Male_Skins) - 1)) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
						case SEX_FEMALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Victim_Shop_Female_Skins) - 1)) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
					}
				}
				case INTERIOR_ZIP:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Zip_Shop_Male_Skins) - 1)) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
						case SEX_FEMALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == (sizeof(Zip_Shop_Female_Skins) - 1)) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] ++;
						}
					}
				}
			}
			
			UpdateClothingShop(playerid);
			return 1;
		}
		else if (playertextid == PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4]) // Anterior
		{
			PlayerPlaySoundEx(playerid, 1053, 0.0, 0.0, 0.0);
			
			switch(ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE])
			{
				case INTERIOR_BINCO:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Binco_Shop_Male_Skins) - 1;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
						case SEX_FEMALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Binco_Shop_Female_Skins) - 1;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
					}
				}
				case INTERIOR_SUBURBAN:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Suburban_Shop_Male_Skins) - 1;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
						case SEX_FEMALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Suburban_Shop_Female_Skins) - 1;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
					}
				}
				case INTERIOR_PROLAPS:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Prolaps_Shop_Male_Skins) - 1;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
						case SEX_FEMALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Prolaps_Shop_Female_Skins) - 1;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
					}
				}
				case INTERIOR_DIDIER_SACHS:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Didier_Shop_Male_Skins) - 1;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
						case SEX_FEMALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Didier_Shop_Female_Skins) - 1;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
					}
				}
				case INTERIOR_VICTIM:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Victim_Shop_Male_Skins) - 1;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
						case SEX_FEMALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Victim_Shop_Female_Skins) - 1;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
					}
				}
				case INTERIOR_ZIP:
				{
					switch(PI[playerid][pi_GENDER])
					{
						case SEX_MALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Zip_Shop_Male_Skins) - 1;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
						case SEX_FEMALE:
						{
							if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] == 0) PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = sizeof(Zip_Shop_Female_Skins) - 1;
							else PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] --;
						}
					}
				}
			}
			
			UpdateClothingShop(playerid);
			return 1;
		}
	}
	
	if (PLAYER_TEMP[playerid][pt_TOYS_SHOP]) {
		if (playertextid == PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5]) { //Comprar
			if (Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_price_coin] > 0) {
				if (PI[playerid][pi_COINS] >= Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_price_coin]) {
					if (IsValidPlayerInventorySlot(playerid, i_ObjectData[ Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_type] ][i_EquipSlot])) {
						new pocket_slot = GetPlayerValidInventoryPocket(playerid);
						if (pocket_slot == -1) return ShowPlayerMessage(playerid, "NO TIENES ESPACIO.");
					}

					if (!IsValidPlayerInventorySlot(playerid, i_ObjectData[ Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_type] ][i_EquipSlot])) {
						SetPlayerInventorySlotData(playerid, i_ObjectData[ Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_type] ][i_EquipSlot], 0, true, Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_type], PI[playerid][pi_ID], true);
						GivePlayerCoins(playerid, -Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_price_coin], true, true, "Compra accesorio");
					} else {
						new pocket_slot = GetPlayerValidInventoryPocket(playerid);
						if (pocket_slot == -1) return ShowPlayerMessage(playerid, "NO TIENES ESPACIO.");

						SetPlayerInventorySlotData(playerid, pocket_slot, 0, true, Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_type], PI[playerid][pi_ID], true);
						GivePlayerCoins(playerid, -Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_price_coin], true, true, "Compra accesorio");
					}

					PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
					ShowPlayerMessage(playerid, "Gracias por comprar accesorios en ~b~%s~w~.", ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_NAME]);
					
					ClosePlayerToysMenu(playerid);
				} else {
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					ShowPlayerMessage(playerid, "No tienes "SERVER_COIN"s suficiente, te faltan ~r~%s$~w~ para poder comprar esta ropa.", number_format_thousand(Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_price] - PI[playerid][pi_CASH]));
				}
			} else {
				if (PI[playerid][pi_CASH] >= Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_price]) {
					if (IsValidPlayerInventorySlot(playerid, i_ObjectData[ Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_type] ][i_EquipSlot])) {
						new pocket_slot = GetPlayerValidInventoryPocket(playerid);
						if (pocket_slot == -1) return ShowPlayerMessage(playerid, "NO TIENES ESPACIO.");
					}

					if (!j_PocketInfo[playerid][ i_ObjectData[ Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_type] ][i_EquipSlot] ][pValid]) {
						if (GivePlayerCash(playerid, -Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_price], true, true)) {
							SetPlayerInventorySlotData(playerid, i_ObjectData[ Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_type] ][i_EquipSlot], 0, true, Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_type], PI[playerid][pi_ID]);
							InsertPlayerInventorySlot(playerid, i_ObjectData[ Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_type] ][i_EquipSlot]);
						}
					} else {
						if (GivePlayerCash(playerid, -Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_price], true, true)) {
							new pocket_slot = GetPlayerValidInventoryPocket(playerid);
							if (pocket_slot == -1) return ShowPlayerMessage(playerid, "NO TIENES ESPACIO.");

							SetPlayerInventorySlotData(playerid, pocket_slot, 0, true, Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_type], PI[playerid][pi_ID]);
							InsertPlayerInventorySlot(playerid, pocket_slot);
						}
					}

					PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
					ShowPlayerMessage(playerid, "Gracias por comprar accesorios en ~b~%s~w~.", ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_NAME]);
					
					ClosePlayerToysMenu(playerid);				
				} else {
					PlayerPlaySoundEx(playerid, 1085, 0.0, 0.0, 0.0);
					ShowPlayerMessage(playerid, "No tienes dinero suficiente, te faltan ~r~%s$~w~ para poder comprar esta ropa.", number_format_thousand(Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_price] - PI[playerid][pi_CASH]));
				}
			}
		}
		else if (playertextid == PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6]) // Siguiente
		{
			PlayerPlaySoundEx(playerid, 1052, 0.0, 0.0, 0.0);
			
			if (PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] == (sizeof(Toys_Shop) - 1)) PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] = 0;
			else PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ++;
			
			UpdateToysShop(playerid);
		}
		else if (playertextid == PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7]) // Anterior
		{
			PlayerPlaySoundEx(playerid, 1053, 0.0, 0.0, 0.0);
			
			if (PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] == 0) PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] = sizeof(Toys_Shop) - 1;
			else PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] --;
			
			UpdateToysShop(playerid);
		}
		
	}

    return 1;
}

UpdateReputationTextDraws(playerid)
{
	if (PI[playerid][pi_LEVEL] >= 12) {
		va_PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], "Nivel_%d_~y~MAX%s", PI[playerid][pi_LEVEL], (PI[playerid][pi_VIP] ? "_~y~VIP~w~" : "~w~"));
	}
	else va_PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][0], "Nivel_%d_[%d/%d]_%s", PI[playerid][pi_LEVEL], PI[playerid][pi_REP], neccessary_rep[ PI[playerid][pi_LEVEL] ], (PI[playerid][pi_VIP] ? "~y~VIP~w~" : "~w~"));

	if (GetPlayerProgressBarMaxValue(playerid, j_Pb[playerid][pbRep]) != neccessary_rep[ PI[playerid][pi_LEVEL] ]) SetPlayerProgressBarMaxValue(playerid, j_Pb[playerid][pbRep], neccessary_rep[ PI[playerid][pi_LEVEL] ]);
	SetPlayerProgressBarValue(playerid, j_Pb[playerid][pbRep], PI[playerid][pi_REP]);
	return 1;
}

forward AddPlayerReputation(playerid);
public AddPlayerReputation(playerid)
{
	if (PI[playerid][pi_LEVEL] >= 12)
	{
		PI[playerid][pi_REP] ++;
		UpdateReputationTextDraws(playerid);
		PlayerPayday(playerid);
		SetPlayerSkillLevels(playerid);

		PI[playerid][pi_TIME_FOR_REP] = TIME_FOR_REP;
		PLAYER_TEMP[playerid][pt_TIME_PASSED_LAST_REP] = gettime() * 1000;

		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET time_playing = %d, level = %d, rep = %d, time_for_rep = %d, payday_rep = %d WHERE id = %d;", PI[playerid][pi_TIME_PLAYING], PI[playerid][pi_LEVEL], PI[playerid][pi_REP], TIME_FOR_REP, PI[playerid][pi_PAYDAY_REP], PI[playerid][pi_ID]);
		mysql_tquery(handle_db, QUERY_BUFFER);

		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][2]);
		PLAYER_TEMP[playerid][pt_TIMERS][2] = SetTimerEx("AddPlayerReputation", PI[playerid][pi_TIME_FOR_REP], false, "i", playerid);
		return 1;
	}

	if (PI[playerid][pi_REP] < neccessary_rep[ PI[playerid][pi_LEVEL] ])
	{
		PI[playerid][pi_REP] ++;
		UpdateReputationTextDraws(playerid);
		PlayerPayday(playerid);

		if (PI[playerid][pi_REP] >= neccessary_rep[ PI[playerid][pi_LEVEL] ])
		{
			PI[playerid][pi_REP] = 1;
			PI[playerid][pi_LEVEL] ++;

			if (PI[playerid][pi_LEVEL] >= 12)
			{
				PI[playerid][pi_LEVEL] = 12;
			}

			UpdateReputationTextDraws(playerid);
			SetPlayerSkillLevels(playerid);
			
			SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}¡Felicidades! {f5f5f5}Has subido al nivel {"#PRIMARY_COLOR"}%d{f5f5f5}.", PI[playerid][pi_LEVEL]);
			SetPlayerScore(playerid, PI[playerid][pi_LEVEL]);
			PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
			
			PI[playerid][pi_TIME_FOR_REP] = TIME_FOR_REP;
			PLAYER_TEMP[playerid][pt_TIME_PASSED_LAST_REP] = gettime() * 1000;
			
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET time_playing = %d, level = %d, rep = %d, time_for_rep = %d, payday_rep = %d WHERE id = %d;", PI[playerid][pi_TIME_PLAYING], PI[playerid][pi_LEVEL], PI[playerid][pi_REP], TIME_FOR_REP, PI[playerid][pi_PAYDAY_REP], PI[playerid][pi_ID]);
			mysql_tquery(handle_db, QUERY_BUFFER);
			
			KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][2]);
			PLAYER_TEMP[playerid][pt_TIMERS][2] = SetTimerEx("AddPlayerReputation", PI[playerid][pi_TIME_FOR_REP], false, "i", playerid);
			return 1;
		}

		PI[playerid][pi_TIME_FOR_REP] = TIME_FOR_REP;
		PLAYER_TEMP[playerid][pt_TIME_PASSED_LAST_REP] = gettime() * 1000;

		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET time_playing = %d, level = %d, rep = %d, time_for_rep = %d, payday_rep = %d WHERE id = %d;", PI[playerid][pi_TIME_PLAYING], PI[playerid][pi_LEVEL], PI[playerid][pi_REP], TIME_FOR_REP, PI[playerid][pi_PAYDAY_REP], PI[playerid][pi_ID]);
		mysql_tquery(handle_db, QUERY_BUFFER);

		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][2]);
		PLAYER_TEMP[playerid][pt_TIMERS][2] = SetTimerEx("AddPlayerReputation", PI[playerid][pi_TIME_FOR_REP], false, "i", playerid);
		return 1;
	}
	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][2]);
	return 0;
}

stock SetPlayerCash(playerid, amount, bool:update = true)
{
	PI[playerid][pi_CASH] = amount;
	ResetPlayerMoney(playerid);
	GivePlayerMoney(playerid, PI[playerid][pi_CASH]);
	
	if (update)
	{
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET cash = %d WHERE id = %d;", PI[playerid][pi_CASH], PI[playerid][pi_ID]);
		mysql_tquery(handle_db, QUERY_BUFFER);
	}
	return 1;
}

stock GivePlayerCash(playerid, amount, bool:update = true, bool:negative = false)
{
	if (amount == 0) return 1;
	if (!negative && amount < 0) return 0;
	if (negative && amount > 0) return 0;
	if (negative && (PI[playerid][pi_CASH] + amount) < 0) return 0;
	if(!IsPlayerConnected(playerid)) return 0;

	if (negative) {
		va_GameTextForPlayer(playerid, "~w~%s~r~$", 3000, 1, number_format_thousand(amount));
	} else {
		va_GameTextForPlayer(playerid, "~g~+~w~%s~g~$", 3000, 1, number_format_thousand(amount));
	}

	PI[playerid][pi_CASH] += amount;
	ResetPlayerMoney(playerid);
	GivePlayerMoney(playerid, PI[playerid][pi_CASH]);
	
	if (update)
	{
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET cash = %d WHERE id = %d;", PI[playerid][pi_CASH], PI[playerid][pi_ID]);
		mysql_tquery(handle_db, QUERY_BUFFER);
	}
	return 1;
}

stock GivePlayerCoins(playerid, amount, bool:update = true, bool:negative = false, function[] = "No definido.")
{
	if (amount == 0) return 1;
	if (!negative && amount < 0) return 0;
	if (negative && amount > 0) return 0;
	if (negative && (PI[playerid][pi_COINS] + amount) < 0) return 0;
	if(!IsPlayerConnected(playerid)) return 0;

	new old_coins = PI[playerid][pi_COINS];
	PI[playerid][pi_COINS] += amount;
	
	if (update)
	{
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET coins = %d WHERE id = %d;", PI[playerid][pi_COINS], PI[playerid][pi_ID]);
		mysql_tquery(handle_db, QUERY_BUFFER);
	}

	new str[180 * 3];
	format(str, sizeof(str), "```yaml\n%s [db_id: %d] se ha actualizado al cantidad de monedas.\n\nMonedas Actuales: %d\nMonedas antes de el cambio: %d\nCantidad Designada: %d\nNegative: %s\nFuncion: '%s'\n```", PI[playerid][pi_NAME], PI[playerid][pi_ID], PI[playerid][pi_COINS], old_coins, amount, (negative ? "true" : "false"), function);
	SendDiscordMessage(""#DISCORD_COINS_LOG"", str, false);
	return 1;
}

LoadEnterExits()
{
	new total_enterexits, label_str[256], info[3];
		
	for (new i = 0; i != sizeof ENTER_EXIT; i ++)
	{
		ENTER_EXIT[total_enterexits][ee_ID] = total_enterexits + 1;

		format(label_str, sizeof label_str, "{"#GREEN_COLOR"}%s\n{"#GREEN_COLOR"}Acercate {F5F5F5}para entrar", ENTER_EXIT[total_enterexits][ee_NAME]);

		//ENTER_EXIT[total_enterexits][ee_INT_LABEL_ID] = CreateDynamic3DTextLabel("\0", 0xFFFFFFFF, ENTER_EXIT[total_enterexits][ee_INT_X], ENTER_EXIT[total_enterexits][ee_INT_Y], ENTER_EXIT[total_enterexits][ee_INT_Z] + 0.25, 5.0, .testlos = true, .worldid = ENTER_EXIT[total_enterexits][ee_INT_WORLD], .interiorid = ENTER_EXIT[total_enterexits][ee_INT_INTERIOR]);
		ENTER_EXIT[total_enterexits][ee_EXT_LABEL_ID] = CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, ENTER_EXIT[total_enterexits][ee_EXT_X], ENTER_EXIT[total_enterexits][ee_EXT_Y], ENTER_EXIT[total_enterexits][ee_EXT_Z] + 0.25, 3.0, .testlos = true, .worldid = ENTER_EXIT[total_enterexits][ee_EXT_WORLD], .interiorid = ENTER_EXIT[total_enterexits][ee_EXT_INTERIOR]);
		
		if (ENTER_EXIT[total_enterexits][ee_INT_MAPICON] != -1) ENTER_EXIT[total_enterexits][ee_INT_MAPICON_ID] = CreateDynamicMapIcon(ENTER_EXIT[total_enterexits][ee_INT_X], ENTER_EXIT[total_enterexits][ee_INT_Y], ENTER_EXIT[total_enterexits][ee_INT_Z], ENTER_EXIT[total_enterexits][ee_INT_MAPICON], -1, ENTER_EXIT[total_enterexits][ee_INT_WORLD], ENTER_EXIT[total_enterexits][ee_INT_INTERIOR]);
		if (ENTER_EXIT[total_enterexits][ee_EXT_MAPICON] != -1) ENTER_EXIT[total_enterexits][ee_EXT_MAPICON_ID] = CreateDynamicMapIcon(ENTER_EXIT[total_enterexits][ee_EXT_X], ENTER_EXIT[total_enterexits][ee_EXT_Y], ENTER_EXIT[total_enterexits][ee_EXT_Z], ENTER_EXIT[total_enterexits][ee_EXT_MAPICON], -1, ENTER_EXIT[total_enterexits][ee_EXT_WORLD], ENTER_EXIT[total_enterexits][ee_EXT_INTERIOR]);
		
		ENTER_EXIT[total_enterexits][ee_INT_PICKUP_ID] = CreateDynamicPickup(19606, 1, ENTER_EXIT[total_enterexits][ee_INT_X], ENTER_EXIT[total_enterexits][ee_INT_Y], ENTER_EXIT[total_enterexits][ee_INT_Z], ENTER_EXIT[total_enterexits][ee_INT_WORLD], ENTER_EXIT[total_enterexits][ee_INT_INTERIOR]);
		ENTER_EXIT[total_enterexits][ee_EXT_PICKUP_ID] = CreateDynamicPickup(19606, 1, ENTER_EXIT[total_enterexits][ee_EXT_X], ENTER_EXIT[total_enterexits][ee_EXT_Y], ENTER_EXIT[total_enterexits][ee_EXT_Z] - 0.5, ENTER_EXIT[total_enterexits][ee_EXT_WORLD], ENTER_EXIT[total_enterexits][ee_EXT_INTERIOR]);

		info[0] = PICKUP_TYPE_ENTER_EXIT;
		info[1] = total_enterexits; // Index
		info[2] = 1; // Pickup Interior
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, ENTER_EXIT[total_enterexits][ee_INT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);

		info[0] = PICKUP_TYPE_ENTER_EXIT;
		info[1] = total_enterexits; // Index
		info[2] = 2; // Pickup Exterior
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, ENTER_EXIT[total_enterexits][ee_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
		ENTER_EXIT[total_enterexits][ee_MAIN_ACTOR] = CreateInteriorActor(ENTER_EXIT[total_enterexits][ee_INTERIOR_TYPE], ENTER_EXIT[total_enterexits][ee_INT_WORLD], ENTER_EXIT[total_enterexits][ee_INT_INTERIOR]);

		total_enterexits ++;
	}
	return 1;
}

CreatePropertyInfo(i, pid, pname[], cid, cname[])
{
	if (PROPERTY_INFO[i][property_EXT_LABEL_ID] != Text3D:INVALID_STREAMER_ID)
	{
		DestroyDynamic3DTextLabel(PROPERTY_INFO[i][property_EXT_LABEL_ID]);
		PROPERTY_INFO[i][property_EXT_LABEL_ID] = Text3D:INVALID_STREAMER_ID;
	}
	if (PROPERTY_INFO[i][property_INT_LABEL_ID] != Text3D:INVALID_STREAMER_ID)
	{
		DestroyDynamic3DTextLabel(PROPERTY_INFO[i][property_INT_LABEL_ID]);
		PROPERTY_INFO[i][property_INT_LABEL_ID] = Text3D:INVALID_STREAMER_ID;
	}
	if (PROPERTY_INFO[i][property_EXT_PICKUP_ID] != INVALID_STREAMER_ID)
	{
		DestroyDynamicPickup(PROPERTY_INFO[i][property_EXT_PICKUP_ID]);
		PROPERTY_INFO[i][property_EXT_PICKUP_ID] = INVALID_STREAMER_ID;
	}
	if (PROPERTY_INFO[i][property_INT_PICKUP_ID] != INVALID_STREAMER_ID)
	{
		DestroyDynamicPickup(PROPERTY_INFO[i][property_INT_PICKUP_ID]);
		PROPERTY_INFO[i][property_INT_PICKUP_ID] = INVALID_STREAMER_ID;
	}

	new info[3], label_str[256], pickup_modelid;
	if (pid)
	{
		pickup_modelid = 0;
		PROPERTY_INFO[i][property_SOLD] = true;
		PROPERTY_INFO[i][property_CREW] = false;
		PROPERTY_INFO[i][property_OWNER_ID] = pid;
		PROPERTY_INFO[i][property_CREW_ID] = 0;
		format(label_str, sizeof label_str, "Propiedad {"#PRIMARY_COLOR"}#%d\n\n{F5F5F5}Propietario: {"#PRIMARY_COLOR"}%s\n{F5F5F5}Presiona {"#PRIMARY_COLOR"}Y {F5F5F5}para entrar.", PROPERTY_INFO[i][property_ID], pname);
	}
	else if (cid)
	{
		pickup_modelid = 0;
		PROPERTY_INFO[i][property_SOLD] = true;
		PROPERTY_INFO[i][property_CREW] = true;
		PROPERTY_INFO[i][property_CREW_ID] = cid;
		PROPERTY_INFO[i][property_OWNER_ID] = 0;
		format(PROPERTY_INFO[i][property_NAME], 24, "Propiedad %d", PROPERTY_INFO[i][property_ID]);
		format(label_str, sizeof label_str, "Propiedad {"#PRIMARY_COLOR"}#%d\n\n{F5F5F5}Banda: {"#PRIMARY_COLOR"}%s\n{F5F5F5}Presiona {"#PRIMARY_COLOR"}Y {F5F5F5}para entrar.", PROPERTY_INFO[i][property_ID], cname);
	}
	else
	{
		pickup_modelid = 1273;
		PROPERTY_INFO[i][property_SOLD] = false;
		PROPERTY_INFO[i][property_OWNER_ID] = 0;
		format(PROPERTY_INFO[i][property_NAME], 24, "Propiedad %d", PROPERTY_INFO[i][property_ID]);
		if (PROPERTY_INFO[i][property_VIP_LEVEL])
		{
			if (PROPERTY_INFO[i][property_EXTRA]) format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Membresia VIP requerida\n\n{F5F5F5}Propiedad {"#PRIMARY_COLOR"}#%d {F5F5F5}está en venta\n\nInterior: {"#PRIMARY_COLOR"}%d\n{F5F5F5}Coste: {"#PRIMARY_COLOR"}%d "SERVER_COIN"\n{F5F5F5}Nivel necesario: {"#PRIMARY_COLOR"}%d\n{F5F5F5}Usa {"#PRIMARY_COLOR"}/ayuda {F5F5F5}para ver como adquirirla.", PROPERTY_INFO[i][property_ID], PROPERTY_INFO[i][property_ID_INTERIOR], PROPERTY_INFO[i][property_EXTRA], PROPERTY_INFO[i][property_LEVEL]);
			else format(label_str, sizeof label_str, "{"#PRIMARY_COLOR"}Membresia VIP requerida\n\n{F5F5F5}Propiedad {"#PRIMARY_COLOR"}#%d {F5F5F5}está en venta\n\nInterior: {"#PRIMARY_COLOR"}%d\n{F5F5F5}Precio: {"#PRIMARY_COLOR"}%s$\n{F5F5F5}Nivel: {"#PRIMARY_COLOR"}%d\n{F5F5F5}Usa {"#PRIMARY_COLOR"}/ayuda {F5F5F5}para ver como adquirirla.", PROPERTY_INFO[i][property_ID], PROPERTY_INFO[i][property_ID_INTERIOR], number_format_thousand(PROPERTY_INFO[i][property_PRICE]), PROPERTY_INFO[i][property_LEVEL]);
		}
		else
		{
			if (PROPERTY_INFO[i][property_EXTRA]) format(label_str, sizeof label_str, "{F5F5F5}Propiedad {"#PRIMARY_COLOR"}#%d {F5F5F5}está en venta\n\nInterior: {"#PRIMARY_COLOR"}%d\n{F5F5F5}Coste: {"#PRIMARY_COLOR"}%d "SERVER_COIN"\n{F5F5F5}Nivel necesario: {"#PRIMARY_COLOR"}%d\n{F5F5F5}Usa {"#PRIMARY_COLOR"}/ayuda {F5F5F5}para ver como adquirirla.", PROPERTY_INFO[i][property_ID], PROPERTY_INFO[i][property_ID_INTERIOR], PROPERTY_INFO[i][property_EXTRA], PROPERTY_INFO[i][property_LEVEL]);
			else format(label_str, sizeof label_str, "{F5F5F5}Propiedad {"#PRIMARY_COLOR"}#%d {F5F5F5}está en venta\n\nInterior: {"#PRIMARY_COLOR"}%d\n{F5F5F5}Precio: {"#PRIMARY_COLOR"}%s$\n{F5F5F5}Nivel: {"#PRIMARY_COLOR"}%d\n{F5F5F5}Usa {"#PRIMARY_COLOR"}/ayuda {F5F5F5}para ver como adquirirla.", PROPERTY_INFO[i][property_ID], PROPERTY_INFO[i][property_ID_INTERIOR], number_format_thousand(PROPERTY_INFO[i][property_PRICE]), PROPERTY_INFO[i][property_LEVEL]);
		}
	}
	
	PROPERTY_INFO[i][property_EXT_LABEL_ID] = CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, PROPERTY_INFO[i][property_EXT_X], PROPERTY_INFO[i][property_EXT_Y], PROPERTY_INFO[i][property_EXT_Z] + 0.25, 5.0, .testlos = true, .worldid = 0, .interiorid = PROPERTY_INFO[i][property_EXT_INTERIOR]);

	new Float:z_pos = PROPERTY_INTERIORS[ PROPERTY_INFO[i][property_ID_INTERIOR] ][property_INT_Z];
	
	PROPERTY_INFO[i][property_INT_LABEL_ID] = CreateDynamic3DTextLabel("Presiona {"#PRIMARY_COLOR"}Y {F5F5F5}para salir\n\nEscribe {"#PRIMARY_COLOR"}/casa {F5F5F5}para más opciones", 0xFFFFFFFF, PROPERTY_INTERIORS[ PROPERTY_INFO[i][property_ID_INTERIOR] ][property_INT_X], PROPERTY_INTERIORS[ PROPERTY_INFO[i][property_ID_INTERIOR] ][property_INT_Y], z_pos + 0.25, 3.0, .testlos = true, .worldid = PROPERTY_INFO[i][property_ID], .interiorid = PROPERTY_INTERIORS[ PROPERTY_INFO[i][property_ID_INTERIOR] ][property_INT_INTERIOR]);

	PROPERTY_INFO[i][property_EXT_PICKUP_ID] = CreateDynamicPickup(pickup_modelid, 1, PROPERTY_INFO[i][property_EXT_X], PROPERTY_INFO[i][property_EXT_Y], PROPERTY_INFO[i][property_EXT_Z], 0, PROPERTY_INFO[i][property_EXT_INTERIOR]);
	PROPERTY_INFO[i][property_INT_PICKUP_ID] = CreateDynamicPickup(0, 1, PROPERTY_INTERIORS[ PROPERTY_INFO[i][property_ID_INTERIOR] ][property_INT_X], PROPERTY_INTERIORS[ PROPERTY_INFO[i][property_ID_INTERIOR] ][property_INT_Y], z_pos, PROPERTY_INFO[i][property_ID], PROPERTY_INTERIORS[ PROPERTY_INFO[i][property_ID_INTERIOR] ][property_INT_INTERIOR]);
	info[0] = PICKUP_TYPE_PROPERTY;
	info[1] = i; // Index
	info[2] = 1; // Pickup Interior
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[i][property_INT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
	info[0] = PICKUP_TYPE_PROPERTY;
	info[1] = i; // Index
	info[2] = 2; // Pickup Exterior
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[i][property_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
	return 1;
}

forward OnPropertiesLoaded();
LoadProperties()
{
	inline OnPropertiesLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			for (new i = 0; i != rows; i ++)
			{
				if (i >= MAX_PROPERTIES)
				{
					printf("---> Límite superado en array 'PROPERTY_INFO' al intentar cargar de la base de datos.");
					break;
				}

				TOTAL_PROPERTIES_LOADED ++;

				new bool:isnull_name;
				PROPERTY_INFO[i][property_VALID] = true;
				cache_get_value_name_int(i, "id", PROPERTY_INFO[i][property_ID]);
				cache_is_value_name_null(i, "name", isnull_name);
				if (!isnull_name) cache_get_value_name(i, "name", PROPERTY_INFO[i][property_NAME]);
				cache_get_value_name_float(i, "ext_x", PROPERTY_INFO[i][property_EXT_X]);
				cache_get_value_name_float(i, "ext_y", PROPERTY_INFO[i][property_EXT_Y]);
				cache_get_value_name_float(i, "ext_z", PROPERTY_INFO[i][property_EXT_Z]);
				cache_get_value_name_float(i, "ext_angle", PROPERTY_INFO[i][property_EXT_ANGLE]);
				cache_get_value_name_int(i, "ext_interior", PROPERTY_INFO[i][property_EXT_INTERIOR]);
				cache_get_value_name_int(i, "ext_freeze", PROPERTY_INFO[i][property_EXT_FREEZE]);
				cache_get_value_name_int(i, "id_interior", PROPERTY_INFO[i][property_ID_INTERIOR]);
				cache_get_value_name_int(i, "price", PROPERTY_INFO[i][property_PRICE]);
				PROPERTY_INFO[i][property_PRICE_BASE] = PROPERTY_INFO[i][property_PRICE];
				cache_get_value_name_int(i, "level", PROPERTY_INFO[i][property_LEVEL]);
				cache_get_value_name_int(i, "extra", PROPERTY_INFO[i][property_EXTRA]);
				cache_get_value_name_int(i, "vip_level", PROPERTY_INFO[i][property_VIP_LEVEL]);

				if (PROPERTY_INFO[i][property_EXTRA]) PROPERTY_INFO[i][property_PRICE] = 0;
				if (PROPERTY_INFO[i][property_VIP_LEVEL]) PROPERTY_INFO[i][property_LEVEL] = 1;

				new id_player, pname[24], tid, bool:isnull_id_player, bool:isnull_pname, bool:isnull_tid;
				cache_is_value_name_null(i, "id_player", isnull_id_player);
				if (!isnull_id_player) cache_get_value_name_int(i, "id_player", id_player);
				cache_is_value_name_null(i, "pname", isnull_pname);
				if (!isnull_pname) cache_get_value_name(i, "pname", pname);
				cache_is_value_name_null(i, "tid", isnull_tid);
				if (!isnull_tid) cache_get_value_name_int(i, "tid", tid);
				if (id_player) CreatePropertyInfo(i, id_player, pname, 0, "");
				else if (tid)
				{
					inline OnCrewInfoLoad()
					{
						new crows;
						if (cache_get_row_count(crows))
						{
							if (crows)
							{
								new cid, cname[24];
								cache_get_value_index_int(0, 0, cid);
								cache_get_value_index(0, 1, cname);
								if (cid) CreatePropertyInfo(i, 0, "", cid, cname);
								else CreatePropertyInfo(i, 0, "", 0, "");
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT crews.id, crews.name FROM territories INNER JOIN crews ON territories.id_crew = crews.id WHERE territories.id = %d;", tid);
					MySQL_TQueryInline(handle_db,  using inline OnCrewInfoLoad, QUERY_BUFFER);
				}
				else CreatePropertyInfo(i, 0, "", 0, "");

				inline OnPropertyClosetLoad()
				{
					new crows;
					if (cache_get_row_count(crows))
					{
						for (new x = 0; x != crows; x ++)
						{
							new slot;
							cache_get_value_name_int(x, "slot", slot);
							p_ClosetInfo[i][slot][pcValid] = true;
							cache_get_value_name_int(x, "id", p_ClosetInfo[i][slot][pcID]);
							cache_get_value_name_int(x, "type", p_ClosetInfo[i][slot][pcType]);
							cache_get_value_name_int(x, "extra", p_ClosetInfo[i][slot][pcExtra]);
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM property_closet WHERE id_property = %d LIMIT %d;", PROPERTY_INFO[i][property_ID], MAX_CLOSET_SLOTS);
				MySQL_TQueryInline(handle_db,  using inline OnPropertyClosetLoad, QUERY_BUFFER);
			}
			CallLocalFunction("OnPropertiesLoaded", "");
			LoadCrews();
		}
	}
	new query[] = "SELECT properties.*, player.id AS pid, player.name AS pname, territories.id AS tid FROM properties LEFT JOIN player ON properties.id_player = player.id LEFT JOIN territories ON properties.id_territory = territories.id;";
	MySQL_TQueryInline(handle_db, using inline OnPropertiesLoad, query);
	return 1;
}

GetOwnerIntProperty(id_house)
{
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if (PI[i][pi_STATE] == ROLEPLAY_STATE_OWN_PROPERTY)
			{
				if (PI[i][pi_LOCAL_INTERIOR] == id_house)
				{
					return i;
				}
			}
		}
	}
	return -1;
}

LoadCrews()
{
	inline OnCrewsLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			for (new i = 0; i != rows; i ++)
			{
				if (i >= MAX_CREWS)
				{
					printf("---> Límite superado en array 'CREW_INFO' al intentar cargar de la base de datos.");
					break;
				}

				CREW_INFO[i][crew_VALID] = true;
				cache_get_value_name_int(i, "id", CREW_INFO[i][crew_ID]);
				cache_get_value_name(i, "name", CREW_INFO[i][crew_NAME]);
				cache_get_value_name_int(i, "color", CREW_INFO[i][crew_COLOR]);
				CREW_INFO[i][crew_ONLINE_MEMBERS] = 0;

				//count
				inline OnCountQueryLoad()
				{
					new crows;
					if (cache_get_row_count(crows))
					{
						if (crows)
						{
							cache_get_value_index_int(0, 0, CREW_INFO[i][crew_MEMBERS]);
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d;", CREW_INFO[i][crew_ID]);
				MySQL_TQueryInline(handle_db,  using inline OnCountQueryLoad, QUERY_BUFFER);

				//ranks
				inline OnCrewRanksLoad()
				{
					new crows;
					if (cache_get_row_count(crows))
					{
						for (new x = 0; x != crows; x ++)
						{
							new rank_pos;
							cache_get_value_name_int(x, "rank_pos", rank_pos);
							if (rank_pos < 0 || rank_pos > MAX_CREW_RANKS) continue;

							CREW_RANK_INFO[i][rank_pos][crew_rank_VALID] = true;
							cache_get_value_name_int(x, "id", CREW_RANK_INFO[i][rank_pos][crew_rank_ID]);
							cache_get_value_name(x, "rank_name", CREW_RANK_INFO[i][rank_pos][crew_rank_NAME]);
							cache_get_value_name_int(x, "permission0", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][0]);
							cache_get_value_name_int(x, "permission1", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][1]);
							cache_get_value_name_int(x, "permission2", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][2]);
							cache_get_value_name_int(x, "permission3", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][3]);
							cache_get_value_name_int(x, "permission4", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][4]);
							cache_get_value_name_int(x, "permission5", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][5]);
							cache_get_value_name_int(x, "permission6", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][6]);
							cache_get_value_name_int(x, "permission7", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][7]);
							cache_get_value_name_int(x, "permission8", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][8]);
							cache_get_value_name_int(x, "permission9", CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][9]);

							if (rank_pos == 0) {
								for (new j = 0; j < CREW_RANK_SIZE; j ++)
								CREW_RANK_INFO[i][rank_pos][crew_rank_PERMISSION][j] = 1;
							}
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM crew_ranks WHERE id_crew = %d;", CREW_INFO[i][crew_ID]);
				MySQL_TQueryInline(handle_db,  using inline OnCrewRanksLoad, QUERY_BUFFER);
			}
			LoadGangZones();
		}
	}
	MySQL_TQueryInline(handle_db,  using inline OnCrewsLoad, "SELECT * FROM crews;");
	return 1;
}


LoadGangZones()
{
	inline OnSaZonesLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			for (new i = 0; i != rows; i ++)
			{
				if (i >= MAX_TERRITORIES)
				{
					printf("---> Límite superado en array 'TERRITORIES' al intentar cargar de la base de datos.");
					break;
				}

				new crewid = false, color, bool:isnull_crewid = false;
				TERRITORIES[i][territory_VALID] = true;
				cache_get_value_name_int(i, "id", TERRITORIES[i][territory_ID]);
				cache_get_value_name_float(i, "min_x", TERRITORIES[i][territory_MIN_X]);
				cache_get_value_name_float(i, "min_y", TERRITORIES[i][territory_MIN_Y]);
				cache_get_value_name_float(i, "max_x", TERRITORIES[i][territory_MAX_X]);
				cache_get_value_name_float(i, "max_y", TERRITORIES[i][territory_MAX_Y]);
				cache_is_value_name_null(i, "id_crew", isnull_crewid);

				if (!isnull_crewid)
				{
					cache_get_value_name_int(i, "id_crew", crewid);
					cache_get_value_name_int(i, "color", color);
				}

				TERRITORIES[i][territory_WAR] = false;
				TERRITORIES[i][territory_ATTACKER_CREW_INDEX] = 0;

				new r, g, b, a;
				HexToRGBA(color, r, g, b, a);

				if (crewid)
				{
					TERRITORIES[i][territory_OCCUPIED] = true;
					TERRITORIES[i][territory_CREW_ID] = crewid;
					
					TERRITORIES[i][territory_COLOR] = RGBAToHex(r, g, b, 135);
					TERRITORIES[i][territory_CREW_INDEX] = GetCrewIndexById(crewid);
				}
				else
				{
					TERRITORIES[i][territory_OCCUPIED] = false;
					TERRITORIES[i][territory_CREW_ID] = 0;
					TERRITORIES[i][territory_CREW_INDEX] = 0;
					TERRITORIES[i][territory_COLOR] = 0xCCCCCC55;
				}

				TERRITORIES[i][territory_AREA] = CreateDynamicRectangle(TERRITORIES[i][territory_MIN_X], TERRITORIES[i][territory_MIN_Y], TERRITORIES[i][territory_MAX_X], TERRITORIES[i][territory_MAX_Y], 0, 0);
				
				new info[2];
				info[0] = AREA_TYPE_GANGZONE;
				info[1] = i;
				Streamer_SetArrayData(STREAMER_TYPE_AREA, TERRITORIES[i][territory_AREA], E_STREAMER_EXTRA_ID, info);
				TERRITORIES[i][territory_GANG_ZONE] = GangZoneCreate(TERRITORIES[i][territory_MIN_X], TERRITORIES[i][territory_MIN_Y], TERRITORIES[i][territory_MAX_X], TERRITORIES[i][territory_MAX_Y]);
				
				TERRITORIES[i][territory_TEXTDRAW][0] = TextDrawCreate(320.000000, 355.000000, "-");
				TextDrawLetterSize(TERRITORIES[i][territory_TEXTDRAW][0], 12.321674, 9.937778);
				TextDrawAlignment(TERRITORIES[i][territory_TEXTDRAW][0], 2);
				TextDrawColor(TERRITORIES[i][territory_TEXTDRAW][0], 255);
				TextDrawSetShadow(TERRITORIES[i][territory_TEXTDRAW][0], 0);
				TextDrawSetOutline(TERRITORIES[i][territory_TEXTDRAW][0], 0);
				TextDrawBackgroundColor(TERRITORIES[i][territory_TEXTDRAW][0], 255);
				TextDrawFont(TERRITORIES[i][territory_TEXTDRAW][0], 1);
				TextDrawSetProportional(TERRITORIES[i][territory_TEXTDRAW][0], 1);
				TextDrawSetShadow(TERRITORIES[i][territory_TEXTDRAW][0], 0);
				
				TERRITORIES[i][territory_TEXTDRAW][1] = TextDrawCreate(320.000000, 406.000000, "Conquista:_0");
				TextDrawLetterSize(TERRITORIES[i][territory_TEXTDRAW][1], 0.286000, 1.276444);
				TextDrawAlignment(TERRITORIES[i][territory_TEXTDRAW][1], 2);
				TextDrawColor(TERRITORIES[i][territory_TEXTDRAW][1], -76);
				TextDrawSetShadow(TERRITORIES[i][territory_TEXTDRAW][1], 0);
				TextDrawSetOutline(TERRITORIES[i][territory_TEXTDRAW][1], 0);
				TextDrawBackgroundColor(TERRITORIES[i][territory_TEXTDRAW][1], 255);
				TextDrawFont(TERRITORIES[i][territory_TEXTDRAW][1], 1);
				TextDrawSetProportional(TERRITORIES[i][territory_TEXTDRAW][1], 1);
				TextDrawSetShadow(TERRITORIES[i][territory_TEXTDRAW][1], 0);

				TOTAL_TERRITORIES ++;
			}
			CallLocalFunction("OnTerritoriesLoaded", "");
			server_loaded = true;
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT territories.*, crews.id AS crewid, crews.color FROM territories LEFT JOIN crews ON territories.id_crew = crews.id LIMIT %d;", MAX_TERRITORIES);
	MySQL_TQueryInline(handle_db,   using inline OnSaZonesLoad, QUERY_BUFFER);

	LoadReferredCodes();
	return 1;
}

GetCrewIndexById(id)
{
	for (new x = 0; x != MAX_CREWS; x ++)
	{
		if (!CREW_INFO[x][crew_VALID]) continue;
		
		if (CREW_INFO[x][crew_ID] == id)
		{
			return x;
		}
	}
	return -1;
}

public OnPlayerPickUpDynamicPickup(playerid, pickupid)
{
	PLAYER_TEMP[playerid][pt_LAST_PICKUP_ID] = pickupid;

	if (gettime() > PLAYER_TEMP[playerid][pt_PICKUP_TIMER]) {
		if (!PLAYER_TEMP[playerid][pt_DIALOG_SHOW]) {
		new info[3], Float:pos[3], vehicleid = INVALID_VEHICLE_ID, Float: tmp_pos = 1.5;
		Streamer_GetArrayData(STREAMER_TYPE_PICKUP, PLAYER_TEMP[playerid][pt_LAST_PICKUP_ID], E_STREAMER_EXTRA_ID, info);

		if (info[0] != PICKUP_TYPE_NONE) {
			Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PLAYER_TEMP[playerid][pt_LAST_PICKUP_ID], E_STREAMER_X, pos[0]);
			Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PLAYER_TEMP[playerid][pt_LAST_PICKUP_ID], E_STREAMER_Y, pos[1]);
			Streamer_GetFloatData(STREAMER_TYPE_PICKUP, PLAYER_TEMP[playerid][pt_LAST_PICKUP_ID], E_STREAMER_Z, pos[2]);
			vehicleid = GetPlayerVehicleID(playerid);

			if(vehicleid != INVALID_VEHICLE_ID) {
				if (IsPlayerDriver(playerid)) {
					tmp_pos = 20.0;
				}
			}

			if (IsPlayerInRangeOfPoint(playerid, tmp_pos, pos[0], pos[1], pos[2])) {
				PLAYER_TEMP[playerid][pt_PICKUP_TIMER] = gettime() + 3;

				switch(info[0]) {
					case PICKUP_TYPE_ENTER_EXIT:
					{
						PLAYER_TEMP[playerid][pt_HOSPITAL] = GetNearestHospitalForPlayer(playerid);

						if (info[2] == 1) {
							PI[playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
							PI[playerid][pi_LOCAL_INTERIOR] = 0;
							PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] = -1;
							SetPlayerPosEx(playerid, ENTER_EXIT[info[1]][ee_EXT_X], ENTER_EXIT[info[1]][ee_EXT_Y], ENTER_EXIT[info[1]][ee_EXT_Z], ENTER_EXIT[info[1]][ee_EXT_ANGLE], ENTER_EXIT[info[1]][ee_EXT_INTERIOR], ENTER_EXIT[info[1]][ee_EXT_WORLD], false);
							SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
							StopAudioStreamForPlayer(playerid);
							CallLocalFunction("OnPlayerExitInterior", "ii", playerid, info[1]);
						}
						else if (info[2] == 2) {
							if (ENTER_EXIT[ info[1] ][ee_INTERIOR_TYPE] == INTERIOR_ADMIN_ZONE) {
								if (PI[playerid][pi_ADMIN_LEVEL] < 1) return ShowPlayerMessage(playerid, "No eres de el ~b~servicio de logistica~w~ (~y~STAFF~w~).");
							}

							if (ENTER_EXIT[info[1]][ee_TIME_OPEN] == 0 && ENTER_EXIT[info[1]][ee_TIME_CLOSE] == 0) {
								if (PI[playerid][pi_WANTED_LEVEL] > 0) {
									ShowPlayerMessage(playerid, "Tienes nivel de ~r~busqueda~w~.");
								} else {
									if(PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE && ENTER_EXIT[ info[1] ][ee_INTERIOR_TYPE] == INTERIOR_HOSPITAL && IsValidPlayerWeapons(playerid) != -1) {
										new level = PI[playerid][pi_WANTED_LEVEL] + 2;
										if (level > 6) level = 6;

										SetPlayerWantedLevelEx(playerid, level);
										
										new city[45], zone[45];
										GetPlayerZones(playerid, city, zone);

										new message[145];
										format(message, sizeof message, "{"#POLICE_COLOUR"}[Central policia] {F5F5F5}%s esta armado/a en {"#GREEN_COLOR"}[%s, %s]", PLAYER_TEMP[playerid][pt_NAME], city, zone);
										SendPoliceRadioMessage(-1, message);

										ShowPlayerMessage(playerid, "Estas ~r~armado~w~");
									} else {
										PI[playerid][pi_STATE] = ROLEPLAY_STATE_INTERIOR;
										PI[playerid][pi_LOCAL_INTERIOR] = ENTER_EXIT[info[1]][ee_ID];
										PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] = info[1];
										SetPlayerPosEx(playerid, ENTER_EXIT[info[1]][ee_INT_X], ENTER_EXIT[info[1]][ee_INT_Y], ENTER_EXIT[info[1]][ee_INT_Z], ENTER_EXIT[info[1]][ee_INT_ANGLE], ENTER_EXIT[info[1]][ee_INT_INTERIOR], ENTER_EXIT[info[1]][ee_INT_WORLD], ENTER_EXIT[info[1]][ee_INT_FREEZE], true);
										CallLocalFunction("OnPlayerEnterInterior", "ii", playerid, info[1]);
									}
								}
							} else {
								new territories = GetCrewTerritories(PI[playerid][pi_CREW]);
								if (!PI[playerid][pi_CREW]) territories = 0;

								if(ENTER_EXIT[ info[1] ][ee_INTERIOR_TYPE] == INTERIOR_BLACK_MARKET && territories >= 5) {
									PI[playerid][pi_STATE] = ROLEPLAY_STATE_INTERIOR;
									PI[playerid][pi_LOCAL_INTERIOR] = ENTER_EXIT[info[1]][ee_ID];
									SetPlayerPosEx(playerid, ENTER_EXIT[info[1]][ee_INT_X], ENTER_EXIT[info[1]][ee_INT_Y], ENTER_EXIT[info[1]][ee_INT_Z], ENTER_EXIT[info[1]][ee_INT_ANGLE], ENTER_EXIT[info[1]][ee_INT_INTERIOR], ENTER_EXIT[info[1]][ee_INT_WORLD], ENTER_EXIT[info[1]][ee_INT_FREEZE], true);
									CallLocalFunction("OnPlayerEnterInterior", "ii", playerid, info[1]); 
								}
							}
						}
					}
					case PICKUP_TYPE_PROPERTY:
					{
						PLAYER_TEMP[playerid][pt_HOSPITAL] = GetNearestHospitalForPlayer(playerid);

						if (info[2] == 1) {
							PI[playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
							PI[playerid][pi_LOCAL_INTERIOR] = 0;
							PLAYER_TEMP[playerid][pt_PROPERTY_INDEX] = -1;
							SetPlayerPosEx(playerid, PROPERTY_INFO[info[1]][property_EXT_X], PROPERTY_INFO[info[1]][property_EXT_Y], PROPERTY_INFO[info[1]][property_EXT_Z], PROPERTY_INFO[info[1]][property_EXT_ANGLE], PROPERTY_INFO[info[1]][property_EXT_INTERIOR], 0, false /*PROPERTY_INFO[info[1]][property_EXT_FREEZE]*/, false);
							SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
							StopAudioStreamForPlayer(playerid);
						}
						else if (info[2] == 2) {
							if (!PROPERTY_INFO[info[1]][property_SOLD]) return SendPlayerClientMessage(playerid, "Esta propiedad está en venta.");
							
							if (PROPERTY_INFO[info[1]][property_CREW]) {
								if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "Solo miembros de la banda pueden entrar.");
								if (PI[playerid][pi_CREW] != PROPERTY_INFO[info[1]][property_CREW_ID]) return SendPlayerClientMessage(playerid, "Solo miembros de la banda pueden entrar.");
								
								PI[playerid][pi_STATE] = ROLEPLAY_STATE_GUEST_PROPERTY;
								PI[playerid][pi_LOCAL_INTERIOR] = PROPERTY_INFO[info[1]][property_ID];
								PLAYER_TEMP[playerid][pt_PROPERTY_INDEX] = info[1];

								new Float:z_pos = PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_Z];
								SetPlayerPosEx(playerid, PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_X], PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_Y], z_pos, PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_ANGLE], PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_INTERIOR], PROPERTY_INFO[info[1]][property_ID], false, true);
							}
							else
							{
								if (PROPERTY_INFO[info[1]][property_OWNER_ID] == PI[playerid][pi_ID])
								{
									PI[playerid][pi_STATE] = ROLEPLAY_STATE_OWN_PROPERTY;
									PI[playerid][pi_LOCAL_INTERIOR] = PROPERTY_INFO[info[1]][property_ID];
									PLAYER_TEMP[playerid][pt_PROPERTY_INDEX] = info[1];

									new Float:z_pos = PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_Z];
									SetPlayerPosEx(playerid, PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_X], PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_Y], z_pos, PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_ANGLE], PROPERTY_INTERIORS[ PROPERTY_INFO[info[1]][property_ID_INTERIOR] ][property_INT_INTERIOR], PROPERTY_INFO[info[1]][property_ID], false, true);
								}
								else
								{
									if (gettime() < PLAYER_TEMP[playerid][pt_ANTIFLOOD_KNOCK_PROPERTY] + 10) return SendPlayerClientMessage(playerid, "Espera para volver a tocar, si no te quieren abrir, vete.");
									
									new owner_playerid = GetOwnerIntProperty(PROPERTY_INFO[info[1]][property_ID]);
									if (owner_playerid == -1) return SendPlayerClientMessage(playerid, "Esta no es tu propiedad y el dueño no está dentro para dejarte entrar.");
									
									PLAYER_TEMP[playerid][pt_ANTIFLOOD_KNOCK_PROPERTY] = gettime();
									PLAYER_TEMP[owner_playerid][pt_KNOCK_PLAYER_ID] = playerid;
									SendPlayerClientMessage(owner_playerid, "~b~%s ~w~está tocando la puerta, para dejarle entrar ve a la puerta y usa ~b~/puerta~w~.", PLAYER_TEMP[playerid][pt_NAME]);
									SendPlayerClientMessage(playerid, "Has tocado en la puerta, espera para que te abran o vete.");
								}
							}
						}
					}
					case PICKUP_TYPE_WORK: 
					{
						if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return 0;
						if (PI[playerid][pi_WANTED_LEVEL] > 0) return ShowPlayerMessage(playerid, "No puedes obtener un trabajo cuando estás en búsqueda.");
						
						if (!PI[playerid][pi_VIP])
						{
							if (gettime() < PLAYER_TEMP[playerid][pt_LAST_GOT_WORK_TIME] + NECESSARY_TIME_BETWEEN_WORKS)
							{
								new time = NECESSARY_TIME_BETWEEN_WORKS - (gettime() - PLAYER_TEMP[playerid][pt_LAST_GOT_WORK_TIME]);
								ShowPlayerMessage(playerid, "Debes de esperar %s para conseguir otro trabajo.", TimeConvertAsText(time));
								return 1;
							}
						}

						new player_jobs = CountPlayerJobs(playerid);
						if (PI[playerid][pi_VIP])
						{
							if (player_jobs >= MAX_SU_WORKS)
							{
								ShowPlayerMessage(playerid, "Actualmente tienes %d trabajos~n~usa /renunciar para dejar un trabajo.", player_jobs);
								return 1;
							}
						}
						else
						{
							if (player_jobs >= MAX_NU_WORKS)
							{
								SendPlayerClientMessage(playerid, "Actualmente tienes {"#YELLOW_COLOR"}%d trabajos{F5F5F5}, usa /renunciar para dejar un trabajo.", player_jobs);
								SendPlayerClientMessage(playerid, "¡Los jugadores {"#YELLOW_COLOR"}VIP{F5F5F5} pueden tener hasta %d trabajos! Usa {"#YELLOW_COLOR"}/ayuda {F5F5F5}si quieres ser {"#YELLOW_COLOR"}VIP{F5F5F5}.", MAX_SU_WORKS);
								return 1;
							}
						}

						if (work_info[ info[1] ][work_info_LEVEL] > PI[playerid][pi_LEVEL])
						{
							ShowPlayerMessage(playerid, "Debes ser ~b~nivel %d", work_info[ info[1] ][work_info_LEVEL]);
							return 1;
						}
						
						if (PLAYER_WORKS[playerid][ info[1] ][pwork_SET])
						{
							ShowPlayerMessage(playerid, "Ya eres ~b~%s", work_info[ info[1] ][work_info_NAME]);
							return 1;
						}

						ShowPlayerWorkContract(playerid, info[1]);
					}
					case PICKUP_TYPE_VEHICLE_SPAWN:
					{
						if (PLAYER_TEMP[playerid][pt_WORK_VEHICLE_SPAWN_TIMER] > gettime()) return ShowPlayerMessage(playerid, "Debes esperar %d segundos para sacar otro vehiculo.", (PLAYER_TEMP[playerid][pt_WORK_VEHICLE_SPAWN_TIMER] - gettime()));
						SpawnPlayerWorkVehicle(playerid, info[1]);
					}
					case PICKUP_TYPE_ATM:
					{
						if (IsValidPlayerInventoryObjectSlo(playerid, SLOT_HAND, INVENTORY_TYPE_DYNAMITE)) {
							SetPlayerATMRobbery(playerid, info[1]);
						} else {
							if (PI[playerid][pi_BANK_ACCOUNT] == 0) {
								ShowPlayerMessage(playerid, "No tienes cuenta bancaria, puedes crearla en cualquier Banco.");
								return 1;
							}
							
							PLAYER_TEMP[playerid][pt_PLAYER_IN_ATM] = true;
							ShowDialog(playerid, DIALOG_BANK);
						}
					}
					case PICKUP_TYPE_START_END_WORK:
					{
						if (GetWorkManagementWork(info[1]) == WORK_NONE) return 0;
						if (!PLAYER_WORKS[playerid][ GetWorkManagementWork(info[1]) ][pwork_SET]) return ShowPlayerMessage(playerid, "No eres %s.", work_info[ GetWorkManagementWork(info[1]) ][work_info_NAME]);
						if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_NONE && PLAYER_TEMP[playerid][pt_WORKING_IN] != GetWorkManagementWork(info[1]))
						{
							ShowPlayerMessage(playerid, "Tienes que dejar de estar de servicio como %s primero.", work_info[ PLAYER_TEMP[playerid][pt_WORKING_IN] ][work_info_NAME]);
							return 1;
						}
						if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return 0;
						
						if (PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] != INVALID_VEHICLE_ID)
						{
							if (GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] ][gb_vehicle_TEMP])
							{
								DestroyVehicleEx(PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID]);
								PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] = INVALID_VEHICLE_ID;
							}
						}

						switch( GetWorkManagementWork(info[1]) )
						{
							case WORK_POLICE:
							{
								if (!PLAYER_TEMP[playerid][pt_WORKING_IN]) ShowDialog(playerid, DIALOG_SELECT_POLICE_SKIN);
								else CallLocalFunction("EndPlayerJob", "iib", playerid, PLAYER_TEMP[playerid][pt_WORKING_IN], true);
							}
							default:
							{
								if (!PLAYER_TEMP[playerid][pt_WORKING_IN]) CallLocalFunction("StartPlayerJob", "iii", playerid, GetWorkManagementWork(info[1]), INVALID_VEHICLE_ID);
								else CallLocalFunction("EndPlayerJob", "iib", playerid, PLAYER_TEMP[playerid][pt_WORKING_IN], true);
							}
						}
					}
					case PICKUP_TYPE_MECHANIC_PIECES:
					{
						if (!PLAYER_WORKS[playerid][WORK_MECHANIC][pwork_SET]) return ShowPlayerMessage(playerid, "No eres mecánico.");
						if (GetPlayerInterior(playerid) != 0) return ShowPlayerMessage(playerid, "No estás en el lugar adecuado.");
						if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return ShowPlayerMessage(playerid, "No estás depie.");

						Dialog_Show(
							playerid, "OnPlayerBuyPiecesRespons", DIALOG_STYLE_INPUT, 
							"[{"#MECHANIC_COLOR"}Mecanico{F5F5F5}]  Comprar piezas",
							"{F5F5F5}{"#MECHANIC_COLOR"}Precio: {F5F5F5} 1 {"#MECHANIC_COLOR"}Pieza{F5F5F5} = 50{"#GREEN_COLOR"}$\n\
							» {F5F5F5}Introduce la cantidad de {"#MECHANIC_COLOR"}Piezas{F5F5F5} a comprar",
							"Comprar", "xSalir"
						);
					}
					case PICKUP_TYPE_247: { ShowDialog(playerid, DIALOG_247_LIST); }
					case PICKUP_TYPE_FARMER_SEEDS:
					{
						if (!PLAYER_WORKS[playerid][WORK_FARMER][pwork_SET]) return ShowPlayerMessage(playerid, "No eres agricultor.");
						if (GetPlayerVirtualWorld(playerid) != 0) return ShowPlayerMessage(playerid, "No estás en el lugar adecuado.");
						if (GetPlayerInterior(playerid) != 0) return ShowPlayerMessage(playerid, "No estás en el lugar adecuado.");
						if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return ShowPlayerMessage(playerid, "No estás depie.");

						ShowDialog(playerid, DIALOG_SEED_LIST);
					}
					case PICKUP_TYPE_PACK_DRUGS:
					{
						Dialog_Show(playerid, "OnFarmerPackResponse", DIALOG_STYLE_TABLIST, "Empaquetar", "{"#GREEN_COLOR"}Medicamentos\t{F5F5F5}50 {"#GREEN_COLOR"}Capacidad\n{"#GREEN_COLOR"}Marihuana\t{F5F5F5}100 {"#GREEN_COLOR"}Capacidad\n{F5F5F5}Crack\t{F5F5F5}200 {"#GREEN_COLOR"}Capacidad", "Comprar", "xSalir");
					}
					case PICKUP_TYPE_BUY_DRUGS_PACK:
					{
						Dialog_Show(playerid, "OnFarmerPackBuyResponse", DIALOG_STYLE_TABLIST, "Comprar empaquetado", "Caja {"#GREEN_COLOR"}Medicamentos\t{F5F5F5}1.000{666666}B$\n{F5F5F5}Paquete {"#GREEN_COLOR"}Marihuana\t{F5F5F5}3.000{666666}B$\n{F5F5F5}Paquete cocaina\t{F5F5F5}5.000{666666}B$", "Comprar", "xSalir");
					}
					case PICKUP_TYPE_BUY_POLICE_ARMOUR:
					{
						if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return ShowPlayerMessage(playerid, "No eres miembro de una ~b~faccion~w~.");
						if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_NONE && PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE)
						{
							ShowPlayerMessage(playerid, "Tienes que dejar de estar de servicio como %s primero.", work_info[ PLAYER_TEMP[playerid][pt_WORKING_IN] ][work_info_NAME]);
							return 1;
						}

						Dialog_Show(playerid, "OnPoliceBuyArmour", DIALOG_STYLE_MSGBOX, "Comprar chaleco", "{F5F5F5}El precio del chaleco antibalas es de 300{"#GREEN_COLOR"}${F5F5F5}.\nLo quieres comprar?", "»Aceptar", "xSalir");
					}
					case PICKUP_TYPE_BUY_POLICE_WEAPONS:
					{
						if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return ShowPlayerMessage(playerid, "No eres miembro de una ~b~faccion~w~.");
						if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_NONE && PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE)
						{
							ShowPlayerMessage(playerid, "Tienes que dejar de estar de servicio como %s primero.", work_info[ PLAYER_TEMP[playerid][pt_WORKING_IN] ][work_info_NAME]);
							return 1;
						}

						ShowPoliceBuyWeaponsDialog(playerid);
					}
					case PICKUP_TYPE_SPAWN_POLICE_VEHICL: {
						if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return ShowPlayerMessage(playerid, "No eres miembro de una ~b~faccion~w~.");
						if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return ShowPlayerMessage(playerid, "No estas en servicio de una ~b~faccion~w~.");

						if (PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] != INVALID_VEHICLE_ID) {
							Dialog_Show(playerid, "OnEndPlayerJobResponse", DIALOG_STYLE_MSGBOX, "[{ff6923}Trabajos{F5F5F5}]  Cancelar Jornada", "{F5F5F5}¿Quieres cancelar tu {ff0000}jornada de trabajo{F5F5F5} actual?", "»Aceptar", "xSalir");
						} else {
							for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
							
							new dialog[5000 * sizeof(pVehicle_Spawn)], listitem;
							for (new i = 0; i != sizeof pVehicle_Spawn; i ++) {
								if (pVehicle_Spawn[i][vRank] > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL]) strcatf(dialog, "{666666}%s\t{666666}%s\n", VEHICLE_INFO[pVehicle_Spawn[i][vModel]-400][vehicle_info_NAME], POLICE_RANKS[ pVehicle_Spawn[i][vRank] ]);
								else strcatf(dialog, "{F5F5F5}%s\t{"#POLICE_COLOUR"}%s\n", VEHICLE_INFO[pVehicle_Spawn[i][vModel]-400][vehicle_info_NAME], POLICE_RANKS[ pVehicle_Spawn[i][vRank] ]);
								
								PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = i;
								listitem ++;
							}

							Dialog_Show(playerid, "PoliceSpawnVehicResponse", DIALOG_STYLE_TABLIST, "Vehiculos", dialog, "Sacar", "xSalir");
						}
					}
					case PICKUP_TYPE_ONFOOT_PARKING_SLO: {
						ShowPlayerVehiclesParkDialog(playerid, info[1]);
					}
					case PICKUP_TYPE_CENTRAL_PARKING_SL: {
						ShowPlayerVehiclesCentralParkDi(playerid, info[1]);
					}
					case PICKUP_TYPE_DRIVER_PARKING_SLO: {
						if(IsPlayerDriver(playerid)) {
							if (!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) return ShowPlayerMessage(playerid, "Solo los vehiculos personales se pueden guardar.");
							if (PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] != PI[playerid][pi_ID]) return ShowPlayerMessage(playerid, "Este no es tu vehiculo");
							
							if (GetVehicleSpeed(vehicleid) > MIN_VEHICLE_INTERACTION_SPEED) return ShowPlayerMessage(playerid, "Disminuye la ~b~Velocidad~w~.");

							new p_vehicle_id = GetValidParkingVehicleId(playerid);
							if (p_vehicle_id == -1) return 0;

							new veh_money = VEHICLE_INFO[GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_PRICE] / 200;

							if (GivePlayerCash(playerid, -veh_money, true, true)) {
								ParkingVehicles[playerid][p_vehicle_id][pvValid] = true;
								ParkingVehicles[playerid][p_vehicle_id][pvId] = PLAYER_VEHICLES[vehicleid][player_vehicle_ID];
								ParkingVehicles[playerid][p_vehicle_id][pvModelid] = GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID];
								ParkingVehicles[playerid][p_vehicle_id][pvOwnerId] = PI[playerid][pi_ID];
								ParkingVehicles[playerid][p_vehicle_id][pvParkingIndex] = info[1];
								format(ParkingVehicles[playerid][p_vehicle_id][pvVehiclePlate], 32, "%s", GLOBAL_VEHICLES[vehicleid][gb_vehicle_NUMBER_PLATE]);
								PLAYER_VEHICLES[vehicleid][player_vehicle_PARKING] = info[1];

								SavePlayerVehicle(playerid, vehicleid, true);
								SendPlayerClientMessage(playerid, "{"#GREEN_COLOR"}{F5F5F5}Has {ff0000}aparcado{F5F5F5} tu %s en el {"#YELLOW_COLOR"}Parking{F5F5F5} publico #%d, se te cobrara %d{ff0000}${F5F5F5} diaro.", VEHICLE_INFO[ParkingVehicles[playerid][p_vehicle_id][pvModelid] - 400][vehicle_info_NAME], info[1], veh_money);
							}
							else ShowPlayerMessage(playerid, "No tienes %d~r~$~w~ para guardar tu vehiculo.", veh_money);
						}
					}
					case PICKUP_TYPE_TRUCK_LOAD: {
						if(IsPlayerDriver(playerid)) {
							new Float:angle;
							GetVehicleZAngle(vehicleid, angle);
							if (angle > 180.0) angle -= 360.0;

							if (angle > (TruckLoadPoint[info[1]][3] - 15.0) && angle < (TruckLoadPoint[info[1]][3] + 15.0)) {	
								if (TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADED]) return ShowPlayerMessage(playerid, "El camion ya esta ~b~cargado~w~.");
								if (TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADING]) return ShowPlayerMessage(playerid, "El camion ya se esta ~b~cargando~w~.");
					
								TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADING] = true;
								TRUCK_VEHICLE[vehicleid][truck_vehicle_DRIVER_USER_ID] = PI[playerid][pi_ID];
								
								SetVehicleVelocity(vehicleid, 0.0, 0.0, 0.0);
								
								GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
								UpdateVehicleParams(vehicleid);
								
								ShowDialog(playerid, DIALOG_SELECT_TRUCK_TYPE);
							}
						}
					}
					case PICKUP_TYPE_MEDIC_MEDICINE_BUY: {
						Dialog_Show(playerid, "OnBuyMedicMedicineRespon", DIALOG_STYLE_MSGBOX, "[{ff0000}Hospital{F5F5F5}]  Farmaceutica", "» {F5F5F5}Quieres comprar {"#GREEN_COLOR"}medicamento{F5F5F5} por un precio de 200{"#GREEN_COLOR"}$", "Comprar", "xSalir");
					}
					case PICKUP_TYPE_FUEL_STATION: {
						if(IsPlayerOnFoot(playerid)) {
							Dialog_Show(playerid, "FuelDrumBuyResponse", DIALOG_STYLE_MSGBOX, "[{ff0000}Gasolinera{F5F5F5}]  Comprar bidon", "{F5F5F5}Comprar bidon 30{ff0000}Litros{F5F5F5} de gasolina a 500{"#GREEN_COLOR"}$", "Comprar", "xSalir");
						} else if (IsPlayerDriver(playerid)) {
							PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_IMMUNITY] = gettime() + 15;

							if (GetVehicleSpeed(vehicleid) > MIN_VEHICLE_INTERACTION_SPEED) return ShowPlayerMessage(playerid, "Disminuye la ~b~Velocidad~w~.");

							GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
							UpdateVehicleParams(vehicleid);

							SetVehicleVelocity(vehicleid, 0.0, 0.0, 0.0);

							Dialog_Show(playerid, "RefuelAmountResponse", DIALOG_STYLE_INPUT, "[{ff0000}Gasolinera{F5F5F5}]  Precio 9{"#GREEN_COLOR"}${F5F5F5}/L", "{F5F5F5}Introduce la cantidad de {ff0000}Litros{F5F5F5} a repostar\nescribe {ff0000}lleno{F5F5F5} para llenarlo al maximo", "Repostar", "xSalir");
						}
					}
					case PICKUP_TYPE_PHARMACY: {
						Dialog_Show(playerid, "OnBuyPharmMedicineRespon", DIALOG_STYLE_TABLIST, "[{ff0000}Farmacia{F5F5F5}]  Productos", " Medicamentos\t2400{"#GREEN_COLOR"}${F5F5F5}\n Botiquin\t5000{"#GREEN_COLOR"}${F5F5F5}", "Comprar", "xSalir");
					}
					case PICKUP_TYPE_BANK: {
						if (PI[playerid][pi_BANK_ACCOUNT] == 0) // no tiene cuenta bancaria
						{
							ShowDialog(playerid, DIALOG_CREATE_BANK_ACCOUNT);
							return 1;
						}
						ShowDialog(playerid, DIALOG_BANK);
					}
					case PICKUP_TYPE_REPAIR_VEHICLE: {
						if(IsPlayerDriver(playerid)) {
							SetPlayerInVehicleRepair(playerid, GetPlayerVehicleID(playerid), info[1]);
						}
					}
					case PICKUP_TYPE_DRIVING_LICENSE: {
						if (PLAYER_TEMP[playerid][pt_DL_EXAM]) return SendPlayerClientMessage(playerid, "{cccccc}Ya estas en el examen, sal afuera y toma tu vehiculo para empezar con el examen.");
						if (PI[playerid][pi_DRIVE_LICENSE]) return SendPlayerClientMessage(playerid, "{cccccc}Ya Tienes una licencia de conducir, no te hace falta hacer el examen.");

						Dialog_Show(playerid, "DrivingLicenseResponse", DIALOG_STYLE_MSGBOX, "{ffff64}EXAMEN{f5f5f5} | Licencia de Auto", "{f5f5f5}Examen practico de conduccion\nLugar: {f56424}Los Santos{f5f5f5}\nEstilo: {5a5a5a}Automovil\n{f5f5f5}Precio: 2.500{ff0000}$", "Aceptar", "xSalir");
					}
				}
			}
		}
		}
	}
	return 1;
}

hook OnPlayerKeyStateChange(playerid, newkeys, oldkeys)
{
	if (PLAYER_TEMP[playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return 1;
	
	if (newkeys & KEY_CTRL_BACK)
	{
		for (new i = 0; i != E_WORKS; i ++)	
		{
			if (work_info[i][work_info_TYPE] == WORK_TYPE_FAMILY) continue;
			
			if (GetPlayerInterior(playerid) == obtain_work_coords[i][obtain_work_INTERIOR])
			{
				if (IsPlayerInRangeOfPoint(playerid, 1.0, obtain_work_coords[i][obtain_work_X], obtain_work_coords[i][obtain_work_Y], obtain_work_coords[i][obtain_work_Z]))
				{
					PC_EmulateCommand(playerid, "/trabajar");
					return 1;
				}
			}
		}

		if (IsPlayerInRangeOfPoint(playerid, 1.0, -474.596282, 289.679107, 2004.584960)) return PC_EmulateCommand(playerid, "/pvender");

		new indexx = GetPlayerFastFoodIndex(playerid);
		if (indexx != -10) return PC_EmulateCommand(playerid, "/pedir");

		if (PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] != -1 && ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] != INTERIOR_NO_INFO)
		{
			PLAYER_TEMP[playerid][pt_CLOTHING_SHOP] = GetClothingShopIndexByIntType(ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE]);
			if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP] != -1)
			{
				if (IsPlayerInRangeOfPoint(playerid, 1.5, Clothing_Shop_Positions[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP]][clothing_shop_X], Clothing_Shop_Positions[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP]][clothing_shop_Y], Clothing_Shop_Positions[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP]][clothing_shop_Z]))
				{
					ShowDialog(playerid, DIALOG_CLOTHES);
					return 1;
				}
			}
		}

		if (PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] != -1 && ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE] == INTERIOR_247)
		{
			if (IsPlayerInRangeOfPoint(playerid, 1.0, -27.964675, -89.948631, 1003.546875)) 
			{
				PC_EmulateCommand(playerid, "/productos");
				return 1;
			}
		}
	}
	else if (newkeys & KEY_FIRE)
	{
		if (PI[playerid][pi_LEVEL] == 1 && GetPlayerState(playerid) == PLAYER_STATE_ONFOOT && GetPlayerSpecialAction(playerid) == SPECIAL_ACTION_NONE) ApplyAnimation(playerid, "PED", "IDLE_tired", 4.1, false, false, false, false, 0);
		return 1;
	}
	else if (newkeys & KEY_CROUCH)
	{
		if (PLAYER_TEMP[playerid][pt_GAME_STATE] == GAME_STATE_NORMAL)
		{
			if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
			{
				for (new i = 0; i != sizeof San_Andreas_Barriers; i ++)
				{
					if (IsPlayerInRangeOfPoint(playerid, San_Andreas_Barriers[i][barrier_DISTANCE], San_Andreas_Barriers[i][barrier_PLAYER_X], San_Andreas_Barriers[i][barrier_PLAYER_Y], San_Andreas_Barriers[i][barrier_PLAYER_Z]))
					{
						if (GetPlayerInterior(playerid) == San_Andreas_Barriers[i][barrier_INTERIOR] && GetPlayerVirtualWorld(playerid) == San_Andreas_Barriers[i][barrier_WORLD])
						{
							if (San_Andreas_Barriers[i][barrier_VEHICLE_TYPE] == VEHICLE_TYPE_WORK)
							{
								if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET] && PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE)
								{
									if (San_Andreas_Barriers[i][barrier_VEHICLE_TYPE_IN2] != WORK_NONE)
									{
										if (!PLAYER_WORKS[playerid][ San_Andreas_Barriers[i][barrier_VEHICLE_TYPE_IN] ][pwork_SET] && !PLAYER_WORKS[playerid][ San_Andreas_Barriers[i][barrier_VEHICLE_TYPE_IN2] ][pwork_SET]) break;
									}
									else
									{
										if (!PLAYER_WORKS[playerid][ San_Andreas_Barriers[i][barrier_VEHICLE_TYPE_IN] ][pwork_SET]) break;
									}
								}
							}
							if (IsDynamicObjectMoving(San_Andreas_Barriers[i][barrier_OBJECT_ID]) && !San_Andreas_Barriers[i][barrier_CLOSING]) break;
							if (San_Andreas_Barriers[i][barrier_PRICE] > 0) {
								if (GivePlayerCash(playerid, -San_Andreas_Barriers[i][barrier_PRICE], false, true)) {
									SendPlayerClientMessage(playerid, "Has pagado el peaje por ~y~%s ~w~dólares.", number_format_thousand(San_Andreas_Barriers[i][barrier_PRICE]));
								}
								else {
									SendPlayerClientMessage(playerid, "No tienes suficiente dinero para pagar el peaje.");
									break;
								}
							}
							
							KillTimer(San_Andreas_Barriers[i][barrier_TIMER]);
							San_Andreas_Barriers[i][barrier_TIMER] = SetTimerEx("CloseBarrier", 5000, false, "i", i);
							MoveDynamicObject(San_Andreas_Barriers[i][barrier_OBJECT_ID], San_Andreas_Barriers[i][barrier_X], San_Andreas_Barriers[i][barrier_Y], San_Andreas_Barriers[i][barrier_Z] + 0.72967 + 0.01, 0.0065, 0.0, 0.0, San_Andreas_Barriers[i][barrier_ROTATION]);
							San_Andreas_Barriers[i][barrier_CLOSING] = false;
							break;
						}
						else break;
					}
				}
			}
		}
		return 1;
	} else if (newkeys & KEY_SECONDARY_ATTACK) {
		if (IsPlayerInDynamicArea(playerid, Lumberjack_Area)) {
			if (GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) {
				if (PLAYER_TEMP[playerid][pt_WORKING_IN] == WORK_LUMBERJACK) {
					if (PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] == -1) {
						if (PLAYER_TEMP[playerid][pt_PLAYER_CARRYING_TREE]) return SendPlayerClientMessage(playerid, "{f5f5f5}Lleva la leca cortada al punto marcado para talar más árboles.");
						
						for (new i = 0; i != sizeof LUMBER_TREES; i ++) {
							if (IsPlayerInRangeOfPoint(playerid, 2.0, LUMBER_TREES[i][lumber_tree_X], LUMBER_TREES[i][lumber_tree_Y], LUMBER_TREES[i][lumber_tree_Z])) {
								if (LUMBER_TREES[i][lumber_tree_STATE] == LUMBER_TREE_STATE_NORMAL) {
									TogglePlayerControllable(playerid, false);
									SetCameraBehindPlayer(playerid);
									ApplyAnimation(playerid, "CHAINSAW", "WEAPON_csaw", 4.1, true, false, false, false, 0);
									LUMBER_TREES[i][lumber_tree_STATE] = LUMBER_TREE_STATE_CUTTING;
									PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] = i;
									
									new Float:offset = floatdiv(PLAYER_WORKS[playerid][WORK_LUMBERJACK][pwork_LEVEL], 10);
									if (offset > 30.0) offset = 30.0;
									
									PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE_PROG] = frandom(10.0, 8.0, 2) + offset;

									SetPlayerArmedWeapon(playerid, 0);
									
									new label_str[256];
									format(label_str, sizeof label_str, "{f46530}Árbol (%d)\n\n{F5F5F5}Talando... {CCCCCC}(%.1f%%)", PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE], PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE_PROG]);
									UpdateDynamic3DTextLabelText(LUMBER_TREES[ PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_LABEL], -1, label_str);
									
									KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][11]);
									PLAYER_TEMP[playerid][pt_TIMERS][11] = SetTimerEx("LumberjackUp", 2000, false, "ii", playerid, PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE]);
								}
								return Y_HOOKS_BREAK_RETURN_1;
							}
						}
					}
				}
			}
		}

		if (GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
		{
			if (IsPlayerInDynamicArea(playerid, Farmer_Area))
			{
				if (!PLAYER_WORKS[playerid][WORK_FARMER][pwork_SET]) return ShowPlayerMessage(playerid, "No eres agricultor.");
				if (PLAYER_TEMP[playerid][pt_WORKING_IN] && PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_FARMER)
				{
					ShowPlayerMessage(playerid, "Tienes que dejar de estar de servicio como %s primero.", work_info[ PLAYER_TEMP[playerid][pt_WORKING_IN] ][work_info_NAME]);
					return 1;
				}
				
				if (GetPlayerVirtualWorld(playerid) != 0) return ShowPlayerMessage(playerid, "No estás en el lugar adecuado.");
				if (GetPlayerInterior(playerid) != 0) return ShowPlayerMessage(playerid, "No estás en el lugar adecuado.");
				if (PLAYER_TEMP[playerid][pt_PLANTING]) return ShowPlayerMessage(playerid, "Ahora mismo ya estás plantando algo.");
				
				if (gettime() < PLAYER_TEMP[playerid][pt_LAST_PLANT_TIME] + 20)
				{
					new time = (20-(gettime()-PLAYER_TEMP[playerid][pt_LAST_PLANT_TIME]));
					ShowPlayerMessage(playerid, "Tienes que esperar %s segundos para volver a plantar.", TimeConvert(time));
					return 1;
				}
				
				if (GetPlayerPlantedPlants(playerid) > 10) return ShowPlayerMessage(playerid, "Por favor, recoge tus otras plantas para poder plantar más.");
				
				for (new i = 0; i != MAX_PLANTS; i ++)
				{
					if (!PLANTS[i][plant_VALID]) continue;
					
					new Float:pos[3];
					GetDynamicObjectPos(PLANTS[i][plant_OBJECT_ID], pos[0], pos[1], pos[2]);
					if (IsPlayerInRangeOfPoint(playerid, 3.0, pos[0], pos[1], pos[2]))
					{
						ShowPlayerMessage(playerid, "Aquí ya hay una planta, aléjate un poco para plantar.");
						return 1;
					}
				}
				
				ShowDialog(playerid, DIALOG_PLANT_PLANTS);
				return 1;
			}
		}
		return 1;
	}
	else if (newkeys & KEY_SUBMISSION)
	{
		if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER) return PC_EmulateCommand(playerid, "/motor");
	}
	else if (newkeys & KEY_YES)
	{
		if (GetPlayerState(playerid) == PLAYER_STATE_ONFOOT)
		{
			if (PLAYER_WORKS[playerid][WORK_MEDIC][pwork_SET] && PLAYER_TEMP[playerid][pt_WORKING_IN] == WORK_MEDIC) {
				if (PLAYER_TEMP[playerid][pt_PERFORMED_ENVIRONMET] > 5) {
					PC_EmulateCommand(playerid, "/curar");	
				} else {
					ShowPlayerMessage(playerid, "Debes ~g~rolear entorno~w~ para curar.");
				}
			}

			if (IsValidPlayerInventoryObjectSlo(playerid, SLOT_HAND, INVENTORY_TYPE_MEDICAL_KIT)) {
				UsePlayerInventoryObject(playerid, SLOT_HAND);
			}

			if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK) {
				if (CountMedicsOnDuty() <= 0) {
					if (PI[playerid][pi_WANTED_LEVEL] > 0) ShowPlayerMessage(playerid, "Tienes ~r~nivel de busqueda~w~ espera a que la policia venga a por ti.");
					else Dialog_Show(playerid, "NoMedicsDeath", DIALOG_STYLE_MSGBOX, "[{ff0000}Morir{f5f5f5}]  Aceptar muerte", "{ff0000}{f5f5f5}No hay medicos disponibles. {ff0000}¿quieres aceptar tu muerte?{f5f5f5}.", "»Aceptar", "xSalir");
				} else {
					if (PLAYER_TEMP[playerid][pt_DEATH_HEALTH] <= 10.0) {
						PLAYER_TEMP[playerid][pt_DEATH_HEALTH] = 0;
						SetPlayerHealthEx(playerid, 0);
						Auto_SendPlayerAction(playerid, "ha elegido la salida rápida.");
					} else {
						ShowPlayerMessage(playerid, "Debes tener 10 de ~b~vida~w~.");
					}
				}
			}

			if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return 1;
			
			if (IsPlayerInDynamicArea(playerid, Farmer_Area))
			{
				for (new i = 0; i != MAX_PLANTS; i ++)
				{
					if (!PLANTS[i][plant_VALID] || PLANTS[i][plant_GROWING]) continue;
					
					new Float:pos[3];
					GetDynamicObjectPos(PLANTS[i][plant_OBJECT_ID], pos[0], pos[1], pos[2]);

					if (IsPlayerInRangeOfPoint(playerid, 1.5, pos[0], pos[1], pos[2]))
					{
						if (PLANTS[i][plant_PLANTED_BY_ACCOUNT_ID] == PI[playerid][pi_ID])
						{
							if (!IsValidPlayerInventoryObjectSlo(playerid, SLOT_HAND, INVENTORY_TYPE_WEAPON_KNIFE)) return ShowPlayerMessage(playerid, "Necesitas un ~b~Cuchillo~w~ afilado.");
							if (GetPlayerInventoryExtra(playerid, SLOT_HAND) < 2) return ShowPlayerMessage(playerid, "Necesitas un ~b~Cuchillo~w~ afilado con 2 o mas usos.");

							KillTimer(PLANTS[i][plant_TIMER]);
							switch(seed_info[ PLANTS[i][plant_TYPE] ][seed_info_PLANT_TYPE])
							{
								case PLANT_TYPE_MEDICINE:
								{
									PI[playerid][pi_MEDICINE] += 4;
									ShowPlayerMessage(playerid, "Has recogido la planta~n~has obtenido 4 ~b~gramos~w~ de medicamento.");
								}
								case PLANT_TYPE_CANNABIS:
								{
									PI[playerid][pi_CANNABIS] += 6;
									ShowPlayerMessage(playerid, "Has recogido la planta~n~has obtenido 6 ~b~gramos~w~ de marihuana.");
								}
								case PLANT_TYPE_CRACK:
								{
									PI[playerid][pi_CRACK] += 4;
									ShowPlayerMessage(playerid, "Has recogido la planta~n~has obtenido 4 ~b~gramos~w~ de crack.");
								}
							}

							j_PocketInfo[playerid][SLOT_HAND][pExtra] -= 2;

							if (j_PocketInfo[playerid][SLOT_HAND][pExtra] <= 0) {
								DeleteInventorySlot(j_PocketInfo[playerid][SLOT_HAND][pId]);
								ClearPlayerInventorySlot(playerid, SLOT_HAND, true);
							}
							
							DestroyDynamicObject(PLANTS[i][plant_OBJECT_ID]);
							DestroyDynamic3DTextLabel(PLANTS[i][plant_LABEL_ID]);
							ApplyAnimation(playerid, "CARRY", "putdwn05", 4.1, 0, 1, 1, 0, 0, 1);
							
							new tmp_PLANTS[PLANTS_ENUM]; PLANTS[i] = tmp_PLANTS;
						}
						return 1;
					}
				}
			}
		}
	}
	return 1;
}

forward CloseBarrier(i);
public CloseBarrier(i)
{
	San_Andreas_Barriers[i][barrier_CLOSING] = true;
	MoveDynamicObject(San_Andreas_Barriers[i][barrier_OBJECT_ID], San_Andreas_Barriers[i][barrier_X], San_Andreas_Barriers[i][barrier_Y], San_Andreas_Barriers[i][barrier_Z] + 0.72967, 0.0065, 0.0, -90.0, San_Andreas_Barriers[i][barrier_ROTATION]);
	return 1;
}

public OnPlayerUpdate(playerid)
{
	if (PLAYER_TEMP[playerid][pt_KICKED] || PLAYER_TEMP[playerid][pt_GAME_STATE] != GAME_STATE_NORMAL || PI[playerid][pi_ID] <= 0 || PI[playerid][pi_LEVEL] <= 0) return 0;

	new player_state = GetPlayerState(playerid);
	if (player_state == PLAYER_STATE_SPAWNED || player_state == PLAYER_STATE_SPECTATING) return 1;
	
	new player_action = GetPlayerSpecialAction(playerid), Float:player_health, Float:player_armour, player_weapon = GetPlayerWeapon(playerid), current_gettime = gettime();
	GetPlayerHealth(playerid, player_health);
	GetPlayerArmour(playerid, player_armour);

	if (player_weapon) CheckWeaponAndAmmo(playerid, player_weapon);
	
	if (ac_Info[CHEAT_PLAYER_HEALTH][ac_Enabled])
	{
		if (player_health > PI[playerid][pi_HEALTH] + 1.0)
		{
			if (current_gettime > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_HEALTH][p_ac_info_IMMUNITY])
			{
				if (!ac_Info[CHEAT_PLAYER_HEALTH][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_HEALTH);
				else
				{
					if (current_gettime - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_HEALTH][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_HEALTH][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_HEALTH][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_HEALTH][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_PLAYER_HEALTH][p_ac_info_LAST_DETECTION] = current_gettime;
					if (PLAYER_AC_INFO[playerid][CHEAT_PLAYER_HEALTH][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_HEALTH][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_HEALTH);
				}
			}
		}
	}
	
	if (ac_Info[CHEAT_PLAYER_ARMOUR][ac_Enabled])
	{
		if (player_armour > PI[playerid][pi_ARMOUR] + 1.0)
		{
			if (current_gettime > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_IMMUNITY])
			{
				if (!ac_Info[CHEAT_PLAYER_ARMOUR][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_ARMOUR);
				else
				{
					if (current_gettime - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_ARMOUR][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_LAST_DETECTION] = current_gettime;
					if (PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_ARMOUR][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_ARMOUR);
				}
			}
		}
	}
	
	if (ac_Info[CHEAT_JETPACK][ac_Enabled])
	{
		if (player_action == SPECIAL_ACTION_USEJETPACK)
		{
			if (current_gettime > PLAYER_AC_INFO[playerid][CHEAT_JETPACK][p_ac_info_IMMUNITY])
			{
				if (!ac_Info[CHEAT_JETPACK][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_JETPACK);
				else
				{
					if (current_gettime - PLAYER_AC_INFO[playerid][CHEAT_JETPACK][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_JETPACK][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_JETPACK][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_JETPACK][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_JETPACK][p_ac_info_LAST_DETECTION] = current_gettime;
					if (PLAYER_AC_INFO[playerid][CHEAT_JETPACK][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_JETPACK][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_JETPACK);
				}
			}
		}
	}
	
	new Float:dis, Float:vehicle_health, vehicleid = GetPlayerVehicleID(playerid);
	if (!vehicleid) dis = GetPlayerDistanceFromPoint(playerid, PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z]);
	else
	{
		dis = GetVehicleDistanceFromPoint(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][0], GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][1], GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][2]);
		GetVehicleHealth(vehicleid, vehicle_health);
	}
	
	if (ac_Info[CHEAT_UNOCCUPIED_VEHICLE_TP][ac_Enabled] && vehicleid && player_state == PLAYER_STATE_PASSENGER)
	{
		if (floatabs(dis) > 20.0)
		{
			if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] == INVALID_PLAYER_ID)
			{
				GLOBAL_VEHICLES[vehicleid][gb_vehicle_TP_IMMUNITY] = current_gettime + 5;
			}
		}
	}
	
	if (ac_Info[CHEAT_HIGH_POS][ac_Enabled])
	{
		if (current_gettime > PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY])
		{
			if (floatabs(dis) > 80.0 && PI[playerid][pi_POS_Z] > -97.0)
			{
				if (player_state != PLAYER_STATE_PASSENGER)
				{
					if (!ac_Info[CHEAT_HIGH_POS][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_HIGH_POS, dis);
					else
					{
						if (current_gettime - PLAYER_AC_INFO[playerid][CHEAT_HIGH_POS][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_HIGH_POS][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_HIGH_POS][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_HIGH_POS][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_HIGH_POS][p_ac_info_LAST_DETECTION] = current_gettime;
						if (PLAYER_AC_INFO[playerid][CHEAT_HIGH_POS][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_HIGH_POS][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_HIGH_POS, dis);
					}
				}
			}
		}
	}

	switch(player_state)
	{
		case PLAYER_STATE_ONFOOT:
		{
			if (ac_Info[CHEAT_PLAYER_SPEED][ac_Enabled])
			{
				if (current_gettime > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_SPEED][p_ac_info_IMMUNITY])
				{
					new speed = GetPlayerSpeed(playerid);
					if (speed > 200)
					{
						if (!ac_Info[CHEAT_PLAYER_SPEED][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_SPEED, speed);
						else
						{
							if (current_gettime - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_SPEED][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_SPEED][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_SPEED][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_SPEED][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_PLAYER_SPEED][p_ac_info_LAST_DETECTION] = current_gettime;
							if (PLAYER_AC_INFO[playerid][CHEAT_PLAYER_SPEED][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_SPEED][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_SPEED, speed);
						}
					}
				}
			}
			
			if (ac_Info[CHEAT_POS][ac_Enabled])
			{
				if (current_gettime > PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY])
				{
					if (GetPlayerSurfingVehicleID(playerid) == INVALID_VEHICLE_ID && GetPlayerSurfingObjectID(playerid) == INVALID_OBJECT_ID && player_action != SPECIAL_ACTION_ENTER_VEHICLE && player_action != SPECIAL_ACTION_EXIT_VEHICLE)
					{
						if (floatabs(dis) > 6.0 && PI[playerid][pi_POS_Z] > -97.0)
						{
							if (!ac_Info[CHEAT_POS][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_POS, dis);
							else
							{
								if (current_gettime - PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_POS][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_DETECTIONS] = 0;
								else PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_DETECTIONS] ++;
								
								PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_LAST_DETECTION] = current_gettime;
								if (PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_POS][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_POS, dis);
							}
						}
					}
				}
			}
		}
		case PLAYER_STATE_DRIVER:
		{	
			new Float:vspeed = GetVehicleSpeed(vehicleid);
			
			if (ac_Info[CHEAT_VEHICLE_SPEED_HACK][ac_Enabled])
			{
				if (current_gettime > PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_SPEED_HACK][p_ac_info_IMMUNITY])
				{
					if (vspeed > 1000.0)
					{
						if (!ac_Info[CHEAT_VEHICLE_SPEED_HACK][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_SPEED_HACK);
						else
						{
							if (current_gettime - PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_SPEED_HACK][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_VEHICLE_SPEED_HACK][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_SPEED_HACK][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_SPEED_HACK][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_SPEED_HACK][p_ac_info_LAST_DETECTION] = current_gettime;
							if (PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_SPEED_HACK][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_VEHICLE_SPEED_HACK][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_SPEED_HACK);
						}
					}
				}
			}
			
			if (ac_Info[CHEAT_VEHICLE_HEALTH][ac_Enabled])
			{
				if (vehicle_health > (GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] + 20.0))
				{
					if (current_gettime > PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_IMMUNITY])
					{						
						if (!ac_Info[CHEAT_VEHICLE_HEALTH][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_HEALTH, (GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] + 5.0) - vehicle_health);
						else
						{
							if (current_gettime - PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_VEHICLE_HEALTH][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_LAST_DETECTION] = current_gettime;
							if (PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_VEHICLE_HEALTH][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_HEALTH);
						}
					}
				}
			}
			
			if (ac_Info[CHEAT_POS][ac_Enabled])
			{
				if (current_gettime > PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY])
				{
					if (vspeed < 20.0 && floatabs(dis) >= 10.0 && GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][2] > -97.0)
					{
						if (!ac_Info[CHEAT_POS][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_POS, dis);
						else
						{
							if (current_gettime - PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_POS][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_LAST_DETECTION] = current_gettime;
							if (PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_POS][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_POS, dis);
						}
					}
				}
			}
			
			if (ac_Info[CHEAT_VEHICLE_NOFUEL][ac_Enabled])
			{
				new Keys, ud, lr;
				GetPlayerKeys(playerid, Keys, ud, lr);
				if (Keys == KEY_SPRINT)
				{
					if (!GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] && vspeed > 60.0 && GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][2] > -97.0 && VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_ENGINE])
					{
						UpdateVehicleParams(vehicleid);

						if (current_gettime > PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_IMMUNITY])
						{
							if (!ac_Info[CHEAT_VEHICLE_NOFUEL][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_NOFUEL);
							else
							{
								if (current_gettime - PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_VEHICLE_NOFUEL][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_DETECTIONS] = 0;
								else PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_DETECTIONS] ++;
								
								PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_LAST_DETECTION] = current_gettime;
								if (PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_VEHICLE_NOFUEL][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_NOFUEL);
							}
						}
					}
				}
			}
		}
	}
	
	PI[playerid][pi_HEALTH] = player_health;
	PI[playerid][pi_ARMOUR] = player_armour;

	GetPlayerPos(playerid, PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z]);
	
	if (vehicleid)
	{
		GetVehiclePos(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][0], GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][1], GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][2]);
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = vehicle_health;
	}
	return 1;
}

SetPlayerPosEx(playerid, Float:x, Float:y, Float:z, Float:angle, interior, world, freeze = 0, addoffset = 0)
{
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_IMMUNITY] = gettime() + 5;
	
	if (addoffset)
	{
		x += (1.5 * floatsin(-angle, degrees));
		y += (1.5 * floatcos(-angle, degrees));
	}
	
	PI[playerid][pi_POS_X] = x;
	PI[playerid][pi_POS_Y] = y;
	PI[playerid][pi_POS_Z] = z;
	PI[playerid][pi_ANGLE] = angle;
	
	SetPlayerPos(playerid, x, y, z);
	SetPlayerFacingAngle(playerid, angle);
	SetPlayerInterior(playerid, interior);
	SetPlayerVirtualWorld(playerid, world);
	SetCameraBehindPlayer(playerid);
	
	if (freeze)
	{
		TogglePlayerControllableEx(playerid, false);
		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][3]);
		PLAYER_TEMP[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", 2000, false, "ib", playerid, true);
	}
	return 1;
}

forward TogglePlayerControl(playerid, bool:controlable);
public TogglePlayerControl(playerid, bool:controlable)
{
	return TogglePlayerControllableEx(playerid, controlable);
}


GetNearestHospitalForPlayer(playerid)
{
	new Float:distance = 99999.0,
        Float:tmp_distance,
        closest = -1; 

    for (new i = 0; i < sizeof Hospital_Spawn_Positions; i++) 
	{
		tmp_distance = GetPlayerDistanceFromPoint(playerid, Hospital_Spawn_Positions[i][hspi_X], Hospital_Spawn_Positions[i][hspi_Y], Hospital_Spawn_Positions[i][hspi_Z]); 
		if (tmp_distance < distance) 
		{ 
			distance = tmp_distance; 
			closest = i;
		}
	}

	if (closest == -1) closest = 1;
	return closest;
}

GetHospitalSpawnPosition(hospital, &Float:x, &Float:y, &Float:z, &Float:angle, &interior, &local_interior, &rp_state)
{
	x = Hospital_Spawn_Positions[hospital][hspi_X];
	y = Hospital_Spawn_Positions[hospital][hspi_Y];
	z = Hospital_Spawn_Positions[hospital][hspi_Z];
	angle = Hospital_Spawn_Positions[hospital][hspi_ANGLE];
	interior = 0;
	local_interior = 0;
	rp_state = ROLEPLAY_STATE_NORMAL;
	return 1;
}

UpdateHospitalSizeTextdrawLife(playerid)
{
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2], 270.0 + ( PLAYER_TEMP[playerid][pt_HOSPITAL_LIFE] * 0.98), 0.000000);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2]);
	return 1;
}

forward HealthUp(playerid);
public HealthUp(playerid)
{
	if (PI[playerid][pi_STATE] != ROLEPLAY_STATE_HOSPITAL) return 1;
	
	if (PLAYER_TEMP[playerid][pt_HOSPITAL_LIFE] < 100.0)
	{
		if (PI[playerid][pi_VIP]) PLAYER_TEMP[playerid][pt_HOSPITAL_LIFE] += 10.0;
		else PLAYER_TEMP[playerid][pt_HOSPITAL_LIFE] += 5.0;
		
		if (PLAYER_TEMP[playerid][pt_HOSPITAL_LIFE] > 100.0) PLAYER_TEMP[playerid][pt_HOSPITAL_LIFE] = 100.0;
		UpdateHospitalSizeTextdrawLife(playerid);
		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][4]);
		PLAYER_TEMP[playerid][pt_TIMERS][4] = SetTimerEx("HealthUp", 1000, false, "i", playerid);
	}
	else
	{
		if (PI[playerid][pi_VIP]) PI[playerid][pi_HEALTH] = 100.0;
		else PI[playerid][pi_HEALTH] = 50.0;
		
		SetPlayerHealthEx(playerid, PI[playerid][pi_HEALTH]);
		
		ClearPlayerChat(playerid);
		SendPlayerClientMessage(playerid, "Te has recuperado.");

		new price = PI[playerid][pi_LEVEL] * 200;
		if (price > 900) price = 900;
		price += minrand(200, 300);
		
		if (price > PI[playerid][pi_CASH])
		{
			price = PI[playerid][pi_CASH];
			if (price < 0) price = 0;
		}

		ShowPlayerMessage(playerid, "El coste de los servicios medicos es de %s~r~$~w~.", number_format_thousand(price));
		GivePlayerCash(playerid, -price, false, true);
		PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][0]);
		PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][1]);
		PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_HOSPITAL][2]);
		PI[playerid][pi_LOCAL_INTERIOR] = 0;
		PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] = -1;
		
		if (PI[playerid][pi_WANTED_LEVEL] > 0 || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED)
		{
			PI[playerid][pi_STATE] = ROLEPLAY_STATE_JAIL;
			if (PI[playerid][pi_VIP]) PI[playerid][pi_POLICE_JAIL_TIME] = 150 * PI[playerid][pi_WANTED_LEVEL];
			else PI[playerid][pi_POLICE_JAIL_TIME] = 300 * PI[playerid][pi_WANTED_LEVEL];
			PI[playerid][pi_WANTED_LEVEL] = 0;
			PI[playerid][pi_POLICE_JAIL_ID] = 0;
			PLAYER_TEMP[playerid][pt_ENTER_JAIL_TIME] = gettime();
			SetSpawnInfo(playerid, NO_TEAM, PI[playerid][pi_SKIN], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID] ][jail_X], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_Y], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_Z], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_ANGLE], 0, 0, 0, 0, 0, 0);
			PI[playerid][pi_INTERIOR] = JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_INTERIOR];
			SetPlayerVirtualWorld(playerid, 0);
			
			new time = PI[playerid][pi_POLICE_JAIL_TIME] - (gettime() - PLAYER_TEMP[playerid][pt_ENTER_JAIL_TIME]);
			SendPlayerClientMessage(playerid, "Te quedan %s minutos de condena.", TimeConvert(time));
		}
		else
		{
			GetHospitalSpawnPosition(PLAYER_TEMP[playerid][pt_HOSPITAL], PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z], PI[playerid][pi_ANGLE], PI[playerid][pi_INTERIOR], PI[playerid][pi_LOCAL_INTERIOR], PI[playerid][pi_STATE]);
			
			PI[playerid][pi_POS_X] += (1.5 * floatsin(-PI[playerid][pi_ANGLE], degrees));
			PI[playerid][pi_POS_Y] += (1.5 * floatcos(-PI[playerid][pi_ANGLE], degrees));
			
			SetSpawnInfo(playerid, NO_TEAM, PI[playerid][pi_SKIN], PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z], PI[playerid][pi_ANGLE], 0, 0, 0, 0, 0, 0);
		}
		PLAYER_TEMP[playerid][pt_PLAYER_FINISH_HOSPITAL] = true;
		TogglePlayerSpectatingEx(playerid, false);
	}
	return 1;
}

TogglePlayerSpectatingEx(playerid, bool:spectate)
{
	PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_SPECTATE][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_TEMP[playerid][pt_PLAYER_SPECTATE] = spectate;
	return TogglePlayerSpectating(playerid, spectate);
}

#define MAX_INTERIOR_ACTORS 10
enum Interior_Actor_Enum
{
	bool:ia_VALID,
	ia_SKIN,
	Float:ia_POS_X,
	Float:ia_POS_Y,
	Float:ia_POS_Z,
	Float:ia_POS_A,
}

CreateInteriorActor(interior_type, world, interior)
{
	if (interior_type == INTERIOR_NO_INFO) return INVALID_ACTOR_ID;
	
	new InteriorActorInfo[MAX_INTERIOR_ACTORS][Interior_Actor_Enum];
	
	switch(interior_type)
	{
		case INTERIOR_BINCO:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 119;
			InteriorActorInfo[0][ia_POS_X]	= 208.376373;
			InteriorActorInfo[0][ia_POS_Y]	= -98.703956;
			InteriorActorInfo[0][ia_POS_Z]	= 1005.257812;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_SUBURBAN:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 191;
			InteriorActorInfo[0][ia_POS_X]	= 203.826187;
			InteriorActorInfo[0][ia_POS_Y]	= -41.667518;
			InteriorActorInfo[0][ia_POS_Z]	= 1001.804687;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_PROLAPS:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 190;
			InteriorActorInfo[0][ia_POS_X]	= 207.139907;
			InteriorActorInfo[0][ia_POS_Y]	= -127.805473;
			InteriorActorInfo[0][ia_POS_Z]	= 1003.507812;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_DIDIER_SACHS:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 169;
			InteriorActorInfo[0][ia_POS_X]	= 204.275909;
			InteriorActorInfo[0][ia_POS_Y]	= -157.829010;
			InteriorActorInfo[0][ia_POS_Z]	= 1000.523437;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_VICTIM:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 217;
			InteriorActorInfo[0][ia_POS_X]	= 204.853225;
			InteriorActorInfo[0][ia_POS_Y]	= -8.764448;
			InteriorActorInfo[0][ia_POS_Z]	= 1001.210937;
			InteriorActorInfo[0][ia_POS_A]	= 270.0;
		}
		case INTERIOR_ZIP:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 211;
			InteriorActorInfo[0][ia_POS_X]	= 162.226135;
			InteriorActorInfo[0][ia_POS_Y]	= -81.191978;
			InteriorActorInfo[0][ia_POS_Z]	= 1001.804687;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_247:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 184;
			InteriorActorInfo[0][ia_POS_X]	= -27.483411;
			InteriorActorInfo[0][ia_POS_Y]	= -91.628837;
			InteriorActorInfo[0][ia_POS_Z]	= 1003.546875;
			InteriorActorInfo[0][ia_POS_A]	= 0.0;
		}
		case INTERIOR_PIZZA:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 155;
			InteriorActorInfo[0][ia_POS_X] 	= 375.114501;
			InteriorActorInfo[0][ia_POS_Y] 	= -117.272621;
			InteriorActorInfo[0][ia_POS_Z] 	= 1001.492187;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_CLUCKIN_BELL:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 167;
			InteriorActorInfo[0][ia_POS_X] 	= 368.652679;
			InteriorActorInfo[0][ia_POS_Y] 	= -4.492218;
			InteriorActorInfo[0][ia_POS_Z] 	= 1001.851562;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_BURGER_SHOT:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 205;
			InteriorActorInfo[0][ia_POS_X] 	= 376.114227;
			InteriorActorInfo[0][ia_POS_Y] 	= -65.848991;
			InteriorActorInfo[0][ia_POS_Z] 	= 1001.507812;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_BANK_LS:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 59;
			InteriorActorInfo[0][ia_POS_X] 	= 819.9623;
			InteriorActorInfo[0][ia_POS_Y] 	= 1.9547;
			InteriorActorInfo[0][ia_POS_Z] 	= 1004.1797;
			InteriorActorInfo[0][ia_POS_A]	= 266.6115;
		}
		case INTERIOR_BANK_SF:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 59;
			InteriorActorInfo[0][ia_POS_X] 	= 1104.802001;
			InteriorActorInfo[0][ia_POS_Y] 	= 1531.275634;
			InteriorActorInfo[0][ia_POS_Z] 	= 1452.475097;
			InteriorActorInfo[0][ia_POS_A]	= 180.0;
		}
		case INTERIOR_BANK_LV:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 59;
			InteriorActorInfo[0][ia_POS_X] 	= 2692.497558;
			InteriorActorInfo[0][ia_POS_Y] 	= -610.933593;
			InteriorActorInfo[0][ia_POS_Z] 	= -71.658203;
			InteriorActorInfo[0][ia_POS_A]	= 90.0;
		}
		case INTERIOR_CITY_HALL_LS:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 186;
			InteriorActorInfo[0][ia_POS_X] 	= -474.572387;
			InteriorActorInfo[0][ia_POS_Y] 	= 287.982879;
			InteriorActorInfo[0][ia_POS_Z] 	= 2004.584960;
			InteriorActorInfo[0][ia_POS_A]	= 0.0;
		}
		case INTERIOR_UNITY_STATION:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 184;
			InteriorActorInfo[0][ia_POS_X] 	= 1489.038818;
			InteriorActorInfo[0][ia_POS_Y] 	= 1305.631591;
			InteriorActorInfo[0][ia_POS_Z] 	= 1093.296386;
			InteriorActorInfo[0][ia_POS_A]	= 270.0;
		}
		case INTERIOR_TRUCK:
		{
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 127;
			InteriorActorInfo[0][ia_POS_X] 	= 1297.120117;
			InteriorActorInfo[0][ia_POS_Y] 	= -66.351226;
			InteriorActorInfo[0][ia_POS_Z] 	= 1002.497375;
			InteriorActorInfo[0][ia_POS_A]	= 0.0;
		}
		case INTERIOR_PHARMACY: {
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 308;
			InteriorActorInfo[0][ia_POS_X] 	= -30.6434;
			InteriorActorInfo[0][ia_POS_Y] 	= -30.8605;
			InteriorActorInfo[0][ia_POS_Z] 	= 1003.5573;
			InteriorActorInfo[0][ia_POS_A]	= 359.9898;
		}
		case INTERIOR_DRIVING_SCHOOL: {
			InteriorActorInfo[0][ia_VALID]	= true;
			InteriorActorInfo[0][ia_SKIN]	= 119;
			InteriorActorInfo[0][ia_POS_X] 	= -2034.9048;
			InteriorActorInfo[0][ia_POS_Y] 	= -118.0769;
			InteriorActorInfo[0][ia_POS_Z] 	= 1035.1719;
			InteriorActorInfo[0][ia_POS_A]	= 304.8060;
		}
		default: return INVALID_ACTOR_ID;
	}

	new mainActor = INVALID_ACTOR_ID;
	for (new i; i != sizeof InteriorActorInfo; i++) {
		if (InteriorActorInfo[i][ia_VALID]) {
			new tmp = CreateDynamicActor(InteriorActorInfo[i][ia_SKIN], InteriorActorInfo[i][ia_POS_X], InteriorActorInfo[i][ia_POS_Y], InteriorActorInfo[i][ia_POS_Z], InteriorActorInfo[i][ia_POS_A], true, 100.0, world, interior);
			if (i == 0) {
				mainActor = tmp;
			}
		}
	}

	return mainActor;
}

GetBuyPropertySiteIndexByIntTyp(interior_type)
{
	for (new i = 0; i != sizeof BUY_PROPERTIES_SITES; i ++)
	{
		if (BUY_PROPERTIES_SITES[i][site_INTERIOR_TYPE] == interior_type) return i;
	}
	return -1;
}

GetPlayerFastFoodIndex(playerid)
{
	for (new i = 0; i != sizeof Fast_Food_Positions; i ++)
	{
		if (IsPlayerInRangeOfPoint(playerid, 1.0, Fast_Food_Positions[i][fast_food_X], Fast_Food_Positions[i][fast_food_Y], Fast_Food_Positions[i][fast_food_Z]))
		{
			return i;
		}
	}
	return -10;
}

GetClothingShopIndexByIntType(interior_type)
{
	for (new i = 0; i != sizeof Clothing_Shop_Positions; i ++)
	{
		if (Clothing_Shop_Positions[i][clothing_shop_INTERIOR_TYPE] == interior_type) return i;
	}
	return -1;
}

ShowToysShopTextdraws(playerid)
{
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][4]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][8]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9]);
	return 1;
}

HideToysShopTextdraws(playerid)
{
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][0]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][2]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][4]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][6]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][7]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][8]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][9]);
	return 1;
}

ClosePlayerToysMenu(playerid)
{
	SetPlayerVirtualWorld(playerid, ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_INT_WORLD] );
	TogglePlayerControllableEx(playerid, true);
	
	HideToysShopTextdraws(playerid);
	//PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] = 0;
	PLAYER_TEMP[playerid][pt_TOYS_SHOP] = false;
	CancelSelectTextDrawEx(playerid);
	return 1;
}

UpdateToysShop(playerid) {
	if (!PLAYER_TEMP[playerid][pt_TOYS_SHOP]) return 0;
	
	PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][1], ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_NAME]);
	PlayerTextDrawSetPreviewModel(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3], GetObjectInfoModel(Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_type]));
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][3]);
	
	if (Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_price_coin] > 0) {
		va_PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][4], "Modelo:_%s~n~Precio:_%s"SERVER_COIN"s", GetObjectInfoName(Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_type]), number_format_thousand( Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_price_coin] ));

		if (PI[playerid][pi_COINS] < Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_price_coin]) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], -900267777);
		else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], 1855979775);
		PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5]);
	} else {
		va_PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][4], "Modelo:_%s~n~Precio:_%s$", GetObjectInfoName(Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_type]), number_format_thousand( Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_price] ));

		if (PI[playerid][pi_CASH] < Toys_Shop[ PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] ][shop_toy_price]) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], -900267777);
		else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5], 1855979775);
		PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][5]);
	}

	va_PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_TOYS_SHOP][8], "%d/%d", PLAYER_TEMP[playerid][pt_TOYS_SHOP_TOY_SELECTED] + 1, sizeof(Toys_Shop));
	return 1;
}


ShowClothingShopTextdraws(playerid)
{
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4]);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5]);
	return 1;
}

HideClothingShopTextdraws(playerid)
{
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][0]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][3]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][4]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5]);
	return 1;
}

ClosePlayerClothingMenu(playerid)
{
	PI[playerid][pi_POS_X] = Clothing_Shop_Positions[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP]][clothing_shop_X];
	PI[playerid][pi_POS_Y] = Clothing_Shop_Positions[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP]][clothing_shop_Y];
	PI[playerid][pi_POS_Z] = Clothing_Shop_Positions[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP]][clothing_shop_Z];
	PI[playerid][pi_ANGLE] = Clothing_Shop_Positions[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP]][clothing_shop_ANGLE];
	SetPlayerSkin(playerid, PI[playerid][pi_SKIN]);
	TogglePlayerControllableEx(playerid, true);
	
	HideClothingShopTextdraws(playerid);
	PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] = 0;
	PLAYER_TEMP[playerid][pt_CLOTHING_SHOP] = -1;
	CancelSelectTextDrawEx(playerid);
	return 1;
}

ExitPlayerWardrobe(playerid)
{
	SetPlayerPosEx(playerid, PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z], PI[playerid][pi_ANGLE], ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_INT_INTERIOR], ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_INT_WORLD], false, true);
	return 1;
}

UpdateClothingShop(playerid)
{
	if (PLAYER_TEMP[playerid][pt_CLOTHING_SHOP] == -1) return 0;
	
	new cost, textdraw_str[128];
	PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][1], Clothing_Shop_Positions[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP]][clothing_shop_NAME]);
	
	switch(ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_INTERIOR_TYPE])
	{
		case INTERIOR_BINCO:
		{
			switch(PI[playerid][pi_GENDER])
			{
				case SEX_MALE:
				{
					SetPlayerSkin(playerid, Binco_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Binco_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][1];
					
					if (PI[playerid][pi_CASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$~n~Ropa:_%d/%d", number_format_thousand(cost), PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Binco_Shop_Male_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
				case SEX_FEMALE:
				{
					SetPlayerSkin(playerid, Binco_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Binco_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][1];
					
					if (PI[playerid][pi_CASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$~n~Ropa:_%d/%d", number_format_thousand(cost), PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Binco_Shop_Female_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
			}
		}
		case INTERIOR_SUBURBAN:
		{
			switch(PI[playerid][pi_GENDER])
			{
				case SEX_MALE:
				{
					SetPlayerSkin(playerid, Suburban_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Suburban_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][1];
					
					if (PI[playerid][pi_CASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$~n~Ropa:_%d/%d", number_format_thousand(cost), PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Suburban_Shop_Male_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
				case SEX_FEMALE:
				{
					SetPlayerSkin(playerid, Suburban_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Suburban_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][1];
					
					if (PI[playerid][pi_CASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$~n~Ropa:_%d/%d", number_format_thousand(cost), PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Suburban_Shop_Female_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
			}
		}
		case INTERIOR_PROLAPS:
		{
			switch(PI[playerid][pi_GENDER])
			{
				case SEX_MALE:
				{
					SetPlayerSkin(playerid, Prolaps_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Prolaps_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][1];
					
					if (PI[playerid][pi_CASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$~n~Ropa:_%d/%d", number_format_thousand(cost), PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Prolaps_Shop_Male_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
				case SEX_FEMALE:
				{
					SetPlayerSkin(playerid, Prolaps_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Prolaps_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][1];
					
					if (PI[playerid][pi_CASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$~n~Ropa:_%d/%d", number_format_thousand(cost), PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Prolaps_Shop_Female_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
			}
		}
		case INTERIOR_DIDIER_SACHS:
		{
			switch(PI[playerid][pi_GENDER])
			{
				case SEX_MALE:
				{
					SetPlayerSkin(playerid, Didier_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Didier_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][1];
					
					if (PI[playerid][pi_CASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$~n~Ropa:_%d/%d", number_format_thousand(cost), PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Didier_Shop_Male_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
				case SEX_FEMALE:
				{
					SetPlayerSkin(playerid, Didier_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Didier_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][1];
					
					if (PI[playerid][pi_CASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$~n~Ropa:_%d/%d", number_format_thousand(cost), PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Didier_Shop_Female_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
			}
		}
		case INTERIOR_VICTIM:
		{
			switch(PI[playerid][pi_GENDER])
			{
				case SEX_MALE:
				{
					SetPlayerSkin(playerid, Victim_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Victim_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][1];
					
					if (PI[playerid][pi_CASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$~n~Ropa:_%d/%d", number_format_thousand(cost), PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Victim_Shop_Male_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
				case SEX_FEMALE:
				{
					SetPlayerSkin(playerid, Victim_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Victim_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][1];
					
					if (PI[playerid][pi_CASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$~n~Ropa:_%d/%d", number_format_thousand(cost), PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Victim_Shop_Female_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
			}
		}
		case INTERIOR_ZIP:
		{
			switch(PI[playerid][pi_GENDER])
			{
				case SEX_MALE:
				{
					SetPlayerSkin(playerid, Zip_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Zip_Shop_Male_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][1];
					
					if (PI[playerid][pi_CASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$~n~Ropa:_%d/%d", number_format_thousand(cost), PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Zip_Shop_Male_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
				case SEX_FEMALE:
				{
					SetPlayerSkin(playerid, Zip_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][0]);
					cost = Zip_Shop_Female_Skins[PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN]][1];
					
					if (PI[playerid][pi_CASH] < cost) PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], -1459617611);
					else PlayerTextDrawBoxColor(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2], 9306312);
					
					format(textdraw_str, sizeof textdraw_str, "Precio:_%s$~n~Ropa:_%d/%d", number_format_thousand(cost), PLAYER_TEMP[playerid][pt_CLOTHING_SHOP_SELECTED_SKIN] + 1, sizeof(Zip_Shop_Female_Skins));
					PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][5], textdraw_str);
				}
			}
		}
	}
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_CLOTHING_SHOP][2]);
	return 1;
}

stock number_format_thousand(e_number) /* By adri1 - SFR3 4.3 */
{
	new f_string[24], bool:negative;
	format(f_string, sizeof f_string, "%d", e_number);
	if (e_number < 0)
	{
		negative = true;
		strdel(f_string, 0, 1);
	}
	
	new numbers = strlen(f_string);
	while(numbers > 3)
	{
		numbers -= 3;
		strins(f_string, ".", numbers);
	}
	
	if (negative) strins(f_string, "-", 0);
	return f_string;
}

stock number_format_dash(e_number) /* By adri1 - SFR3 4.3 */
{
	new f_string[24], bool:negative;
	format(f_string, sizeof f_string, "%d", e_number);
	if (e_number < 0)
	{
		negative = true;
		strdel(f_string, 0, 1);
	}
	
	new numbers = strlen(f_string);
	while(numbers > 3)
	{
		numbers -= 3;
		strins(f_string, "-", numbers);
	}
	
	if (negative) strins(f_string, "- ", 0);
	return f_string;
}

SelectTextDrawEx(playerid, color)
{
	PLAYER_TEMP[playerid][pt_SELECT_TEXTDRAW] = true;
	return SelectTextDraw(playerid, color);
}

CancelSelectTextDrawEx(playerid)
{
	PLAYER_TEMP[playerid][pt_SELECT_TEXTDRAW] = false;
	return CancelSelectTextDraw(playerid);
}

UpdatePlayerHud(playerid)
{
	if (!PLAYER_TEMP[playerid][pt_HUD_TEXTDRAWS]) return 0;
	
	SetPlayerProgressBarValue(playerid, j_Pb[playerid][pbHungry], PI[playerid][pi_HUNGRY]);
	SetPlayerProgressBarValue(playerid, j_Pb[playerid][pbThirst], PI[playerid][pi_THIRST]);
	
	if (PI[playerid][pi_CONFIG_HUD])
	{
		ShowPlayerProgressBar(playerid, j_Pb[playerid][pbHungry]);
		ShowPlayerProgressBar(playerid, j_Pb[playerid][pbThirst]);
	}
	return 1;
}

#define INTERVAL_HUNGRY_THIRST_DOWN	2 // 2 segundos de timer
#define THIRST_HOURS_STOPPED	9 // 9 horas parado si agua esta a 100 va a 0
#define HUNGRY_HOURS_STOPPED	12 // 12 horas parado si alimentacion esta a 100 va a 0

forward HungryThirstDown(playerid);
public HungryThirstDown(playerid)
{
	if (PLAYER_TEMP[playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return HidePlayerHud(playerid);
	if (!PLAYER_TEMP[playerid][pt_HUD_TEXTDRAWS]) return HidePlayerHud(playerid);
	
	new current_gettime = gettime();
	
	if (PI[playerid][pi_VIP])
	{
		if (current_gettime - PLAYER_TEMP[playerid][pt_LAST_SU_CHECK] > 300)
		{
			CheckPlayerSuperUser(playerid);
		}
	}

	if (PI[playerid][pi_WANTED_LEVEL] > 0 && PI[playerid][pi_STATE] == ROLEPLAY_STATE_NORMAL && !PLAYER_TEMP[playerid][pt_CUFFED])
	{
		if (gettime() - PLAYER_TEMP[playerid][pt_LAST_SET_WANTED_LEVEL] > 300)
		{
			if (PI[playerid][pi_WANTED_LEVEL] == 1) {
				SendPlayerClientMessage(playerid, "{"#POLICE_COLOUR"}{f5f5f5}Has perdido de vista a la {"#POLICE_COLOUR"}policia{f5f5f5}.");
				SetPlayerWantedLevelEx(playerid, 0);
			}
			else SetPlayerWantedLevelEx(playerid, PI[playerid][pi_WANTED_LEVEL] - 1);
		}
	}

	PI[playerid][pi_THIRST] -= floatdiv(float(INTERVAL_HUNGRY_THIRST_DOWN), floatmul(THIRST_HOURS_STOPPED, 36));
	PI[playerid][pi_HUNGRY] -= floatdiv(float(INTERVAL_HUNGRY_THIRST_DOWN), floatmul(HUNGRY_HOURS_STOPPED, 36));
	
	if (PI[playerid][pi_THIRST] <= 0.5) PI[playerid][pi_THIRST] = 0.5;
	if (PI[playerid][pi_HUNGRY] <= 0.5) PI[playerid][pi_HUNGRY] = 0.5;
	if (PI[playerid][pi_THIRST] < 20.0) {
		PI[playerid][pi_HEALTH] -= 0.1;
		
		if (PI[playerid][pi_THIRST] <= 1.0 || PI[playerid][pi_HEALTH] <= 0.5) {
			ShowPlayerMessage(playerid, "Te has desmayado por ~b~deshidratación~w~.");
			SetPlayerHealthEx(playerid, 0.0);
			PI[playerid][pi_THIRST] = 75.0;
			PLAYER_TEMP[playerid][pt_THIRST_MESSAGE] = false;
			return 1;
		}
		
		SetPlayerHealthEx(playerid, PI[playerid][pi_HEALTH]);
		
		if (!PLAYER_TEMP[playerid][pt_THIRST_MESSAGE]) {
			ShowPlayerMessage(playerid, "Tienes sed, si no ~r~bebes agua~w~ pronto acabaras muriendo.");
			PLAYER_TEMP[playerid][pt_THIRST_MESSAGE] = true;
		}
	}
	
	if (PI[playerid][pi_HUNGRY] < 20.0) {
		PI[playerid][pi_HEALTH] -= 0.1;
		
		if (PI[playerid][pi_HUNGRY] <= 1.0 || PI[playerid][pi_HEALTH] <= 0.5) {
			ShowPlayerMessage(playerid, "Te has desmayado por ~y~hambre~w~.");
			SetPlayerHealthEx(playerid, 0.0);
			PI[playerid][pi_HUNGRY] = 55.0;
			PLAYER_TEMP[playerid][pt_HUNGRY_MESSAGE] = false;
			return 1;
		}
		
		SetPlayerHealthEx(playerid, PI[playerid][pi_HEALTH]);
		
		if (!PLAYER_TEMP[playerid][pt_HUNGRY_MESSAGE]) {
			ShowPlayerMessage(playerid, "Tienes hambre, si ~r~no comes~w~ nada pronto acabaras muriendo.");
			PLAYER_TEMP[playerid][pt_HUNGRY_MESSAGE] = true;
		}
	}
	
	UpdatePlayerHud(playerid);
	return 1;
}

SetPlayerHud(playerid)
{
	PLAYER_TEMP[playerid][pt_HUD_TEXTDRAWS] = true;
	UpdatePlayerHud(playerid);
	UpdateReputationTextDraws(playerid);
	
	if (PI[playerid][pi_CONFIG_TIME]) TextDrawShowForPlayer(playerid, Textdraws[textdraw_SERVER_TIME]);
	
	if (PI[playerid][pi_CONFIG_HUD]) {
		for (new i = 0; i < HUD_TEXTDRAWS_SIZE; i ++) {
			TextDrawShowForPlayer(playerid, Textdraws[textdraw_HUD][i]);	
		}
		
		for (new i = 0; i < HUD_PTEXTDRAWS_SIZE; i ++) {
			PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][i]);
		}
	}

	ShowPlayerProgressBar(playerid, j_Pb[playerid][pbRep]);
	ShowPlayerProgressBar(playerid, j_Pb[playerid][pbHungry]);
	ShowPlayerProgressBar(playerid, j_Pb[playerid][pbThirst]);
	
	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][5]);
	PLAYER_TEMP[playerid][pt_TIMERS][5] = SetTimerEx("HungryThirstDown", INTERVAL_HUNGRY_THIRST_DOWN * 1000, true, "i", playerid);
	return 1;
}

HidePlayerHud(playerid)
{
	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][5]);
	PLAYER_TEMP[playerid][pt_HUD_TEXTDRAWS] = false;
	
	TextDrawHideForPlayer(playerid, Textdraws[textdraw_SERVER_TIME]);
	
	for (new i = 0; i < HUD_TEXTDRAWS_SIZE; i ++) {
		TextDrawHideForPlayer(playerid, Textdraws[textdraw_HUD][i]);	
	}
	
	for (new i = 0; i < HUD_PTEXTDRAWS_SIZE; i ++) {
		PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_HUD][i]);
	}

	HidePlayerProgressBar(playerid, j_Pb[playerid][pbRep]);
	HidePlayerProgressBar(playerid, j_Pb[playerid][pbHungry]);
	HidePlayerProgressBar(playerid, j_Pb[playerid][pbThirst]);
	return 1;
}

is_open(hour, open, close)
{
	if (open < 0 || close < 0) return false;
	if (open > close)
	{
		if ( ( (hour >= open) && (hour < 24) ) || ( (hour >= 0) && (hour < close) ) )
		{													
			return true;			
		}
		else
		{
			return false;
		}
	}
	else if (open < close)
	{
		if ((hour >= open) && (hour < close))
		{
			return true;
		}
		else
		{
			return false;
		}
	}
	return false;
}

Add_Hungry_Thirst(playerid, Float:hungry, Float:thirst)
{
	PI[playerid][pi_HUNGRY] += hungry;
	if (PI[playerid][pi_HUNGRY] > 30.0) PLAYER_TEMP[playerid][pt_HUNGRY_MESSAGE] = false;
	if (PI[playerid][pi_HUNGRY] > 100.0) PI[playerid][pi_HUNGRY] = 100.0;
	
	PI[playerid][pi_THIRST] += thirst;
	if (PI[playerid][pi_THIRST] > 30.0) PLAYER_TEMP[playerid][pt_THIRST_MESSAGE] = false;
	if (PI[playerid][pi_THIRST] > 100.0) PI[playerid][pi_THIRST] = 100.0;
	
	UpdatePlayerHud(playerid);
	return 1;
}

SetActorSkin(actorid, skin, &actor)
{
	actor = INVALID_ACTOR_ID;
	
    new Float:x, Float:y, Float:z, Float:a, vw;
    GetActorPos(actorid, x, y, z); 
    GetActorFacingAngle(actorid, a);
	vw = GetActorVirtualWorld(actorid);
    DestroyActor(actorid); 
    actor = CreateActor(skin, x, y, z, a);
	SetActorVirtualWorld(actor, vw);
	return 1;
}

stock SetActorFacingAngleEx(actorid, skin, Float:angle, &actor)
{
	actor = INVALID_ACTOR_ID;
	
    new Float:x, Float:y, Float:z, vw;
    GetActorPos(actorid, x, y, z); 
	vw = GetActorVirtualWorld(actorid);
    DestroyActor(actorid); 
    actor = CreateActor(skin, x, y, z, angle);
	SetActorVirtualWorld(actor, vw);
	return 1;
}

GetPlayerIdByBankAccountId(account_id)
{
	for (new i = 0; i != sizeof(PI); i ++)
	{
		if (PI[i][pi_BANK_ACCOUNT] == 0) continue;
		if (PI[i][pi_BANK_ACCOUNT] == account_id) return i;
	}
	return -1;
}

public OnPlayerStateChange(playerid, newstate, oldstate)
{
	if (PLAYER_TEMP[playerid][pt_KICKED]) return 1;
	
	if (PLAYER_TEMP[playerid][pt_GAME_STATE] == GAME_STATE_NORMAL)
	{
		if (newstate != PLAYER_STATE_SPAWNED && oldstate != PLAYER_STATE_SPAWNED)
		{
			if (ac_Info[CHEAT_STATE_SPAMMER][ac_Enabled])
			{
				if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY])
				{
					new interval = GetTickDiff(GetTickCount(), PLAYER_TEMP[playerid][pt_ANTIFLOOD_STATE]);
					
					if (interval < 50)
					{
						if (!ac_Info[CHEAT_STATE_SPAMMER][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_STATE_SPAMMER, float(interval));
						else
						{
							if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_STATE_SPAMMER][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_LAST_DETECTION] = gettime();
							if (PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_STATE_SPAMMER][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_STATE_SPAMMER, float(interval));
						}
					}
					PLAYER_TEMP[playerid][pt_ANTIFLOOD_STATE] = GetTickCount();
				}
			}
		}
	}
	
    if (newstate == PLAYER_STATE_DRIVER)
    {
		new vehicleid = GetPlayerVehicleID(playerid);
		if (ac_Info[CHEAT_CAR_JACKING][ac_Enabled])
		{
			if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_OCCUPIED] && GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] != INVALID_PLAYER_ID)
			{
				if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_CAR_JACKING][p_ac_info_IMMUNITY])
				{
					if (!ac_Info[CHEAT_CAR_JACKING][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_CAR_JACKING);
					else
					{
						if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_CAR_JACKING][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_CAR_JACKING][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_CAR_JACKING][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_CAR_JACKING][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_CAR_JACKING][p_ac_info_LAST_DETECTION] = gettime();
						if (PLAYER_AC_INFO[playerid][CHEAT_CAR_JACKING][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_CAR_JACKING][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_CAR_JACKING);
					}
					
					PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] = INVALID_VEHICLE_ID;
					return 1;
				}
			}
		}

		SetPlayerArmedWeapon(playerid, 0);
		PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
		PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
		PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] = vehicleid;
		
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] = playerid;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] = playerid;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_OCCUPIED] = true;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_RESPAWN_TIME] = gettime() + 600;

		UpdateVehicleParams(vehicleid);

		new Float:sx, Float:sy, Float:sz;
		GetPlayerPos(playerid, sx, sy, sz);

		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS] && VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_DRIVER_DOOR]) //cerrado
		{
			if (gettime() - GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_CLOSED_TIME] > 5) // Si el tiempo que paso desde que cerro es mayor a 5
			{
				if (ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Enabled])
				{
					if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_IMMUNITY])
					{
						if (!ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Interval]) {
							RemovePlayerFromVehicle(playerid);
							SetPlayerPos(playerid, sx, sy, sz);
							ShowPlayerMessage(playerid, "Este vehiculo esta cerrado.");

							OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_DOORS);
						}
						else
						{
							if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_LAST_DETECTION] = gettime();
							if (PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Detections]) {
								RemovePlayerFromVehicle(playerid);
								SetPlayerPos(playerid, sx, sy, sz);
								ShowPlayerMessage(playerid, "Este vehiculo esta cerrado.");

								OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_DOORS);
							}
						}
					}
				}
			}
		}
		
		switch(GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE])
		{
			case VEHICLE_TYPE_NONE:
			{
				if (!VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_ENGINE])
				{
					GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 1;
					UpdateVehicleParams(vehicleid);
				}
			}
			case VEHICLE_TYPE_DRIVING_SCHOOL:
			{
				if (PLAYER_TEMP[playerid][pt_DL_EXAM])
				{
					ShowPlayerMessage(playerid, "Sigue los ~r~puntos de control~w~ para completar el examen.");
					SetPlayerDrivingSchoolCP(playerid);
				}
			}
			case VEHICLE_TYPE_WORK:
			{
				if (!PLAYER_WORKS[playerid][ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][pwork_SET])
				{
					if (ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Enabled])
					{
						if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_IMMUNITY])
						{
							if (!ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
							else
							{
								if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] = 0;
								else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] ++;
								
								PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] = gettime();
								if (PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
							}
						}
					}
					return 1;
				}
				
				if (PLAYER_TEMP[playerid][pt_WORKING_IN] && PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_VEHICLES[vehicleid][work_vehicle_WORK])
				{
					if (ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Enabled])
					{
						if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_IMMUNITY])
						{
							if (!ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
							else
							{
								if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] = 0;
								else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] ++;
								
								PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] = gettime();
								if (PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
							}
						}
					}
					return 1;
				}
				
				if (WORK_VEHICLES[vehicleid][work_vehicle_NEED_DUTY])
				{
					if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_VEHICLES[vehicleid][work_vehicle_WORK])
					{
						if (ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Enabled])
						{
							if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_IMMUNITY])
							{
								if (!ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
								else
								{
									if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] = 0;
									else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] ++;
									
									PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] = gettime();
									if (PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
								}
							}
						}
						return 1;
					}
				}
				
				if (WORK_VEHICLES[vehicleid][work_vehicle_EXP] > PLAYER_WORKS[playerid][ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][pwork_LEVEL])
				{
					if (ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Enabled])
					{
						if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_IMMUNITY])
						{
							if (!ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
							else
							{
								if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] = 0;
								else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] ++;
								
								PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_LAST_DETECTION] = gettime();
								if (PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_WORK][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_VEHICLE_WORK][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_WORK);
							}
						}
					}
					return 1;
				}
				
				switch(WORK_VEHICLES[vehicleid][work_vehicle_WORK])
				{
					case WORK_TAXI, WORK_HARVESTER: CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_VEHICLES[vehicleid][work_vehicle_WORK], vehicleid);
					case WORK_TRUCK:
					{
						if (TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADED])
						{
							if (TRUCK_VEHICLE[vehicleid][truck_vehicle_DRIVER_USER_ID] != PI[playerid][pi_ID])
							{
								SendPlayerClientMessage(playerid, "No eres el conductor de este vehículo.");
								RemovePlayerFromVehicle(playerid);
								return 1;
							}
							else CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_VEHICLES[vehicleid][work_vehicle_WORK], vehicleid);
						}
						else CallLocalFunction("StartPlayerJob", "iii", playerid, WORK_VEHICLES[vehicleid][work_vehicle_WORK], vehicleid);
					}
					case WORK_TRASH:
					{
						if (TRASH_VEHICLES[vehicleid][trash_vehicle_JOB_STARTED])
						{
							if (TRASH_VEHICLES[vehicleid][trash_vehicle_DRIVER_ID] != playerid)
							{
								SendPlayerClientMessage(playerid, "No eres el conductor de este camión.");
								RemovePlayerFromVehicle(playerid);
								return 1;
							}
							
							SetPlayerTrashCheckpoint(playerid, vehicleid);
						}
						else
						{
							if (PLAYER_TEMP[playerid][pt_TRASH_DRIVER] || PLAYER_TEMP[playerid][pt_TRASH_PASSENGER])
							{
								SendPlayerClientMessage(playerid, "Ya estás trabajando con otro compañero.");
								RemovePlayerFromVehicle(playerid);
								return 1;
							}
							
							PLAYER_TEMP[playerid][pt_TRASH_DRIVER] = true;
							PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] = vehicleid;
							TRASH_VEHICLES[vehicleid][trash_vehicle_DRIVER_ID] = playerid;
							
							if (TRASH_VEHICLES[vehicleid][trash_vehicle_PASSENGER_ID] == INVALID_PLAYER_ID) SendPlayerClientMessage(playerid, "Necesitas un compañero para empezar con el trabajo.");
							else
							{
								new route = random(MAX_ROUTES);
								while(!TRASH_OBJECTS[route][trash_route_VALID])
								{
									route = random(MAX_ROUTES);
								}
								
								TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_JOB_STARTED] = true;
								TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] = route;
								TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_CP] = 0;
								
								SetPlayerTrashCheckpoint(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID]);
								SetPlayerTrashCheckpoint(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID]);
								
								CreatePlayerTrashRouteObjects(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], route);
								CreatePlayerTrashRouteObjects(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], route);
								
								SendPlayerClientMessage(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], "Ruta ~y~#%d ~w~establecida, pueden comenzar.", TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] + 1);
								SendPlayerClientMessage(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], "Ruta ~y~#%d ~w~establecida, pueden comenzar.", TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] + 1);

							}
						}
					}
					case WORK_PIZZA:
					{
						if (PIZZA_VEHICLE[vehicleid][pizza_vehicle_STARTED])
						{
							if (PIZZA_VEHICLE[vehicleid][pizza_vehicle_DRIVER_AID] != PI[playerid][pi_ID])
							{
								if (GetVehicleDistanceFromPoint(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_X], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Y], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Z]) < 20.0)
								{
									SetVehicleToRespawnEx(vehicleid);
								}
								
								SendPlayerClientMessage(playerid, "No eres el conductor de esta moto.");
								RemovePlayerFromVehicle(playerid);
								return 1;
							}
							
							if (!PLAYER_TEMP[playerid][pt_PIZZA_PROCCESS])
							{
								SendPlayerClientMessage(playerid, "Ya has repartido todas las pizzas, vuelve a la pizzería para cobrar.");
								SetPlayer_Pizza_Checkpoint(playerid, -1);
							}
							else
							{
								SendPlayerClientMessage(playerid, "Te quedan %d pizzas por repartir.", PLAYER_TEMP[playerid][pt_PIZZA_PROCCESS]);
								if (PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT_DELI])
								{
									PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT] = randomEx(sizeof(PIZZA_DELIVERY_POINT), PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT]);
									PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT_DELI] = false;
								}
								SetPlayer_Pizza_Checkpoint(playerid, PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT]);
							}
						}
						else
						{
							PIZZA_VEHICLE[vehicleid][pizza_vehicle_STARTED] = true;
							PIZZA_VEHICLE[vehicleid][pizza_vehicle_DRIVER_AID] = PI[playerid][pi_ID];
							PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZAS] = minrand(3, 6);
							PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT] = random( sizeof(PIZZA_DELIVERY_POINT) );
							PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT_DELI] = false;
							PLAYER_TEMP[playerid][pt_PIZZA_PROCCESS] = PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZAS];
							PLAYER_TEMP[playerid][pt_DELIVERED_PIZZAS] = 0;
							
							SendPlayerClientMessage(playerid, "Esta moto tiene %d pizzas, repartelas todas y vuelve a la pizzería para cobrar.", PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZAS]);
							SetPlayer_Pizza_Checkpoint(playerid, PIZZA_VEHICLE[vehicleid][pizza_vehicle_PIZZA_POINT]);
						}
					}
				}
			}
		}
		
		if (PLAYER_TEMP[playerid][pt_WANT_TAXI])
		{
			if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] == VEHICLE_STATE_NORMAL)
			{
				PLAYER_TEMP[playerid][pt_WANT_TAXI] = false;
				SetNormalPlayerMarkers(playerid);
				SendPlayerClientMessage(playerid, "Tu taxi se ha cancelado porque te has subido a un vehículo.");
			}
		}
    }
	else if (newstate == PLAYER_STATE_PASSENGER)
	{
		SetPlayerArmedWeapon(playerid, 0);
		PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
		
		new vehicleid = GetPlayerVehicleID(playerid);
		PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] = vehicleid;
		
		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS] && VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_PASSENGER_DOOR]) //cerrado
		{
			if (gettime() - GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_CLOSED_TIME] > 5) // Si el tiempo que paso desde que cerro es mayor a 5
			{
				if (ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Enabled])
				{
					if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_IMMUNITY])
					{
						if (!ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_DOORS);
						else
						{
							if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_LAST_DETECTION] = gettime();
							if (PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_PLAYER_VEHICLE_DOORS][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_PLAYER_VEHICLE_DOORS);
						}
					}
				}
			}
		}
		
		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] == VEHICLE_TYPE_WORK)
		{
			switch(WORK_VEHICLES[vehicleid][work_vehicle_WORK])
			{
				case WORK_TAXI:
				{
					if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] == INVALID_PLAYER_ID) return 1;
					if (TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_ENABLED])
					{
						if (PLAYER_TEMP[playerid][pt_WANT_TAXI])
						{
							PLAYER_TEMP[playerid][pt_WANT_TAXI] = false;
							SetNormalPlayerMarkers(playerid);
						}
						return 1;
					}
					
					ShowPlayerTaxiMeter(playerid);
					if (PLAYER_TEMP[playerid][pt_WANT_TAXI])
					{
						PLAYER_TEMP[playerid][pt_WANT_TAXI] = false;
						SetNormalPlayerMarkers(playerid);
					}
					
					TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_ENABLED] = true;
					GetVehiclePos(vehicleid, TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_OLD_X], TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_OLD_Y], TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_OLD_Z]);
					KillTimer(TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_TIMER]);
					TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_TIMER] = SetTimerEx("UpdateVehicleTaximeter", 4000, true, "iii", vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER], playerid);
				}
				case WORK_TRASH:
				{
					if (!PLAYER_WORKS[playerid][WORK_TRASH][pwork_SET])
					{
						SendPlayerClientMessage(playerid, "Necesitas ser %s para poder conducir este vehículo.", work_info[ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][work_info_NAME]);
						RemovePlayerFromVehicle(playerid);
						return 1;
					}
					
					if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_TRASH)
					{
						SendPlayerClientMessage(playerid, "No estás de servicio como basurero, ve a vestirte en el puesto de la entrada del vertedero.");
						RemovePlayerFromVehicle(playerid);
						return 1;
					}
					
					if (TRASH_VEHICLES[vehicleid][trash_vehicle_JOB_STARTED])
					{
						if (TRASH_VEHICLES[vehicleid][trash_vehicle_PASSENGER_ID] != playerid)
						{
							SendPlayerClientMessage(playerid, "No eres el acompañante de este camión.");
							RemovePlayerFromVehicle(playerid);
							return 1;
						}
						
						SetPlayerTrashCheckpoint(playerid, vehicleid);
					}
					else
					{
						if (PLAYER_TEMP[playerid][pt_TRASH_DRIVER] || PLAYER_TEMP[playerid][pt_TRASH_PASSENGER])
						{
							SendPlayerClientMessage(playerid, "Ya estás trabajando con otro compañero.");
							RemovePlayerFromVehicle(playerid);
							return 1;
						}
						
						PLAYER_TEMP[playerid][pt_TRASH_PASSENGER] = true;
						PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] = vehicleid;
						TRASH_VEHICLES[vehicleid][trash_vehicle_PASSENGER_ID] = playerid;
						
						if (TRASH_VEHICLES[vehicleid][trash_vehicle_DRIVER_ID] == INVALID_PLAYER_ID) SendPlayerClientMessage(playerid, "Necesitas un compañero para empezar con el trabajo.");
						else
						{
							new route = random(MAX_ROUTES);
							while(!TRASH_OBJECTS[route][trash_route_VALID])
							{
								route = random(MAX_ROUTES);
							}
							
							TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_JOB_STARTED] = true;
							TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] = route;
							TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_CP] = 0;
							
							SetPlayerTrashCheckpoint(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID]);
							SetPlayerTrashCheckpoint(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID]);
							
							CreatePlayerTrashRouteObjects(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], route);
							CreatePlayerTrashRouteObjects(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], route);
							
							SendPlayerClientMessage(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], "Ruta ~y~#%d ~w~establecida, pueden comenzar.", TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] + 1);
							SendPlayerClientMessage(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], "Ruta ~y~#%d ~w~establecida, pueden comenzar.", TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] + 1);

						}
					}
				}
			}
		}
		
		if (PLAYER_TEMP[playerid][pt_WANT_TAXI])
		{
			if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] == VEHICLE_STATE_NORMAL)
			{
				PLAYER_TEMP[playerid][pt_WANT_TAXI] = false;
				SetNormalPlayerMarkers(playerid);
				SendPlayerClientMessage(playerid, "Tu taxi se ha cancelado porque te has subido a un vehículo.");
			}
		}
	}
	else if (newstate == PLAYER_STATE_SPECTATING)
	{
		if (!PLAYER_TEMP[playerid][pt_PLAYER_SPECTATE])
		{
			if (ac_Info[CHEAT_SPECTATE][ac_Enabled])
			{
				if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_SPECTATE][p_ac_info_IMMUNITY])
				{
					if (!ac_Info[CHEAT_SPECTATE][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_SPECTATE);
					else
					{
						if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_SPECTATE][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_SPECTATE][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_SPECTATE][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_SPECTATE][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_SPECTATE][p_ac_info_LAST_DETECTION] = gettime();
						if (PLAYER_AC_INFO[playerid][CHEAT_SPECTATE][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_SPECTATE][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_SPECTATE);
					}
				}
			}
		}
	}
	
	if (oldstate == PLAYER_STATE_DRIVER)
	{
		UpdateInvObjInBody(playerid);

		PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
		if (PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] != INVALID_VEHICLE_ID)
		{
			KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][7]);
			
			if (IsValidDynamicRaceCP(PLAYER_TEMP[playerid][pt_DL_EXAM_CP]))
			{
				DestroyDynamicRaceCP(PLAYER_TEMP[playerid][pt_DL_EXAM_CP]);
				PLAYER_TEMP[playerid][pt_DL_EXAM_CP] = INVALID_STREAMER_ID;
			}
			
			if (GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_ATTACHED_TO] != INVALID_VEHICLE_ID)
			{
				if (GLOBAL_VEHICLES[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_ATTACHED_TO] ][gb_vehicle_DRIVER] != INVALID_PLAYER_ID)
				{
					PLAYER_AC_INFO[ GLOBAL_VEHICLES[ GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_ATTACHED_TO] ][gb_vehicle_DRIVER] 	][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_IMMUNITY] = gettime() + 5;
				}
				GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_ATTACHED_TO] = INVALID_VEHICLE_ID;
				DetachTrailerFromVehicle(PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID]);
			}
			
			GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_TP_IMMUNITY] = gettime() + 5;
			GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_DRIVER] = INVALID_PLAYER_ID;
			GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_LAST_DRIVER] = playerid;
			GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_OCCUPIED] = false;
			GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_RESPAWN_TIME] = gettime() + 600;
			
			StopAudioStreamForPlayer(playerid);
			ExitPlayerVehicleRepair(playerid);

			if (GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_TYPE] == VEHICLE_TYPE_DRIVING_SCHOOL) 
			{
				if (IsValidDynamicRaceCP(PLAYER_TEMP[playerid][pt_DL_EXAM_CP])) {
					DestroyDynamicRaceCP(PLAYER_TEMP[playerid][pt_DL_EXAM_CP]);
					PLAYER_TEMP[playerid][pt_DL_EXAM_CP] = INVALID_STREAMER_ID;
				}

				PLAYER_TEMP[playerid][pt_DL_EXAM] = false;
				PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] = 0;
				DestroyVehicleEx(PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID]);
				PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] = INVALID_VEHICLE_ID;
			}
			
			if (GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_TYPE] == VEHICLE_TYPE_WORK)
			{
				switch(WORK_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][work_vehicle_WORK])
				{
					case WORK_TAXI, WORK_HARVESTER, WORK_TRUCK: CallLocalFunction("EndPlayerJob", "iib", playerid, PLAYER_TEMP[playerid][pt_WORKING_IN], true);
					case WORK_PIZZA:
					{
						if (PIZZA_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][pizza_vehicle_STARTED])
						{
							if (PLAYER_TEMP[playerid][pt_PIZZA_PROCCESS])
							{
								new Float:distance =	GetPlayerDistanceFromPoint
								(
									playerid,
									PIZZA_DELIVERY_POINT[ PIZZA_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][pizza_vehicle_PIZZA_POINT] ][0],
									PIZZA_DELIVERY_POINT[ PIZZA_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][pizza_vehicle_PIZZA_POINT] ][1],
									PIZZA_DELIVERY_POINT[ PIZZA_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][pizza_vehicle_PIZZA_POINT] ][2]
								);
										
								if (distance > 20.0)
								{
									SendPlayerClientMessage(playerid, "Vuelve a subir a la moto, aún estás muy lejos del cliente.");
									if (IsValidDynamicActor(PLAYER_TEMP[playerid][pt_PIZZA_ACTOR]))
									{
										DestroyDynamicActor(PLAYER_TEMP[playerid][pt_PIZZA_ACTOR]);
										PLAYER_TEMP[playerid][pt_PIZZA_ACTOR] = INVALID_STREAMER_ID;
									}
									if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT]))
									{
										DestroyDynamicCP(PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT]);
										PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
									}

									UpdateInvObjInBody(playerid);
								}
								else
								{
									if (IsPlayerInDynamicCP(playerid, PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT]))
									{
										PLAYER_TEMP[playerid][pt_PIZZA_PROCCESS] --;
										PLAYER_TEMP[playerid][pt_DELIVERED_PIZZAS] ++;
										SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
										ApplyDynamicActorAnimation(PLAYER_TEMP[playerid][pt_PIZZA_ACTOR], "FOOD", "EAT_Pizza", 4.1, false, true, true, false, 0);
										ApplyDynamicActorAnimation(PLAYER_TEMP[playerid][pt_PIZZA_ACTOR], "FOOD", "EAT_Pizza", 4.1, false, true, true, false, 0);
										DestroyDynamicCP(PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT]);
										PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
										PIZZA_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][pizza_vehicle_PIZZA_POINT_DELI] = true;
										SendPlayerClientMessage(playerid, "Genial, vuelve a subir a la moto para continuar.");
										UpdateInvObjInBody(playerid);
									}
									else
									{
										SetPlayerSpecialAction(playerid, SPECIAL_ACTION_CARRY);
										UpdateInvObjInBody(playerid);
									}
								}
							}
							else
							{
								if (IsValidDynamicActor(PLAYER_TEMP[playerid][pt_PIZZA_ACTOR]))
								{
									DestroyDynamicActor(PLAYER_TEMP[playerid][pt_PIZZA_ACTOR]);
									PLAYER_TEMP[playerid][pt_PIZZA_ACTOR] = INVALID_STREAMER_ID;
								}
								if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT]))
								{
									DestroyDynamicCP(PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT]);
									PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
								}

								SendPlayerClientMessage(playerid, "Vuelve a subir a la moto y ve a la pizzería para cobrar.");
								UpdateInvObjInBody(playerid);
							}
						}
					}
				}
			}
			if (PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] == PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID])
			{
				if (PLAYER_TEMP[playerid][pt_TRASH_DRIVER])
				{
					if (TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_JOB_STARTED])
					{
						if (TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID] == playerid) SendPlayerClientMessage(playerid, "Si quieres dejar de trabajar ve al vertedero y ponte tu ropa.");
					}
					else
					{
						TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID] = INVALID_PLAYER_ID;
						PLAYER_TEMP[playerid][pt_TRASH_DRIVER] = false;
						PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] = INVALID_VEHICLE_ID;
					}
				}
			}
		}
	}
	else if (oldstate == PLAYER_STATE_PASSENGER)
	{
		UpdateInvObjInBody(playerid);
	
		if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) {
			if (gettime() > PLAYER_TEMP[playerid][pt_ARRESTED_JAIL_TIME]) {
				JailPlayerEx(playerid, 60, "BA");

				new str[1000]; format(str, 1000, "{666666}[JAIL] {F5F5F5}%s[%d] | G-Rex [{"#PRIMARY_COLOR"}BOT{F5F5F5}] | Razon: BA | Minutos: 60 | %d Ping", PI[playerid][pi_NAME], playerid, GetPlayerPing(playerid));
				SendAdminAd(str);

				format(str, 1000, "```[JAIL] %s[%d] | G-Rex [BOT] | Razon: BA | Minutos: 20 | %d Ping```", PI[playerid][pi_NAME], playerid, GetPlayerPing(playerid));
				SendDiscordMessage(""#DISCORD_JAILS_LOG"", str, false);
			}
		}

		if (PLAYER_TEMP[playerid][pt_TAXI_METER_ENABLED])
		{
			new driver = GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_DRIVER];
			
			if (driver != INVALID_PLAYER_ID)
			{
				new work_extra_payment;
				if (work_info[WORK_TAXI][work_info_EXTRA_PAY] > 0 && work_info[WORK_TAXI][work_info_EXTRA_PAY_EXP] > 0)
				{
					work_extra_payment = (work_info[WORK_TAXI][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[ driver ][WORK_TAXI][pwork_LEVEL], work_info[WORK_TAXI][work_info_EXTRA_PAY_EXP])));
					if (work_info[WORK_TAXI][work_info_EXTRA_PAY_LIMIT] != 0) if (work_extra_payment > work_info[WORK_TAXI][work_info_EXTRA_PAY_LIMIT]) work_extra_payment = work_info[WORK_TAXI][work_info_EXTRA_PAY_LIMIT];
				
					if (PI[playerid][pi_VIP]) work_extra_payment += VIP_WORK_EXTRA_PAY;
				}
				PLAYER_WORKS[driver][WORK_TAXI][pwork_LEVEL] ++;
				
				SendPlayerClientMessage(driver, "Has ganado ~b~%s dólares~w~ con este viaje.", number_format_thousand(TAXI_METER_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_PAYMENT] + work_extra_payment));
				GivePlayerCash(driver, TAXI_METER_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_PAYMENT] + work_extra_payment, true, false);
				GivePlayerCash(playerid, -TAXI_METER_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_PAYMENT], true, true);
				
				SendPlayerClientMessage(playerid, "El taxi te costó %s$.", number_format_thousand(TAXI_METER_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_PAYMENT]));
				ResetVehicleTaxiMeter(PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID]);
				HidePlayerTaxiMeter(playerid);
				UpdatePlayerTaxiMeterTextdraws(driver);
			}

			new passenger = GetVehicleFirstPassenger( PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] );
			if (passenger != INVALID_PLAYER_ID)
			{
				ShowPlayerTaxiMeter(passenger);
				if (PLAYER_TEMP[passenger][pt_WANT_TAXI])
				{
					PLAYER_TEMP[passenger][pt_WANT_TAXI] = false;
					SetNormalPlayerMarkers(passenger);
				}
				
				TAXI_METER_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_ENABLED] = true;
				GetVehiclePos(PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID], TAXI_METER_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_OLD_X], TAXI_METER_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_OLD_Y], TAXI_METER_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_OLD_Z]);
				KillTimer(TAXI_METER_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_TIMER]);
				TAXI_METER_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][veh_taxi_meter_TIMER] = SetTimerEx("UpdateVehicleTaximeter", 4000, true, "iii", PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID], GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_DRIVER], passenger);
			}
		}
		if (PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] == PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID])
		{
			if (PLAYER_TEMP[playerid][pt_TRASH_PASSENGER])
			{
				if (TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_JOB_STARTED])
				{
					if (TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID] == playerid)
					{
						if (TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_CP] >= TRASH_OBJECTS[ TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] ][trash_route_OBJECTS]) SendPlayerClientMessage(playerid, "Sube al camión para volver al vertedero y recibir la paga.");
						else
						{
							new cp = TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_CP];
							new route = TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE];
							new Float:distance =	GetPlayerDistanceFromPoint
													(
														playerid,
														TRASH_OBJECTS[ route ][trash_object_X][ cp ],
														TRASH_OBJECTS[ route ][trash_object_Y][ cp ],
														TRASH_OBJECTS[ route ][trash_object_Z][ cp ]
													);
							
							if (distance > 10.0) SendPlayerClientMessage(playerid, "Vuelve a subir al camión, aún estás demasiado lejos del punto de recogida.");
							else
							{
								if (IsPlayerInDynamicCP(playerid, PLAYER_TEMP[playerid][pt_TRASH_CHECKPOINT]))
								{
									if (!PLAYER_WORKS[playerid][WORK_TRASH][pwork_SET]) return DestroyPlayerTrashCheckpoint(playerid);
									if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_TRASH) return DestroyPlayerTrashCheckpoint(playerid);
									if (!PLAYER_TEMP[playerid][pt_TRASH_PASSENGER]) return 1;
									
									new driver = TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID];
									SendPlayerClientMessage(driver, "{f5f5f5}Espera mientras tu compañero recoge la basura.");
									
									new Float:offset = floatdiv(PLAYER_WORKS[playerid][WORK_TRASH][pwork_LEVEL], 10);
									if (offset > 30.0) offset = 30.0;
									
									PLAYER_TEMP[playerid][pt_RECYCLE_BIN_VALUE] = 10.0 + offset;
									UpdatePlayerTrashRecycleSize(playerid);
									PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0]);
									PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1]);
									PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2]);
									
									TogglePlayerControllableEx(playerid, false);
									SetCameraBehindPlayer(playerid);
									ApplyAnimation(playerid, "ROB_BANK", "CAT_Safe_Rob", 4.1, true, false, false, false, 0);
									
									KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][10]);
									PLAYER_TEMP[playerid][pt_TIMERS][10] = SetTimerEx("RecycleUp", 1000, false, "i", playerid);
									return 1;
								}
								SendPlayerClientMessage(playerid, "Recoge la basura y vuelve al camión para continuar.");
							}
						}
					}
				}
				else
				{
					TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID] = INVALID_PLAYER_ID;
					PLAYER_TEMP[playerid][pt_TRASH_PASSENGER] = false;
					PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] = INVALID_VEHICLE_ID;
				}
			}
		}
	}
    return 1;
}

public OnPlayerExitVehicle(playerid, vehicleid)
{
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
    if (PI[playerid][pi_PLAYER_PLATFORM] == 1) {
        PLAYER_AC_INFO[playerid][CHEAT_PLAYER_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
    }
	return 1;
}

const CRASHER_PACKET = 228;
IPacket:CRASHER_PACKET(playerid, BitStream:bs)
{
	printf("[ADVERTENCIA] Packet 228 recibido!");
	KickEx(playerid);
}

forward Gama_ResyncPlayer(playerid);
public Gama_ResyncPlayer(playerid)
{
	new Float:x, Float:y, Float:z, Float:angle;
	GetPlayerFacingAngle(playerid, angle);

	new BitStream:bsr = BS_New();
	new BitStream:bsa = BS_New();

	BS_WriteValue(bsr, PR_UINT16, playerid);

	BS_WriteValue(
		bsa,
		PR_UINT16, playerid,
		PR_UINT8, NO_TEAM,
		PR_UINT32, GetPlayerSkin(playerid),
		PR_FLOAT, x,
		PR_FLOAT, y,
		PR_FLOAT, z,
		PR_FLOAT, angle,
		PR_UINT32, PLAYER_TEMP[playerid][pt_PLAYER_COLOR],
		PR_UINT8, GetPlayerFightingStyle(playerid)
	);

	foreach (new i : Player)
	{
		if (IsPlayerStreamedIn(playerid, i))
		{
			PR_SendRPC(bsr, i, 163); // RPC_WorldPlayerRemove
			PR_SendRPC(bsa, i, 32); // RPC_WorldPlayerAdd
		}
	}

	BS_Delete(bsr);
	BS_Delete(bsa);
}

hook OnPlayerEnterVehicle(playerid, vehicleid, ispassenger)
{
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	
	if (PLAYER_TEMP[playerid][pt_GAME_STATE] == GAME_STATE_NORMAL)
	{
		if (ac_Info[CHEAT_VEHICLE_ENTER_SPAMMER][ac_Enabled])
		{
			if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_ENTER_SPAMMER][p_ac_info_IMMUNITY])
			{
				new interval = GetTickDiff(GetTickCount(), PLAYER_TEMP[playerid][pt_ANTIFLOOD_ENTER_VEHICLE]);
				
				if (interval < 50)
				{
					if (!ac_Info[CHEAT_VEHICLE_ENTER_SPAMMER][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_ENTER_SPAMMER, float(interval));
					else
					{
						if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_ENTER_SPAMMER][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_VEHICLE_ENTER_SPAMMER][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_ENTER_SPAMMER][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_ENTER_SPAMMER][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_ENTER_SPAMMER][p_ac_info_LAST_DETECTION] = gettime();
						if (PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_ENTER_SPAMMER][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_VEHICLE_ENTER_SPAMMER][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_VEHICLE_ENTER_SPAMMER, float(interval));
					}
				}
				PLAYER_TEMP[playerid][pt_ANTIFLOOD_ENTER_VEHICLE] = GetTickCount();
			}
		}
	}
	
	new Float:sx, Float:sy, Float:sz;
	GetPlayerPos(playerid, sx, sy, sz);
	
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] == WORK_MEDIC)
	{
		if (WORK_VEHICLES[vehicleid][work_vehicle_WORK] != WORK_MEDIC)
		{
			SendPlayerClientMessage(playerid, "~r~Estando de servicio como médico solo puedes llevar ambulancias.");
			RemovePlayerFromVehicle(playerid);
			SetPlayerPos(playerid, sx, sy, sz);
			return 1;
		}
	}

	if (ispassenger) {
		if (vehicleid != INVALID_VEHICLE_ID) {
			if (PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) {
				if (PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] == PI[playerid][pi_ID]) {
					if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS]) {
						PC_EmulateCommand(playerid, "/seguro");
						RemovePlayerFromVehicle(playerid);
						SetPlayerPos(playerid, sx, sy, sz);
					}			
				} else {
					if (IsValidPlayerInventoryObjectSlo(playerid, SLOT_HAND, INVENTORY_TYPE_CROWBAR)) {
						if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS]) {
							RemovePlayerFromVehicle(playerid);
							SetPlayerPos(playerid, sx, sy, sz);

							if (PLAYER_TEMP[playerid][pt_PERFORMED_ACTION] < 5) return ShowPlayerMessage(playerid, "Necesitas rolear accion para ~r~robar este vehiculo~w~.");

							j_PocketInfo[playerid][SLOT_HAND][pExtra] --;
							
							if (j_PocketInfo[playerid][SLOT_HAND][pExtra] <= 0) {
								DeleteInventorySlot(j_PocketInfo[playerid][SLOT_HAND][pId]);
								ClearPlayerInventorySlot(playerid, SLOT_HAND, true);
							}
							else SavePlayerInventorySlot(playerid, SLOT_HAND);

							GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS] = 0;
							UpdateVehicleParams(vehicleid);

							ShowPlayerMessage(playerid, "Has ~b~abierto~w~ las puertas de el vehículo.");
							Auto_SendPlayerAction(playerid, "ha abierto las puertas de el vehículo.");

							new level = PI[playerid][pi_WANTED_LEVEL] + 2;
							if (level > 6) level = 6;

							SetPlayerWantedLevelEx(playerid, level);
							
							new city[45], zone[45];
							GetPlayerZones(playerid, city, zone);

							new message[145];
							format(message, sizeof message, "{"#POLICE_COLOUR"}[Central policia] {F5F5F5}%s esta robando un vehiculo en {"#GREEN_COLOR"}[%s, %s]", PLAYER_TEMP[playerid][pt_NAME], city, zone);
							SendPoliceRadioMessage(-1, message);

							if (IsPlayerConnected(PLAYER_VEHICLES[vehicleid][player_vehicle_PLAYERID])) {
								SendPlayerClientMessage(PLAYER_VEHICLES[vehicleid][player_vehicle_PLAYERID], "{FF0000}{f5f5f5}Alguien ha abierto tu vehiculo con una {FF0000}palanca{f5f5f5}.");
							}
						}
					} else {
						if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS]) {
							RemovePlayerFromVehicle(playerid);
							SetPlayerPos(playerid, sx, sy, sz);
							ShowPlayerMessage(playerid, "Este vehiculo esta ~r~cerrado~w~.");
							return 1;
						}
					}
				}
			}
		}
	}
	
	if (!ispassenger)
	{
		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_OCCUPIED])
		{
			if (PLAYER_TEMP[playerid][pt_CJ_WARNINGS] >= 5)
			{
				KickEx(playerid);
				return 1;
			}

			PLAYER_TEMP[playerid][pt_CJ_WARNINGS] ++;
			ShowPlayerMessage(playerid, "~w~No puedes robar vehículos asi, congelado 5 segundos, aviso ~r~%d/5~w~.", PLAYER_TEMP[playerid][pt_CJ_WARNINGS]);
			RemovePlayerFromVehicle(playerid);
			SetPlayerPos(playerid, sx, sy, sz);

			TogglePlayerControllableEx(playerid, false);
			KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][19]);
			PLAYER_TEMP[playerid][pt_TIMERS][19] = SetTimerEx("CarJackingFinish", 5000, false, "i", playerid);

			SetTimerEx("Gama_ResyncPlayer", 0, false, "d", playerid);
			return 1;
		}

		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS]) {
			RemovePlayerFromVehicle(playerid);
			SetPlayerPos(playerid, sx, sy, sz);
			ShowPlayerMessage(playerid, "Este vehiculo esta ~r~cerrado~w~.");
			return 1;
		}

		if(GLOBAL_VEHICLES[vehicleid][gb_vehicle_RENT_DRIVER] != playerid && GLOBAL_VEHICLES[vehicleid][gb_vehicle_RENT_DRIVER] != INVALID_PLAYER_ID) {
			RemovePlayerFromVehicle(playerid);
			SetPlayerPos(playerid, sx, sy, sz);
			ShowPlayerMessage(playerid, "Este vehiculo esta ~r~rentado~w~ por otra persona.");
			return 1;
		}
		
		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] == VEHICLE_TYPE_WORK)
		{
			if (!PLAYER_WORKS[playerid][ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][pwork_SET])
			{
				SendPlayerClientMessage(playerid, "Necesitas ser ~r~%s~w~ para poder conducir este vehículo.", work_info[ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][work_info_NAME]);
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, sx, sy, sz);
				return 1;
			}
			if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_VIP] && !PI[playerid][pi_VIP])
			{
				SendPlayerClientMessage(playerid, "Necesitas adquirir membresia VIP para usar este vehículo. (/ayuda > membresia VIP)");
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, sx, sy, sz);
				return 1;
			}
			
			if (PLAYER_TEMP[playerid][pt_WORKING_IN] && PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_VEHICLES[vehicleid][work_vehicle_WORK])
			{
				SendPlayerClientMessage(playerid, "Tienes que dejar de estar de servicio de ~r~%s~w~.", work_info[ PLAYER_TEMP[playerid][pt_WORKING_IN] ][work_info_NAME]);
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, sx, sy, sz);
				return 1;
			}
			
			if (WORK_VEHICLES[vehicleid][work_vehicle_NEED_DUTY])
			{
				if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_VEHICLES[vehicleid][work_vehicle_WORK])
				{
					SendPlayerClientMessage(playerid, "Necesitas estar de servicio de ~r~%s~w~ para poder conducir este vehículo.", work_info[ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][work_info_NAME]);
					RemovePlayerFromVehicle(playerid);
					SetPlayerPos(playerid, sx, sy, sz);
					return 1;
				}
			}
			
			if (WORK_VEHICLES[vehicleid][work_vehicle_EXP] > PLAYER_WORKS[playerid][ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][pwork_LEVEL])
			{
				SendPlayerClientMessage(playerid, "Necesitas más experiencia en este trabajo para llevar este vehículo. ~r~(%d/%d)", PLAYER_WORKS[playerid][ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][pwork_LEVEL], WORK_VEHICLES[vehicleid][work_vehicle_EXP]);
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, sx, sy, sz);
				return 1;
			}
		}
		else if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] == VEHICLE_TYPE_DRIVING_SCHOOL)
		{
			if (!PLAYER_TEMP[playerid][pt_DL_EXAM])
			{
				SendPlayerClientMessage(playerid, "~r~Necesitas estar haciendo el examen de conducir.");
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, sx, sy, sz);
				return 1;	
			}
		}
	}
	else
	{
		if (WORK_VEHICLES[vehicleid][work_vehicle_VALID] && WORK_VEHICLES[vehicleid][work_vehicle_WORK] == WORK_TRASH)
		{
			if (!PLAYER_WORKS[playerid][WORK_TRASH][pwork_SET])
			{
				SendPlayerClientMessage(playerid, "Necesitas ser %s para poder entrar a este vehículo.", work_info[ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][work_info_NAME]);
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, sx, sy, sz);
				return 1;
			}
			
			if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_VEHICLES[vehicleid][work_vehicle_WORK])
			{
				SendPlayerClientMessage(playerid, "Necesitas estar de servicio como %s para poder conducir este vehículo.", work_info[ WORK_VEHICLES[vehicleid][work_vehicle_WORK] ][work_info_NAME]);
				RemovePlayerFromVehicle(playerid);
				SetPlayerPos(playerid, sx, sy, sz);
				return 1;
			}
		}
	}
	return 1;
}

AddTestVehicle(bool:static_veh, modelid, Float:X, Float:Y, Float:Z, Float:Angle, Color1, Color2, interior = 0, world = 0)
{
	new vehicle_id = INVALID_VEHICLE_ID;
	if (static_veh) vehicle_id = AddStaticVehicleEx(modelid, X, Y, Z, Angle, Color1, Color2, -1, false);
	else vehicle_id = CreateVehicle(modelid, X, Y, Z, Angle, Color1, Color2, -1, false);
	
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VALID] = true;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TYPE] = VEHICLE_TYPE_TEST;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] = modelid;
	format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE], 32, "Vehiculo de Prueba");
	format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE_NAME], 32, "SA%d", vehicle_id);
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X] = X;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y] = Y;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z] = Z;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_ANGLE] = Angle;
	
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][0] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X];
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][1] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y];
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][2] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z];
	
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_HEALTH] = 1000.0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_PANELS] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_DOORS] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_LIGHTS] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_TIRES] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_1] = Color1;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_2] = Color2;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PAINTJOB] = 3; // No paintjob
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS] = VEHICLE_INFO[modelid - 400][vehicle_info_MAX_GAS];
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_GAS] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS];
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_INTERIOR] = interior;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_WORLD] = 0;
	SetVehicleVirtualWorldEx(vehicle_id, world);
	SetVehicleToRespawnEx(vehicle_id);
	return vehicle_id;
}

AddPersonalVehicle(playerid, modelid, Float:X, Float:Y, Float:Z, Float:Angle, Color1, Color2, Float:max_gas)
{
	new vehicle_id = INVALID_VEHICLE_ID;
	vehicle_id = CreateVehicle(modelid, X, Y, Z, Angle, Color1, Color2, -1);
	
	if (vehicle_id == INVALID_VEHICLE_ID) return false;
	
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VALID] = true;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TYPE] = VEHICLE_TYPE_PERSONAL;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] = modelid;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X] = X;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y] = Y;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z] = Z;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_ANGLE] = Angle;
	
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][0] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X];
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][1] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y];
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][2] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z];
	
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_HEALTH] = 1000.0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_PANELS] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_DOORS] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_LIGHTS] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_TIRES] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_1] = Color1;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_2] = Color2;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PAINTJOB] = 3; // No paintjob
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS] = max_gas;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_GAS] = max_gas;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_INTERIOR] = 0;
	GLOBAL_VEHICLES[vehicle_id][gb_vehicle_WORLD] = 0;
	
	PLAYER_VEHICLES[vehicle_id][player_vehicle_VALID] = true;
	PLAYER_VEHICLES[vehicle_id][player_vehicle_OWNER_ID] = PI[playerid][pi_ID];
	PLAYER_VEHICLES[vehicle_id][player_vehicle_PLAYERID] = playerid;
	RegisterNewPlayerVehicle(playerid, vehicle_id);
	
	SetVehicleToRespawnEx(vehicle_id);
	return vehicle_id;
}

RegisterNewPlayerVehicle(playerid, vehicleid)
{
	inline OnVehicleInserted()
	{
		PLAYER_VEHICLES[vehicleid][player_vehicle_ID] = cache_insert_id();
		if (PLAYER_VEHICLES[vehicleid][player_vehicle_ID])
		{
			format(GLOBAL_VEHICLES[vehicleid][gb_vehicle_NUMBER_PLATE], 32, "{%06x}SA{F5F5F5}%d", VEHICLE_COLORS[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_1] ] >>> 8, PLAYER_VEHICLES[vehicleid][player_vehicle_ID]);
			format(GLOBAL_VEHICLES[vehicleid][gb_vehicle_NUMBER_PLATE_NAME], 32, "SA%d", PLAYER_VEHICLES[vehicleid][player_vehicle_ID]);
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pvehicles SET plate = '%e' WHERE id = %d;", GLOBAL_VEHICLES[vehicleid][gb_vehicle_NUMBER_PLATE], PLAYER_VEHICLES[vehicleid][player_vehicle_ID]);
			mysql_tquery(handle_db, QUERY_BUFFER);
		}
	}

	mysql_format
	(
		handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER,
		"\
			INSERT INTO pvehicles (id_player, modelid, name, spawn_x, spawn_y, spawn_z, spawn_angle, color1, color2, gas, max_gas, max_vel, max_boot, seats)\
			VALUES(%d, %d, '%e', %f, %f, %f, %f, %d, %d, %f, %f, %f, %d, %d);\
		",
			PI[playerid][pi_ID], GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID], VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_X], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Y], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Z],
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_ANGLE], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_2], GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS],
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS], VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_MAX_VEL], VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_BOOT_SLOTS],
			VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_SEATS]
	);
	MySQL_TQueryInline(handle_db, using inline OnVehicleInserted, QUERY_BUFFER);
	return 1;
}

LoadPlayerVehicles(playerid)
{
	if (PI[playerid][pi_ID] == 0) return 0;
	
	inline OnPlayerVehiclesLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			for (new i = 0; i != rows; i ++)
			{
				if (i >= MAX_SU_VEHICLES)
				{
					printf("---> MAX_SU_VEHICLES superado al cargar de base de datos.");
					break;
				}

				new id, plate[32], modelid, Float:spawn_x, Float:spawn_y, Float:spawn_z, Float:spawn_angle,
					Float:health, damage_panels, damage_doors, damage_lights, damage_tires, color1, color2,
					paintjob, Float:gas, Float:max_gas, closed, interior, eworld, veh_state,
					components[MAX_VEHICLE_COMPONENTS], vClamp, bool:isnull_plate, parking = -1;

				cache_get_value_name_int(i, "id", id);
				cache_is_value_name_null(i, "plate", isnull_plate);
				if (!isnull_plate) cache_get_value_name(i, "plate", plate, 32);
				cache_get_value_name_int(i, "modelid", modelid);
				cache_get_value_name_float(i, "spawn_x", spawn_x);
				cache_get_value_name_float(i, "spawn_y", spawn_y);
				cache_get_value_name_float(i, "spawn_z", spawn_z);
				cache_get_value_name_float(i, "spawn_angle", spawn_angle);
				cache_get_value_name_float(i, "health", health);
				cache_get_value_name_int(i, "damage_panels", damage_panels);
				cache_get_value_name_int(i, "damage_doors", damage_doors);
				cache_get_value_name_int(i, "damage_lights", damage_lights);
				cache_get_value_name_int(i, "damage_tires", damage_tires);
				cache_get_value_name_int(i, "color1", color1);
				cache_get_value_name_int(i, "color2", color2);
				cache_get_value_name_int(i, "paintjob", paintjob);
				cache_get_value_name_float(i, "gas", gas);
				cache_get_value_name_float(i, "max_gas", max_gas);
				cache_get_value_name_int(i, "closed", closed);
				cache_get_value_name_int(i, "interior", interior);
				cache_get_value_name_int(i, "world", eworld);
				cache_get_value_name_int(i, "state", veh_state);
				cache_get_value_name_int(i, "slot0", components[0]);
				cache_get_value_name_int(i, "slot1", components[1]);
				cache_get_value_name_int(i, "slot2", components[2]);
				cache_get_value_name_int(i, "slot3", components[3]);
				cache_get_value_name_int(i, "slot4", components[4]);
				cache_get_value_name_int(i, "slot5", components[5]);
				cache_get_value_name_int(i, "slot6", components[6]);
				cache_get_value_name_int(i, "slot7", components[7]);
				cache_get_value_name_int(i, "slot8", components[8]);
				cache_get_value_name_int(i, "slot9", components[9]);
				cache_get_value_name_int(i, "slot10", components[10]);
				cache_get_value_name_int(i, "slot11", components[11]);
				cache_get_value_name_int(i, "slot12", components[12]);
				cache_get_value_name_int(i, "slot13", components[13]);
				cache_get_value_name_int(i, "clamp", vClamp);
				cache_get_value_name_int(i, "parking", parking);

				if (!IsValidParkingSlotIndex(parking)) parking = -1; 

				if (parking != -1) {
					new p_vehicle_id = GetValidParkingVehicleId(playerid);
					if (p_vehicle_id == -1) return printf("No hay mas indexes disponibles 'GetValidParkingVehicleId'.");

					ParkingVehicles[playerid][p_vehicle_id][pvValid] = true;
					ParkingVehicles[playerid][p_vehicle_id][pvId] = id;
					ParkingVehicles[playerid][p_vehicle_id][pvModelid] = modelid;
					ParkingVehicles[playerid][p_vehicle_id][pvOwnerId] = PI[playerid][pi_ID];
					ParkingVehicles[playerid][p_vehicle_id][pvParkingIndex] = parking;
					format(ParkingVehicles[playerid][p_vehicle_id][pvVehiclePlate], 32, "%s", plate);
				} else {
					new vehicle_id = CreateVehicle(modelid, spawn_x, spawn_y, spawn_z, spawn_angle, color1, color2, -1);
					if (vehicle_id != INVALID_VEHICLE_ID)
					{
						PLAYER_VEHICLES[vehicle_id][player_vehicle_VALID] = true;
						PLAYER_VEHICLES[vehicle_id][player_vehicle_OWNER_ID] = PI[playerid][pi_ID];
						PLAYER_VEHICLES[vehicle_id][player_vehicle_ID] = id;
						PLAYER_VEHICLES[vehicle_id][player_vehicle_ACCESSIBLE] = true;
						PLAYER_VEHICLES[vehicle_id][player_vehicle_CLAMP] = vClamp;

						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VALID] = true;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TYPE] = VEHICLE_TYPE_PERSONAL;
						format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE], 32, "%s", plate);
						format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE_NAME], 32, "SA%d", PLAYER_VEHICLES[vehicle_id][player_vehicle_ID]);
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] = modelid;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X] = spawn_x;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y] = spawn_y;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z] = spawn_z;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_ANGLE] = spawn_angle;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][0] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X];
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][1] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y];
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][2] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z];
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_HEALTH] = health;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_PANELS] = damage_panels;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_DOORS] = damage_doors;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_LIGHTS] = damage_lights;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_TIRES] = damage_tires;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_1] = color1;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_2] = color2;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PAINTJOB] = paintjob;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS] = max_gas;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_GAS] = gas;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PARAMS_DOORS] = closed;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_STATE] = veh_state;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_INTERIOR] = interior;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_WORLD] = 0;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COMPONENTS] = components;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_LAST_REPAIR_TIME] = gettime();
						PLAYER_VEHICLES[vehicle_id][player_vehicle_PARKING] = parking;
						PLAYER_VEHICLES[vehicle_id][player_vehicle_PLAYERID] = playerid;

						if (!PI[playerid][pi_VIP]) 
						{
							if (i >= MAX_NU_VEHICLES)
							{
								GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PARAMS_DOORS] = 1;
								PLAYER_VEHICLES[vehicle_id][player_vehicle_ACCESSIBLE] = false;
							}
						}

						//vboot
						inline OnVbootLoad()
						{
							new vb_rows;
							if (cache_get_row_count(vb_rows))
							{
								for (new x = 0; x != vb_rows; x ++)
								{
									new slot;
									cache_get_value_name_int(x, "slot", slot);
									v_BootInfo[vehicle_id][slot][BootValid] = true;
									cache_get_value_name_int(x, "id", v_BootInfo[vehicle_id][slot][BootID]);
									cache_get_value_name_int(x, "type", v_BootInfo[vehicle_id][slot][BootType]);
									cache_get_value_name_int(x, "extra", v_BootInfo[vehicle_id][slot][BootExtra]);
								}
							}
						}
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM vboot WHERE id_vehicle = %d LIMIT %d;", PLAYER_VEHICLES[vehicle_id][player_vehicle_ID], VEHICLE_INFO[GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_BOOT_SLOTS]);
						MySQL_TQueryInline(handle_db, using inline OnVbootLoad, QUERY_BUFFER);

						//vboot
						inline OnVGloveLoad()
						{
							new vg_rows;
							if (cache_get_row_count(vg_rows))
							{
								for (new g = 0; g != vg_rows; g ++)
								{
									new slot;
									cache_get_value_name_int(g, "slot", slot);
									v_GloveInfo[vehicle_id][slot][GloveValid] = true;
									cache_get_value_name_int(g, "id", v_GloveInfo[vehicle_id][slot][GloveID]);
									cache_get_value_name_int(g, "type", v_GloveInfo[vehicle_id][slot][GloveType]);
									cache_get_value_name_int(g, "extra", v_GloveInfo[vehicle_id][slot][GloveExtra]);
								}
							}
						}
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM vglove WHERE id_vehicle = %d LIMIT %d;", PLAYER_VEHICLES[vehicle_id][player_vehicle_ID], VEHICLE_INFO[GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_BOOT_SLOTS]);
						MySQL_TQueryInline(handle_db, using inline OnVGloveLoad, QUERY_BUFFER);

						//vobjects
						inline OnVobjectsLoad()
						{
							new vo_rows;
							if (cache_get_row_count(vo_rows))
							{
								for (new x = 0; x != vo_rows; x ++)
								{
									new vobject_id, type, name[32], vobject_modelid, Float:off_x, Float:off_y, Float:off_z,
										Float:rot_x, Float:rot_y, Float:rot_z, attached, vobject_color0, vobject_color1,
										vobject_color2, vobject_color3, vobject_color4, text[32], font[24], fontsize, fontbold, fontcolor,
										bool:isnull_text, bool:isnull_font;

									cache_get_value_name_int(x, "id", vobject_id);
									cache_get_value_name_int(x, "type", type);
									cache_get_value_name(x, "name", name);
									cache_get_value_name_int(x, "modelid", vobject_modelid);
									cache_get_value_name_float(x, "off_x", off_x);
									cache_get_value_name_float(x, "off_y", off_y);
									cache_get_value_name_float(x, "off_z", off_z);
									cache_get_value_name_float(x, "rot_x", rot_x);
									cache_get_value_name_float(x, "rot_y", rot_y);
									cache_get_value_name_float(x, "rot_z", rot_z);
									cache_get_value_name_int(x, "attached", attached);
									cache_get_value_name_int(x, "color0", vobject_color0);
									cache_get_value_name_int(x, "color1", vobject_color1);
									cache_get_value_name_int(x, "color2", vobject_color2);
									cache_get_value_name_int(x, "color3", vobject_color3);
									cache_get_value_name_int(x, "color4", vobject_color4);
									cache_is_value_name_null(x, "text", isnull_text);
									if (!isnull_text) cache_get_value_name(x, "text", text);
									cache_is_value_name_null(x, "font", isnull_font);
									if (!isnull_font) cache_get_value_name(x, "font", font);
									cache_get_value_name_int(x, "fontsize", fontsize);
									cache_get_value_name_int(x, "fontbold", fontbold);
									cache_get_value_name_int(x, "fontcolor", fontcolor);

									//ok
									VEHICLE_OBJECTS[vehicle_id][x][vobject_VALID] = true;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_ID] = vobject_id;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_TYPE] = type;
									format(VEHICLE_OBJECTS[vehicle_id][x][vobject_NAME], 32, "%s", name);
									VEHICLE_OBJECTS[vehicle_id][x][vobject_MODELID] = vobject_modelid;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_OFFSET][0] = off_x;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_OFFSET][1] = off_y;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_OFFSET][2] = off_z;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_ROT][0] = rot_x;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_ROT][1] = rot_y;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_ROT][2] = rot_z;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_ATTACHED] = attached;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_COLORS][0] = vobject_color0;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_COLORS][1] = vobject_color1;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_COLORS][2] = vobject_color2;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_COLORS][3] = vobject_color3;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_COLORS][4] = vobject_color4;
									format(VEHICLE_OBJECTS[vehicle_id][x][vobject_text_TEXT], 32, "%s", text);
									format(VEHICLE_OBJECTS[vehicle_id][x][vobject_text_FONT], 24, "%s", font);
									VEHICLE_OBJECTS[vehicle_id][x][vobject_text_FONT_SIZE] = fontsize;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_text_BOLD] = fontbold;
									VEHICLE_OBJECTS[vehicle_id][x][vobject_text_FONT_COLOR] = fontcolor;
									UpdateVehicleAttachedObject(vehicle_id, x, true);
								}
								//loaded
								SetVehicleToRespawnEx(vehicle_id);
								//loaded
							}
						}
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM vobjects WHERE id_vehicle = %d LIMIT %d;", PLAYER_VEHICLES[vehicle_id][player_vehicle_ID], MAX_SU_VOBJECTS);
						MySQL_TQueryInline(handle_db, using inline OnVobjectsLoad, QUERY_BUFFER);
					}
				}
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM pvehicles WHERE id_player = %d;", PI[playerid][pi_ID]);
	MySQL_TQueryInline(handle_db, using inline OnPlayerVehiclesLoad, QUERY_BUFFER);
	return 1;
}

LoadPlayerVehicle(playerid, db_id)
{
	if (PI[playerid][pi_ID] == 0) return 0;
	
	new vehicle_id = INVALID_VEHICLE_ID;
	PLAYER_TEMP[playerid][pt_LAST_LOADED_VEHICLE] = INVALID_VEHICLE_ID;

	inline OnPlayerVehicleLoad()
	{
		if (cache_num_rows() > 0) {
			new 
				id, plate[32], modelid, Float:spawn_x, Float:spawn_y, Float:spawn_z, Float:spawn_angle,
				Float:health, damage_panels, damage_doors, damage_lights, damage_tires, color1, color2,
				paintjob, Float:gas, Float:max_gas, closed, interior, eworld, veh_state,
				components[MAX_VEHICLE_COMPONENTS], vClamp, bool:isnull_plate, parking = -1;

			cache_get_value_name_int(0, "id", id);
			cache_is_value_name_null(0, "plate", isnull_plate);
			if (!isnull_plate) cache_get_value_name(0, "plate", plate, 32);
			cache_get_value_name_int(0, "modelid", modelid);
			cache_get_value_name_int(0, "parking", parking);

			if (!IsValidParkingSlotIndex(parking)) parking = -1; 

			if (parking != -1) {
				new p_vehicle_id = GetValidParkingVehicleId(playerid);
				if (p_vehicle_id == -1) return printf("No hay mas indexes disponibles 'GetValidParkingVehicleId'.");

				ParkingVehicles[playerid][p_vehicle_id][pvValid] = true;
				ParkingVehicles[playerid][p_vehicle_id][pvId] = id;
				ParkingVehicles[playerid][p_vehicle_id][pvModelid] = modelid;
				ParkingVehicles[playerid][p_vehicle_id][pvOwnerId] = PI[playerid][pi_ID];
				ParkingVehicles[playerid][p_vehicle_id][pvParkingIndex] = parking;
				format(ParkingVehicles[playerid][p_vehicle_id][pvVehiclePlate], 32, "%s", plate);
				
			} else {
				cache_get_value_name_float(0, "spawn_x", spawn_x);
				cache_get_value_name_float(0, "spawn_y", spawn_y);
				cache_get_value_name_float(0, "spawn_z", spawn_z);
				cache_get_value_name_float(0, "spawn_angle", spawn_angle);
				cache_get_value_name_float(0, "health", health);
				cache_get_value_name_int(0, "damage_panels", damage_panels);
				cache_get_value_name_int(0, "damage_doors", damage_doors);
				cache_get_value_name_int(0, "damage_lights", damage_lights);
				cache_get_value_name_int(0, "damage_tires", damage_tires);
				cache_get_value_name_int(0, "color1", color1);
				cache_get_value_name_int(0, "color2", color2);
				cache_get_value_name_int(0, "paintjob", paintjob);
				cache_get_value_name_float(0, "gas", gas);
				cache_get_value_name_float(0, "max_gas", max_gas);
				cache_get_value_name_int(0, "closed", closed);
				cache_get_value_name_int(0, "interior", interior);
				cache_get_value_name_int(0, "world", eworld);
				cache_get_value_name_int(0, "state", veh_state);
				cache_get_value_name_int(0, "slot0", components[0]);
				cache_get_value_name_int(0, "slot1", components[1]);
				cache_get_value_name_int(0, "slot2", components[2]);
				cache_get_value_name_int(0, "slot3", components[3]);
				cache_get_value_name_int(0, "slot4", components[4]);
				cache_get_value_name_int(0, "slot5", components[5]);
				cache_get_value_name_int(0, "slot6", components[6]);
				cache_get_value_name_int(0, "slot7", components[7]);
				cache_get_value_name_int(0, "slot8", components[8]);
				cache_get_value_name_int(0, "slot9", components[9]);
				cache_get_value_name_int(0, "slot10", components[10]);
				cache_get_value_name_int(0, "slot11", components[11]);
				cache_get_value_name_int(0, "slot12", components[12]);
				cache_get_value_name_int(0, "slot13", components[13]);
				cache_get_value_name_int(0, "clamp", vClamp);

				PLAYER_TEMP[playerid][pt_LAST_LOADED_VEHICLE] = CreateVehicle(modelid, spawn_x, spawn_y, spawn_z, spawn_angle, color1, color2, -1);
				vehicle_id = PLAYER_TEMP[playerid][pt_LAST_LOADED_VEHICLE];

				if (vehicle_id != INVALID_VEHICLE_ID) {
					PLAYER_VEHICLES[vehicle_id][player_vehicle_VALID] = true;
					PLAYER_VEHICLES[vehicle_id][player_vehicle_OWNER_ID] = PI[playerid][pi_ID];
					PLAYER_VEHICLES[vehicle_id][player_vehicle_ID] = id;
					PLAYER_VEHICLES[vehicle_id][player_vehicle_ACCESSIBLE] = true;
					PLAYER_VEHICLES[vehicle_id][player_vehicle_CLAMP] = vClamp;

					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_VALID] = true;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_TYPE] = VEHICLE_TYPE_PERSONAL;
					format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE], 32, "%s", plate);
					format(GLOBAL_VEHICLES[vehicle_id][gb_vehicle_NUMBER_PLATE_NAME], 32, "SA%d", PLAYER_VEHICLES[vehicle_id][player_vehicle_ID]);
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] = modelid;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X] = spawn_x;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y] = spawn_y;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z] = spawn_z;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_ANGLE] = spawn_angle;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][0] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_X];
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][1] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Y];
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_POS][2] = GLOBAL_VEHICLES[vehicle_id][gb_vehicle_SPAWN_Z];
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_HEALTH] = health;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_PANELS] = damage_panels;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_DOORS] = damage_doors;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_LIGHTS] = damage_lights;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DAMAGE_TIRES] = damage_tires;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_1] = color1;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COLOR_2] = color2;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PAINTJOB] = paintjob;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MAX_GAS] = max_gas;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_GAS] = gas;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PARAMS_DOORS] = closed;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_STATE] = veh_state;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_INTERIOR] = interior;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_WORLD] = 0;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_COMPONENTS] = components;
					GLOBAL_VEHICLES[vehicle_id][gb_vehicle_LAST_REPAIR_TIME] = gettime();
					PLAYER_VEHICLES[vehicle_id][player_vehicle_PARKING] = parking;

					//vboot
					inline OnVbootLoad() {
						new vb_rows;
						if (cache_get_row_count(vb_rows)) {
							for (new x = 0; x != vb_rows; x ++) {
								new slot;
								cache_get_value_name_int(x, "slot", slot);
								v_BootInfo[vehicle_id][slot][BootValid] = true;
								cache_get_value_name_int(x, "id", v_BootInfo[vehicle_id][slot][BootID]);
								cache_get_value_name_int(x, "type", v_BootInfo[vehicle_id][slot][BootType]);
								cache_get_value_name_int(x, "extra", v_BootInfo[vehicle_id][slot][BootExtra]);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM vboot WHERE id_vehicle = %d LIMIT %d;", PLAYER_VEHICLES[vehicle_id][player_vehicle_ID], VEHICLE_INFO[GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_BOOT_SLOTS]);
					MySQL_TQueryInline(handle_db, using inline OnVbootLoad, QUERY_BUFFER);

					//vboot
					inline OnVGloveLoad() {
						new vg_rows;
						if (cache_get_row_count(vg_rows)) {
							for (new g = 0; g != vg_rows; g ++) {
								new slot;
								cache_get_value_name_int(g, "slot", slot);
								v_GloveInfo[vehicle_id][slot][GloveValid] = true;
								cache_get_value_name_int(g, "id", v_GloveInfo[vehicle_id][slot][GloveID]);
								cache_get_value_name_int(g, "type", v_GloveInfo[vehicle_id][slot][GloveType]);
								cache_get_value_name_int(g, "extra", v_GloveInfo[vehicle_id][slot][GloveExtra]);
							}
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM vglove WHERE id_vehicle = %d LIMIT %d;", PLAYER_VEHICLES[vehicle_id][player_vehicle_ID], VEHICLE_INFO[GLOBAL_VEHICLES[vehicle_id][gb_vehicle_MODELID] - 400][vehicle_info_BOOT_SLOTS]);
					MySQL_TQueryInline(handle_db, using inline OnVGloveLoad, QUERY_BUFFER);

					//vobjects
					inline OnVobjectsLoad() {
						new vo_rows;
						if (cache_get_row_count(vo_rows)) {
							for (new x = 0; x != vo_rows; x ++) {
								new vobject_id, type, name[32], vobject_modelid, Float:off_x, Float:off_y, Float:off_z,
									Float:rot_x, Float:rot_y, Float:rot_z, attached, vobject_color0, vobject_color1,
									vobject_color2, vobject_color3, vobject_color4, text[32], font[24], fontsize, fontbold, fontcolor,
									bool:isnull_text, bool:isnull_font;

								cache_get_value_name_int(x, "id", vobject_id);
								cache_get_value_name_int(x, "type", type);
								cache_get_value_name(x, "name", name);
								cache_get_value_name_int(x, "modelid", vobject_modelid);
								cache_get_value_name_float(x, "off_x", off_x);
								cache_get_value_name_float(x, "off_y", off_y);
								cache_get_value_name_float(x, "off_z", off_z);
								cache_get_value_name_float(x, "rot_x", rot_x);
								cache_get_value_name_float(x, "rot_y", rot_y);
								cache_get_value_name_float(x, "rot_z", rot_z);
								cache_get_value_name_int(x, "attached", attached);
								cache_get_value_name_int(x, "color0", vobject_color0);
								cache_get_value_name_int(x, "color1", vobject_color1);
								cache_get_value_name_int(x, "color2", vobject_color2);
								cache_get_value_name_int(x, "color3", vobject_color3);
								cache_get_value_name_int(x, "color4", vobject_color4);
								cache_is_value_name_null(x, "text", isnull_text);
								if (!isnull_text) cache_get_value_name(x, "text", text);
								cache_is_value_name_null(x, "font", isnull_font);
								if (!isnull_font) cache_get_value_name(x, "font", font);
								cache_get_value_name_int(x, "fontsize", fontsize);
								cache_get_value_name_int(x, "fontbold", fontbold);
								cache_get_value_name_int(x, "fontcolor", fontcolor);

								//ok
								VEHICLE_OBJECTS[vehicle_id][x][vobject_VALID] = true;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_ID] = vobject_id;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_TYPE] = type;
								format(VEHICLE_OBJECTS[vehicle_id][x][vobject_NAME], 32, "%s", name);
								VEHICLE_OBJECTS[vehicle_id][x][vobject_MODELID] = vobject_modelid;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_OFFSET][0] = off_x;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_OFFSET][1] = off_y;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_OFFSET][2] = off_z;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_ROT][0] = rot_x;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_ROT][1] = rot_y;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_ROT][2] = rot_z;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_ATTACHED] = attached;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_COLORS][0] = vobject_color0;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_COLORS][1] = vobject_color1;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_COLORS][2] = vobject_color2;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_COLORS][3] = vobject_color3;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_COLORS][4] = vobject_color4;
								format(VEHICLE_OBJECTS[vehicle_id][x][vobject_text_TEXT], 32, "%s", text);
								format(VEHICLE_OBJECTS[vehicle_id][x][vobject_text_FONT], 24, "%s", font);
								VEHICLE_OBJECTS[vehicle_id][x][vobject_text_FONT_SIZE] = fontsize;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_text_BOLD] = fontbold;
								VEHICLE_OBJECTS[vehicle_id][x][vobject_text_FONT_COLOR] = fontcolor;
								UpdateVehicleAttachedObject(vehicle_id, x, true);
							}
							//loaded
							SetVehicleToRespawnEx(vehicle_id);
							//loaded
						}
					}
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM vobjects WHERE id_vehicle = %d LIMIT %d;", PLAYER_VEHICLES[vehicle_id][player_vehicle_ID], MAX_SU_VOBJECTS);
					MySQL_TQueryInline(handle_db, using inline OnVobjectsLoad, QUERY_BUFFER);
				}
			}
		}
	}

	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM pvehicles WHERE id_player = %d AND id = %d LIMIT 1;", PI[playerid][pi_ID], db_id);
	MySQL_TQueryInline(handle_db, using inline OnPlayerVehicleLoad, QUERY_BUFFER);
	return vehicle_id;
}

SavePlayerVehicle(playerid, vehicleid, destroy = false) {
	if (PI[playerid][pi_ID] == 0) return 0;

	if (!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) return 0;
	if (PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] != PI[playerid][pi_ID]) return 0;

	GetVehiclePos(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_X], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Y], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Z]);
	GetVehicleZAngle(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_ANGLE]);
	GetVehicleHealth(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH]);
	if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] > 1000.0) GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = 1000.0;
	if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] < MIN_VEHICLE_HEALTH) GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = MIN_VEHICLE_HEALTH;
	GetVehicleDamageStatus(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_PANELS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_DOORS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_LIGHTS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_TIRES]);
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_WORLD] = 0;

	mysql_format
	(
		handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER,
		"\
			UPDATE pvehicles SET \
				id_player = %d,\
				plate = '%e',\
				modelid = %d,\
				name = '%e',\
				spawn_x = %f,\
				spawn_y = %f,\
				spawn_z = %f,\
				spawn_angle = %f,\
				health = %f,\
				damage_panels = %d,\
				damage_doors = %d,\
				damage_lights = %d,\
				damage_tires = %d,\
				color1 = %d,\
				color2 = %d,\
				paintjob = %d,\
				gas = %f,\
				max_gas = %f,\
				closed = %d,\
				interior = %d,\
				world = %d,\
				state = %d,\
				slot0 = %d,\
				slot1 = %d,\
				slot2 = %d,\
				slot3 = %d,\
				slot4 = %d,\
				slot5 = %d,\
				slot6 = %d,\
				slot7 = %d,\
				slot8 = %d,\
				slot9 = %d,\
				slot10 = %d,\
				slot11 = %d,\
				slot12 = %d,\
				slot13 = %d,\
				clamp = %d,\
				parking = %d,\
				max_vel = %f,\
				max_boot = %d,\
				seats = %d \
			WHERE id = %d;\
		",
			PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID], GLOBAL_VEHICLES[vehicleid][gb_vehicle_NUMBER_PLATE], GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID], VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME], 
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_X], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Y], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Z], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_ANGLE], GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH],
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_PANELS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_DOORS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_LIGHTS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_TIRES],
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_2], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PAINTJOB], GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS],
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_INTERIOR], GLOBAL_VEHICLES[vehicleid][gb_vehicle_WORLD], GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE],
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][0], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][1], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][2], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][3],
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][4], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][5], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][6], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][7],
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][8], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][9], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][10], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][11],
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][12], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][13], PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP], PLAYER_VEHICLES[vehicleid][player_vehicle_PARKING],
			VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_MAX_VEL], VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_BOOT_SLOTS],
			VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_SEATS],

			PLAYER_VEHICLES[vehicleid][player_vehicle_ID]
	);
	mysql_tquery(handle_db, QUERY_BUFFER);

	if (destroy) {
		DestroyVehicleEx(vehicleid);
		vehicleid = INVALID_VEHICLE_ID;
	}
	
	return vehicleid;
}

SavePlayerVehicles(playerid, destroy = false)
{
	if (PI[playerid][pi_ID] == 0) return 0;
	
	for (new i = 0; i != MAX_VEHICLES; i ++)
	{
		if (!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
		if (PLAYER_VEHICLES[i][player_vehicle_OWNER_ID] != PI[playerid][pi_ID]) continue;
		
		GetVehiclePos(i, GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_X], GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_Y], GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_Z]);
		GetVehicleZAngle(i, GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_ANGLE]);
		GetVehicleHealth(i, GLOBAL_VEHICLES[i][gb_vehicle_HEALTH]);
		if (GLOBAL_VEHICLES[i][gb_vehicle_HEALTH] > 1000.0) GLOBAL_VEHICLES[i][gb_vehicle_HEALTH] = 1000.0;
		if (GLOBAL_VEHICLES[i][gb_vehicle_HEALTH] < MIN_VEHICLE_HEALTH) GLOBAL_VEHICLES[i][gb_vehicle_HEALTH] = MIN_VEHICLE_HEALTH;
		GetVehicleDamageStatus(i, GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_PANELS], GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_DOORS], GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_LIGHTS], GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_TIRES]);
		GLOBAL_VEHICLES[i][gb_vehicle_WORLD] = 0;//GetVehicleVirtualWorld(i);
		
		mysql_format
		(
			handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER,
			"\
				UPDATE pvehicles SET \
					id_player = %d,\
					plate = '%e',\
					modelid = %d,\
					name = '%e',\
					spawn_x = %f,\
					spawn_y = %f,\
					spawn_z = %f,\
					spawn_angle = %f,\
					health = %f,\
					damage_panels = %d,\
					damage_doors = %d,\
					damage_lights = %d,\
					damage_tires = %d,\
					color1 = %d,\
					color2 = %d,\
					paintjob = %d,\
					gas = %f,\
					max_gas = %f,\
					closed = %d,\
					interior = %d,\
					world = %d,\
					state = %d,\
					slot0 = %d,\
					slot1 = %d,\
					slot2 = %d,\
					slot3 = %d,\
					slot4 = %d,\
					slot5 = %d,\
					slot6 = %d,\
					slot7 = %d,\
					slot8 = %d,\
					slot9 = %d,\
					slot10 = %d,\
					slot11 = %d,\
					slot12 = %d,\
					slot13 = %d,\
					clamp = %d,\
					parking = %d,\
					max_vel = %f,\
					max_boot = %d,\
					seats = %d \
				WHERE id = %d;\
			",
				PLAYER_VEHICLES[i][player_vehicle_OWNER_ID], GLOBAL_VEHICLES[i][gb_vehicle_NUMBER_PLATE], GLOBAL_VEHICLES[i][gb_vehicle_MODELID], VEHICLE_INFO[ GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME], 
				GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_X], GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_Y], GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_Z], GLOBAL_VEHICLES[i][gb_vehicle_SPAWN_ANGLE], GLOBAL_VEHICLES[i][gb_vehicle_HEALTH],
				GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_PANELS], GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_DOORS], GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_LIGHTS], GLOBAL_VEHICLES[i][gb_vehicle_DAMAGE_TIRES],
				GLOBAL_VEHICLES[i][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[i][gb_vehicle_COLOR_2], GLOBAL_VEHICLES[i][gb_vehicle_PAINTJOB], GLOBAL_VEHICLES[i][gb_vehicle_GAS], GLOBAL_VEHICLES[i][gb_vehicle_MAX_GAS],
				GLOBAL_VEHICLES[i][gb_vehicle_PARAMS_DOORS], GLOBAL_VEHICLES[i][gb_vehicle_INTERIOR], GLOBAL_VEHICLES[i][gb_vehicle_WORLD], GLOBAL_VEHICLES[i][gb_vehicle_STATE],
				GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][0], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][1], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][2], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][3],
				GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][4], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][5], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][6], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][7],
				GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][8], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][9], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][10], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][11],
				GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][12], GLOBAL_VEHICLES[i][gb_vehicle_COMPONENTS][13], PLAYER_VEHICLES[i][player_vehicle_CLAMP], PLAYER_VEHICLES[i][player_vehicle_PARKING],
				VEHICLE_INFO[ GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400 ][vehicle_info_MAX_VEL], VEHICLE_INFO[ GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400 ][vehicle_info_BOOT_SLOTS],
				VEHICLE_INFO[ GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400 ][vehicle_info_SEATS],

				PLAYER_VEHICLES[i][player_vehicle_ID]
		);
		mysql_tquery(handle_db, QUERY_BUFFER);

		if (destroy) DestroyVehicleEx(i);
	}
	return 1;
}

public OnVehicleSpawn(vehicleid)
{
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_TP_IMMUNITY] = gettime() + 5;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWNED] = true;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] = INVALID_VEHICLE_ID;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] = INVALID_PLAYER_ID;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] = INVALID_PLAYER_ID;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_OCCUPIED] = false;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_RESPAWN_TIME] = gettime() + 600;
	
	if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] < MIN_VEHICLE_HEALTH) GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = MIN_VEHICLE_HEALTH;
	
	if (IsValidDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]))
	{
		DestroyDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]);
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL] = Text3D:INVALID_STREAMER_ID;
	}
	
	if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] == VEHICLE_TYPE_WORK)
	{
		if (WORK_VEHICLES[vehicleid][work_vehicle_WORK] == WORK_TRASH)
		{
			if (TRASH_VEHICLES[vehicleid][trash_vehicle_JOB_STARTED])
			{
				CancelTrashWork(TRASH_VEHICLES[vehicleid][trash_vehicle_DRIVER_ID], TRASH_VEHICLES[vehicleid][trash_vehicle_PASSENGER_ID], vehicleid);
			}
		}
		
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] <= 0.0) GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] = 0.0;
		else GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] = frandom(GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] / 3, 2);
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = 1000.0;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_PANELS] = 0;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_DOORS] = 0;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_LIGHTS] = 0;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_TIRES] = 0;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_WINDOWS] = true;
		
		switch(WORK_VEHICLES[vehicleid][work_vehicle_WORK])
		{
			case WORK_TAXI: ResetVehicleTaxiMeter(vehicleid);
			case WORK_TRUCK: ResetTruckInfo(vehicleid);
			case WORK_TRASH: ResetTrashInfo(vehicleid);
			case WORK_PIZZA: ResetPizzaInfo(vehicleid);
		}
	}
	SetVehicleNumberPlate(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_NUMBER_PLATE_NAME]);
	SetVehicleHealthEx(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH]);
	UpdateVehicleDamageStatus(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_PANELS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_DOORS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_LIGHTS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_TIRES]);
    ChangeVehicleColorEx(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_2]);
	ChangeVehiclePaintjob(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_PAINTJOB]);
	SetVehiclePosEx(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_X], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Y], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Z]);
	SetVehicleZAngle(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_ANGLE]);
	LinkVehicleToInteriorEx(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_INTERIOR]);
	SetVehicleVirtualWorldEx(vehicleid, 0);//GLOBAL_VEHICLES[vehicleid][gb_vehicle_WORLD]);
	AddVehicleComponents(vehicleid);
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_LIGHTS] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ALARM] = 0;
	if (!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_BONNET] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_BOOT] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_WINDOWS] = true;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_GLOVE] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_OBJECTIVE] = 0;
	UpdateVehicleParams(vehicleid);
	SetClampVehicleLabel(vehicleid);
	return 1;
}

SetClampVehicleLabel(vehicleid) {
	if (PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) {
		if (IsValidDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]))
		{
			DestroyDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]);
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL] = Text3D:INVALID_STREAMER_ID;
		}

		if (PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] > 0) {
			new string[256];
			format(string, sizeof string, "Cepo\nUsa {"#PRIMARY_COLOR"}/pagar {F5F5F5}para pagar la multa por %s$", number_format_thousand(PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP]));

			new Float:wX, Float:wY, Float:wZ;
			GetVehicleModelInfo(GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID], VEHICLE_MODEL_INFO_WHEELSREAR, wX, wY, wZ);
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL] = CreateDynamic3DTextLabel(string, -1, wX, wY, wZ, 20.0, .attachedvehicle = vehicleid);
		}
	}
}

UpdateVehicleParams(vehicleid)
{
	return
		SetVehicleParamsEx(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_LIGHTS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ALARM], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_BONNET], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_BOOT], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_OBJECTIVE]),
		SetVehicleParamsCarWindows(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_WINDOWS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_WINDOWS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_WINDOWS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_WINDOWS]);
}

SetVehicleHealthEx(vehicleid, Float:health, forplayerid = INVALID_PLAYER_ID)
{
	if (forplayerid != INVALID_PLAYER_ID) PLAYER_AC_INFO[forplayerid][CHEAT_VEHICLE_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = health;
	SetVehicleHealth(vehicleid, health);
	return 1;
}

RepairVehicleEx(vehicleid, forplayerid = INVALID_PLAYER_ID, Float:health = 1000.0)
{
	if (forplayerid != INVALID_PLAYER_ID) PLAYER_AC_INFO[forplayerid][CHEAT_VEHICLE_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_REPAIR_TIME] = gettime();
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = health;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_PANELS] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_DOORS] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_LIGHTS] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_TIRES] = 0;
	SetVehicleHealthEx(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH]);
	if (health >= 1000.0) RepairVehicle(vehicleid);
	return 1;
}

stock ChangeVehicleColorEx(const vehicleid, color_1, color_2) {
	if (color_1 == -1) color_1 = random(255);
	if (color_2 == -1) color_2 = random(255);

	if (PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) {
		format(GLOBAL_VEHICLES[vehicleid][gb_vehicle_NUMBER_PLATE], 32, "{%06x}SA{F5F5F5}%d", VEHICLE_COLORS[ color_1 ] >>> 8, PLAYER_VEHICLES[vehicleid][player_vehicle_ID]);
		format(GLOBAL_VEHICLES[vehicleid][gb_vehicle_NUMBER_PLATE_NAME], 32, "SA%d", PLAYER_VEHICLES[vehicleid][player_vehicle_ID]);
	} else {
		format(GLOBAL_VEHICLES[vehicleid][gb_vehicle_NUMBER_PLATE], 32, "{%06x}SA{F5F5F5}%d", VEHICLE_COLORS[ color_1 ] >>> 8, vehicleid);
		format(GLOBAL_VEHICLES[vehicleid][gb_vehicle_NUMBER_PLATE_NAME], 32, "SA%d", vehicleid);
	}

	GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_1] = color_1;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_2] = color_2;

	return ChangeVehicleColor(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_2]);
}

SetVehiclePosEx(vehicleid, Float:x, Float:y, Float:z)
{
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_TP_IMMUNITY] = gettime() + 5;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][0] = x;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][1] = y;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][2] = z;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] = INVALID_VEHICLE_ID;
	return SetVehiclePos(vehicleid, x, y, z);
}

LinkVehicleToInteriorEx(vehicleid, interior)
{
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_TP_IMMUNITY] = gettime() + 5;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_INTERIOR] = interior;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] = INVALID_VEHICLE_ID;
	return LinkVehicleToInterior(vehicleid, interior);
}

SetVehicleToRespawnEx(vehicleid)
{
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWNED] = false;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] = INVALID_VEHICLE_ID;
	return SetVehicleToRespawn(vehicleid);
}

public OnVehicleDeath(vehicleid, killerid)
{
	if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_TEMP])
	{
		DestroyVehicleEx(vehicleid);

		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] != INVALID_PLAYER_ID)
		{
			PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_WORK_VEHICLE_ID] = INVALID_VEHICLE_ID;
			PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_RENT_VEHICLE_ID] = INVALID_VEHICLE_ID;
		}

		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] != INVALID_PLAYER_ID)
		{
			PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] ][pt_WORK_VEHICLE_ID] = INVALID_VEHICLE_ID;
			PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] ][pt_RENT_VEHICLE_ID] = INVALID_VEHICLE_ID;
		}
	}

	GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWNED] = false;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] = INVALID_PLAYER_ID;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] = INVALID_PLAYER_ID;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_OCCUPIED] = false;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] = INVALID_VEHICLE_ID;
	
	if (IsValidDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]))
	{
		DestroyDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]);
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL] = Text3D:INVALID_STREAMER_ID;
	}
	
	switch(GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE])
	{
		case VEHICLE_TYPE_TEST: DestroyVehicleEx(vehicleid);
		case VEHICLE_TYPE_PERSONAL:
		{
			if (VEHICLE_INFO[GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_NORMAL_SPEEDO])
			{
				GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] = VEHICLE_STATE_DAMAGED;
				GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = MIN_VEHICLE_HEALTH;
			}
			else
			{
				GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
				GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = 1000.0;
			}
			
			new playerid = GetPlayerIdFromAccountId(PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID]);
			if (playerid != INVALID_PLAYER_ID)
			{
				if (PI[playerid][pi_PHONE_NUMBER])
				{
					new message[64]; format(message, sizeof message, "Vehículo de sustitución entregado en últ. estacionamiento.");
					RegisterPhoneMessage(0, PI[playerid][pi_ID], message);
					if (PI[playerid][pi_PHONE_STATE] == PHONE_STATE_ON)
					{
						if ((PLAYER_TEMP[playerid][pt_GAME_STATE] == GAME_STATE_NORMAL || PLAYER_TEMP[playerid][pt_GAME_STATE] == GAME_STATE_DEAD))
						{
							SendPlayerClientMessage(playerid, "{"#PRIMARY_COLOR"}[Nuevo mensaje recibido] {f5f5f5}Remitente: {F5F5F5}%s {f5f5f5}Mensaje: {F5F5F5}%s", convertPhoneNumber(playerid, 38350), message);
						}
					}
				}
			}
		}
		default:
		{
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] = VEHICLE_STATE_NORMAL;
			if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] <= 0.0) GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] = 0.0;
			else GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] = frandom(GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS], GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS] / 3, 2);
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_HEALTH] = 1000.0;
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_PANELS] = 0;
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_DOORS] = 0;
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_LIGHTS] = 0;
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_DAMAGE_TIRES] = 0;
		}
	}
    return 1;
}

public OnTrailerUpdate(playerid, vehicleid)
{
    new towing_vehicle;
	towing_vehicle = GetPlayerVehicleID(playerid);
	if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] != towing_vehicle)
	{
		if (ac_Info[CHEAT_FAKE_TRAILER_SYNC][ac_Enabled])
		{
			if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_IMMUNITY])
			{
				if (!ac_Info[CHEAT_FAKE_TRAILER_SYNC][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_FAKE_TRAILER_SYNC, vehicleid);
				else
				{
					if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_FAKE_TRAILER_SYNC][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_LAST_DETECTION] = gettime();
					if (PLAYER_AC_INFO[playerid][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_FAKE_TRAILER_SYNC][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_FAKE_TRAILER_SYNC, vehicleid);
					return 0;
				}
				
			}
		}
	}
	return 1;
}

public OnUnoccupiedVehicleUpdate(vehicleid, playerid, passenger_seat, Float:new_x, Float:new_y, Float:new_z, Float:vel_x, Float:vel_y, Float:vel_z)
{
	if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_VALID])
	{
		if (ac_Info[CHEAT_UNOCCUPIED_VEHICLE_TP][ac_Enabled])
		{
			if (PLAYER_TEMP[playerid][pt_KICKED]) return 0;
			
			new Float:veh_x, Float:veh_y, Float:veh_z, Float:veh_dis;
			GetVehiclePos(vehicleid, veh_x, veh_y, veh_z);
			veh_dis = GetVehicleDistanceFromPoint(vehicleid, new_x, new_y, new_z);
			
			if (gettime() > GLOBAL_VEHICLES[vehicleid][gb_vehicle_TP_IMMUNITY] && GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWNED])
			{
				if (veh_dis > 20.0 && veh_z > -70.0)
				{
					if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_IMMUNITY])
					{
						if (!ac_Info[CHEAT_UNOCCUPIED_VEHICLE_TP][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_UNOCCUPIED_VEHICLE_TP, veh_dis);
						else
						{
							if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_UNOCCUPIED_VEHICLE_TP][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_LAST_DETECTION] = gettime();
							if (PLAYER_AC_INFO[playerid][CHEAT_UNOCCUPIED_VEHICLE_TP][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_UNOCCUPIED_VEHICLE_TP][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_UNOCCUPIED_VEHICLE_TP, veh_dis);
						}
					}
					
					SetVehicleVelocity(vehicleid, 0.0, 0.0, 0.0);
					return 0;
				}
			} 
		}
		
		if (gettime() > GLOBAL_VEHICLES[vehicleid][gb_vehicle_RESPAWN_TIME])
		{
			if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_TEMP] && !PLAYER_VEHICLES[vehicleid][player_vehicle_VALID])
			{
				if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] != INVALID_PLAYER_ID)
				{
					PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_WORK_VEHICLE_ID] = INVALID_VEHICLE_ID;
					PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_RENT_VEHICLE_ID] = INVALID_VEHICLE_ID;
				}

				if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] != INVALID_PLAYER_ID)
				{
					PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] ][pt_WORK_VEHICLE_ID] = INVALID_VEHICLE_ID;
					PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] ][pt_RENT_VEHICLE_ID] = INVALID_VEHICLE_ID;
				}

				DestroyVehicleEx(vehicleid);
			}

	/*		if (PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) {
				new p_vehicle_id = -1, v_playerid = GetPlayerIdFromAccountId(PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID]);
				
				if (v_playerid != INVALID_PLAYER_ID) {
					p_vehicle_id = GetValidParkingVehicleId(v_playerid);
				}

				new parking_index = GetVehicleNearParkingIndex(vehicleid);

				if (p_vehicle_id != -1) {
					if (v_playerid != INVALID_PLAYER_ID) {
						new veh_money = VEHICLE_INFO[GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_PRICE] / 200;

						ParkingVehicles[v_playerid][p_vehicle_id][pvValid] = true;
						ParkingVehicles[v_playerid][p_vehicle_id][pvId] = PLAYER_VEHICLES[vehicleid][player_vehicle_ID];
						ParkingVehicles[v_playerid][p_vehicle_id][pvModelid] = GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID];
						ParkingVehicles[v_playerid][p_vehicle_id][pvOwnerId] = PI[v_playerid][pi_ID];
						ParkingVehicles[v_playerid][p_vehicle_id][pvParkingIndex] = parking_index;
						format(ParkingVehicles[v_playerid][p_vehicle_id][pvVehiclePlate], 32, "%s", GLOBAL_VEHICLES[vehicleid][gb_vehicle_NUMBER_PLATE]);
						PLAYER_VEHICLES[vehicleid][player_vehicle_PARKING] = parking_index;

						SavePlayerVehicle(v_playerid, vehicleid, true);

						SendPlayerClientMessage(v_playerid, "{"#GREEN_COLOR"}{F5F5F5}tu %s ha sido {ff0000}aparcado{F5F5F5} en el {"#YELLOW_COLOR"}Parking{F5F5F5} publico #%d, se te cobrara %d{ff0000}${F5F5F5} diaro.", VEHICLE_INFO[ ParkingVehicles[v_playerid][p_vehicle_id][pvModelid] - 400 ][vehicle_info_NAME], parking_index, veh_money);
					}
				}
			}
		}*/

		new Float:spawn_distance = GetVehicleDistanceFromPoint(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_X], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Y], GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Z]);
		switch(GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE])
		{
			case VEHICLE_TYPE_WORK:
			{
				if (TRASH_VEHICLES[vehicleid][trash_vehicle_JOB_STARTED]) return 1;
				if (spawn_distance < 25.0)
				{
					if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_TEMP])
					{
						if (spawn_distance > 10.0)
						{
							if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] != INVALID_PLAYER_ID)
							{
								PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_WORK_VEHICLE_ID] = INVALID_VEHICLE_ID;
								PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][pt_RENT_VEHICLE_ID] = INVALID_VEHICLE_ID;
							}

							if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] != INVALID_PLAYER_ID)
							{
								PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] ][pt_WORK_VEHICLE_ID] = INVALID_VEHICLE_ID;
								PLAYER_TEMP[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_DRIVER] ][pt_RENT_VEHICLE_ID] = INVALID_VEHICLE_ID;
							}

							DestroyVehicleEx(vehicleid);
						}
					}
					else
					{
						if (spawn_distance > 10.0) SetVehicleToRespawnEx(vehicleid);
					}
				}
			}
		}
	}
    return 1;
}

GetPlayerIdFromAccountId(accountid)
{
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if (PI[i][pi_ID] == accountid)
			{
				return i;
			}
		}
	}
	return INVALID_PLAYER_ID;
}

CMD:renunciar(playerid, params[])
{
	new player_jobs = CountPlayerJobs(playerid), works[32 * sizeof(work_info)], count;
	for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;

	if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return ShowPlayerMessage(playerid, "No estás depie.");
	
	if (player_jobs <= 0) {
		Dialog_Show(playerid, "", DIALOG_STYLE_LIST, "[{ff6923}Trabajos{F5F5F5}]  Renunciar", "No tienes ningun trabajo\n", "Renunciar", "xSalir");
	}
	else {
		for (new i = 1; i != sizeof(work_info); i ++)
		{
			if (PLAYER_WORKS[playerid][i][pwork_SET])
			{
				strcatf(works, "%d. Renunciar %s\n", (count + 1), work_info[i][work_info_NAME]);

				PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][count] = i;
				count ++;
			}
		}

		Dialog_Show(playerid, "PlayerRenounceResponse", DIALOG_STYLE_LIST, "[{ff6923}Trabajos{F5F5F5}]  Renunciar", works, "Renunciar", "xSalir");
	}
	return 1;
}
alias:renunciar("dimitir");

Dialog:PlayerRenounceResponse(playerid, response, listitem, inputtext[]) {
	if (response) {
		new const work = PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem];

		if (work < 1 || work >= sizeof work_info) return 0;
		
		if (!PLAYER_WORKS[playerid][work][pwork_SET]) return ShowPlayerMessage(playerid, "No eres ~b~%s~w~.", work_info[work][work_info_NAME]);
		if (PLAYER_TEMP[playerid][pt_WORKING_IN] == work) return ShowPlayerMessage(playerid, "Ahora mismo estás de servicio en ese trabajo~n~deja de trabajar para abandonar el trabajo.");
		
		if (work == WORK_POLICE) {
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET `set` = 0, level = 0 WHERE id_player = %d AND id_work = %d;", PI[playerid][pi_ID], work);
			mysql_tquery(handle_db, QUERY_BUFFER);
			PLAYER_WORKS[playerid][work][pwork_LEVEL] = 0;
		} else {
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET `set` = 0 WHERE id_player = %d AND id_work = %d;", PI[playerid][pi_ID], work);
			mysql_tquery(handle_db, QUERY_BUFFER);
		}
		ShowPlayerMessage(playerid, "Ya no eres ~b~%s~w~.", work_info[work][work_info_NAME]);
		PLAYER_WORKS[playerid][work][pwork_SET] = false;
	}
	return 1;
}

CMD:pagar(playerid, params[])
{
	new vehicleid = INVALID_VEHICLE_ID;
	if (GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) vehicleid = GetPlayerNearVehicle(playerid);
	if (vehicleid == INVALID_VEHICLE_ID) return SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");

	if (!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID] || PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] <= 0) return SendPlayerClientMessage(playerid, "Este vehículo no tiene ninguna multa.");

	if (GivePlayerCash(playerid, -PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP], true, true)) {
		PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] = 0;
		SendPlayerClientMessage(playerid, "Has pagado la multa y se ha quitado el cepo.");
		SetClampVehicleLabel(vehicleid);
	}
	else SendPlayerClientMessage(playerid, "No tienes suficiente dinero para pagar la multa.");
	return 1;
}

CMD:x(playerid, params[])
{
	SetPlayerArmour(playerid, 100.0);
	return 1;
}

CMD:p(playerid, params[])
{
	SetPlayerHealth(playerid, 100.0);
	return 1;
}

CMD:xx(playerid, params[])
{
	PI[playerid][pi_MEDICINE] += 100; 
	PI[playerid][pi_CRACK] += 100;
	return 1;
}

CMD:cepo(playerid, params[]) {
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "No eres policia.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
	if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 1) return SendPlayerClientMessage(playerid, "Tienes que ser %s para poder hacer esto.", POLICE_RANKS[1]);

	new price;
	if (sscanf(params, "d", price)) return ShowPlayerMessage(playerid, "~>~ ~w~/cepo [multa]");
	if (price < 0 || price > 2000) return SendPlayerClientMessage(playerid, "El precio de la multa no es válido.");

	new vehicleid = INVALID_VEHICLE_ID;
	if (GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) vehicleid = GetPlayerNearVehicle(playerid);
	if (vehicleid == INVALID_VEHICLE_ID) return SendPlayerClientMessage(playerid, "No estás cerca de un vehículo.");

	if (!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) return SendPlayerClientMessage(playerid, "No puedes multar a este vehículo.");
	if (!VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_NORMAL_SPEEDO]) return SendPlayerClientMessage(playerid, "No puedes multar a este vehículo.");
	if (PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] > 0 && price != 0) return SendPlayerClientMessage(playerid, "Este vehículo ya tiene una multa.");

	if (PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] > 0 && price == 0) {
		PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] = 0;
		SetClampVehicleLabel(vehicleid);

		SendPlayerClientMessage(playerid, "Se ha quitado la multa a este vehículo.");
		Streamer_Update(playerid, STREAMER_TYPE_3D_TEXT_LABEL);
	}
	else {
		if (price == 0) return SendPlayerClientMessage(playerid, "El precio de la multa no es válido.");
		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] != INVALID_PLAYER_ID) return SendPlayerClientMessage(playerid, "No puedes multar a un vehículo si hay un conductor en él.");

		GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
		UpdateVehicleParams(vehicleid);

		PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] = price;
		SetClampVehicleLabel(vehicleid);

		SendPlayerClientMessage(playerid, "Vehículo multado.");
		Streamer_Update(playerid, STREAMER_TYPE_3D_TEXT_LABEL);
	}
	return 1;
}

CMD:seguro(playerid, params[]) {
	new vehicleid = INVALID_VEHICLE_ID;
	if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER || GetPlayerState(playerid) == PLAYER_STATE_PASSENGER) vehicleid = GetPlayerVehicleID(playerid);
	else if (GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) vehicleid = GetPlayerNearVehicle(playerid);
		
	if (vehicleid == INVALID_VEHICLE_ID) return SendPlayerClientMessage(playerid, "No estás en tu vehículo o cerca de él para abrirlo.");
	if (!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) return SendPlayerClientMessage(playerid, "Este no es tú vehículo.");
	if (PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] != PI[playerid][pi_ID]) return SendPlayerClientMessage(playerid, "Este no es tú vehículo.");
	
	/*if (!PI[playerid][pi_VIP] && !PLAYER_VEHICLES[vehicleid][player_vehicle_ACCESSIBLE]) {
		SendPlayerClientMessage(playerid, "Este vehículo está bloqueado, desbloquealo con {"#YELLOW_COLOR"}VIP{F5F5F5}.");
		SendPlayerClientMessage(playerid, "¡Los jugadores {"#YELLOW_COLOR"}VIP{F5F5F5} pueden tener hasta {"#YELLOW_COLOR"}%d vehículos{F5F5F5}! Usa {"#YELLOW_COLOR"}/ayuda {F5F5F5}si quieres ser {"#YELLOW_COLOR"}VIP{F5F5F5}.", MAX_SU_VEHICLES);
		return 1;
	}*/
	
	if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS]) {
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS] = 0;
		UpdateVehicleParams(vehicleid);

		ShowPlayerMessage(playerid, "Has ~b~abierto~w~ las puertas de tu vehículo.");
		Auto_SendPlayerAction(playerid, "ha abierto las puertas de su vehículo.");
	} else {
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_CLOSED_TIME] = gettime();
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS] = 1;
		UpdateVehicleParams(vehicleid);

		ShowPlayerMessage(playerid, "Has ~r~cerrado~w~ las puertas de tu vehículo.");
		Auto_SendPlayerAction(playerid, "ha cerrado las puertas de su vehículo.");
	}
	return 1;
}

CMD:capo(playerid) {
	new vehicleid = INVALID_VEHICLE_ID;
	if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER || GetPlayerState(playerid) == PLAYER_STATE_PASSENGER) vehicleid = GetPlayerVehicleID(playerid);
	else if (GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) vehicleid = GetPlayerNearVehicle(playerid);
		
	if (vehicleid == INVALID_VEHICLE_ID) return SendPlayerClientMessage(playerid, "No estás en tu vehículo o cerca de él para abrirlo.");
	
	if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_BONNET]) {
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_BONNET] = 0;
		Auto_SendPlayerAction(playerid, "ha cerrado el capo del vehiculo");
		UpdateVehicleParams(vehicleid);
	} else {
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_BONNET] = 1;
		Auto_SendPlayerAction(playerid, "ha abierto el capo del vehiculo");
		UpdateVehicleParams(vehicleid);
	}
	return 1;
}

CMD:aparcar(playerid, params[])
{
	new vehicleid = INVALID_VEHICLE_ID;
	if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER || GetPlayerState(playerid) == PLAYER_STATE_PASSENGER) vehicleid = GetPlayerVehicleID(playerid);
		
	if (vehicleid == INVALID_VEHICLE_ID) return SendPlayerClientMessage(playerid, "No estás en tu vehículo para aparcarlo.");
	if (!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) return SendPlayerClientMessage(playerid, "Este no es tú vehículo.");
	if (PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] != PI[playerid][pi_ID]) return SendPlayerClientMessage(playerid, "Este no es tú vehículo.");
	
	new Float:pos[3], Float:angle;
	GetVehiclePos(vehicleid, pos[0], pos[1], pos[2]);
	GetVehicleZAngle(vehicleid, angle);
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_X] = pos[0];
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Y] = pos[1];
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_Z] = pos[2];
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_SPAWN_ANGLE] = angle;
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_LAST_CLOSED_TIME] = gettime();
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_LIGHTS] = 0;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_DOORS] = 1;
	UpdateVehicleParams(vehicleid);
	SendPlayerClientMessage(playerid, "Has estacionado tu vehículo, cuando sea destruido volverá a aparecer aquí.");
	return 1;
}
alias:aparcar("estacionar");

CMD:luces(playerid, params[])
{
	if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER)
	{
		new vehicleid = GetPlayerVehicleID(playerid);
		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_LIGHTS])
		{
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_LIGHTS] = 0;
			UpdateVehicleParams(vehicleid);
			
			if (PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] == PI[playerid][pi_ID]) Auto_SendPlayerAction(playerid, "ha apagado las luces de su vehículo.");
			else Auto_SendPlayerAction(playerid, "ha apagado las luces de el vehículo.");
		}
		else
		{
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_LIGHTS] = 1;
			UpdateVehicleParams(vehicleid);
			
			if (PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] == PI[playerid][pi_ID]) Auto_SendPlayerAction(playerid, "ha encendido las luces de su vehículo.");
			else Auto_SendPlayerAction(playerid, "ha encendido las luces de el vehículo.");
		}
	}
	else SendPlayerClientMessage(playerid, "No estás conduciendo ningún vehículo.");
	return 1;
}

CMD:motor(playerid, params[]) {
	if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER) {
		new vehicleid = GetPlayerVehicleID(playerid), bool:Bypass_Start = false;

		if (IsValidPlayerInventoryObjectSlo(playerid, SLOT_HAND, INVENTORY_TYPE_SCREWDRIVER)) {
			j_PocketInfo[playerid][SLOT_HAND][pExtra] --;
			
			if (j_PocketInfo[playerid][SLOT_HAND][pExtra] <= 0) {
				DeleteInventorySlot(j_PocketInfo[playerid][SLOT_HAND][pId]);
				ClearPlayerInventorySlot(playerid, SLOT_HAND, true);
			}
			else SavePlayerInventorySlot(playerid, SLOT_HAND);

			Bypass_Start = true;
		}

		if (!GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE]) {
			if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] == VEHICLE_TYPE_WORK) {
				if (TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADING]) return SendPlayerClientMessage(playerid, "Debes esperar a que se cargue el camión para arrancar.");
				if (TRUCK_VEHICLE[vehicleid][truck_vehicle_UNLOADING]) return SendPlayerClientMessage(playerid, "Debes esperar a que se descargue el camión para arrancar.");
			}
			
			if (PLAYER_TEMP[playerid][pt_IN_TUNING_GARAGE]) return SendPlayerClientMessage(playerid, "Termina primero.");
			if (PLAYER_TEMP[playerid][pt_IN_VEHICLE_REPAIR]) return 0;
		}
		
		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][7]);
		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE]) {
			PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_IMMUNITY] = gettime() + 15;
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
			UpdateVehicleParams(vehicleid);
			
			if (PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] == PI[playerid][pi_ID]) Auto_SendPlayerAction(playerid, "ha detenido su vehículo.");
			else Auto_SendPlayerAction(playerid, "ha detenido el vehículo.");

			ShowPlayerMessage(playerid, "MOTOR ~r~APAGADO~w~");
		} else {
			if (!Bypass_Start && PLAYER_VEHICLES[vehicleid][player_vehicle_VALID] && PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] != PI[playerid][pi_ID]) {
				ShowPlayerMessage(playerid, "No tienes las llaves de este vehiculo.");
				return 1;
			}

			if (PLAYER_VEHICLES[vehicleid][player_vehicle_VALID] && PLAYER_VEHICLES[vehicleid][player_vehicle_CLAMP] > 0) {
				SendPlayerClientMessage(playerid, "El vehículo tiene un cepo y no puede arrancar.");
				return 1;
			}
			PLAYER_TEMP[playerid][pt_TIMERS][7] = SetTimerEx("StartVehicleEngine", 500, false, "ii", playerid, vehicleid);
		}
	}
	else SendPlayerClientMessage(playerid, "No estás conduciendo ningún vehículo.");
	return 1;
}
alias:motor("arrancar");

forward StartVehicleEngine(playerid, vehicleid);
public StartVehicleEngine(playerid, vehicleid)
{
	if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_STATE] == VEHICLE_STATE_DAMAGED) return Auto_SendPlayerAction(playerid, "intentó arrancar el vehículo pero el motor está dañado.");
	if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] <= 0.1) return Auto_SendPlayerAction(playerid, "intentó arrancar el vehículo pero no tiene gasolina.");
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 1;
	UpdateVehicleParams(vehicleid);
	
	if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] != INVALID_VEHICLE_ID)
	{
		if (GLOBAL_VEHICLES[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] ][gb_vehicle_DRIVER] != INVALID_PLAYER_ID)
			PLAYER_AC_INFO[ GLOBAL_VEHICLES[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] ][gb_vehicle_DRIVER] ][CHEAT_FAKE_TRAILER_SYNC][p_ac_info_IMMUNITY] = gettime() + 5;

		GLOBAL_VEHICLES[vehicleid][gb_vehicle_ATTACHED_TO] = INVALID_VEHICLE_ID;
		DetachTrailerFromVehicle(vehicleid);
	}
	
	if (PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] == PI[playerid][pi_ID]) Auto_SendPlayerAction(playerid, "ha arrancado su vehículo.");
	else Auto_SendPlayerAction(playerid, "ha arrancado el vehículo.");

	ShowPlayerMessage(playerid, "MOTOR ~b~ENCENDIDO~w~");
	return 1;
}

AddVehicleComponents(vehicleid)
{
	for (new i = 0; i != MAX_VEHICLE_COMPONENTS; i ++)
	{
		RemoveVehicleComponent(vehicleid, i);
		
		if (!GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][i]) continue;
		AddVehicleComponent(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][i]);
	}
	return 1;
}

public OnEnterExitModShop(playerid, enterexit, interiorid)
{
    if (enterexit) // Entra
    {
		SendPlayerClientMessage(playerid, " ");
		SendPlayerClientMessage(playerid, "Solo puedes tunear vehículos en el mecánico, búscalo con el /GPS.");
		SendPlayerClientMessage(playerid, "{ffff35}[ATENCION] {f5f5f5}Si realizas alguna modificación al vehículo en este garaje serás expulsado.");
    }
	else
	{
		new vehicleid = GetPlayerVehicleID(playerid);
		if (vehicleid != INVALID_VEHICLE_ID)
		{
			ChangeVehicleColorEx(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_1], GLOBAL_VEHICLES[vehicleid][gb_vehicle_COLOR_2]);
			ChangeVehiclePaintjob(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_PAINTJOB]);
			AddVehicleComponents(vehicleid);
		}
	}
    return 1;
}

public OnVehicleMod(playerid, vehicleid, componentid)
{
	if (ac_Info[CHEAT_CAR_MOD][ac_Enabled])
	{
		if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_IMMUNITY])
		{
			if (!ac_Info[CHEAT_CAR_MOD][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_CAR_MOD);
			else
			{
				if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_CAR_MOD][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_DETECTIONS] = 0;
				else PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_DETECTIONS] ++;
				
				PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_LAST_DETECTION] = gettime();
				if (PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_CAR_MOD][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_CAR_MOD);
			}
		}
	}
    return 0;
}

public OnVehiclePaintjob(playerid, vehicleid, paintjobid)
{
	if (ac_Info[CHEAT_CAR_MOD][ac_Enabled])
	{
		if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_IMMUNITY])
		{
			if (!(-1 < paintjobid < 3) && paintjobid != 255)
			{
				if (!ac_Info[CHEAT_CAR_MOD][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_CAR_MOD);
				else
				{
					if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_CAR_MOD][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_LAST_DETECTION] = gettime();
					if (PLAYER_AC_INFO[playerid][CHEAT_CAR_MOD][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_CAR_MOD][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_CAR_MOD);
				}
			}
		}
	}
	return 1;
}

DestroyVehicleEx(vehicleid)
{
	if (!GLOBAL_VEHICLES[vehicleid][gb_vehicle_VALID]) return false;
	
	if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] != INVALID_PLAYER_ID)
	{
		PLAYER_AC_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][CHEAT_VEHICLE_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
		PLAYER_AC_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] ][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	}
	
	if (DestroyVehicle(vehicleid))
	{
		if (IsValidDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]))
		{
			DestroyDynamic3DTextLabel(GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL]);
			GLOBAL_VEHICLES[vehicleid][gb_vehicle_LABEL] = Text3D:INVALID_STREAMER_ID;
		}

		new temp_GLOBAL_VEHICLES[Global_Vehicles_Info]; GLOBAL_VEHICLES[vehicleid] = temp_GLOBAL_VEHICLES;
		new temp_PLAYER_VEHICLES[Player_Vehicles_Info]; PLAYER_VEHICLES[vehicleid] = temp_PLAYER_VEHICLES;
		
		PLAYER_VEHICLES[vehicleid][player_vehicle_PLAYERID] = INVALID_PLAYER_ID;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_VALID] = false;
		GLOBAL_VEHICLES[vehicleid][gb_vehicle_RENT_DRIVER] = INVALID_PLAYER_ID;

		new temp_VEHICLE_BOOT[enum_VEHICLE_BOOT];
		for (new i = 0; i != MAX_BOOT_SLOTS; i ++) {
			v_BootInfo[vehicleid][i] = temp_VEHICLE_BOOT;
		}

		new temp_VEHICLE_GLOVE[enum_VEHICLE_GLOVE];
		for (new i = 0; i != MAX_BOOT_SLOTS; i ++) {
			v_GloveInfo[vehicleid][i] = temp_VEHICLE_GLOVE;
		}

		new temp_VEHICLE_OBJECTS[e_VEHICLE_OBJECTS];
		for (new i = 0; i != MAX_SU_VOBJECTS; i ++)
		{
			if (VEHICLE_OBJECTS[vehicleid][i][vobject_OBJECT_ID] != INVALID_STREAMER_ID) DestroyDynamicObject(VEHICLE_OBJECTS[vehicleid][i][vobject_OBJECT_ID]);
			VEHICLE_OBJECTS[vehicleid][i] = temp_VEHICLE_OBJECTS;
		}
		
		return true;
	}
	return false;
}

stock getRandomLetter() 
{
    return 65 + random(25);
}

UpdatePlayerPropertyContructor(playerid)
{
	SetPlayerPosEx
	(
		playerid, 
		PROPERTY_INTERIORS[ PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] ][property_INT_X],
		PROPERTY_INTERIORS[ PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] ][property_INT_Y],
		PROPERTY_INTERIORS[ PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] ][property_INT_Z],
		PROPERTY_INTERIORS[ PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] ][property_INT_ANGLE],
		PROPERTY_INTERIORS[ PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO] ][property_INT_INTERIOR],
		0, false, true
	);
	
	new td_str[45]; format(td_str, sizeof td_str, "Interior:_%d/%d", PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO], sizeof PROPERTY_INTERIORS - 1);
	PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][1], td_str);
	SelectTextDrawEx(playerid, 0xe8d08fFF);
	return 1;
}

ExitPlayerPropertyConstructor(playerid)
{
	CancelSelectTextDrawEx(playerid);
	PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_ENABLED] = false;
	
	SetPlayerPosEx
	(
		playerid, 
		PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_X],
		PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_Y],
		PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_Z],
		PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_ANG],
		PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_INT],
		0, false, true
	);
	
	for (new i = 0; i != 6; i ++) PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][i]);
	return 1;
}

Create_PlayerPropertyConstructo(playerid)
{
	new slot = GetEmptyPropertySlot();
	if (slot == -1)
	{
		SendPlayerClientMessage(playerid, "No hay mas slots.");
		ExitPlayerPropertyConstructor(playerid);
		return 1;
	}
	
	PROPERTY_INFO[slot][property_VALID] = true;
	PROPERTY_INFO[slot][property_EXT_X] = PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_X];
	PROPERTY_INFO[slot][property_EXT_Y] = PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_Y];
	PROPERTY_INFO[slot][property_EXT_Z] = PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_Z];
	PROPERTY_INFO[slot][property_EXT_ANGLE] = PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_ANG];
	PROPERTY_INFO[slot][property_EXT_INTERIOR] = PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_INT];
	PROPERTY_INFO[slot][property_EXT_FREEZE] = false;
	PROPERTY_INFO[slot][property_ID_INTERIOR] = PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_INTERIO];
	
	PROPERTY_INFO[slot][property_SOLD] = false;
	PROPERTY_INFO[slot][property_OWNER_ID] = 0;
	PROPERTY_INFO[slot][property_PRICE] = PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][1];
	PROPERTY_INFO[slot][property_LEVEL] = PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][0];
	PROPERTY_INFO[slot][property_EXTRA] = PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][3];
	PROPERTY_INFO[slot][property_VIP_LEVEL] = PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][2];
	PROPERTY_INFO[slot][property_PRICE_BASE] = PROPERTY_INFO[slot][property_PRICE];
	
	if (PROPERTY_INFO[slot][property_EXTRA]) PROPERTY_INFO[slot][property_PRICE] = 0;
	if (PROPERTY_INFO[slot][property_VIP_LEVEL]) PROPERTY_INFO[slot][property_LEVEL] = 1;
	
	inline OnPropertyInserted()
	{
		PROPERTY_INFO[slot][property_ID] = cache_insert_id();
		CreatePropertyInfo(slot, 0, "", 0, "");

		new str_text[1500];
		format(str_text, sizeof str_text, 
			"\
				Propiedad `Id: %d` creada por `%s %s (db_id: %d)`\n## Parametros\n```yaml\nInt: %d\nPrice: %d\n\
				Level: %d\nExtra: %d\nVip: %d\n```\n\n## Ubicacion de la propiedad\n```/spos %f, %f, %f, %f, %d, 0```\n\
			", 

			PROPERTY_INFO[slot][property_ID], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], PI[playerid][pi_NAME], PI[playerid][pi_ID],
			PROPERTY_INFO[slot][property_ID_INTERIOR], PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][1], PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][0], PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][3],
			PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][2], PROPERTY_INFO[slot][property_EXT_X], PROPERTY_INFO[slot][property_EXT_Y], PROPERTY_INFO[slot][property_EXT_Z], 
			PROPERTY_INFO[slot][property_EXT_ANGLE], PROPERTY_INFO[slot][property_EXT_INTERIOR]
		);
		SendDiscordMessage(""#DISCORD_HOUSE_LOG_CHANNEL"", str_text, true, "Propiedad creada Spain + RolePlay Android|PC", ""#PRIMARY_COLOR"", PI[playerid][pi_NAME], ""#DISCORD_DEFAULT_IMAGE"", ""#DISCORD_DEFAULT_IMAGE"");

		SendPlayerClientMessage(playerid, "Propiedad creada, id: %d (%d/%d).", PROPERTY_INFO[slot][property_ID], slot, MAX_PROPERTIES);
		ExitPlayerPropertyConstructor(playerid);
	}
	mysql_format
	(
		handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER,
		"\
			INSERT INTO properties (ext_x, ext_y, ext_z, ext_angle, ext_interior, ext_freeze, id_interior, price, level, extra, vip_level)\
			VALUES (%f, %f, %f, %f, %d, %d, %d, %d, %d, %d, %d);\
		",
			PROPERTY_INFO[slot][property_EXT_X], PROPERTY_INFO[slot][property_EXT_Y], PROPERTY_INFO[slot][property_EXT_Z], PROPERTY_INFO[slot][property_EXT_ANGLE], 
			PROPERTY_INFO[slot][property_EXT_INTERIOR], PROPERTY_INFO[slot][property_EXT_FREEZE], PROPERTY_INFO[slot][property_ID_INTERIOR],
			PROPERTY_INFO[slot][property_PRICE_BASE], PROPERTY_INFO[slot][property_LEVEL], PROPERTY_INFO[slot][property_EXTRA], PROPERTY_INFO[slot][property_VIP_LEVEL]
	);
	MySQL_TQueryInline(handle_db, using inline OnPropertyInserted, QUERY_BUFFER);
	return 1;
}

GetEmptyPropertySlot()
{
	for (new i = 0; i != MAX_PROPERTIES; i ++)
	{
		if (!PROPERTY_INFO[i][property_VALID]) return i;
	}
	return -1;
}

GivePlayerDrunkLevel(playerid, amount)
{
	return SetPlayerDrunkLevel(playerid, GetPlayerDrunkLevel(playerid) + amount);
}

stock Float:frandom(Float:max, Float:min, dp)
{
	new
		Float:mul = floatpower(10.0, dp),
		imin = floatround(min * mul),
		imax = floatround(max * mul);
	return float(random(imax - imin) + imin) / mul;
}

DisablePlayerTaxiMark(playerid)
{
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if (i == playerid) continue;
				if (GetPlayerState(i) != PLAYER_STATE_DRIVER) continue;
				if (!PLAYER_WORKS[i][WORK_TAXI][pwork_SET]) continue;
				if (PLAYER_TEMP[i][pt_WORKING_IN] != WORK_TAXI) continue;
				
				SetPlayerMarkerForPlayer(i, playerid, PLAYER_COLOR);
			}
		}
	}
	return 1;
}

SendAlertToTaxiDrivers(playerid)
{
	new Float:pos[3];
	GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
	
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if (i == playerid) continue;
				if (GetPlayerState(i) != PLAYER_STATE_DRIVER) continue;
				if (!PLAYER_WORKS[i][WORK_TAXI][pwork_SET]) continue;
				if (PLAYER_TEMP[i][pt_WORKING_IN] != WORK_TAXI) continue;
				
				SetPlayerMarkerForPlayer(i, playerid, 0xffcd25ff);
				SendPlayerClientMessage(i, "Hay un nuevo cliente solicitando un taxi, distancia: {"#PRIMARY_COLOR"}%.2f Km.", (GetPlayerDistanceFromPoint(i, pos[0], pos[1], pos[2]) * 0.01));
			}
		}
	}
	return 1;
}

SetNormalPlayerMarkers(playerid)
{
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			SetPlayerMarkerForPlayer(playerid, i, PLAYER_TEMP[i][pt_PLAYER_COLOR]);
		}
	}
	return 1;
}

LoadPlayerCrewInfo(playerid)
{
	if (PI[playerid][pi_ID] == 0) return 0;
	
	if (PI[playerid][pi_CREW])
	{
		new crew_index = GetCrewIndexById(PI[playerid][pi_CREW]);
		if (crew_index == -1)
		{
			PI[playerid][pi_CREW] = 0;
			PI[playerid][pi_CREW_RANK] = 0;
			PLAYER_TEMP[playerid][pt_CREW_INDEX] = 0;
			SendPlayerClientMessage(playerid, "La banda a la que pertenecías ya no existe.");

			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = NULL WHERE id = %d;", PI[playerid][pi_ID]);
			mysql_tquery(handle_db, QUERY_BUFFER);
		}
		else
		{
			PLAYER_TEMP[playerid][pt_CREW_INDEX] = crew_index;
			CREW_INFO[crew_index][crew_ONLINE_MEMBERS] ++;
		}
	}
	return 1;
}

LoadPlayerWorks(playerid)
{
	if (PI[playerid][pi_ID] == 0) return 0;
	
	inline OnPworksLoad()
	{
		new rows, count;
		if (cache_get_row_count(rows))
		{
			for (new i = 0; i != rows; i ++)
			{
				new work;
				cache_get_value_name_int(i, "id_work", work);
				cache_get_value_name_int(i, "set", PLAYER_WORKS[playerid][work][pwork_SET]);
				cache_get_value_name_int(i, "level", PLAYER_WORKS[playerid][work][pwork_LEVEL]);

				if (PLAYER_WORKS[playerid][work][pwork_SET] && !PI[playerid][pi_VIP])
				{
					if (count >= MAX_NU_WORKS)
					{
						PLAYER_WORKS[playerid][work][pwork_SET] = false;
						if (work == WORK_POLICE)
						{
							mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET `set` = 0, level = 0 WHERE id_player = %d AND id_work = %d;", PI[playerid][pi_ID], work);
							mysql_tquery(handle_db, QUERY_BUFFER);
							PLAYER_WORKS[playerid][work][pwork_LEVEL] = 0;
						}
						else
						{
							mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET `set` = 0 WHERE id_player = %d AND id_work = %d;", PI[playerid][pi_ID], work);
							mysql_tquery(handle_db, QUERY_BUFFER);
						}
					}
					count ++;
				}
				
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM pworks WHERE id_player = %d;", PI[playerid][pi_ID]);
	MySQL_TQueryInline(handle_db, using inline OnPworksLoad, QUERY_BUFFER);
	return 1;
}

ResetTruckInfo(vehicleid)
{
	new tmp_TRUCK_VEHICLE[TRUCK_VEHICLE_Info]; TRUCK_VEHICLE[vehicleid] = tmp_TRUCK_VEHICLE;
	return 1;
}

ResetPizzaInfo(vehicleid)
{
	new tmp_PIZZA_VEHICLE[PIZZA_VEHICLE_Info]; PIZZA_VEHICLE[vehicleid] = tmp_PIZZA_VEHICLE;
	return 1;
}

ResetTrashInfo(vehicleid)
{
	new tmp_TRASH_VEHICLES[TRASH_VEHICLES_INFO]; TRASH_VEHICLES[vehicleid] = tmp_TRASH_VEHICLES;
	
	TRASH_VEHICLES[vehicleid][trash_vehicle_DRIVER_ID] = INVALID_PLAYER_ID;
	TRASH_VEHICLES[vehicleid][trash_vehicle_PASSENGER_ID] = INVALID_PLAYER_ID;
	return 1;
}

forward TruckLoadUp(playerid, vehicleid);
public TruckLoadUp(playerid, vehicleid)
{
	if (PLAYER_TEMP[playerid][pt_TRUCK_LOADING_VALUE] < 100.0)
	{
		PLAYER_TEMP[playerid][pt_TRUCK_LOADING_VALUE] += 10.0;
		if (PLAYER_TEMP[playerid][pt_TRUCK_LOADING_VALUE] > 100.0) PLAYER_TEMP[playerid][pt_TRUCK_LOADING_VALUE] = 100.0;
		
		ShowPlayerMessage(playerid, "el camion se esta ~b~cargando");

		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][9]);
		PLAYER_TEMP[playerid][pt_TIMERS][9] = SetTimerEx("TruckLoadUp", 1000, false, "ii", playerid, vehicleid);
		return 1;
	}

	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 1;
	UpdateVehicleParams(vehicleid);
	
	TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADED] = true;
	TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADING] = false;
	TRUCK_VEHICLE[vehicleid][truck_vehicle_DELIVERED] = false;
	
	ShowPlayerMessage(playerid, "El camion ha sido cargado, dirígite al checkpoint para entregar la mercancia.");
	SetPlayerTruckCheckpoint(playerid, vehicleid);
	return 1;
}

forward TruckUnLoadUp(playerid, vehicleid);
public TruckUnLoadUp(playerid, vehicleid)
{
	if (PLAYER_TEMP[playerid][pt_TRUCK_LOADING_VALUE] < 100.0)
	{
		PLAYER_TEMP[playerid][pt_TRUCK_LOADING_VALUE] += 10.0;
		if (PLAYER_TEMP[playerid][pt_TRUCK_LOADING_VALUE] > 100.0) PLAYER_TEMP[playerid][pt_TRUCK_LOADING_VALUE] = 100.0;
		
		ShowPlayerMessage(playerid, "el camion se esta ~b~cargando");
		
		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][9]);
		PLAYER_TEMP[playerid][pt_TIMERS][9] = SetTimerEx("TruckUnLoadUp", 1000, false, "ii", playerid, vehicleid);
		return 1;
	}
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 1;
	UpdateVehicleParams(vehicleid);
	
	TRUCK_VEHICLE[vehicleid][truck_vehicle_UNLOADING] = false;
	TRUCK_VEHICLE[vehicleid][truck_vehicle_DELIVERED] = true;
	
	SendPlayerClientMessage(playerid, "La mercancía ha sido entregada, regresa al punto de partida para cobrar.");
	SetPlayerTruckCheckpoint(playerid, vehicleid);
	return 1;
}

SetPlayerTruckCheckpoint(playerid, vehicleid)
{
	if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT]))
	{
		DestroyDynamicCP(PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT]);
		PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT] = INVALID_STREAMER_ID;
	}

	if (TRUCK_VEHICLE[vehicleid][truck_vehicle_DELIVERED])
	{
		PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT] = CreateDynamicCP(Truck_Return_Positions[0], Truck_Return_Positions[1], Truck_Return_Positions[2], 5.0, 0, 0, playerid, 9999999999.0);
		
		new info[1];
		info[0] = CHECKPOINT_TYPE_FINISH_TRUCK;
		Streamer_SetArrayData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	}
	else
	{
		PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT] = CreateDynamicCP(Truck_Contents[ TRUCK_VEHICLE[vehicleid][truck_vehicle_POINT] ][truck_content_X], Truck_Contents[ TRUCK_VEHICLE[vehicleid][truck_vehicle_POINT] ][truck_content_Y], Truck_Contents[ TRUCK_VEHICLE[vehicleid][truck_vehicle_POINT] ][truck_content_Z], 5.0, 0, 0, playerid, 9999999999.0);
		
		new info[1];
		info[0] = CHECKPOINT_TYPE_UNLOAD_TRUCK;
		Streamer_SetArrayData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	}
	Streamer_Update(playerid, STREAMER_TYPE_CP);
	return 1;
}

VehiclePaintjob(modelid)
{
	switch(modelid)
	{
		case 483: return 1;
		case 534..536: return 3;
		case 558..562: return 3;
		case 565, 567: return 3;
		case 575: return 2;
		case 576: return 3;
	}
	return false;
}

Set_HARVEST_Checkpoint(playerid)
{
	if (IsValidDynamicRaceCP(PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT]))
	{
		DestroyDynamicRaceCP(PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT]);
		PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	
	if (PLAYER_TEMP[playerid][pt_HARVERT_PROCCESS] == sizeof(HARVEST_CHECKPOINTS) - 1)
	{
		PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT] =	CreateDynamicRaceCP
														(
															1,
															HARVEST_CHECKPOINTS[ PLAYER_TEMP[playerid][pt_HARVERT_PROCCESS] ][0],
															HARVEST_CHECKPOINTS[ PLAYER_TEMP[playerid][pt_HARVERT_PROCCESS] ][1],
															HARVEST_CHECKPOINTS[ PLAYER_TEMP[playerid][pt_HARVERT_PROCCESS] ][2],
															0.0,
															0.0,
															0.0,
															5.0, 
															0,
															0,
															playerid
														);
	}
	else
	{
		PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT] =	CreateDynamicRaceCP
														(
															0,
															HARVEST_CHECKPOINTS[ PLAYER_TEMP[playerid][pt_HARVERT_PROCCESS] ][0],
															HARVEST_CHECKPOINTS[ PLAYER_TEMP[playerid][pt_HARVERT_PROCCESS] ][1],
															HARVEST_CHECKPOINTS[ PLAYER_TEMP[playerid][pt_HARVERT_PROCCESS] ][2],
															HARVEST_CHECKPOINTS[ PLAYER_TEMP[playerid][pt_HARVERT_PROCCESS] + 1 ][0],
															HARVEST_CHECKPOINTS[ PLAYER_TEMP[playerid][pt_HARVERT_PROCCESS] + 1 ][1],
															HARVEST_CHECKPOINTS[ PLAYER_TEMP[playerid][pt_HARVERT_PROCCESS] + 1 ][2],
															5.0, 
															0,
															0,
															playerid
														);
	}
	
	new info[1];
	info[0] = CHECKPOINT_TYPE_HARVEST;
	Streamer_SetArrayData(STREAMER_TYPE_RACE_CP, PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	
	return 1;
}

public OnPlayerEnterDynamicRaceCP(playerid, checkpointid)
{
	new info[1];
	Streamer_GetArrayData(STREAMER_TYPE_RACE_CP, checkpointid, E_STREAMER_EXTRA_ID, info);
	
	switch(info[0])
	{
		case CHECKPOINT_TYPE_HARVEST:
		{
			if (PLAYER_TEMP[playerid][pt_HARVERT_PROCCESS] == sizeof(HARVEST_CHECKPOINTS) - 1)
			{
				new vehicleid = GetPlayerVehicleID(playerid);
				if (vehicleid == INVALID_VEHICLE_ID) return 1;
				
				new work_extra_payment;
				if (work_info[WORK_HARVESTER][work_info_EXTRA_PAY] > 0 && work_info[WORK_HARVESTER][work_info_EXTRA_PAY_EXP] > 0)
				{
					work_extra_payment = (work_info[WORK_HARVESTER][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[playerid][WORK_HARVESTER][pwork_LEVEL], work_info[WORK_HARVESTER][work_info_EXTRA_PAY_EXP])));
					if (work_info[WORK_HARVESTER][work_info_EXTRA_PAY_LIMIT] != 0) if (work_extra_payment > work_info[WORK_HARVESTER][work_info_EXTRA_PAY_LIMIT]) work_extra_payment = work_info[WORK_HARVESTER][work_info_EXTRA_PAY_LIMIT];
					
					if (PI[playerid][pi_VIP]) work_extra_payment += VIP_WORK_EXTRA_PAY;
				}
				
				new RandomLoot[] = {1, 0, 0, 3, 0, 0, 0, 1, 0, 0, 1, 0, 2, 0, 0};
				new Knife_Values[] = {5, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100};

				switch(RandomLoot[ random(sizeof(RandomLoot)) ]) {
					case 1: {
						new pocket_slot = GetPlayerValidInventoryPocket(playerid);
						if (pocket_slot != -1) {
							j_PocketInfo[playerid][pocket_slot][pValid] = true;
							j_PocketInfo[playerid][pocket_slot][pType] = INVENTORY_TYPE_WEAPON_KNIFE;
							j_PocketInfo[playerid][pocket_slot][pExtra] = Knife_Values[ random(sizeof(Knife_Values)) ];
							InsertPlayerInventorySlot(playerid, pocket_slot);

							ShowPlayerMessage(playerid, "CUCHILLO");
						}
					}
				}

				new money = 1024;
				if (PI[playerid][pi_VIP]) money = 1786;
				GivePlayerCash(playerid, money, true, false);
				
				PLAYER_WORKS[playerid][WORK_HARVESTER][pwork_LEVEL] ++;
				SendPlayerClientMessage(playerid, "Has ganado %s$ con esta cosecha.", number_format_thousand(money));
				
				CallLocalFunction("EndPlayerJob", "iib", playerid, PLAYER_TEMP[playerid][pt_WORKING_IN], true);
				return 1;
			}
			
			new str[50];
			format(str, sizeof str, "~n~~n~~n~~n~~n~~n~~n~~w~checkpoint_~y~%d/%d", PLAYER_TEMP[playerid][pt_HARVERT_PROCCESS] + 1, sizeof(HARVEST_CHECKPOINTS));
			GameTextForPlayer(playerid, str, 2000, 3);
			
			PLAYER_TEMP[playerid][pt_HARVERT_PROCCESS] ++;
			Set_HARVEST_Checkpoint(playerid);
		}
		case CHECKPOINT_TYPE_DRIVING_SCHOOL: {
			if (GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][gb_vehicle_TYPE] == VEHICLE_TYPE_DRIVING_SCHOOL) {
				if (PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] == sizeof(Driving_School_Points) - 1) {
					new Float:angle;
					GetVehicleZAngle(PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID], angle);
					if (angle > 180.0) angle -= 360.0;

					if (angle > (Driving_School_Points[ PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] ][3] - 15.0) && angle < (Driving_School_Points[ PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] ][3] + 15.0)) {
						new Float:vhealth;
						GetVehicleHealth(PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID], vhealth);

						if (vhealth >= 800.0) {
							PI[playerid][pi_DRIVE_LICENSE] = 1;
							ShowPlayerMessage(playerid, "te has sacado el ~y~carnet de conducir~w~.");
						}
						else ShowPlayerMessage(playerid, "No has superado el ~r~examen~w~.");

						if (IsValidDynamicRaceCP(PLAYER_TEMP[playerid][pt_DL_EXAM_CP]))
						{
							DestroyDynamicRaceCP(PLAYER_TEMP[playerid][pt_DL_EXAM_CP]);
							PLAYER_TEMP[playerid][pt_DL_EXAM_CP] = INVALID_STREAMER_ID;
						}

						PLAYER_TEMP[playerid][pt_DL_EXAM] = false;
						PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] = 0;

						DestroyVehicleEx(PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID]);
					} else {
						ShowPlayerMessage(playerid, "Coloca el vehiculo en la ~b~posicion correcta~w~.");
					}

					PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
					return 1;
				}

				if (GetVehicleSpeed(PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID]) > 60.0) return ShowPlayerMessage(playerid, "Disminuye la ~b~velocidad~w~.");
				
				PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] ++;
				PlayerPlaySoundEx(playerid, 1058, 0.0, 0.0, 0.0);
				SetPlayerDrivingSchoolCP(playerid);
			}
		}
	}
	return 1;
}

SetPlayerTrashCheckpoint(playerid, vehicleid)
{
	DestroyPlayerTrashCheckpoint(playerid);
	
	new cp = TRASH_VEHICLES[ vehicleid ][trash_vehicle_CP];
	new route = TRASH_VEHICLES[ vehicleid ][trash_vehicle_ROUTE];
	
	if (cp >= TRASH_OBJECTS[route][trash_route_OBJECTS])
	{
		PLAYER_TEMP[playerid][pt_TRASH_CHECKPOINT] = CreateDynamicCP(-1872.575073, -1720.129394, 22.30542, 5.0, 0, 0, playerid, 9999999999.0);
		new info[1];
		info[0] = CHECKPOINT_TYPE_FINISH_TRASH;
		Streamer_SetArrayData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_TRASH_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	}
	else
	{
		PLAYER_TEMP[playerid][pt_TRASH_CHECKPOINT] = CreateDynamicCP(TRASH_OBJECTS[ route ][trash_object_X][ cp ], TRASH_OBJECTS[ route ][trash_object_Y][ cp ], TRASH_OBJECTS[ route ][trash_object_Z][ cp ], 1.5, 0, 0, playerid, 9999999999.0);
		
		new info[1];
		info[0] = CHECKPOINT_TYPE_TRASH;
		Streamer_SetArrayData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_TRASH_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	}
	return 1;
}

DestroyPlayerTrashCheckpoint(playerid)
{
	if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_TRASH_CHECKPOINT]))
	{
		DestroyDynamicCP(PLAYER_TEMP[playerid][pt_TRASH_CHECKPOINT]);
		PLAYER_TEMP[playerid][pt_TRASH_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	return 1;
}

CancelTrashWork(driver, mate, vehicleid)
{
	DestroyPlayerTrashCheckpoint(driver);
	DestroyPlayerTrashCheckpoint(mate);
	
	DestroyPlayerTrashRouteObjects(driver);
	DestroyPlayerTrashRouteObjects(mate);
	
	PLAYER_TEMP[driver][pt_TRASH_DRIVER] = false;
	PLAYER_TEMP[driver][pt_TRASH_PASSENGER] = false;
	PLAYER_TEMP[driver][pt_TRASH_VEHICLE_ID] = INVALID_VEHICLE_ID;
	
	PLAYER_TEMP[mate][pt_TRASH_DRIVER] = false;
	PLAYER_TEMP[mate][pt_TRASH_PASSENGER] = false;
	PLAYER_TEMP[mate][pt_TRASH_VEHICLE_ID] = INVALID_VEHICLE_ID;
	
	KillTimer(PLAYER_TEMP[mate][pt_TIMERS][10]);
	PlayerTextDrawHide(mate, PlayerTextdraws[mate][ptextdraw_RECYCLE_TRASH][0]);
	PlayerTextDrawHide(mate, PlayerTextdraws[mate][ptextdraw_RECYCLE_TRASH][1]);
	PlayerTextDrawHide(mate, PlayerTextdraws[mate][ptextdraw_RECYCLE_TRASH][2]);
	ClearAnimations(mate);
	TogglePlayerControllableEx(mate, true);
	
	ResetTrashInfo(vehicleid);
	SetVehicleToRespawnEx(vehicleid);
	return 1;
}

UpdatePlayerTrashRecycleSize(playerid)
{
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2], 0.0, PLAYER_TEMP[playerid][pt_RECYCLE_BIN_VALUE] * 1.3);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2]);
	return 1;
}

forward RecycleUp(playerid);
public RecycleUp(playerid)
{
	if (PLAYER_TEMP[playerid][pt_RECYCLE_BIN_VALUE] < 100.0)
	{
		PLAYER_TEMP[playerid][pt_RECYCLE_BIN_VALUE] += 15.0;
		if (PLAYER_TEMP[playerid][pt_RECYCLE_BIN_VALUE] > 100.0) PLAYER_TEMP[playerid][pt_RECYCLE_BIN_VALUE] = 100.0;
		
		ApplyAnimation(playerid, "ROB_BANK", "CAT_Safe_Rob", 4.1, true, false, false, false, 0);
		UpdatePlayerTrashRecycleSize(playerid);
		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][10]);
		PLAYER_TEMP[playerid][pt_TIMERS][10] = SetTimerEx("RecycleUp", 1000, false, "i", playerid);
		return 1;
	}
	
	TogglePlayerControllableEx(playerid, true);
	ClearAnimations(playerid);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][0]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][1]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_RECYCLE_TRASH][2]);
	
	new driver = TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID];
	new cp = TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_CP];
	new route = TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE];
	
	DestroyDynamicObject(TRASH_PLAYER_OBJECTS[playerid][cp]);
	TRASH_PLAYER_OBJECTS[playerid][cp] = INVALID_STREAMER_ID;
	
	DestroyDynamicObject(TRASH_PLAYER_OBJECTS[driver][cp]);
	TRASH_PLAYER_OBJECTS[driver][cp] = INVALID_STREAMER_ID;
	
	CreatePlayerFlashObject(
								playerid, 
								TRASH_OBJECTS[ route ][trash_object_X][ cp ],
								TRASH_OBJECTS[ route ][trash_object_Y][ cp ],
								TRASH_OBJECTS[ route ][trash_object_Z][ cp ] - 1.5
							);
	
	CreatePlayerFlashObject(
								driver, 
								TRASH_OBJECTS[ route ][trash_object_X][ cp ],
								TRASH_OBJECTS[ route ][trash_object_Y][ cp ],
								TRASH_OBJECTS[ route ][trash_object_Z][ cp ] - 1.5
							);
							
	PlayerPlaySoundEx(playerid, 1190, 0.0, 0.0, 0.0);
	
	TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_CP] ++;
	if (TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_CP] >= TRASH_OBJECTS[ TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_ROUTE] ][trash_route_OBJECTS])
	{
		SendPlayerClientMessage(playerid, "Sube al camión para volver al vertedero y recibir la paga.");
		SendPlayerClientMessage(driver, "Espera a que se suba tu compañero y vuelve al vertedero para recibir la paga.");
	}
	else SendPlayerClientMessage(playerid, "Sube al camión y sigue con la ruta.");

	SetPlayerTrashCheckpoint(driver, PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID]);
	SetPlayerTrashCheckpoint(playerid, PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID]);
	
	Streamer_Update(driver);
	Streamer_Update(playerid);
	UpdateInvObjInBody(playerid);
	return 1;
}

CancelLumberjackWork(playerid)
{
	if (PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] != -1)
	{
		DestroyDynamicObject(LUMBER_TREES[ PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_OBJECT_ID]);
		LUMBER_TREES[ PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_OBJECT_ID] = CreateDynamicObject(LUMBER_TREES[ PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_MODELID], LUMBER_TREES[ PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_X], LUMBER_TREES[ PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_Y], LUMBER_TREES[ PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_Z], LUMBER_TREES[ PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_RX], LUMBER_TREES[ PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_RY], LUMBER_TREES[ PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_RZ], 0, 0);
		LUMBER_TREES[ PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_STATE] = LUMBER_TREE_STATE_NORMAL;
		
		new label_str[256];
		format(label_str, sizeof label_str, "{f46530}Árbol (%d)\n\n{F5F5F5}Pulsa {f9d834}F {F5F5F5}para talar el árbol.", PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE]);
		UpdateDynamic3DTextLabelText(LUMBER_TREES[ PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] ][lumber_tree_LABEL], -1, label_str);
	}
	
	if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT]))
	{
		DestroyDynamicCP(PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT]);
		PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	
	RemovePlayerAttachedObject(playerid, 2);
	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][11]);
	//ClearAnimations(playerid);
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	TogglePlayerControllable(playerid, true);
	PLAYER_TEMP[playerid][pt_PLAYER_CARRYING_TREE] = false;
	PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] = -1;
	UpdateInvObjInBody(playerid);
	return 1;
}

forward LumberjackUp(playerid, tree);
public LumberjackUp(playerid, tree)
{
	if (PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE_PROG] < 100.0)
	{
		PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE_PROG] += frandom(12.0, 8.0, 2);
		if (PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE_PROG] > 100.0) PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE_PROG] = 100.0;
		
		SetPlayerArmedWeapon(playerid, 9);
		ApplyAnimation(playerid, "CHAINSAW", "WEAPON_csaw", 4.1, true, false, false, false, 0);
		
		new label_str[256];
		format(label_str, sizeof label_str, "{f46530}Árbol (%d)\n\n{F5F5F5}Talando... {CCCCCC}(%.1f%%)", tree, PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE_PROG]);
		UpdateDynamic3DTextLabelText(LUMBER_TREES[ tree ][lumber_tree_LABEL], -1, label_str);
		
		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][11]);
		PLAYER_TEMP[playerid][pt_TIMERS][11] = SetTimerEx("LumberjackUp", 2000, false, "ii", playerid, tree);
		return 1;
	}
	
	GetPlayerFacingAngle(playerid, PI[playerid][pi_ANGLE]);
	SetDynamicObjectRot(LUMBER_TREES[ tree ][lumber_tree_OBJECT_ID], LUMBER_TREES[ tree ][lumber_tree_RX], LUMBER_TREES[ tree ][lumber_tree_RY], PI[playerid][pi_ANGLE]);	
	MoveDynamicObject(LUMBER_TREES[ tree ][lumber_tree_OBJECT_ID], LUMBER_TREES[ tree ][lumber_tree_X], LUMBER_TREES[ tree ][lumber_tree_Y], LUMBER_TREES[ tree ][lumber_tree_Z] + 0.01, 0.0065, -85.0, 0.0, PI[playerid][pi_ANGLE]);
	
	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][11]);
	PLAYER_TEMP[playerid][pt_TIMERS][11] = SetTimerEx("ContinueTreeAnimation", 1400, false, "iif", playerid, tree, PI[playerid][pi_ANGLE]);
	
	ClearAnimations(playerid);
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	TogglePlayerControllable(playerid, true);
	UpdateInvObjInBody(playerid);
	return 1;
}

forward ContinueTreeAnimation(playerid, tree, Float:rotation);
public ContinueTreeAnimation(playerid, tree, Float:rotation)
{
	new Float:pos[3];
	pos[0] = LUMBER_TREES[ tree ][lumber_tree_X];
	pos[1] = LUMBER_TREES[ tree ][lumber_tree_Y];
	pos[2] = LUMBER_TREES[ tree ][lumber_tree_Z];
	
	pos[0] += (1.5 * floatsin(-rotation, degrees));
	pos[1] += (1.5 * floatcos(-rotation, degrees));
	
	CreateFlashObject(pos[0], pos[1], pos[2] - 0.4);
	DestroyDynamicObject(LUMBER_TREES[ tree ][lumber_tree_OBJECT_ID]);
	PlayerPlaySound(playerid, 1190, 0.0, 0.0, 0.0);
	
	LUMBER_TREES[ tree ][lumber_tree_OBJECT_ID] = CreateDynamicObject(841, pos[0], pos[1], pos[2] + 0.2, 0.0, 0.0, rotation, 0, 0);
	
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_CARRY);
	PLAYER_TEMP[playerid][pt_PLAYER_CARRYING_TREE] = true;
	PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] = -1;
	
	if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT]))
	{
		DestroyDynamicCP(PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT]);
		PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT] = CreateDynamicCP(-504.353912, -88.591995, 62.086818, 5.0, 0, 0, playerid, 9999999999.0);
	
	new info[1];
	info[0] = CHECKPOINT_TYPE_LUMBERJACK;
	Streamer_SetArrayData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	
	SendPlayerClientMessage(playerid, "{CCCCCC}Ve a llevar la leña al punto marcado para recibir la paga.");
	
	
	LUMBER_TREES[ tree ][lumber_tree_GROW_COUNTER] = 90;
	new label_str[256];
	format(label_str, sizeof label_str, "{f46530}Árbol (%d)\n\n{999999}(%s)", tree, TimeConvert(LUMBER_TREES[ tree ][lumber_tree_GROW_COUNTER]));
	UpdateDynamic3DTextLabelText(LUMBER_TREES[ tree ][lumber_tree_LABEL], -1, label_str);
	
	LUMBER_TREES[ tree ][lumber_tree_STATE] = LUMBER_TREE_STATE_CUTTED;
	KillTimer(LUMBER_TREES[ tree ][lumber_tree_GROW_TIMER]);
	LUMBER_TREES[ tree ][lumber_tree_GROW_TIMER] = SetTimerEx("GrowTreeUp", 1000, false, "i", tree);
	
	Streamer_Update(playerid);
	UpdateInvObjInBody(playerid);
	return 1;
}

forward GrowTreeUp(tree);
public GrowTreeUp(tree)
{
	if (LUMBER_TREES[ tree ][lumber_tree_STATE] != LUMBER_TREE_STATE_CUTTED) return 0;
	
	if (LUMBER_TREES[ tree ][lumber_tree_GROW_COUNTER] > 0)
	{
		LUMBER_TREES[ tree ][lumber_tree_GROW_COUNTER] --;
		new label_str[256];
		format(label_str, sizeof label_str, "{f46530}Árbol (%d)\n\n{999999}(%s)", tree, TimeConvert(LUMBER_TREES[ tree ][lumber_tree_GROW_COUNTER]));
		UpdateDynamic3DTextLabelText(LUMBER_TREES[ tree ][lumber_tree_LABEL], -1, label_str);
		
		KillTimer(LUMBER_TREES[ tree ][lumber_tree_GROW_TIMER]);
		LUMBER_TREES[ tree ][lumber_tree_GROW_TIMER] = SetTimerEx("GrowTreeUp", 1000, false, "i", tree);
		return 1;
	}
	
	DestroyDynamicObject(LUMBER_TREES[ tree ][lumber_tree_OBJECT_ID]);
	LUMBER_TREES[ tree ][lumber_tree_OBJECT_ID] = CreateDynamicObject(LUMBER_TREES[ tree ][lumber_tree_MODELID], LUMBER_TREES[ tree ][lumber_tree_X], LUMBER_TREES[ tree ][lumber_tree_Y], LUMBER_TREES[ tree ][lumber_tree_Z], LUMBER_TREES[ tree ][lumber_tree_RX], LUMBER_TREES[ tree ][lumber_tree_RY], LUMBER_TREES[ tree ][lumber_tree_RZ], 0, 0);
	LUMBER_TREES[ tree ][lumber_tree_STATE] = LUMBER_TREE_STATE_NORMAL;

	new label_str[256];
	format(label_str, sizeof label_str, "{f46530}Árbol (%d)\n\n{F5F5F5}Pulsa {f9d834}F {F5F5F5}para talar el árbol.", tree);
	UpdateDynamic3DTextLabelText(LUMBER_TREES[ tree ][lumber_tree_LABEL], -1, label_str);
	return 1;
}

CreateFlashObject(Float:x, Float:y, Float:z)
{
	new oid = CreateObject(18680, x, y, z, 0.0, 0.0, 0.0);
	SetTimerEx("DestroyFlashObject", 1000, false, "i", oid);
	return 1;
}

forward DestroyFlashObject(objectid);
public DestroyFlashObject(objectid)
{
	return DestroyObject(objectid);
}

ShowPlayerInventory(playerid, pid)
{
	if (!IsPlayerConnected(pid)) return 0;
	if (PI[pid][pi_ID] == 0) return 0;

	for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
	for (new i = 0; i != MAX_LISTITEMS; i ++) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM_EX][i] = -1;
	
	new listitem, caption[48], dialog[1800], line_str[128];

	if (playerid != pid) format(caption, sizeof caption, "Inventario de %s", PLAYER_TEMP[pid][pt_NAME]);
	else format(caption, sizeof caption, "Inventario");

	format(line_str, sizeof line_str, "{f5f5f5}Dinero {f5f5f5}(%s{"#GREEN_COLOR"}${f5f5f5})\n", number_format_thousand(PI[pid][pi_CASH]));
	strcat(dialog, line_str);

	listitem ++;
	
	if (PI[pid][pi_PHONE_NUMBER]) {
		format(line_str, sizeof line_str, "Teléfono {f5f5f5}(%d)\n", PI[pid][pi_PHONE_NUMBER]);
		strcat(dialog, line_str);

		listitem ++;
	}

	if (PI[pid][pi_DRIVE_LICENSE])
	{
		format(line_str, sizeof line_str, "Licencia de conducir: {f5f5f5}Auto\n");
		strcat(dialog, line_str);

		listitem ++;
	}

	if (PI[pid][pi_GPS]) {
		strcat(dialog, "GPS\n");

		listitem ++;
	}
	if (PI[pid][pi_PHONE_RESOLVER]) {
		strcat(dialog, "Guía telefónica\n");

		listitem ++;
	}
	
	if (PI[pid][pi_MECHANIC_PIECES] > 0)
	{
		format(line_str, sizeof line_str, "Piezas de mecánico {f5f5f5}(%s)\n", number_format_thousand(PI[pid][pi_MECHANIC_PIECES]));
		strcat(dialog, line_str);

		listitem ++;
	}
	
	if (PI[pid][pi_SEED_MEDICINE] > 0)
	{
		format(line_str, sizeof line_str, "{"#GREEN_COLOR"}Semillas de medicina {f5f5f5}(%d)\n", PI[pid][pi_SEED_MEDICINE]);
		strcat(dialog, line_str);

		listitem ++;
	}
	
	if (PI[pid][pi_SEED_CANNABIS] > 0)
	{
		format(line_str, sizeof line_str, "{"#RED_COLOR"}Semillas de marihuana {f5f5f5}(%d)\n", PI[pid][pi_SEED_CANNABIS]);
		strcat(dialog, line_str);

		listitem ++;
	}
	
	if (PI[pid][pi_SEED_CRACK] > 0)
	{
		format(line_str, sizeof line_str, "{"#RED_COLOR"}Semillas de coca {f5f5f5}(%d)\n", PI[pid][pi_SEED_CRACK]);
		strcat(dialog, line_str);

		listitem ++;
	}
	
	if (PI[pid][pi_MEDICINE] > 0)
	{
		format(line_str, sizeof line_str, "{"#GREEN_COLOR"}Medicamentos {f5f5f5}(%dg)\n", PI[pid][pi_MEDICINE]);
		strcat(dialog, line_str);

		listitem ++;
	}
	
	if (PI[pid][pi_CANNABIS] > 0)
	{
		format(line_str, sizeof line_str, "{"#RED_COLOR"}Marihuana {f5f5f5}(%dg)\n", PI[pid][pi_CANNABIS]);
		strcat(dialog, line_str);

		listitem ++;
	}
	
	if (PI[pid][pi_CRACK] > 0)
	{
		format(line_str, sizeof line_str, "{"#RED_COLOR"}Crack {f5f5f5}(%dg)\n", PI[pid][pi_CRACK]);
		strcat(dialog, line_str);

		listitem ++;
	}

	strcat(dialog, "{cccccc}» Ver inventario");
	PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = -2;
	PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM_EX][listitem] = pid;
	listitem ++;

	Dialog_Show(playerid, "InventoryPlayerResponse", DIALOG_STYLE_LIST, caption, dialog, "»Continuar", "xSalir");
	return 1;
}

ShowPlayerSkills(playerid, pid)
{
	if (!IsPlayerConnected(pid)) return 0;
	if (PI[pid][pi_ID] == 0) return 0;
	
	new caption[48], line_str[80], dialog[sizeof line_str * (sizeof(work_info) + 5)];
	format(caption, sizeof caption, "Experiencia de %s", PLAYER_TEMP[pid][pt_NAME]);
	
	strcat(dialog, "{"#BLUE_COLOR"}CUENTA\n");
	format(line_str, sizeof line_str, "{f5f5f5}Nivel: {"#PRIMARY_COLOR"}%d\n", PI[pid][pi_LEVEL]);
	strcat(dialog, line_str);
	
	format(line_str, sizeof line_str, "{f5f5f5}Reputación: {"#PRIMARY_COLOR"}%d/%d\n", PI[pid][pi_REP], neccessary_rep[ PI[playerid][pi_LEVEL] ]);
	strcat(dialog, line_str);
	
	new Float:hours;
	ConvertTime_SecondsToHoursFloat(PI[pid][pi_TIME_PLAYING], hours);
	format(line_str, sizeof line_str, "{f5f5f5}Horas de juego: {"#PRIMARY_COLOR"}%.1f horas\n", hours);
	strcat(dialog, line_str);
	
	strcat(dialog, "\n{"#BLUE_COLOR"}TRABAJOS\n");
	
	for (new i = 1; i != sizeof work_info; i ++)
	{
		if (i == WORK_POLICE)
		{
			if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
			{
				format(line_str, sizeof line_str, "{f5f5f5}%c%s: {"#PRIMARY_COLOR"}%s\n", toupper(work_info[i][work_info_NAME][0]), work_info[i][work_info_NAME][1], POLICE_RANKS[PLAYER_WORKS[pid][i][pwork_LEVEL]]);
				strcat(dialog, line_str);
			}
		}
		else
		{
			format(line_str, sizeof line_str, "{f5f5f5}%c%s: {"#PRIMARY_COLOR"}%s\n", toupper(work_info[i][work_info_NAME][0]), work_info[i][work_info_NAME][1], number_format_thousand(PLAYER_WORKS[pid][i][pwork_LEVEL]));
			strcat(dialog, line_str);
		}
	}
	
	ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, caption, dialog, "Cerrar", "");	
	return 1;
}

stock ConvertTime_SecondsToHoursFloat(sec, &Float:hours)
{
	hours = floatdiv(float(sec), 3600);
   	return 1;
}

CreatePlayerTrashRouteObjects(playerid, route)
{
	for (new i = 0; i != MAX_OBJECTS_PER_ROUTE; i ++)
	{
		TRASH_PLAYER_OBJECTS[playerid][i] = INVALID_STREAMER_ID;
		
		if (TRASH_OBJECTS[route][trash_object_MODELID][i] != 0)
		{
			TRASH_PLAYER_OBJECTS[playerid][i] = CreateDynamicObject(TRASH_OBJECTS[route][trash_object_MODELID][i], TRASH_OBJECTS[route][trash_object_X][i], TRASH_OBJECTS[route][trash_object_Y][i], TRASH_OBJECTS[route][trash_object_Z][i], TRASH_OBJECTS[route][trash_object_RX][i], TRASH_OBJECTS[route][trash_object_RY][i], TRASH_OBJECTS[route][trash_object_RZ][i], 0, 0, playerid);
		}
	}
	return 1;
}

DestroyPlayerTrashRouteObjects(playerid)
{
	for (new i = 0; i != MAX_OBJECTS_PER_ROUTE; i ++)
	{
		if (TRASH_PLAYER_OBJECTS[playerid][i] != INVALID_STREAMER_ID) DestroyDynamicObject(TRASH_PLAYER_OBJECTS[playerid][i]);
		TRASH_PLAYER_OBJECTS[playerid][i] = INVALID_STREAMER_ID;
	}
	return 1;
}

CreatePlayerFlashObject(playerid, Float:x, Float:y, Float:z)
{
	new oid = CreatePlayerObject(playerid, 18680, x, y, z, 0.0, 0.0, 0.0);
	SetTimerEx("DestroyPlayerFlashObject", 1000, false, "ii", playerid, oid);
	return 1;
}

forward DestroyPlayerFlashObject(playerid, objectid);
public DestroyPlayerFlashObject(playerid, objectid)
{
	return DestroyPlayerObject(playerid, objectid);
}

GetVehicleFirstPassenger(vehicleid)
{
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if (GetPlayerState(i) == PLAYER_STATE_PASSENGER)
			{
				if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL)
				{
					if (GetPlayerVehicleID(i) == vehicleid)
					{
						return i;
					}
				}
			}
		}
	}
	return INVALID_PLAYER_ID;
}


UpdatePlantSizeTextdrawPlant(playerid)
{	
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2], 260.0 + ( PLAYER_TEMP[playerid][pt_PLANTING_PROGRESS] * 1.2), 0.000000);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2]);
	return 1;
}

CancelPlayerPlanting(playerid)
{
	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][12]);
	PLAYER_TEMP[playerid][pt_PLANTING] = false;
	PLAYER_TEMP[playerid][pt_PLANTING_PROGRESS] = 0.0;
	
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][3]);
	
	TogglePlayerControllable(playerid, true);
	ClearAnimations(playerid);
	return 1;
}

forward PlantingUp(playerid, seeds);
public PlantingUp(playerid, seeds)
{
	if (PLAYER_TEMP[playerid][pt_PLANTING_PROGRESS] < 100.0)
	{
		PLAYER_TEMP[playerid][pt_PLANTING_PROGRESS] += floatdiv(50, seeds);
		if (PLAYER_TEMP[playerid][pt_PLANTING_PROGRESS] > 100.0) PLAYER_TEMP[playerid][pt_PLANTING_PROGRESS] = 100.0;
		
		ApplyAnimation(playerid, "BOMBER", "BOM_Plant_Loop", 4.1, true, false, false, false, 0);
		UpdatePlantSizeTextdrawPlant(playerid);
		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][12]);
		PLAYER_TEMP[playerid][pt_TIMERS][12] = SetTimerEx("PlantingUp", 1000, false, "id", playerid, seeds);
		return 1;
	}
	
	PLAYER_TEMP[playerid][pt_WORKING_IN] = WORK_NONE;
	PLAYER_TEMP[playerid][pt_PLANTING] = false;
	PLAYER_TEMP[playerid][pt_PLANTING_PROGRESS] = 0.0;
	
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][0]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][1]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][2]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_PLANT_PLANT][3]);
	
	TogglePlayerControllable(playerid, true);
	ClearAnimations(playerid);
	
	new index = GetAvaiblePlantIndex();
	if (index == -1)
	{	
		switch(seed_info[ PLAYER_TEMP[playerid][pt_PLANTING_PLANT_SELECTED] ][seed_info_PLANT_TYPE])
		{
			case PLANT_TYPE_MEDICINE: PI[playerid][pi_SEED_MEDICINE] += plant_info[ PLAYER_TEMP[playerid][pt_PLANTING_PLANT_SELECTED] ][plant_info_SEEDS];
			case PLANT_TYPE_CANNABIS: PI[playerid][pi_SEED_CANNABIS] += plant_info[ PLAYER_TEMP[playerid][pt_PLANTING_PLANT_SELECTED] ][plant_info_SEEDS];
			case PLANT_TYPE_CRACK: PI[playerid][pi_SEED_CRACK] += plant_info[ PLAYER_TEMP[playerid][pt_PLANTING_PLANT_SELECTED] ][plant_info_SEEDS];
		}
				
		SendPlayerClientMessage(playerid, "{999999}No queda espacio para más plantas, te hemos devuelto las semillas. Prueba más tarde.");
		return 1;
	}
	
	GetPlayerPos(playerid, PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z]);
	GetPlayerFacingAngle(playerid, PI[playerid][pi_ANGLE]);
	PI[playerid][pi_POS_X] += (1.0 * floatsin(-PI[playerid][pi_ANGLE], degrees));
	PI[playerid][pi_POS_Y] += (1.0 * floatcos(-PI[playerid][pi_ANGLE], degrees));
	PI[playerid][pi_POS_Z] -= 0.75;
	
	PLANTS[index][plant_VALID] = true;
	PLANTS[index][plant_GROWING] = true;
	PLANTS[index][plant_INVISIBLE] = true;
	PLANTS[index][plant_GROWING_PROGRESS] = frandom(8.0, 5.0, 2);
	PLANTS[index][plant_TYPE] = PLAYER_TEMP[playerid][pt_PLANTING_PLANT_SELECTED];
	PLANTS[index][plant_PLANTED_BY_ACCOUNT_ID] = PI[playerid][pi_ID];
	format(PLANTS[index][plant_PLANTED_BY_NAME], 24, "%s", PLAYER_TEMP[playerid][pt_NAME]);

	PLANTS[index][plant_OBJECT_ID] = CreateDynamicObject(plant_info[ PLAYER_TEMP[playerid][pt_PLANTING_PLANT_SELECTED] ][plant_info_MODEL], PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z] + 0.7, 0.0, 0.0, PI[playerid][pi_ANGLE], 0, 0);

	new info[2];
	info[0] = OBJECT_TYPE_PLANT;
	info[1] = index;
	Streamer_SetArrayData(STREAMER_TYPE_OBJECT, PLANTS[index][plant_OBJECT_ID], E_STREAMER_EXTRA_ID, info);
	
	new label_str[256];
	if (seed_info[ PLANTS[index][plant_TYPE] ][seed_info_TYPE] == TYPE_LEGAL) format(label_str, sizeof label_str, "{009900}%s\n\n{F5F5F5}Agricultor: %s\n{F5F5F5}Creciendo... [%.1f]", plant_info[ PLANTS[index][plant_TYPE] ][plant_info_NAME], PLANTS[index][plant_PLANTED_BY_NAME], PLANTS[index][plant_GROWING_PROGRESS]);
	else format(label_str, sizeof label_str, "{FF3300}%s\n\n{F5F5F5}Agricultor: %s\n{F5F5F5}Creciendo... [%.1f]", plant_info[ PLANTS[index][plant_TYPE] ][plant_info_NAME], PLANTS[index][plant_PLANTED_BY_NAME], PLANTS[index][plant_GROWING_PROGRESS]);
	PLANTS[index][plant_LABEL_ID] = CreateDynamic3DTextLabel(label_str, 0xFFFFFFFF, PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z] + 0.25, 10.0, .testlos = false, .interiorid = 0, .worldid = 0);
	
	KillTimer(PLANTS[index][plant_TIMER]);
	PLANTS[index][plant_TIMER] = SetTimerEx("GrowPlantUp", 5000, false, "d", index);
	
	PLAYER_WORKS[playerid][WORK_FARMER][pwork_LEVEL] ++;
	SendPlayerClientMessage(playerid, "{"#GREEN_COLOR"}{F5F5F5}Ahora espera a que la planta {"#GREEN_COLOR"}crezca{F5F5F5}, si pasan más de 10 {"#YELLOW_COLOR"}minutos{F5F5F5} después de que la planta haya crecido se {ff0000}destruira{F5F5F5}.");
	Streamer_Update(playerid);
	return 1;
}

GetAvaiblePlantIndex()
{
	for (new i = 0; i != sizeof PLANTS; i ++)
	{
		if (!PLANTS[i][plant_VALID]) return i;
	}
	return -1;
}

forward GrowPlantUp(plant);
public GrowPlantUp(plant)
{
	if (!PLANTS[plant][plant_VALID] || !PLANTS[plant][plant_GROWING]) return 0;
	
	if (PLANTS[plant][plant_GROWING_PROGRESS] < 100.0)
	{
		PLANTS[plant][plant_GROWING_PROGRESS] += floatdiv(15, plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_SEEDS]);
		if (PLANTS[plant][plant_GROWING_PROGRESS] > 100.0) PLANTS[plant][plant_GROWING_PROGRESS] = 100.0;
		
		if (PLANTS[plant][plant_INVISIBLE] && PLANTS[plant][plant_GROWING_PROGRESS] > 50.0)
		{
			PLANTS[plant][plant_INVISIBLE] = false;
		}
		
		new label_str[256];
		if (seed_info[ PLANTS[plant][plant_TYPE] ][seed_info_TYPE] == TYPE_LEGAL) format(label_str, sizeof label_str, "{009900}%s\n\n{F5F5F5}Agricultor: %s\n{F5F5F5}Creciendo... [%.1f]", plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_NAME], PLANTS[plant][plant_PLANTED_BY_NAME], PLANTS[plant][plant_GROWING_PROGRESS]);
		else format(label_str, sizeof label_str, "{FF3300}%s\n\n{F5F5F5}Agricultor: %s\n{F5F5F5}Creciendo... [%.1f]", plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_NAME], PLANTS[plant][plant_PLANTED_BY_NAME], PLANTS[plant][plant_GROWING_PROGRESS]);
		UpdateDynamic3DTextLabelText(PLANTS[plant][plant_LABEL_ID], -1, label_str);
		
		KillTimer(PLANTS[plant][plant_TIMER]);
		PLANTS[plant][plant_TIMER] = SetTimerEx("GrowPlantUp", 5000, false, "d", plant);
		return 1;
	}
	
	PLANTS[plant][plant_GROWING] = false;
	PLANTS[plant][plant_EXPIRE_TIME] = 600;
		
	new label_str[256];
	if (seed_info[ PLANTS[plant][plant_TYPE] ][seed_info_TYPE] == TYPE_LEGAL) format(label_str, sizeof label_str, "{009900}%s\n\n{F5F5F5}Agricultor: %s\n{F5F5F5}Usa {daef1c}Y {F5F5F5}para recogerla\n\n{F5F5F5}Expira en %sm", plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_NAME], PLANTS[plant][plant_PLANTED_BY_NAME], TimeConvert(PLANTS[plant][plant_EXPIRE_TIME]));
	else format(label_str, sizeof label_str, "{FF3300}%s\n\n{F5F5F5}Agricultor: %s\n{F5F5F5}Usa {daef1c}Y {F5F5F5}para recogerla\n\n{F5F5F5}Expira en %sm", plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_NAME], PLANTS[plant][plant_PLANTED_BY_NAME], TimeConvert(PLANTS[plant][plant_EXPIRE_TIME]));
	UpdateDynamic3DTextLabelText(PLANTS[plant][plant_LABEL_ID], -1, label_str);
	
	KillTimer(PLANTS[plant][plant_TIMER]);
	PLANTS[plant][plant_TIMER] = SetTimerEx("ExpirePlantTime", 1000, false, "d", plant);
	return 1;
}

forward ExpirePlantTime(plant);
public ExpirePlantTime(plant)
{
	if (!PLANTS[plant][plant_VALID]) return 0;
	
	if (PLANTS[plant][plant_EXPIRE_TIME] > 0)
	{
		PLANTS[plant][plant_EXPIRE_TIME] --;
		
		new label_str[256];
		if (seed_info[ PLANTS[plant][plant_TYPE] ][seed_info_TYPE] == TYPE_LEGAL) format(label_str, sizeof label_str, "{009900}%s\n\n{F5F5F5}Agricultor: %s\n{F5F5F5}Usa {daef1c}Y {F5F5F5}para recogerla\n\n{F5F5F5}Expira en %sm", plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_NAME], PLANTS[plant][plant_PLANTED_BY_NAME], TimeConvert(PLANTS[plant][plant_EXPIRE_TIME]));
		else format(label_str, sizeof label_str, "{FF3300}%s\n\n{F5F5F5}Agricultor: %s\n{F5F5F5}Usa {daef1c}Y {F5F5F5}para recogerla\n\n{F5F5F5}Expira en %sm", plant_info[ PLANTS[plant][plant_TYPE] ][plant_info_NAME], PLANTS[plant][plant_PLANTED_BY_NAME], TimeConvert(PLANTS[plant][plant_EXPIRE_TIME]));
		UpdateDynamic3DTextLabelText(PLANTS[plant][plant_LABEL_ID], -1, label_str);
		
		KillTimer(PLANTS[plant][plant_TIMER]);
		PLANTS[plant][plant_TIMER] = SetTimerEx("ExpirePlantTime", 1000, false, "d", plant);
		return 1;
	}
	
	new Float:pos[3];
	GetDynamicObjectPos(PLANTS[plant][plant_OBJECT_ID], pos[0], pos[1], pos[2]);
	CreateFlashObject(pos[0], pos[1], pos[2] - 1.3);
	
	DestroyDynamicObject(PLANTS[plant][plant_OBJECT_ID]);
	DestroyDynamic3DTextLabel(PLANTS[plant][plant_LABEL_ID]);
	
	new tmp_PLANTS[PLANTS_ENUM]; PLANTS[plant] = tmp_PLANTS;
	return 1;
}

public OnPlayerShootDynamicObject(playerid, weaponid, objectid, Float:x, Float:y, Float:z)
{
	if (IsPlayerInDynamicArea(playerid, Farmer_Area))
	{
		new info[3];
		Streamer_GetArrayData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, info);
		
		if (info[0] == OBJECT_TYPE_PLANT)
		{
			KillTimer(PLANTS[info[1]][plant_TIMER]);
			
			new Float:pos[3];
			GetDynamicObjectPos(PLANTS[info[1]][plant_OBJECT_ID], pos[0], pos[1], pos[2]);
			CreateFlashObject(pos[0], pos[1], pos[2] - 1.3);
			
			DestroyDynamicObject(PLANTS[info[1]][plant_OBJECT_ID]);
			DestroyDynamic3DTextLabel(PLANTS[info[1]][plant_LABEL_ID]);
			
			new tmp_PLANTS[PLANTS_ENUM]; PLANTS[info[1]] = tmp_PLANTS;
		}
	}
	return 1;
}

ShowPlayerGpsMap(playerid)
{
	PLAYER_TEMP[playerid][pt_GPS_MAP] = true;
	TextDrawShowForPlayer(playerid, Textdraws[textdraw_GPS_MAP][0]);
	TextDrawShowForPlayer(playerid, Textdraws[textdraw_GPS_MAP][2]);
	TextDrawShowForPlayer(playerid, Textdraws[textdraw_GPS_MAP][1]);
	
	UpdatePlayer_GPS_Map(playerid);
	
	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][13]);
	PLAYER_TEMP[playerid][pt_TIMERS][13] = SetTimerEx("UpdatePlayer_GPS_Map", 1000, true, "i", playerid);
	return 1;
}

HidePlayerGpsMap(playerid)
{
	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][13]);
	PLAYER_TEMP[playerid][pt_GPS_MAP] = false;
	TextDrawHideForPlayer(playerid, Textdraws[textdraw_GPS_MAP][0]);
	TextDrawHideForPlayer(playerid, Textdraws[textdraw_GPS_MAP][1]);
	TextDrawHideForPlayer(playerid, Textdraws[textdraw_GPS_MAP][2]);
	TextDrawHideForPlayer(playerid, Textdraws[textdraw_GPS_MAP][3]);
	
	for (new i = 0; i != MAX_PLAYER_MAP_GPS_POINTS; i ++)
	{
		if (PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][i] != PlayerText:INVALID_TEXT_DRAW)
		{
			PlayerTextDrawDestroy(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][i]); 
			PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][i] = PlayerText:INVALID_TEXT_DRAW;
		}
	}
	return 1;
}

forward UpdatePlayer_GPS_Map(playerid);
public UpdatePlayer_GPS_Map(playerid)
{
	/*
		0 - playerpos
		1 - cp gps
		2 - cp works
		3 > cp works
		
	*/
	if (!PLAYER_TEMP[playerid][pt_GPS_MAP]) return KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][13]);
	
	new Float:pos[3];
	
	switch(PI[playerid][pi_STATE])
	{
		case ROLEPLAY_STATE_INTERIOR:
		{
			pos[0] = ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_EXT_X];
			pos[1] = ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_EXT_Y];
		}
		case ROLEPLAY_STATE_OWN_PROPERTY, ROLEPLAY_STATE_GUEST_PROPERTY:
		{
			pos[0] = PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PROPERTY_INDEX] ][property_EXT_X];
			pos[1] = PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PROPERTY_INDEX] ][property_EXT_Y];
		}
		default: GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
	}
	SetPlayerPoint_GPS_Map(0, playerid, "hud:radar_waypoint", -1, 5.0, 5.0, pos[0], pos[1]);
	
	if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT]))
	{
		new Float:gps_cp_pos[2]; 
		Streamer_GetFloatData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT], E_STREAMER_X, gps_cp_pos[0]);
		Streamer_GetFloatData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_GPS_CHECKPOINT], E_STREAMER_Y, gps_cp_pos[1]);
		SetPlayerPoint_GPS_Map(1, playerid, "LD_SPAC:white", 0xaa0000ff, 3.0, 3.0, gps_cp_pos[0], gps_cp_pos[1]);
	}
	else 
	{
		if (PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][1] != PlayerText:INVALID_TEXT_DRAW)
		{
			PlayerTextDrawDestroy(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][1]); 
			PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][1] = PlayerText:INVALID_TEXT_DRAW;
		}
	}
	
	switch(PLAYER_TEMP[playerid][pt_WORKING_IN])
	{
		case WORK_NONE:
		{
			if (PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2] != PlayerText:INVALID_TEXT_DRAW)
			{
				PlayerTextDrawDestroy(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2]); 
				PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2] = PlayerText:INVALID_TEXT_DRAW;
			}
		}
		case WORK_TRUCK:
		{
			if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT]))
			{
				new Float:gps_cp_pos[2]; 
				Streamer_GetFloatData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT], E_STREAMER_X, gps_cp_pos[0]);
				Streamer_GetFloatData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT], E_STREAMER_Y, gps_cp_pos[1]);
				SetPlayerPoint_GPS_Map(2, playerid, "LD_SPAC:white", 0xaa0000ff, 3.0, 3.0, gps_cp_pos[0], gps_cp_pos[1]);
			}
			else 
			{
				if (PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2] != PlayerText:INVALID_TEXT_DRAW)
				{
					PlayerTextDrawDestroy(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2]); 
					PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2] = PlayerText:INVALID_TEXT_DRAW;
				}
			}
		}
		case WORK_HARVESTER:
		{
			if (IsValidDynamicRaceCP(PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT]))
			{
				new Float:gps_cp_pos[2]; 
				Streamer_GetFloatData(STREAMER_TYPE_RACE_CP, PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT], E_STREAMER_X, gps_cp_pos[0]);
				Streamer_GetFloatData(STREAMER_TYPE_RACE_CP, PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT], E_STREAMER_Y, gps_cp_pos[1]);
				SetPlayerPoint_GPS_Map(2, playerid, "LD_SPAC:white", 0xaa0000ff, 3.0, 3.0, gps_cp_pos[0], gps_cp_pos[1]);
			}
			else 
			{
				if (PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2] != PlayerText:INVALID_TEXT_DRAW)
				{
					PlayerTextDrawDestroy(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2]); 
					PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2] = PlayerText:INVALID_TEXT_DRAW;
				}
			}
		}
		case WORK_TRASH:
		{
			if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_TRASH_CHECKPOINT]))
			{
				new Float:gps_cp_pos[2]; 
				Streamer_GetFloatData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_TRASH_CHECKPOINT], E_STREAMER_X, gps_cp_pos[0]);
				Streamer_GetFloatData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_TRASH_CHECKPOINT], E_STREAMER_Y, gps_cp_pos[1]);
				SetPlayerPoint_GPS_Map(2, playerid, "LD_SPAC:white", 0xaa0000ff, 3.0, 3.0, gps_cp_pos[0], gps_cp_pos[1]);
			}
			else 
			{
				if (PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2] != PlayerText:INVALID_TEXT_DRAW)
				{
					PlayerTextDrawDestroy(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2]); 
					PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2] = PlayerText:INVALID_TEXT_DRAW;
				}
			}
		}
		case WORK_LUMBERJACK:
		{
			if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT]))
			{
				new Float:gps_cp_pos[2]; 
				Streamer_GetFloatData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT], E_STREAMER_X, gps_cp_pos[0]);
				Streamer_GetFloatData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_LUMBERJACK_CHECKPOINT], E_STREAMER_Y, gps_cp_pos[1]);
				SetPlayerPoint_GPS_Map(2, playerid, "LD_SPAC:white", 0xaa0000ff, 3.0, 3.0, gps_cp_pos[0], gps_cp_pos[1]);
			}
			else 
			{
				if (PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2] != PlayerText:INVALID_TEXT_DRAW)
				{
					PlayerTextDrawDestroy(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2]); 
					PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2] = PlayerText:INVALID_TEXT_DRAW;
				}
			}
		}
		case WORK_PIZZA:
		{
			if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT]))
			{
				new Float:gps_cp_pos[2]; 
				Streamer_GetFloatData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT], E_STREAMER_X, gps_cp_pos[0]);
				Streamer_GetFloatData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT], E_STREAMER_Y, gps_cp_pos[1]);
				SetPlayerPoint_GPS_Map(2, playerid, "LD_SPAC:white", 0xaa0000ff, 3.0, 3.0, gps_cp_pos[0], gps_cp_pos[1]);
			}
			else 
			{
				if (PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2] != PlayerText:INVALID_TEXT_DRAW)
				{
					PlayerTextDrawDestroy(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2]); 
					PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][2] = PlayerText:INVALID_TEXT_DRAW;
				}
			}
		}
	}
	
	new cp_counts = 3;
	for (new d = cp_counts; d != MAX_PLAYER_MAP_GPS_POINTS; d ++)
	{
		if (PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][d] != PlayerText:INVALID_TEXT_DRAW)
		{
			PlayerTextDrawDestroy(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][d]); 
			PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][d] = PlayerText:INVALID_TEXT_DRAW;
		}
	}
	
	if (cp_counts >= MAX_PLAYER_MAP_GPS_POINTS) return 1;
	switch(PLAYER_TEMP[playerid][pt_WORKING_IN])
	{
		case WORK_TAXI:
		{
			foreach (new i : Player)
			{
				if (IsPlayerConnected(i))
				{
					if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL)
					{
						if (PLAYER_TEMP[i][pt_WANT_TAXI])
						{
							if (cp_counts >= MAX_PLAYER_MAP_GPS_POINTS) break;
							
							new Float:player_pos[3];
							switch(PI[i][pi_STATE])
							{
								case ROLEPLAY_STATE_INTERIOR:
								{
									player_pos[0] = ENTER_EXIT[ PLAYER_TEMP[i][pt_INTERIOR_INDEX] ][ee_EXT_X];
									player_pos[1] = ENTER_EXIT[ PLAYER_TEMP[i][pt_INTERIOR_INDEX] ][ee_EXT_Y];
								}
								case ROLEPLAY_STATE_OWN_PROPERTY, ROLEPLAY_STATE_GUEST_PROPERTY:
								{
									player_pos[0] = PROPERTY_INFO[ PLAYER_TEMP[i][pt_PROPERTY_INDEX] ][property_EXT_X];
									player_pos[1] = PROPERTY_INFO[ PLAYER_TEMP[i][pt_PROPERTY_INDEX] ][property_EXT_Y];
								}
								default: GetPlayerPos(i, player_pos[0], player_pos[1], player_pos[2]);
							}
							SetPlayerPoint_GPS_Map(cp_counts, playerid, "LD_SPAC:white", 0xf2f224FF, 3.0, 3.0, player_pos[0], player_pos[1]);
							cp_counts ++;
						}
					}
				}
			}
		}
		case WORK_POLICE:
		{
			foreach (new i : Player)
			{
				if (IsPlayerConnected(i))
				{
					if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL)
					{
						if (PI[i][pi_WANTED_LEVEL] > 0)
						{
							if (cp_counts >= MAX_PLAYER_MAP_GPS_POINTS) break;

							new Float:player_pos[3];
							switch(PI[i][pi_STATE])
							{
								case ROLEPLAY_STATE_INTERIOR:
								{
									if (PLAYER_TEMP[i][pt_INTERIOR_INDEX] == -1)
									{
										printf("[debug] Player id %d tiene interior index -1 estando en ROLEPLAY_STATE_INTERIOR");
										PrintBacktrace();
										continue;
									}
									player_pos[0] = ENTER_EXIT[ PLAYER_TEMP[i][pt_INTERIOR_INDEX] ][ee_EXT_X];
									player_pos[1] = ENTER_EXIT[ PLAYER_TEMP[i][pt_INTERIOR_INDEX] ][ee_EXT_Y];
								}
								case ROLEPLAY_STATE_OWN_PROPERTY, ROLEPLAY_STATE_GUEST_PROPERTY:
								{
									if (PLAYER_TEMP[i][pt_PROPERTY_INDEX] == -1)
									{
										printf("[debug] Player id %d tiene property index -1 estando en pt_PROPERTY_INDEX");
										PrintBacktrace();
										continue;
									}
									player_pos[0] = PROPERTY_INFO[ PLAYER_TEMP[i][pt_PROPERTY_INDEX] ][property_EXT_X];
									player_pos[1] = PROPERTY_INFO[ PLAYER_TEMP[i][pt_PROPERTY_INDEX] ][property_EXT_Y];
								}
								default: GetPlayerPos(i, player_pos[0], player_pos[1], player_pos[2]);
							}
							SetPlayerPoint_GPS_Map(cp_counts, playerid, "LD_SPAC:white", PlayerWantedColor(i), 3.0, 3.0, player_pos[0], player_pos[1]);
							cp_counts ++;
						}
					}
				}
			}
		}
		case WORK_MEDIC:
		{
			foreach (new i : Player)
			{
				if (IsPlayerConnected(i))
				{
					if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL)
					{
						if (PI[i][pi_STATE] == ROLEPLAY_STATE_CRACK)
						{
							if (cp_counts >= MAX_PLAYER_MAP_GPS_POINTS) break;

							new Float:player_pos[3];
							GetPlayerPos(i, player_pos[0], player_pos[1], player_pos[2]);
							SetPlayerPoint_GPS_Map(cp_counts, playerid, "LD_SPAC:white", 0x4aba00FF, 3.0, 3.0, player_pos[0], player_pos[1]);
							cp_counts ++;
						}
					}
				}
			}
		}
	}
	return 1;
}

SetPlayerPoint_GPS_Map(index, playerid, const icon[], color, Float:icon_size_X, Float:icon_size_Y, Float:x, Float:y)
{
	new Float:td_X, Float:td_Y,
		Float:converted_MAP_SIZE_X = floatdiv(map_td_SIZE_X, 2),
		Float:converted_MAP_SIZE_Y = floatdiv(map_td_SIZE_Y, 2),
		Float:converted_ICON_SIZE_X = floatdiv(icon_size_X, 2),
		Float:converted_ICON_SIZE_Y = floatdiv(icon_size_Y, 2);
	
	if (x > 3000.0) x = 3000.0;
	else if (x < -3000.0) x = -3000.0;
	
	if (y > 3000.0) y = 3000.0;
	else if (y < -3000.0) y = -3000.0;

	td_X = map_td_X + floatmul(floatdiv(converted_MAP_SIZE_X, 3000), x) + converted_MAP_SIZE_X - converted_ICON_SIZE_X;
	td_Y = map_td_Y + floatmul(floatdiv(-converted_MAP_SIZE_Y, 3000), y) + converted_MAP_SIZE_Y- converted_ICON_SIZE_Y;

	if (PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index] != PlayerText:INVALID_TEXT_DRAW)
	{
		PlayerTextDrawDestroy(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index]);
		PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index] = PlayerText:INVALID_TEXT_DRAW;
	}

	PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index] = CreatePlayerTextDraw(playerid, td_X, td_Y, icon);
	PlayerTextDrawLetterSize(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index], 0.160333, 1.280592);
	PlayerTextDrawTextSize(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index], icon_size_X, icon_size_Y);
	PlayerTextDrawAlignment(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index], 1);
	PlayerTextDrawColor(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index], color);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index], 0);
	PlayerTextDrawSetOutline(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index], 0);
	PlayerTextDrawBackgroundColor(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index], 255);
	PlayerTextDrawFont(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index], 4);
	PlayerTextDrawSetProportional(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index], 0);
	PlayerTextDrawSetShadow(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index], 0);
	PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_PLAYER_GPS_MAP][index]);
	return 1;
}

#define lc_limit_X_WEST 4000.0
#define lc_limit_X_EAST 7500.0
#define lc_limit_Y_NORTH 6900.0
#define lc_limit_Y_SOUTH 4150.0

stock Lc3dTo2d(Float:map_x, Float:map_y, Float:map_size_x, Float:map_size_y, Float:x, Float:y, Float:z, &Float:td_x, &Float:td_y)
{
	#pragma unused z

	/* Map limits */
	if (x > lc_limit_X_EAST) x = lc_limit_X_EAST;
	else if (x < lc_limit_X_WEST) x = lc_limit_X_WEST;

	if (y > lc_limit_Y_NORTH) y = lc_limit_Y_NORTH;
	else if (y < lc_limit_Y_SOUTH) y = lc_limit_Y_SOUTH;

	/* Calculations */
	new Float:map_width = floatsub(lc_limit_X_EAST, lc_limit_X_WEST),
		Float:prop_X = floatdiv(map_size_x, map_width),
		Float:mv_X = floatsub(map_width, lc_limit_X_EAST);

	new Float:map_height = floatsub(lc_limit_Y_SOUTH, lc_limit_Y_NORTH),
		Float:prop_Y = floatdiv(map_size_y, map_height),
		Float:mv_Y = floatsub(map_height, lc_limit_Y_SOUTH);
	
	/* Conversion */
	x += mv_X;
	y += mv_Y;

	/* Result */
	td_x = map_x + floatmul(prop_X, x),
	td_y = map_y + floatmul(prop_Y, y);
	return 1;
}

stock GetIconTextdraw(iconid)
{
	new td_icon[24];
	
	switch(iconid)
	{
		case 2: td_icon = "hud:radar_centre";
		case 3: td_icon = "hud:arrow";
		case 4: td_icon = "hud:radar_north";
		case 5: td_icon = "hud:radar_airyard";
		case 6: td_icon = "hud:radar_ammugun";
		case 7: td_icon = "hud:radar_barbers";
		case 8: td_icon = "hud:radar_bigsmoke";
		case 9: td_icon = "hud:radar_boatyard";
		case 10: td_icon = "hud:radar_burgershot";
		case 11: td_icon = "hud:radar_bulldozer";
		case 12: td_icon = "hud:radar_catalinapink";
		case 13: td_icon = "hud:radar_cesarviapando";
		case 14: td_icon = "hud:radar_chicken";
		case 15: td_icon = "hud:radar_cj";
		case 16: td_icon = "hud:radar_crash1";
		case 17: td_icon = "hud:radar_diner";
		case 18: td_icon = "hud:radar_emmetgun";
		case 19: td_icon = "hud:radar_enemyattack";
		case 20: td_icon = "hud:radar_fire";
		case 21: td_icon = "hud:radar_girlfriend";
		case 22: td_icon = "hud:radar_hostpital";
		case 23: td_icon = "hud:radar_locosyndicate";
		case 24: td_icon = "hud:radar_maddog";
		case 25: td_icon = "hud:radar_mafiacasino";
		case 26: td_icon = "hud:radar_mcstrap";
		case 27: td_icon = "hud:radar_modgarage";
		case 28: td_icon = "hud:radar_ogloc";
		case 29: td_icon = "hud:radar_pizza";
		case 30: td_icon = "hud:radar_police";
		case 31: td_icon = "hud:radar_propertyg";
		case 32: td_icon = "hud:radar_propertyr";
		case 33: td_icon = "hud:radar_race";
		case 34: td_icon = "hud:radar_ryder";
		case 35: td_icon = "hud:radar_savegame";
		case 36: td_icon = "hud:radar_school";
		case 37: td_icon = "hud:radar_qmark";
		case 38: td_icon = "hud:radar_sweet";
		case 39: td_icon = "hud:radar_tattoo";
		case 40: td_icon = "hud:radar_thetruth";
		case 41: td_icon = "hud:radar_waypoint";
		case 42: td_icon = "hud:radar_toreno";
		case 43: td_icon = "hud:radar_triads";
		case 44: td_icon = "hud:radar_triadscasino";
		case 45: td_icon = "hud:radar_tshirt";
		case 46: td_icon = "hud:radar_woozie";
		case 47: td_icon = "hud:radar_zero";
		case 48: td_icon = "hud:radar_datedisco";
		case 49: td_icon = "hud:radar_datedrink";
		case 50: td_icon = "hud:radar_datefood";
		case 51: td_icon = "hud:radar_truck";
		case 52: td_icon = "hud:radar_cash";
		case 53: td_icon = "hud:radar_flag";
		case 54: td_icon = "hud:radar_gym";
		case 55: td_icon = "hud:radar_impound";
		case 56: td_icon = "hud:radar_light";
		case 57: td_icon = "hud:radar_runway";
		case 58: td_icon = "hud:radar_gangb";
		case 59: td_icon = "hud:radar_gangp";
		case 60: td_icon = "hud:radar_gangy";
		case 61: td_icon = "hud:radar_gangn";
		case 62: td_icon = "hud:radar_gangg";
		case 63: td_icon = "hud:radar_spray";
	}
	
	return td_icon;
}

public OnPlayerWeaponShot(playerid, weaponid, hittype, hitid, Float:fX, Float:fY, Float:fZ)
{	
	if (IsValidHandWeapon(playerid))
	{
		j_PocketInfo[playerid][SLOT_HAND][pExtra] --;
		if (j_PocketInfo[playerid][SLOT_HAND][pExtra] <= 0) j_PocketInfo[playerid][SLOT_HAND][pExtra] = 0;
	}

    PLAYER_TEMP[playerid][pt_LAST_SHOT_TICK] = GetTickCount();

	/*if (PLAYER_TEMP[playerid][pt_PERFORMED_ENVIRONMET] < 5) {
		JailPlayerEx(playerid, 20, "NRE");

		new str[1000]; format(str, 1000, "{666666}[JAIL] {F5F5F5}%s[%d] | G-Rex [{"#PRIMARY_COLOR"}BOT{F5F5F5}] | Razon: NRE | Minutos: 20 | %d Ping", PI[playerid][pi_NAME], playerid, GetPlayerPing(playerid));
		SendAdminAd(str);

		format(str, 1000, "```[JAIL] %s[%d] | G-Rex [BOT] | Razon: NRE | Minutos: 20 | %d Ping```", PI[playerid][pi_NAME], playerid, GetPlayerPing(playerid));
		SendDiscordMessage(""#DISCORD_JAILS_LOG"", str);
	}*/

	if (ac_Info[CHEAT_UNDETECTED_WEAPON][ac_Enabled])
	{
		if (GetPlayerWeapon(playerid) != weaponid)
		{
			if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_UNDETECTED_WEAPON][p_ac_info_IMMUNITY])
			{
				if (!ac_Info[CHEAT_UNDETECTED_WEAPON][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_UNDETECTED_WEAPON);
				else
				{
					if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_UNDETECTED_WEAPON][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_UNDETECTED_WEAPON][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_UNDETECTED_WEAPON][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_UNDETECTED_WEAPON][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_UNDETECTED_WEAPON][p_ac_info_LAST_DETECTION] = gettime();
					if (PLAYER_AC_INFO[playerid][CHEAT_UNDETECTED_WEAPON][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_UNDETECTED_WEAPON][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_UNDETECTED_WEAPON);
				}
			}
		}
	}

	if (ac_Info[CHEAT_DRIVE_BY][ac_Enabled])
	{
		new player_state = GetPlayerState(playerid);
		if (player_state == PLAYER_STATE_DRIVER || player_state == PLAYER_STATE_PASSENGER)
		{
			if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_DRIVE_BY][p_ac_info_IMMUNITY])
			{
				if (!ac_Info[CHEAT_DRIVE_BY][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_DRIVE_BY);
				else
				{
					if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_DRIVE_BY][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_DRIVE_BY][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_DRIVE_BY][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_DRIVE_BY][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_DRIVE_BY][p_ac_info_LAST_DETECTION] = gettime();
					if (PLAYER_AC_INFO[playerid][CHEAT_DRIVE_BY][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_DRIVE_BY][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_DRIVE_BY);
				}
			}
		}
	}

	if (PLAYER_TEMP[playerid][pt_LAST_TERRITORY] != INVALID_STREAMER_ID) {
		if (IsPlayerInDynamicArea(playerid, TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_AREA])) {
			if (TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_OCCUPIED]) {
				if(
					(!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET] && PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) &&
					(TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_CREW_ID] != PI[playerid][pi_CREW]) &&
					(TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_ATTACKER_CREW_INDEX] != PLAYER_TEMP[playerid][pt_CREW_INDEX])
				) {
					if (TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_WAR]) {
						JailPlayerEx(playerid, 20, "Alianza");

						new str[1000]; format(str, 1000, "{666666}[JAIL] {F5F5F5}%s[%d] | G-Rex [{"#PRIMARY_COLOR"}BOT{F5F5F5}] | Razon: Alianza | Minutos: 20 | %d Ping", PI[playerid][pi_NAME], playerid, GetPlayerPing(playerid));
						SendAdminAd(str);

						format(str, 1000, "```[JAIL] %s[%d] | G-Rex [BOT] | Razon: Alianza | Minutos: 20 | %d Ping```", PI[playerid][pi_NAME], playerid, GetPlayerPing(playerid));
						SendDiscordMessage(""#DISCORD_JAILS_LOG"", str);
					}
				}
			}
		}
	}

	if (PI[playerid][pi_CREW])
	{
		if (gettime() > CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_LAST_ATTACK] + 300)
		{
			if (PLAYER_TEMP[playerid][pt_LAST_TERRITORY] != INVALID_STREAMER_ID)
			{
				if (IsPlayerInDynamicArea(playerid, TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_AREA]))
				{
					if (TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_CREW_ID] != PI[playerid][pi_CREW])
					{
						if (!TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_WAR] && !CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_FIGHTING])
						{
							if (gettime() > TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_LAST_ATTACK] + 300)
							{
								if (!TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_OCCUPIED])
								{
									new pc_members = CountCrewPCPlayers(PI[playerid][pi_CREW]), attackers_in_area = CountCrewAndroidPlayersInTerrit(PLAYER_TEMP[playerid][pt_CREW_INDEX], PLAYER_TEMP[playerid][pt_LAST_TERRITORY]);
									if (attackers_in_area >= 2 && pc_members <= MAX_CREW_PC_MEMBERS) StartTerritoryAttack(PLAYER_TEMP[playerid][pt_CREW_INDEX], PLAYER_TEMP[playerid][pt_LAST_TERRITORY], 300);
								}
								else
								{
									if (CREW_INFO[ TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_CREW_INDEX] ][crew_VALID])
									{
										if (!CREW_INFO[ TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_CREW_INDEX] ][crew_FIGHTING])
										{	
											new pc_members = CountCrewPCPlayers(PI[playerid][pi_CREW]), attackers_in_area = CountCrewAndroidPlayersInTerrit(PLAYER_TEMP[playerid][pt_CREW_INDEX], PLAYER_TEMP[playerid][pt_LAST_TERRITORY]);
											if (attackers_in_area >= 3 && pc_members <= MAX_CREW_PC_MEMBERS) StartTerritoryAttack(PLAYER_TEMP[playerid][pt_CREW_INDEX], PLAYER_TEMP[playerid][pt_LAST_TERRITORY], 300);
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
    return 1;
}

public OnPlayerGiveDamage(playerid, damagedid, Float: amount, weaponid, bodypart) {
	if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) {
		if (!PLAYER_WORKS[damagedid][WORK_POLICE][pwork_SET]) {
			if (j_PocketInfo[playerid][SLOT_HAND][pValid]) {
				if (j_PocketInfo[playerid][SLOT_HAND][pType] == INVENTORY_TYPE_WEAPON_TASER) {
					if (damagedid != INVALID_PLAYER_ID) {
						if (!PLAYER_TEMP[damagedid][pt_CUFFED]) {
							if (!PLAYER_TEMP[damagedid][pt_TASED]) {
								if (j_PocketInfo[playerid][SLOT_HAND][pExtra] <= 0) {
									ShowPlayerMessage(playerid, "No tienes ~r~carga~w~ en el taser.");
								} else {
									if (GetPlayerAnimationIndex(damagedid) != 386) ApplyAnimation(damagedid, "CRACK", "crckdeth2", 4.0, 1, 1, 1, 0, 0);
									ShowPlayerMessage(playerid, "Le has dado a ~b~%s~w~.", PLAYER_TEMP[damagedid][pt_NAME]);

									PLAYER_TEMP[damagedid][pt_TASED] = true;
									j_PocketInfo[playerid][SLOT_HAND][pExtra] -= 10;

									if (!PI[damagedid][pi_WANTED_LEVEL]) SetPlayerWantedLevelEx(damagedid, 1);

									KillTimer(PLAYER_TEMP[damagedid][pt_TASER_TIMER]);
									PLAYER_TEMP[damagedid][pt_TASER_TIMER] = SetTimerEx("OnPlayerTased", 500, false, "d", damagedid);
								}
							}
						}
					}
				}
			}
		}
	}
    return 1;
}

forward RestorePlayerHealth(const playerid, const type);
public RestorePlayerHealth(const playerid, const type) {
	if (IsPlayerConnected(playerid)) {
		switch (type) {
			case 0: { SetPlayerHealthEx(playerid, PLAYER_TEMP[playerid][pt_ARRESTED_HEALTH]); }
			case 1: { SetPlayerHealthEx(playerid, PLAYER_TEMP[playerid][pt_DEATH_HEALTH]); }
			case 2: { SetPlayerHealthEx(playerid, PLAYER_TEMP[playerid][pt_PASSIVE_HEALTH]); }
		}
	}
	return 1;
}

public OnPlayerTakeDamage(playerid, issuerid, Float: amount, weaponid, bodypart) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED || PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL) {
		SetTimerEx("RestorePlayerHealth", 3000, false, "dd", playerid, 0);
		SetPlayerHealthEx(playerid, 999999999.9);
		return 1;
	}
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK) {
		SetTimerEx("RestorePlayerHealth", 3000, false, "dd", playerid, 1);
		SetPlayerHealthEx(playerid, 999999999.9);
		return 1;
	}

	if (PI[playerid][pi_PASSIVE_MODE] && PI[playerid][pi_STATE] != ROLEPLAY_STATE_CRACK) {
		ShowPlayerMessage(playerid, "Te encuentras en ~g~modo pasivo~w~.");
		if (issuerid != INVALID_PLAYER_ID) ShowPlayerMessage(issuerid, "El jugador se encuentra en modo ~g~pasivo~w~.");

		SetTimerEx("RestorePlayerHealth", 3000, false, "dd", playerid, 2);
		SetPlayerHealthEx(playerid, 999999999.9);
		return 1;
	}

	CheckPlayerArmour(playerid);
	return 1;
}

forward OnPlayerTased(damagedid);
public OnPlayerTased(damagedid)
{
	KillTimer(PLAYER_TEMP[damagedid][pt_TASER_TIMER]);
	PLAYER_TEMP[damagedid][pt_TASER_TIMER] = -1;

	if (PLAYER_TEMP[damagedid][pt_TASED])
	{
		if (GetPlayerAnimationIndex(damagedid) != 386) ApplyAnimation(damagedid, "CRACK", "crckdeth2", 4.0, 1, 1, 1, 0, 0);
		PLAYER_TEMP[damagedid][pt_TASER_TIMER] = SetTimerEx("OnPlayerTased", 500, false, "d", damagedid);
		return 1;
	}

	PLAYER_TEMP[damagedid][pt_TASED] = false;
	ClearAnimations(damagedid);
	return 1;
}

CheckWeaponAndAmmo(playerid, weaponid)
{
	if (WEAPON_INFO[weaponid][weapon_info_ANTI_CHEAT])
	{
		new weapon_id = GetPlayerHandWeaponId(playerid), weapon_ammo = GetPlayerHandWeaponAmmo(playerid);
		
		if (ac_Info[CHEAT_WEAPON][ac_Enabled]) {
			if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_IMMUNITY]) {
				if (!IsValidHandWeapon(playerid)) {
					if (!ac_Info[CHEAT_WEAPON][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_WEAPON);
					else {
						if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_WEAPON][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_LAST_DETECTION] = gettime();
						if (PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_WEAPON][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_WEAPON);
					}
				}

				if (weapon_id != IsValidHandWeapon(playerid)) {
					if (!ac_Info[CHEAT_WEAPON][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_WEAPON);
					else {
						if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_WEAPON][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_LAST_DETECTION] = gettime();
						if (PLAYER_AC_INFO[playerid][CHEAT_WEAPON][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_WEAPON][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_WEAPON);
					}
				}
			}
		}
		
		if (WEAPON_INFO[weapon_id][weapon_info_AMMO]) {
			if (ac_Info[CHEAT_AMMO][ac_Enabled]) {
				if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_IMMUNITY]) {
					if (weapon_ammo > j_PocketInfo[playerid][SLOT_HAND][pExtra]) {
						if (!ac_Info[CHEAT_AMMO][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_AMMO);
						else
						{
							if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_AMMO][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_DETECTIONS] = 0;
							else PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_DETECTIONS] ++;
							
							PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_LAST_DETECTION] = gettime();
							if (PLAYER_AC_INFO[playerid][CHEAT_AMMO][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_AMMO][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_AMMO);
						}
					} else {
						j_PocketInfo[playerid][SLOT_HAND][pExtra] = weapon_ammo;
					}
				}
			}
		}
	}
	return 1;
}


new ADMIN_LEVEL_AC_IMMUNITY = 3; //nivel 3 en adelante
OnPlayerCheatDetected(playerid, cheat, Float:extra = 0.0)
{
	if (PI[playerid][pi_ADMIN_LEVEL] >= ADMIN_LEVEL_AC_IMMUNITY) return 1;
	if (PLAYER_TEMP[playerid][pt_KICKED]) return 1;
	if (PI[playerid][pi_ID] <= 0) return 1;
	
	if (gettime() < PLAYER_TEMP[playerid][pt_LAST_CHEAT_DETECTED_TIME] + 5) return 1;

	new ac_message[145], acd_message[2048], player_state = GetPlayerState(playerid);
	
	if (ac_Info[cheat][ac_Kick]) {	
		new bad_history[24];
		format(bad_history, sizeof bad_history, "ac, cheat (%02d)", cheat);
		AddPlayerBadHistory(PI[playerid][pi_ID], -1, TYPE_KICK, bad_history);
		
		if (extra != 0.0) format(ac_message, sizeof ac_message, "{"#RED_COLOR"}[AC-KICK] {F5F5F5}%s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d, extra: %.1f)", PI[playerid][pi_NAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval], extra);
		else format(ac_message, sizeof ac_message, "{"#RED_COLOR"}[AC-KICK] {F5F5F5}%s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d)", PI[playerid][pi_NAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval]);
		
		if (extra != 0.0) format(acd_message, sizeof acd_message, "```[AC-KICK] %s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d, extra: %.1f)```", PI[playerid][pi_NAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval], extra);
		else format(acd_message, sizeof acd_message, "```[AC-KICK] %s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d)```", PI[playerid][pi_NAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval]);

		KickEx(playerid, 500);
		
		if (cheat == CHEAT_PLAYER_HEALTH) PI[playerid][pi_HEALTH] = 20.0;
		if (cheat == CHEAT_PLAYER_ARMOUR) PI[playerid][pi_ARMOUR] = 0.0;
	} else {
		if (extra != 0.0) format(ac_message, sizeof ac_message, "{"#RED_COLOR"}[AC-AVISO] {F5F5F5}%s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d, extra: %.1f)", PI[playerid][pi_NAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval], extra);
		else format(ac_message, sizeof ac_message, "{"#RED_COLOR"}[AC-AVISO] {F5F5F5}%s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d)", PI[playerid][pi_NAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval]);
	
		if (extra != 0.0) format(acd_message, sizeof acd_message, "```[AC-AVISO] %s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d, extra: %.1f)```", PI[playerid][pi_NAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval], extra);
		else format(acd_message, sizeof acd_message, "```[AC-AVISO] %s (%d): %s (cd: %02d, ps: %02d, ping: %d, dec: %d:%d)```", PI[playerid][pi_NAME], playerid, ac_Info[cheat][ac_Name], cheat, player_state, GetPlayerPing(playerid), PLAYER_AC_INFO[playerid][cheat][p_ac_info_DETECTIONS], ac_Info[cheat][ac_Interval]);
	}
	
	if (cheat == CHEAT_PLAYER_SPEED) {
		FreezePlayer(playerid, 1000);
		ShowPlayerMessage(playerid, "Estas siendo muy ~r~rapido~w~.");
	}

	SendMessageToAdminsAC(ac_message);
	SendDiscordMessage(""#DISCORD_ANTICHEAT_LOG"", acd_message);
	PLAYER_TEMP[playerid][pt_LAST_CHEAT_DETECTED_TIME] = gettime();

	return 1;
}

SetPlayerHealthEx(playerid, Float:health)
{
	PLAYER_AC_INFO[playerid][CHEAT_PLAYER_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
	
	if (health > 100.0) { //No guardar valor en la variable de vida si es mayor a 100.
		SetPlayerHealth(playerid, health);
		return 1;
	}

	PI[playerid][pi_HEALTH] = health;
	SetPlayerHealth(playerid, PI[playerid][pi_HEALTH]);
	return 1;
}

SetPlayerArmourEx(playerid, Float:armour)
{
	PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_IMMUNITY] = gettime() + 3;
	
	PI[playerid][pi_ARMOUR] = armour;
	SetPlayerArmour(playerid, PI[playerid][pi_ARMOUR]);
	return 1;
}

GivePlayerHealthEx(playerid, Float:health)
{
	PLAYER_AC_INFO[playerid][CHEAT_PLAYER_HEALTH][p_ac_info_IMMUNITY] = gettime() + 3;
	
	PI[playerid][pi_HEALTH] += health;
	if (PI[playerid][pi_HEALTH] > 100.0) PI[playerid][pi_HEALTH] = 100.0;

	SetPlayerHealth(playerid, PI[playerid][pi_HEALTH]);
	return 1;
}

GivePlayerArmourEx(playerid, Float:armour)
{
	PLAYER_AC_INFO[playerid][CHEAT_PLAYER_ARMOUR][p_ac_info_IMMUNITY] = gettime() + 3;
	
	PI[playerid][pi_ARMOUR] += armour;
	if (PI[playerid][pi_ARMOUR] > 100.0) PI[playerid][pi_ARMOUR] = 100.0;
	SetPlayerArmour(playerid, PI[playerid][pi_ARMOUR]);
	return 1;
}

PlayerPayday(playerid)
{
	new 
		money = 100 * PI[playerid][pi_LEVEL]
	;

	if (money > 1000) money = 1000;
	money += minrand(100, 200);

	SendPlayerClientMessage(playerid, "{"#GREEN_COLOR"}.......................................................");
	SendPlayerClientMessage(playerid, "..... {"#BLUE_COLOR"}Spain + RolePlay{F5F5F5} .....");

	SendPlayerClientMessage(playerid, "{"#GREEN_COLOR"}{F5F5F5} Subsidios Gubernamentales: %s{"#GREEN_COLOR"}$", number_format_thousand(money));
	
	if (!PI[playerid][pi_VIP])
	{
		for (new i = 0; i != MAX_VEHICLES; i ++)
		{
			if (!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
			if (PLAYER_VEHICLES[i][player_vehicle_OWNER_ID] != PI[playerid][pi_ID]) continue;
			
			new veh_money = VEHICLE_INFO[GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400][vehicle_info_PRICE] / 100;
			money -= veh_money;
			
			SendPlayerClientMessage(playerid, "{"#RED_COLOR"}{F5F5F5} Seguro del vehículo %s: -%s{"#RED_COLOR"}$\n", VEHICLE_INFO[GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400][vehicle_info_NAME], number_format_thousand(veh_money));
		}

		for (new i = 0; i != MAX_SU_VEHICLES; i ++) {
			if (!ParkingVehicles[playerid][i][pvValid]) continue;
			if (ParkingVehicles[playerid][i][pvOwnerId] != PI[playerid][pi_ID]) continue;
			
			new veh_money = VEHICLE_INFO[ParkingVehicles[playerid][i][pvModelid] - 400][vehicle_info_PRICE] / 200;
			money -= veh_money;

			SendPlayerClientMessage(playerid, "{"#RED_COLOR"}{F5F5F5} precio del garage %s: -%s{"#RED_COLOR"}$\n", VEHICLE_INFO[ParkingVehicles[playerid][i][pvModelid] - 400][vehicle_info_NAME], number_format_thousand(veh_money));
		}
		
		for (new i = 0; i != MAX_PROPERTIES; i ++)
		{
			if (!PROPERTY_INFO[i][property_VALID]) continue;
			if (PROPERTY_INFO[i][property_OWNER_ID] != PI[playerid][pi_ID]) continue;
		
			if (PROPERTY_INFO[i][property_VIP_LEVEL]) SendPlayerClientMessage(playerid, "{"#RED_COLOR"}{F5F5F5} Seguro de la propiedad %s: 0{"#RED_COLOR"}$\n", PROPERTY_INFO[i][property_NAME]);
			else
			{
				new property_money = PROPERTY_INFO[i][property_PRICE_BASE] / 200;
				money -= property_money;
				
				SendPlayerClientMessage(playerid, "{"#RED_COLOR"}{F5F5F5} Seguro de la propiedad %s: -%s{"#RED_COLOR"}$\n", PROPERTY_INFO[i][property_NAME], number_format_thousand(property_money));
			}
		}
	}
	
	if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
	{
		new work_payment;
		if (work_info[WORK_POLICE][work_info_EXTRA_PAY] > 0 && work_info[WORK_POLICE][work_info_EXTRA_PAY_EXP] > 0)
		{
			work_payment = (work_info[WORK_POLICE][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL], work_info[WORK_POLICE][work_info_EXTRA_PAY_EXP])));
			if (work_info[WORK_POLICE][work_info_EXTRA_PAY_LIMIT] != 0) if (work_payment > work_info[WORK_POLICE][work_info_EXTRA_PAY_LIMIT]) work_payment = work_info[WORK_POLICE][work_info_EXTRA_PAY_LIMIT];
		}
		
		money += work_payment;
		
		SendPlayerClientMessage(playerid, "{"#GREEN_COLOR"}{F5F5F5} Paga por ser policia: %s{"#GREEN_COLOR"}$\n", number_format_thousand(work_payment));
	}

	if (PI[playerid][pi_CREW])
	{
		new territories = GetCrewTerritories(PI[playerid][pi_CREW]), BlackCash = 0;

		if (territories > 0)
		{
			BlackCash += territories * 900 + random(100);
			if (territories > 0) SendPlayerClientMessage(playerid, "{"#GREEN_COLOR"}{F5F5F5} Paga por territorios en posesión (%d): %d{666666}B$\n", territories, BlackCash);
		}

		new pocket_slot = GetPlayerValidInventoryPocket(playerid);
		if (pocket_slot != -1) {
			j_PocketInfo[playerid][pocket_slot][pValid] = true;
			j_PocketInfo[playerid][pocket_slot][pType] = INVENTORY_TYPE_BLACK_CASH;
			j_PocketInfo[playerid][pocket_slot][pExtra] = BlackCash;
			InsertPlayerInventorySlot(playerid, pocket_slot);
		}
	}

	if (money > 0) SendPlayerClientMessage(playerid, "{"#GREEN_COLOR"}»{F5F5F5} Has ganado: %s{"#GREEN_COLOR"}$", number_format_thousand(money));
	else SendPlayerClientMessage(playerid, "{"#GREEN_COLOR"}»{F5F5F5} Has perdido: %s{"#RED_COLOR"}$", number_format_thousand(money));
	
	SendPlayerClientMessage(playerid, "{"#GREEN_COLOR"}.......................................................");

	GivePlayerCash(playerid, money, true, money < 0 ? true : false);
	return 1;
}

//Animaciones
//ANIMACIONES
CMD:animaciones(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ShowDialog(playerid, DIALOG_ANIMS);
	return 1;
}
alias:animaciones("anims", "acciones");

CMD:parar(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return 1;
	if(IsPlayerDriver(playerid)) return 1;
	if(GetPlayerSpeed(playerid) > 1) return 1;

	ApplyAnimation(playerid, "CARRY", "crry_prtial", 4.1, 0, 0, 0, 0, 0, true);
	ClearAnimations(playerid);
	return 1;
}

CMD:rendirse(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_HANDSUP); //rendirse
    SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:blowjob(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "BLOWJOBZ", "BJ_COUpi_LOOP_W", 4.0, 1, 1, 1, 0, 0);//blowjob
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:rodar(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid,"PED","BIKE_fallR",4.0,0,1,1,1,0);
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:borracho(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid,"PED", "WALK_DRUNK",4.0,1,1,1,1,500);//borracho
    SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:bomba(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid, "BOMBER", "BOM_Plant", 4.0, 0, 1, 1, 0, 0);//bomba
    SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:apuntar(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation( playerid,"ped", "ARRESTgun", 4.0, 0, 1, 1, 1,500);
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:reir(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid, "RAPPING", "Laugh_01", 4.0, 0, 0, 0, 0,0);//reir
    SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:amenazar(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid, "SHOP", "ROB_Loop_Threat", 4.0, 0, 0, 0, 1,500);//amenazar
    SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:paja(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "PAULNMAC", "wank_loop", 4.0, 1, 0, 0, 1, 0);
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:herido(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "SWEET", "LaFin_Sweet", 4.0, 0, 1, 1, 1, 0);
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:cruzarbrazos(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "COP_AMBIENT", "Coplook_loop", 4.0, 1, 1, 1, 0, 4000);
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:recostarse(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid,"SUNBATHE", "Lay_Bpi_in", 4.0, 0, 0, 0, 1, 0);//recostarse
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:cubrirse(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid, "ped", "cower", 4.0, 1, 0, 0, 0, 0);//crubrirse
    SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:vomitar(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid, "FOOD", "EAT_Vomit_P", 3.0, 0, 0, 0, 0, 0);//vomitar
    SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:comer(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "FOOD", "EAT_Burger", 3.00, 0, 0, 0, 0, 0);
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:despedir(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "KISSING", "BD_GF_Wave", 3.0, 0, 0, 0, 0, 0);//despedir
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:nalgada(playerid, params[]) {
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "SWEET", "sweet_ass_slap", 4.0, 0, 0, 0, 0, 0);//nalgada
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:agonizar(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return 1;
	if(IsPlayerDriver(playerid)) return 1;
	if(GetPlayerSpeed(playerid) > 1) return 1;
	
	ApplyAnimation(playerid, "WUZI", "CS_Dead_Guy", 4.0, 0, 0, 0, 1, 0);//agonizar
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:besar(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return 1;
	if(IsPlayerDriver(playerid)) return 1;
	if(GetPlayerSpeed(playerid) > 1) return 1;

	ApplyAnimation(playerid, "KISSING", "Playa_Kiss_02", 4.0, 0, 0, 0, 0, 0);//besar
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:crack(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return 1;
	if(IsPlayerDriver(playerid)) return 1;
	if(GetPlayerSpeed(playerid) > 1) return 1;

	ApplyAnimation(playerid, "CRACK", "crckdeth2", 4.0, 0, 0, 0, 1, 0);//crack
    SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:mear(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return 1;
	if(IsPlayerDriver(playerid)) return 1;
	if(GetPlayerSpeed(playerid) > 1) return 1;

	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_PISSING);//mear
    SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:sentarse(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return 1;
	if(IsPlayerDriver(playerid)) return 1;
	if(GetPlayerSpeed(playerid) > 1) return 1;

    ApplyAnimation(playerid, "SUNBATHE", "ParkSit_M_in", 4.000000, 0, 1, 1, 1, 0);//sentarse
    SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:asiento(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid, "ped", "SEAT_down", 4.000000, 0, 1, 1, 1, 0);
    SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:fucku(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
    ApplyAnimation( playerid,"ped", "fucku", 4.0, 0, 1, 1, 1, 1 );//fucku
    SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:taichi(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "PARK", "Tai_Chi_Loop",  4.1,7,5,1,1,1);//taichi
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:beber(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "BAR", "dnk_stndM_loop", 4.0, 0, 1, 1, 0, 4000);//beber
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:boxear(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid, "GYMNASIUM", "gym_shadowbox",  4.1,7,5,1,1,1);//boxear
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:saludar(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid,"GANGS","hndshkfa_swt",4.1,0,0,0,0,0);//saludar
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:llorar(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid,"GRAVEYARD","mrnF_loop",4.1,0,0,0,0,0);//llorar
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:dormir(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	if (!GetPlayerInterior(playerid)) return SendPlayerClientMessage(playerid, "Solo puedes hacer esto en un interior");
	ApplyAnimation(playerid,"INT_HOUSE","BED_In_R",4.1,0,0,0,1,0);//dormir
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:rapear(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid,"RAPPING","RAP_B_Loop",4.0,1,0,0,0,8000);//rapear
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:astrip(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid,"STRIP","strip_A",4.1,7,5,1,1,1);//strip
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:bailar(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
    if (sscanf(params, "d", params[0])) return ShowPlayerMessage(playerid, "~>~ /bailar [1-4]");

	switch(params[0])
	{
	    case 1: SetPlayerSpecialAction(playerid,SPECIAL_ACTION_DANCE1);
		case 2: SetPlayerSpecialAction(playerid,SPECIAL_ACTION_DANCE2);
		case 3: SetPlayerSpecialAction(playerid,SPECIAL_ACTION_DANCE3);
		case 4: SetPlayerSpecialAction(playerid,SPECIAL_ACTION_DANCE4);
		default: ShowPlayerMessage(playerid, "~>~ /bailar [1-4]");
	}
	return 1;
}
CMD:alentar(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	ApplyAnimation(playerid,"ON_LOOKERS","shout_02",4.1,7,5,1,1,1);//alentar
	SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}
CMD:hablar(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
    ApplyAnimation(playerid,"PED","IDLE_chat",4.1,7,5,1,1,1);//hablar
    SendPlayerClientMessage(playerid, "Para cancelar la animacion utiliza /parar.");
	return 1;
}

SetWantedPlayerMarkers(playerid)
{
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if (PI[i][pi_WANTED_LEVEL] > 0)
				{
					SetPlayerMarkerForPlayer(playerid, i, PlayerWantedColor(i));
				}
			}
		}
	}
	return 1;
}

ShowPoliceBuyWeaponsDialog(playerid) {
	for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;

	new dialog[60 * sizeof(pWeapon_Shop)], listitem;
	for (new i = 0; i != sizeof pWeapon_Shop; i ++)
	{
		if (pWeapon_Shop[i][wRank] > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL]) strcatf(dialog, "{666666}%s\t{f5f5f5}%s{"#GREEN_COLOR"}$\n", GetObjectInfoName(pWeapon_Shop[i][wType]), number_format_thousand(pWeapon_Shop[i][wPrice]));
		else strcatf(dialog, "{f5f5f5}%s\t{f5f5f5}%s{"#GREEN_COLOR"}$\n", GetObjectInfoName(pWeapon_Shop[i][wType]), number_format_thousand(pWeapon_Shop[i][wPrice]));
		
		PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = i;
		listitem ++;
	}

	strcat(dialog, "»Comprar cargador");
	PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem] = sizeof(pWeapon_Shop) + 10;
	listitem ++;

	Dialog_Show(playerid, "OnPoliceBuyWeapons", DIALOG_STYLE_TABLIST, "Armas", dialog, "Comprar", "xSalir");
	return 1;
}

ShowPoliceBuyAmmoDialog(playerid) {
	for (new i = 0; i != MAX_LISTITEMS; i++ ) PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][i] = -1;
	
	new dialog[60 * sizeof(pAmmo_Shop)], listitem_ammo;
	for (new i = 0; i != sizeof pAmmo_Shop; i ++)
	{
		if (pAmmo_Shop[i][aRank] > PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL]) strcatf(dialog, "{666666}%s\t{666666}%s$\n", GetObjectInfoName(pAmmo_Shop[i][aType]), number_format_thousand(pAmmo_Shop[i][aPrice]));
		else strcatf(dialog, "{f5f5f5}%s\t{f5f5f5}%s{"#GREEN_COLOR"}$\n", GetObjectInfoName(pAmmo_Shop[i][aType]), number_format_thousand(pAmmo_Shop[i][aPrice]));
		
		PLAYER_TEMP[playerid][pt_PLAYER_LISTITEM][listitem_ammo] = i;
		listitem_ammo ++;
	}

	Dialog_Show(playerid, "OnPoliceBuyAmmo", DIALOG_STYLE_TABLIST, "{"#POLICE_COLOUR"}[Policia]{F5F5F5}  Cargador arma", dialog, "Comprar", "xSalir");
	return 1;
}

PlayerWantedColor(playerid)
{
	if (PI[playerid][pi_WANTED_LEVEL] > 0)
	{
		if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return 0x00990000;
		else
		{
			switch(PI[playerid][pi_WANTED_LEVEL])
			{
				case 1: return 0xfff5c300;
				case 2: return 0xffe87300;
				case 3: return 0xffd60000;
				case 4: return 0xffae4600;
				case 5: return 0xff8f0000;
				case 6: return 0xff000000;
				default: return 0xff000000;
			}
		}
	}
	return PLAYER_COLOR;
}

CMD:nivel(playerid, params[])
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return ShowPlayerMessage(playerid, "No eres policia.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return ShowPlayerMessage(playerid, "No estás de servicio como policia.");
	if (sscanf(params, "ud", params[0], params[1])) return ShowPlayerMessage(playerid, "~>~ ~w~/nivel [PlayerID/Nombre] [nivel de búsqueda 0-6]");
	if (params[1] < 0 || params[1] > 6) return ShowPlayerMessage(playerid, "~>~ ~w~/nivel [PlayerID/Nombre] [nivel de búsqueda 0-6]");
	
	if (!IsPlayerConnected(params[0])) return ShowPlayerMessage(playerid, "El jugador no está conectado.");
	if (PLAYER_WORKS[params[0]][WORK_POLICE][pwork_SET]) return ShowPlayerMessage(playerid, "Este jugador es policia.");
	if (PI[params[0]][pi_STATE] == ROLEPLAY_STATE_JAIL) return ShowPlayerMessage(playerid, "Esta persona está en la cárcel.");

	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if (!IsPlayerInRangeOfPoint(playerid, 100.0, pos[0], pos[1], pos[2])) return ShowPlayerMessage(playerid, "Este jugador no está cerca tuya. (a mas de 100 metros)");

	new 
		action[64],
		message[256];

	if (params[1] == 0)
	{
		format(action, sizeof action, "le quita el nivel de busqueda a %s.", PLAYER_TEMP[params[0]][pt_NAME]);

		format(message, sizeof message, "{"#POLICE_COLOUR"}[Central policia] {F5F5F5}%s reporta: {"#PRIMARY_COLOR"}%s {F5F5F5}ya no es sospechoso.", PLAYER_TEMP[playerid][pt_NAME], PLAYER_TEMP[params[0]][pt_NAME]);
		ShowPlayerMessage(playerid, "Le has removido el nivel de busqueda a ~r~%s~w~.", PLAYER_TEMP[params[0]][pt_NAME]);
	}
	else
	{
		new 
			zone[45], 
			city[45];

		GetPlayerZones(playerid, city, zone);

		format(action, sizeof action, "le pone nivel de busqueda a %s.", PLAYER_TEMP[params[0]][pt_NAME]);
		
		ShowPlayerMessage(playerid, "Has asignado nivel de busqueda ~b~%d~w~ a ~r~%s~w~.", params[1], PLAYER_TEMP[params[0]][pt_NAME]);
		format(message, sizeof message, "{"#POLICE_COLOUR"}[Central policia] {F5F5F5}%s reporta: {"#PRIMARY_COLOR"}%s (%d**) {F5F5F5}visto en {"#GREEN_COLOR"}[%s, %s]{f5f5f5}.", PLAYER_TEMP[playerid][pt_NAME], PLAYER_TEMP[params[0]][pt_NAME], params[1], city, zone);
	}

	Auto_SendPlayerAction(playerid, action);
	SetPlayerWantedLevelEx(params[0], params[1]);

	SendPoliceRadioMessage(-1, message);
	return 1;
}
alias:nivel("cargos", "ca");

CMD:esposar(playerid, params[])
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "No eres policia.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
	if (sscanf(params, "u", params[0])) return ShowPlayerMessage(playerid, "~>~ /esposar [PlayerID/Nombre]");
	if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendPlayerClientMessage(playerid, "No estás depie.");
	
	if (!IsPlayerConnected(params[0])) return SendPlayerClientMessage(playerid, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if (!IsPlayerInRangeOfPoint(playerid, NEARS_PLAYERS_DISTANCE, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "Este jugador no está cerca tuya.");
	if (PLAYER_TEMP[params[0]][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "No puedes esposar a este jugador ahora.");
	if (GetPlayerState(params[0]) != PLAYER_STATE_ONFOOT) return SendPlayerClientMessage(playerid, "Para esposar a esta persona tiene que estar depie.");
	if (PI[params[0]][pi_WANTED_LEVEL] == 0) return SendPlayerClientMessage(playerid, "Esta persona no tiene nivel de búsqueda.");
	
	KillTimer(PLAYER_TEMP[params[0]][pt_TASER_TIMER]);
	PLAYER_TEMP[params[0]][pt_TASER_TIMER] = -1;
	PLAYER_TEMP[params[0]][pt_TASED] = false;

	GetPlayerPos(playerid, PLAYER_TEMP[params[0]][pt_INJURED_POS][0], PLAYER_TEMP[params[0]][pt_INJURED_POS][1], PLAYER_TEMP[params[0]][pt_INJURED_POS][2]);
	GetPlayerFacingAngle(playerid, PLAYER_TEMP[params[0]][pt_INJURED_POS][3]);

	GetPlayerHealth(params[0], PLAYER_TEMP[params[0]][pt_ARRESTED_HEALTH]);

	DisablePlayerInjuredMark(params[0]);
	PI[params[0]][pi_STATE] = ROLEPLAY_STATE_NORMAL;
	ApplyAnimation(params[0], "CARRY", "crry_prtial", 4.1, 0, 0, 0, 0, 0, true);
	ClearAnimations(params[0]);

	if (PLAYER_TEMP[params[0]][pt_CUFFED]) {
		KillTimer(PLAYER_TEMP[params[0]][pt_CUFFED_TIMER]);
		PLAYER_TEMP[params[0]][pt_CUFFED_TIMER] = -1;
		
		TogglePlayerControllableEx(params[0], true);
		PLAYER_TEMP[params[0]][pt_CUFFED] = false;
		PLAYER_TEMP[params[0]][pt_CUFFING] = false;
		SetPlayerSpecialAction(params[0], SPECIAL_ACTION_NONE);
		
		new action[64];
		format(action, sizeof action, "le quita las esposas a %s.", PLAYER_TEMP[params[0]][pt_NAME]);
		Auto_SendPlayerAction(playerid, action);
		return 1;
	}
	
	if (!PLAYER_TEMP[params[0]][pt_CUFFING]) {
		ShowPlayerMessage(params[0], "~b~%s~w~ te ha colocado unas esposas.", PLAYER_TEMP[playerid][pt_NAME]);
		ShowPlayerMessage(playerid, "Le has colocado esposas a ~y~%s~w~.", PLAYER_TEMP[params[0]][pt_NAME]);
		
		PLAYER_TEMP[params[0]][pt_CUFFED] = false;
		PLAYER_TEMP[params[0]][pt_CUFFING] = true;
		TogglePlayerControllableEx(params[0], false);
		CuffPlayer(params[0]);
	}
	return 1;
}

CMD:placa(playerid, params[])
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "No eres policia.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
	if (sscanf(params, "u", params[0])) return ShowPlayerMessage(playerid, "~>~ /placa [PlayerID/Nombre]");
	
	if (!IsPlayerConnected(params[0])) return SendPlayerClientMessage(playerid, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if (!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "Este jugador no está cerca tuya.");
	if (PLAYER_TEMP[params[0]][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "No puedes enseñarle tu placa a este jugador ahora.");
	
	new action[64];
	format(action, sizeof action, "le enseña su placa a %s.", PLAYER_TEMP[params[0]][pt_NAME]);
	Auto_SendPlayerAction(playerid, action);
	
	return 1;
}

CMD:licencia(playerid, params[])
{
	if (sscanf(params, "u", params[0])) return ShowPlayerMessage(playerid, "~>~ /licencia [PlayerID/Nombre]");
	if (!IsPlayerConnected(params[0])) return SendPlayerClientMessage(playerid, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if (!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "Este jugador no está cerca tuya.");

	if (PI[playerid][pi_DRIVE_LICENSE] == 0) SendPlayerClientMessage(params[0], "~r~%s~w~ no tiene licencia de conducción.", PLAYER_TEMP[playerid][pt_NAME]);
	else
	{
		new action[128];
		format(action, 128, "le muestra su licencia de conducir a %s.", PLAYER_TEMP[params[0]][pt_NAME]);
		Auto_SendPlayerAction(playerid, action);
		SendPlayerClientMessage(params[0], "{f5f5f5}Licencia de conducir de %s.", PLAYER_TEMP[playerid][pt_NAME]);
	}
	return 1;
}

CMD:revisar(playerid, params[])
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "No eres policia.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
	if (sscanf(params, "u", params[0])) return ShowPlayerMessage(playerid, "~>~ /revisar [PlayerID/Nombre]");
	if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendPlayerClientMessage(playerid, "No estás depie.");
	
	if (!IsPlayerConnected(params[0])) return SendPlayerClientMessage(playerid, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if (!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "Este jugador no está cerca tuya.");
	if (PLAYER_TEMP[params[0]][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "No puedes revisar a este jugador ahora.");
	if (GetPlayerState(params[0]) != PLAYER_STATE_ONFOOT) return SendPlayerClientMessage(playerid, "Para revisar a esta persona tiene que estar depie.");
	if (PI[params[0]][pi_WANTED_LEVEL] == 0) return SendPlayerClientMessage(playerid, "Esta persona no tiene nivel de búsqueda.");
	if (!PLAYER_TEMP[params[0]][pt_CUFFED]) return SendPlayerClientMessage(playerid, "Para revisar a esta persona tiene que estar esposada.");
	
	ShowPlayerInventory(playerid, params[0]);
	
	new action[64];
	format(action, sizeof action, "revisa a %s.", PLAYER_TEMP[params[0]][pt_NAME]);
	Auto_SendPlayerAction(playerid, action);

	ApplyAnimation(playerid, "BOMBER", "BOM_Plant", 4.0, 0, 1, 1, 0, 0);
	return 1;
}

CMD:puntos(playerid, params[])
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "No eres policia.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
	if (sscanf(params, "ud", params[0], params[1])) return ShowPlayerMessage(playerid, "~>~ /puntos [PlayerID/Nombre] [cantidad]");
	if (params[1] < 1 || params[1] > 12) return SendPlayerClientMessage(playerid, "Error: cantidad de puntos no válida.");
	if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendPlayerClientMessage(playerid, "No estás depie.");
	
	if (!IsPlayerConnected(params[0])) return SendPlayerClientMessage(playerid, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if (!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "Este jugador no está cerca tuya.");
	if (PLAYER_TEMP[params[0]][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "No puedes quitarle puntos a este jugador ahora.");
	
	PI[params[0]][pi_DRIVE_LICENSE] -= params[1];
	if (PI[params[0]][pi_DRIVE_LICENSE] < 0) PI[params[0]][pi_DRIVE_LICENSE] = 0;
	
	SendPlayerClientMessage(playerid, "Le has quitado ~r~%d puntos~w~ del carnet a %s, ahora tiene ~r~%d puntos~w~.", params[1], PLAYER_TEMP[params[0]][pt_NAME], PI[params[0]][pi_DRIVE_LICENSE]);
	SendPlayerClientMessage(params[0], "El policia %s te ha quitado ~r~%d puntos~w~ del carnet de conducir, te quedan ~r~%d puntos~w~.", PLAYER_TEMP[playerid][pt_NAME], params[1], PI[params[0]][pi_DRIVE_LICENSE]);
	return 1;
}

CMD:requisar(playerid, params[])
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "No eres policia.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
	if (sscanf(params, "u", params[0])) return ShowPlayerMessage(playerid, "~>~ /requisar [PlayerID/Nombre]");
	if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendPlayerClientMessage(playerid, "No estás depie.");
	
	if (!IsPlayerConnected(params[0])) return SendPlayerClientMessage(playerid, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if (!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "Este jugador no está cerca tuya.");
	if (PLAYER_TEMP[params[0]][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "No puedes revisar a este jugador ahora.");
	if (GetPlayerState(params[0]) != PLAYER_STATE_ONFOOT) return SendPlayerClientMessage(playerid, "Para revisar a esta persona tiene que estar depie.");
	if (PI[params[0]][pi_WANTED_LEVEL] == 0) return SendPlayerClientMessage(playerid, "Esta persona no tiene nivel de búsqueda.");
	if (!PLAYER_TEMP[params[0]][pt_CUFFED]) return SendPlayerClientMessage(playerid, "Para revisar a esta persona tiene que estar esposada.");
	
	DeleteIlegalInv(params[0]);
	
	new action[64];
	format(action, sizeof action, "requisa las pertenencias ilegales de %s.", PLAYER_TEMP[params[0]][pt_NAME]);
	Auto_SendPlayerAction(playerid, action);
	return 1;
}

CMD:ref(playerid, params[])
{
	if (PI[playerid][pi_CREW]) return Crew_RequestHelp(playerid, PI[playerid][pi_CREW]);
	if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return Police_RequestHelp(playerid);
	ShowPlayerMessage(playerid, "No estas en una ~y~banda~w~ o ~b~faccion~w~.");
	return 1;
}
alias:ref("refuerzos");

CMD:control(playerid, params[])
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "No eres policia.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
	if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 8) return SendPlayerClientMessage(playerid, "Debes ser al menos rango ~r~%s~w~ para colocar objetos policiales.", POLICE_RANKS[8]);
	
	if (GetPlayerVirtualWorld(playerid) != 0 || GetPlayerInterior(playerid) != 0) return SendPlayerClientMessage(playerid, "No puedes colocar objetos policiales aquí.");
	
	new type;
	if (sscanf(params, "d", type)) return ShowPlayerMessage(playerid, "~>~ ~w~/control [Tipo 1-5]");
	
	new modelid;
	switch(type)
	{
		case 1: modelid = 1459;
		case 2: modelid = 1238;
		case 3: modelid = 1425;
		case 4: modelid = 3265;
		case 5: modelid = 3091;
		default: return SendPlayerClientMessage(playerid, "Tipo de objeto no válido.");
	}
	
	new index = GetFreePoliceObjectSlot();
	if (index == -1) return SendPlayerClientMessage(playerid, "No se pueden crear más objetos policiales.");
	
	POLICE_OBJECTS[index][police_object_VALID] = true;
	format(POLICE_OBJECTS[index][police_object_USER], 24, "%s", PI[playerid][pi_NAME]);
	
	new Float:pos[3], Float:angle;
	GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
	GetPlayerFacingAngle(playerid, angle);
	pos[0] += (1.5 * floatsin(-angle, degrees));
	pos[1] += (1.5 * floatcos(-angle, degrees));

	POLICE_OBJECTS[index][police_object_OBJECT_ID] = CreateDynamicObject(modelid, pos[0], pos[1], pos[2], 0.0, 0.0, angle, GetPlayerVirtualWorld(playerid), 0);
	Streamer_Update(playerid);
	new info[3];
	info[0] = OBJECT_TYPE_POLICE;
	info[1] = index; // Index
	Streamer_SetArrayData(STREAMER_TYPE_OBJECT, POLICE_OBJECTS[index][police_object_OBJECT_ID], E_STREAMER_EXTRA_ID, info);
	PLAYER_TEMP[playerid][pt_SELECTED_POLICE_OBJECT_INDEX] = index;
	EditDynamicObject(playerid, POLICE_OBJECTS[index][police_object_OBJECT_ID]);
	
	SendPlayerClientMessage(playerid, "Coloca el objeto, posteriormente puedes usar /econtrol para moverlo o eliminarlo.");
	return 1;
}

CMD:econtrol(playerid, params[])
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "No eres policia.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
	if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 8) return SendPlayerClientMessage(playerid, "Debes ser al menos rango ~r~%s~w~ para editar objetos policiales.", POLICE_RANKS[8]);
	
	if (GetPlayerVirtualWorld(playerid) != 0 || GetPlayerInterior(playerid) != 0) return SendPlayerClientMessage(playerid, "No puedes editar objetos policiales aquí.");
	
	SelectObject(playerid);
	return 1;
}

public OnPlayerSelectDynamicObject(playerid, STREAMER_TAG_OBJECT objectid, modelid, Float:x, Float:y, Float:z)
{
	new info[3];
	Streamer_GetArrayData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, info);

	switch(info[0])
	{
		case OBJECT_TYPE_POLICE:
		{
			if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
			{
				CancelEdit(playerid);
				SendPlayerClientMessage(playerid, "No eres policia.");
				return 1;
			}
			if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE)
			{
				CancelEdit(playerid);
				SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
				return 1;
			}
			if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 8)
			{
				CancelEdit(playerid);
				SendPlayerClientMessage(playerid, "Debes ser al menos rango ~r~%s~w~ para colocar objetos policiales.", POLICE_RANKS[8]);
				return 1;
			}
			
			SendPlayerClientMessage(playerid, "Este objeto fue colocado por ~b~%s.~n~~n~~w~ Usa ~b~'ESC'~w~ para borrar el objeto, o usa los controles para moverlo.", POLICE_OBJECTS[ info[1] ][police_object_USER]);
			PLAYER_TEMP[playerid][pt_SELECTED_POLICE_OBJECT_INDEX] = info[1];
			EditDynamicObject(playerid, objectid);
			return 1;
		}
		default: {
			if (PI[playerid][pi_ADMIN_LEVEL] == CMD_ADMINISTRATOR) {
				EditDynamicObject(playerid, objectid);
			}
		}
	}
	
	return 1;
}

SetCorrectObjectPos(objectid)
{
	new Float:x, Float:y, Float:z, Float:rx, Float:ry, Float:rz;
	GetDynamicObjectPos(objectid, x, y, z);
	GetDynamicObjectRot(objectid, rx, ry, rz);

	SetDynamicObjectPos(objectid, x, y, z);
	SetDynamicObjectRot(objectid, rx, ry, rz);
}

public OnPlayerEditDynamicObject(playerid, STREAMER_TAG_OBJECT objectid, response, Float:x, Float:y, Float:z, Float:rx, Float:ry, Float:rz)
{
	switch(response)
	{
		case EDIT_RESPONSE_CANCEL:
		{
			new info[3];
			Streamer_GetArrayData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, info);
			switch(info[0])
			{
				case OBJECT_TYPE_POLICE:
				{
					if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
					{
						CancelEdit(playerid);
						SendPlayerClientMessage(playerid, "No eres policia.");
						return 1;
					}
					if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE)
					{
						CancelEdit(playerid);
						SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
						return 1;
					}
					if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 8)
					{
						CancelEdit(playerid);
						SendPlayerClientMessage(playerid, "Debes ser al menos rango ~r~%s~w~ para colocar objetos policiales.", POLICE_RANKS[8]);
						return 1;
					}
					
					DestroyDynamicObject(POLICE_OBJECTS[ info[1] ][police_object_OBJECT_ID]);
					POLICE_OBJECTS[ info[1] ][police_object_VALID] = false;
					POLICE_OBJECTS[ info[1] ][police_object_USER][0] = EOS;
					POLICE_OBJECTS[ info[1] ][police_object_OBJECT_ID] = INVALID_STREAMER_ID;
					SendPlayerClientMessage(playerid, "Objeto policial eliminado.");
				}
				case OBJECT_TYPE_TEST:
				{
					DestroyDynamicObject(objectid);
				}
			}
		}
		case EDIT_RESPONSE_FINAL:
		{
			new info[3];
			Streamer_GetArrayData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, info);
			
			switch(info[0])
			{
				case OBJECT_TYPE_POLICE:
				{
					if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
					{
						CancelEdit(playerid);
						SendPlayerClientMessage(playerid, "No eres policia.");
						SetCorrectObjectPos(objectid);
						return 1;
					}
					if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE)
					{
						CancelEdit(playerid);
						SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
						SetCorrectObjectPos(objectid);
						return 1;
					}
					if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 8)
					{
						CancelEdit(playerid);
						SendPlayerClientMessage(playerid, "Debes ser al menos rango ~r~%s~w~ para colocar objetos policiales.", POLICE_RANKS[8]);
						SetCorrectObjectPos(objectid);
						return 1;
					}

					SetDynamicObjectPos(objectid, x, y, z);
					SetDynamicObjectRot(objectid, rx, ry, rz);

					SendPlayerClientMessage(playerid, "Objeto movido correctamente");

					format(POLICE_OBJECTS[ info[1] ][police_object_USER], 24, "%s", PI[playerid][pi_NAME]);

				}
				case OBJECT_TYPE_TEST: 
				{
					printf("CreateDynamicObject(%d, %f, %f, %f, %f, %f, %f);", Streamer_GetIntData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_MODEL_ID), x, y, z, rx, ry, rz);
					
					SetDynamicObjectPos(objectid, x, y, z);
					SetDynamicObjectRot(objectid, rx, ry, rz);
				}
			}
		}
	}
	return 1;
}

CMD:multar(playerid, params[])
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "No eres policia.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
	if (sscanf(params, "ud", params[0], params[1])) return ShowPlayerMessage(playerid, "~>~ ~w~/multar [PlayerID/Nombre] [precio$]");
	if (params[1] < 0) return SendPlayerClientMessage(playerid, "El precio no puede ser menor a 0$.");
	else if (params[1] > 100000) return SendPlayerClientMessage(playerid, "El precio no puede ser mayor a 100.000$.");
	
	if (!IsPlayerConnected(params[0])) return SendPlayerClientMessage(playerid, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if (!IsPlayerInRangeOfPoint(playerid, 5.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "Este jugador no está cerca tuya.");
	if (PLAYER_TEMP[params[0]][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "No puedes multar a este jugador ahora.");
	if (PI[params[0]][pi_STATE] == ROLEPLAY_STATE_ARRESTED || PI[params[0]][pi_STATE] == ROLEPLAY_STATE_JAIL) return SendPlayerClientMessage(playerid, "No puedes multar a este jugador ahora.");
	
	PLAYER_TEMP[params[0]][pt_POLICE_PEN_PID] = playerid;
	PLAYER_TEMP[params[0]][pt_POLICE_PEN_AID] = PI[playerid][pi_ID];
	PLAYER_TEMP[params[0]][pt_POLICE_PEN_IM] = params[1];
	PLAYER_TEMP[params[0]][pt_POLICE_PEN_TIME] = gettime();
	ShowDialog(params[0], DIALOG_POLICE_PENALTY);
	
	SendPlayerClientMessage(playerid, "La multa ha sido enviada, espera para ver si el jugador la acepta.");
	return 1;
}

CMD:arrestar(playerid, params[])
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "No eres policia.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
	
	if (sscanf(params, "ud", params[0], params[1])) return ShowPlayerMessage(playerid, "~>~ /arrestar [PlayerID/Nombre] [Asiento 1 ó 2]");
	if (params[1] < 1 || params[1] > 2) return ShowPlayerMessage(playerid, "~>~ /arrestar [PlayerID/Nombre] [Asiento 1 ó 2]");
	params[1] ++;
	
	if (!IsPlayerInAnyVehicle(playerid)) return SendPlayerClientMessage(playerid, "Para arrestar tienes que estar dentro de un vehículo policial.");
	
	new vehicleid = GetPlayerVehicleID(playerid);
	if (!WORK_VEHICLES[vehicleid][work_vehicle_VALID]) return SendPlayerClientMessage(playerid, "Para arrestar tienes que estar dentro de un vehículo policial.");
	if (WORK_VEHICLES[vehicleid][work_vehicle_WORK] != WORK_POLICE) return SendPlayerClientMessage(playerid, "Para arrestar tienes que estar dentro de un vehículo policial.");
	if ( (params[1] + 1) > VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_SEATS]) return SendPlayerClientMessage(playerid, "Este vehículo es de %d pasajeros, asi que no puedes llevar arrestados en él.", VEHICLE_INFO[ GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400 ][vehicle_info_SEATS]);
	
	if (!IsPlayerConnected(params[0])) return SendPlayerClientMessage(playerid, "El jugador no está conectado.");
	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if (!IsPlayerInRangeOfPoint(playerid, 5.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "Este jugador no está cerca tuya.");
	if (PLAYER_TEMP[params[0]][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "No puedes arrestar a este jugador ahora.");
	
	if (PI[params[0]][pi_WANTED_LEVEL] == 0) return SendPlayerClientMessage(playerid, "Esta persona no tiene nivel de búsqueda.");
	if (!PLAYER_TEMP[params[0]][pt_CUFFED] && PI[params[0]][pi_STATE] != ROLEPLAY_STATE_CRACK) return SendPlayerClientMessage(playerid, "Para arrestar a esta persona tiene que estar esposada.");
	
	KillTimer(PLAYER_TEMP[params[0]][pt_CUFFED_TIMER]);
	PLAYER_TEMP[params[0]][pt_CUFFED_TIMER] = -1;

	if (PI[params[0]][pi_STATE] == ROLEPLAY_STATE_ARRESTED)
	{
		TogglePlayerControllableEx(params[0], true);
		PLAYER_TEMP[params[0]][pt_CUFFED] = false;
		PLAYER_TEMP[params[0]][pt_CUFFING] = false;
		SetPlayerSpecialAction(params[0], SPECIAL_ACTION_NONE);
		PI[params[0]][pi_STATE] = ROLEPLAY_STATE_NORMAL;
		
		SendPlayerClientMessage(playerid, "Has soltado a ~r~%s~w~.", PLAYER_TEMP[params[0]][pt_NAME]);
		return 1;
	}
	else
	{
		if (PI[params[0]][pi_STATE] == ROLEPLAY_STATE_CRACK) {
			DisablePlayerInjuredMark(params[0]);
			ApplyAnimation(params[0], "CARRY", "crry_prtial", 4.1, 0, 0, 0, 0, 0, true);
			ClearAnimations(params[0]);
		}

		PI[params[0]][pi_STATE] = ROLEPLAY_STATE_ARRESTED;
		TogglePlayerControllableEx(params[0], false);
		PutPlayerInVehicleEx(params[0], vehicleid, params[1]);
	}
	return 1;
}

CMD:m(playerid, params[])
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "No eres policia.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
	
	if (!IsPlayerInAnyVehicle(playerid)) return SendPlayerClientMessage(playerid, "Para usar el megáfono tienes que estar dentro de un vehículo oficial.");
	
	new vehicleid = GetPlayerVehicleID(playerid);
	if (!WORK_VEHICLES[vehicleid][work_vehicle_VALID]) return SendPlayerClientMessage(playerid, "Para usar el megáfono tienes que estar dentro de un vehículo oficial.");
	if (WORK_VEHICLES[vehicleid][work_vehicle_WORK] != WORK_POLICE) return SendPlayerClientMessage(playerid, "Para usar el megáfono tienes que estar dentro de un vehículo oficial.");

	if (isnull(params)) return ShowPlayerMessage(playerid, "~>~ /m [Mensaje]");

	new str_text[190];
	format(str_text, 190, "(Megáfono) %s: {F5F5F5}%s", PLAYER_TEMP[playerid][pt_NAME], params);
	ProxDetector(playerid, 40.0, str_text, 0xFF9B6AFF, 0xFF9B6AFF, 0xFF9B6AFF, 0xFF9B6AFF, 0xFF9B6AFF, 85);
	return 1;
}

PutPlayerInVehicleEx(playerid, vehicleid, seat)
{
	PLAYER_AC_INFO[playerid][CHEAT_POS][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_STATE_SPAMMER][p_ac_info_IMMUNITY] = gettime() + 3;
	PLAYER_AC_INFO[playerid][CHEAT_PLAYER_VEHICLE_DOORS][p_ac_info_IMMUNITY] = gettime() + 5;
	PLAYER_AC_INFO[playerid][CHEAT_VEHICLE_NOFUEL][p_ac_info_IMMUNITY] = gettime() + 15;
	return PutPlayerInVehicle(playerid, vehicleid, seat);
}

CMD:entregar(playerid, params[])
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return ShowPlayerMessage(playerid, "No estas en una ~b~faccion~w~.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return ShowPlayerMessage(playerid, "No estás de servicio en una ~b~faccion~w~.");
	
	if (sscanf(params, "u", params[0])) return ShowPlayerMessage(playerid, "~>~ /entregar [PlayerID/Nombre]");
	
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return ShowPlayerMessage(playerid, "Para entregar tienes que estar dentro de un vehiculo de faccion.");
	
	new vehicleid = GetPlayerVehicleID(playerid);
	if (!WORK_VEHICLES[vehicleid][work_vehicle_VALID]) return ShowPlayerMessage(playerid, "Para entregar tienes que estar dentro de un vehiculo de faccion.");
	if (WORK_VEHICLES[vehicleid][work_vehicle_WORK] != WORK_POLICE) return ShowPlayerMessage(playerid, "Para entregar tienes que estar dentro de un vehiculo de faccion.");
	
	if (!IsPlayerConnected(params[0])) return ShowPlayerMessage(playerid, "El jugador no está conectado.");

	new Float:pos[3]; GetPlayerPos(params[0], pos[0], pos[1], pos[2]);
	if (!IsPlayerInRangeOfPoint(playerid, 5.0, pos[0], pos[1], pos[2])) return ShowPlayerMessage(playerid, "Este jugador no está cerca tuya.");

	if (PLAYER_TEMP[params[0]][pt_GAME_STATE] != GAME_STATE_NORMAL) return ShowPlayerMessage(playerid, "No puedes arrestar a este jugador ahora.");
	if (GetPlayerState(params[0]) != PLAYER_STATE_PASSENGER) return ShowPlayerMessage(playerid, "Para entregar a esta persona tiene que estar dentro de un vehiculo de faccion.");
	if (GetPlayerVehicleID(params[0]) != vehicleid) return ShowPlayerMessage(playerid, "Para entregar a esta persona tiene que estar dentro de un vehiculo de faccion.");
	if (PI[params[0]][pi_WANTED_LEVEL] == 0) return ShowPlayerMessage(playerid, "Esta persona no tiene ~r~nivel de busqueda~w~.");
	
	if (IsPlayerInRangeOfPoint(playerid, 20.0, 1587.9720, -1636.9628, 13.4006)) {
		ShowPlayerMessage(playerid, "La persona ahora esta en la ~b~carcel~w~.");
		PI[params[0]][pi_POLICE_JAIL_ID] = 0;
		PLAYER_TEMP[params[0]][pt_ARRESTED_JAIL_TIME] = gettime() + 2;
		JailPlayer(params[0]);
	}
	else ShowPlayerMessage(playerid, "No estás en el ~r~garage de la comisaria~w~.");
	return 1;
}

CMD:policias(playerid, params[])
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "No eres policia.");
	
	PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT] = 10;
	PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] = 0;
	ShowDialog(playerid, DIALOG_POLICE_LIST);
	return 1;
}

forward CuffPlayer(playerid);
public CuffPlayer(playerid)
{
	StopAudioStreamForPlayer(playerid);
	SetPlayerDrunkLevel(playerid, 0);
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	CancelEdit(playerid);
	HidePlayerDialog(playerid);
	CallLocalFunction("EndPlayerJob", "iib", playerid, PLAYER_TEMP[playerid][pt_WORKING_IN], true);
	PLAYER_TEMP[playerid][pt_HUNGRY_MESSAGE] = false;
	PLAYER_TEMP[playerid][pt_THIRST_MESSAGE] = false;
	PLAYER_TEMP[playerid][pt_PLAYER_IN_ATM] = false;
	PLAYER_TEMP[playerid][pt_CUFFED] = false;
	PLAYER_TEMP[playerid][pt_CUFFING] = false;
	if (PLAYER_TEMP[playerid][pt_WANT_TAXI])
	{
		PLAYER_TEMP[playerid][pt_WANT_TAXI] = false;
		DisablePlayerTaxiMark(playerid);
	}
	if (PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL]) EndPhoneCall(playerid);
	if (PLAYER_TEMP[playerid][pt_GPS_MAP]) HidePlayerGpsMap(playerid);
	if (PI[playerid][pi_WANTED_LEVEL] > 0) DisablePlayerPoliceMark(playerid);
	
	PLAYER_TEMP[playerid][pt_CUFFED] = true;
	PLAYER_TEMP[playerid][pt_CUFFING] = false;
	TogglePlayerControllableEx(playerid, true);
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_CUFFED);

	OnPlayerCuffed(playerid);
	return 1;
}

forward OnPlayerCuffed(playerid);
public OnPlayerCuffed(playerid) {
	KillTimer(PLAYER_TEMP[playerid][pt_CUFFED_TIMER]);
	PLAYER_TEMP[playerid][pt_CUFFED_TIMER] = -1;

	if (PLAYER_TEMP[playerid][pt_CUFFED] && GetPlayerState(playerid) == PLAYER_STATE_ONFOOT) {
        if(GetPlayerDistanceFromPoint(playerid, PLAYER_TEMP[playerid][pt_INJURED_POS][0], PLAYER_TEMP[playerid][pt_INJURED_POS][1], PLAYER_TEMP[playerid][pt_INJURED_POS][2]) > 0.7)
        {
            SetPlayerPosEx(playerid, PLAYER_TEMP[playerid][pt_INJURED_POS][0], PLAYER_TEMP[playerid][pt_INJURED_POS][1], PLAYER_TEMP[playerid][pt_INJURED_POS][2], PLAYER_TEMP[playerid][pt_INJURED_POS][3], GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid), false);
			SetPlayerSpecialAction(playerid, SPECIAL_ACTION_CUFFED);
		}

		if(GetPlayerSpecialAction(playerid) != SPECIAL_ACTION_CUFFED) SetPlayerSpecialAction(playerid, SPECIAL_ACTION_CUFFED);

		PLAYER_TEMP[playerid][pt_CUFFED_TIMER] = SetTimerEx("OnPlayerCuffed", 1000, false, "d", playerid);
	}
	return 1;
}

SendPoliceRadioMessage(radio, const message[])
{
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i) && PLAYER_TEMP[i][pt_USER_LOGGED])
		{
			if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if (PLAYER_WORKS[i][WORK_POLICE][pwork_SET])
				{
					if (PLAYER_TEMP[i][pt_WORKING_IN] == WORK_POLICE)
					{
						if (radio == -1) SendPlayerClientMessage(i, message);
						else
						{
							if (PLAYER_TEMP[i][pt_POLICE_RADIO] == radio)
							{
								SendPlayerClientMessage(i, message);
							}
						}
					}
				}
			}
		}
	}
	return 1;
}

CountPoliceRadioPlayers(radio)
{
	new total;
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if (PLAYER_WORKS[i][WORK_POLICE][pwork_SET])
				{
					if (PLAYER_TEMP[i][pt_WORKING_IN] == WORK_POLICE)
					{
						if (PLAYER_TEMP[i][pt_POLICE_RADIO] == radio)
						{
							total ++;
						}
					}
				}
			}
		}
	}
	return total;
}

GetPlayerZones(playerid, city[], zone[])
{
	new Float:f_Pos[3];
	
	switch(PI[playerid][pi_STATE])
	{
		case ROLEPLAY_STATE_INTERIOR:
		{
			f_Pos[0] = ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_EXT_X];
			f_Pos[1] = ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_EXT_Y];
			f_Pos[2] = ENTER_EXIT[ PLAYER_TEMP[playerid][pt_INTERIOR_INDEX] ][ee_EXT_Z];
		}
		case ROLEPLAY_STATE_OWN_PROPERTY, ROLEPLAY_STATE_GUEST_PROPERTY:
		{
			f_Pos[0] = PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PROPERTY_INDEX] ][property_EXT_X];
			f_Pos[1] = PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PROPERTY_INDEX] ][property_EXT_Y];
			f_Pos[2] = PROPERTY_INFO[ PLAYER_TEMP[playerid][pt_PROPERTY_INDEX] ][property_EXT_Z];
		}
		default: GetPlayerPos(playerid, f_Pos[0], f_Pos[1], f_Pos[2]);
	}

    format(city, 45, "San Andreas");
    format(zone, 45, "Desconocida");

	for (new i = 0; i < sizeof(g_Cities); i++)
	{
	    if (	(f_Pos[0] >= g_Cities[i][z_MinX] && f_Pos[0] < g_Cities[i][z_MaxX]) && (f_Pos[1] >= g_Cities[i][z_MinY] && f_Pos[1] < g_Cities[i][z_MaxY]) )
		{
			format(city, 45, g_Cities[i][z_Name]);
		    break;
		}
	}

	for (new i = 0; i < sizeof(g_Zones); i++)
	{
	    if (	(f_Pos[0] >= g_Zones[i][z_MinX] && f_Pos[0] < g_Zones[i][z_MaxX]) && (f_Pos[1] >= g_Zones[i][z_MinY] && f_Pos[1] < g_Zones[i][z_MaxY]) )
		{
			format(zone, 45, g_Zones[i][z_Name]);
		    break;
		}
	}
	
	return 1;
}

SetPlayerWantedLevelEx(playerid, level)
{
	PI[playerid][pi_WANTED_LEVEL] = level;
	SetPlayerWantedLevel(playerid, level);

	if (PI[playerid][pi_WANTED_LEVEL] == 0)
	{
		DisablePlayerPoliceMark(playerid);
		return 1;
	}

	PLAYER_TEMP[playerid][pt_LAST_SET_WANTED_LEVEL] = gettime();
	SetWantedMarkerToPolice(playerid);

	if (PI[playerid][pi_PASSIVE_MODE]) {
		PI[playerid][pi_PASSIVE_MODE] = false;
	}
	return 1;
}

GetPointZone(Float:f_Pos_X, Float:f_Pos_Y, city[], zone[], bool:use_zone = true)
{
	format(city, 45, "San Andreas");
    if (use_zone) format(zone, 45, "Desconocida");

	for (new i = 0; i < sizeof(g_Cities); i++)
	{
	    if (	(f_Pos_X >= g_Cities[i][z_MinX] && f_Pos_X < g_Cities[i][z_MaxX]) && (f_Pos_Y >= g_Cities[i][z_MinY] && f_Pos_Y < g_Cities[i][z_MaxY]) )
		{
			format(city, 45, g_Cities[i][z_Name]);
		    break;
		}
	}
	
	if (use_zone) {
		for (new i = 0; i < sizeof(g_Zones); i++)
		{
			if (	(f_Pos_X >= g_Zones[i][z_MinX] && f_Pos_X < g_Zones[i][z_MaxX]) && (f_Pos_Y >= g_Zones[i][z_MinY] && f_Pos_Y < g_Zones[i][z_MaxY]) )
			{
				format(zone, 45, g_Zones[i][z_Name]);
				break;
			}
		}
	}

	return 1;
}

GetAreaZone(Float:min_x, Float:min_y, zone[])
{
    format(zone, 45, "Desconocida");

    for (new i = 0; i < sizeof(g_Zones); i++)
    {
        if (
			(min_x >= g_Zones[i][z_MinX] && min_x < g_Zones[i][z_MaxX]) &&
        	(min_y >= g_Zones[i][z_MinY] && min_y < g_Zones[i][z_MaxY])
		) {
			format(zone, 45, g_Zones[i][z_Name]);
            break;
        }
    }
    return 1;
}

JailPlayer(playerid, time = 0)
{
	PI[playerid][pi_STATE] = ROLEPLAY_STATE_JAIL;

	if (time)
		PI[playerid][pi_POLICE_JAIL_TIME] = time;
	else
	{	
		if (PI[playerid][pi_VIP]) PI[playerid][pi_POLICE_JAIL_TIME] = 150 * PI[playerid][pi_WANTED_LEVEL];
		else PI[playerid][pi_POLICE_JAIL_TIME] = 300 * PI[playerid][pi_WANTED_LEVEL];
	}

	SetPlayerWantedLevelEx(playerid, 0);
	PLAYER_TEMP[playerid][pt_ENTER_JAIL_TIME] = gettime();
	SetPlayerPosEx(playerid, JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID] ][jail_X], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_Y], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_Z], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_ANGLE], JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_INTERIOR], 0, true);
	
	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][15]);
	PLAYER_TEMP[playerid][pt_TIMERS][15] = SetTimerEx("UnjailPlayer", PI[playerid][pi_POLICE_JAIL_TIME] * 1000, false, "i", playerid);
	
	SendPlayerClientMessage(playerid, "Te quedan %s minutos de condena.", TimeConvert( PI[playerid][pi_POLICE_JAIL_TIME] - (gettime() - PLAYER_TEMP[playerid][pt_ENTER_JAIL_TIME]) ));
	ResetPlayerWeapons(playerid);
	SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);
	DisablePlayerPoliceMark(playerid);
	DeleteIlegalInv(playerid);

	GetPlayerHealth(playerid, PLAYER_TEMP[playerid][pt_ARRESTED_HEALTH]);
	return 1;
}

forward UnjailPlayer(playerid);
public UnjailPlayer(playerid) {
	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][15]);
	PI[playerid][pi_POLICE_JAIL_TIME] = 0;
	SetPlayerWantedLevelEx(playerid, 0);
	PI[playerid][pi_STATE] = ROLEPLAY_STATE_INTERIOR;
	SetPlayerArmedWeapon(playerid, 0);

	for (new i = 0; i != sizeof ENTER_EXIT; i ++) {
		if (ENTER_EXIT[i][ee_INTERIOR_TYPE] == JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID] ][jail_INT]) {
			PI[playerid][pi_LOCAL_INTERIOR] = ENTER_EXIT[i][ee_ID];
			PLAYER_TEMP[playerid][pt_PROPERTY_INDEX] = -1;
			SetPlayerPosEx(playerid, ENTER_EXIT[i][ee_INT_X], ENTER_EXIT[i][ee_INT_Y], ENTER_EXIT[i][ee_INT_Z], ENTER_EXIT[i][ee_INT_ANGLE] + 180.0, ENTER_EXIT[i][ee_INT_INTERIOR], ENTER_EXIT[i][ee_INT_WORLD], true);
			StopAudioStreamForPlayer(playerid);
			break;
		}
	}
	
	SendPlayerClientMessage(playerid, "Has cumplido tu condena.");
	return 1;
}

DisablePlayerPoliceMark(playerid) {
	foreach (new i : Player) {
		if (IsPlayerConnected(i)) {
			if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL) {
				if (i == playerid) continue;
				if (!PLAYER_WORKS[i][WORK_POLICE][pwork_SET]) continue;
				if (PLAYER_TEMP[i][pt_WORKING_IN] != WORK_POLICE) continue;
				
				SetPlayerMarkerForPlayer(i, playerid, PLAYER_COLOR);
			}
		}
	}
	return 1;
}

Crew_RequestHelp(playerid, crew_id)
{
	new
		city[45],
		zone[45],
		crew_message[145];

	GetPlayerZones(playerid, city, zone);

	if (!PLAYER_TEMP[playerid][pt_REINFORCEMENT]) {
		foreach (new i : Player) {
			if (IsPlayerConnected(i)) {
				if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL) {
					if (i == playerid) continue;
					if (PI[i][pi_CREW] != crew_id) continue;
					
					SetPlayerMarkerForPlayer(i, playerid, CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR]);
				}
			}
		}
		format(crew_message, sizeof crew_message, "{%06x}[Banda] {F5F5F5}%s está pidiendo refuerzos en {"#GREEN_COLOR"}[%s, %s]", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME], city, zone);
		SendMessageToCrewMembers(crew_id, crew_message);

		PLAYER_TEMP[playerid][pt_REINFORCEMENT] = true;
	} else {
		foreach (new i : Player) {
			if (IsPlayerConnected(i)) {
				if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL) {
					if (i == playerid) continue;
					if (PI[i][pi_CREW] != crew_id) continue;
					
					SetPlayerMarkerForPlayer(i, playerid, PLAYER_COLOR);
				}
			}
		}
		format(crew_message, sizeof crew_message, "{%06x}[Banda] {F5F5F5}%s ya no necesita refuerzos.", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_COLOR] >>> 8, PLAYER_TEMP[playerid][pt_NAME]);
		SendMessageToCrewMembers(crew_id, crew_message);

		PLAYER_TEMP[playerid][pt_REINFORCEMENT] = false;
	}
	return 1;
}

Police_RequestHelp(playerid) {
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE) return SendPlayerClientMessage(playerid, "No estás de servicio como policia.");
	
	new city[45], zone[45], police_message[145];
	GetPlayerZones(playerid, city, zone);

	if (!PLAYER_TEMP[playerid][pt_REINFORCEMENT]) {
		foreach (new i : Player) {
			if (IsPlayerConnected(i)) {
				if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL) {
					if (i == playerid) continue;
					if (!PLAYER_WORKS[i][WORK_POLICE][pwork_SET]) continue;
					if (PLAYER_TEMP[i][pt_WORKING_IN] != WORK_POLICE) continue;
					
					SetPlayerMarkerForPlayer(i, playerid, 0x0f4bffff);
				}
			}
		}
		format(police_message, sizeof police_message, "{"#POLICE_COLOUR"}[Central policia] {F5F5F5}%s %s necesita refuerzos en {"#GREEN_COLOR"}[%s, %s]", POLICE_RANKS[ PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] ], PLAYER_TEMP[playerid][pt_NAME], city, zone);
		SendPoliceRadioMessage(-1, police_message);

		PLAYER_TEMP[playerid][pt_REINFORCEMENT] = true;
	} else {
		foreach (new i : Player) {
			if (IsPlayerConnected(i)) {
				if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL) {
					if (i == playerid) continue;
					if (!PLAYER_WORKS[i][WORK_POLICE][pwork_SET]) continue;
					if (PLAYER_TEMP[i][pt_WORKING_IN] != WORK_POLICE) continue;
					
					SetPlayerMarkerForPlayer(i, playerid, PLAYER_COLOR);
				}
			}
		}
		format(police_message, sizeof police_message, "{"#POLICE_COLOUR"}[Central policia] {F5F5F5}%s ya no necesita refuerzos.", PLAYER_TEMP[playerid][pt_NAME]);
		SendPoliceRadioMessage(-1, police_message);

		PLAYER_TEMP[playerid][pt_REINFORCEMENT] = false;
	}
	return 1;
}

SetWantedMarkerToPolice(playerid) {
	foreach (new i : Player) {
		if (IsPlayerConnected(i)) {
			if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL) {
				if (i == playerid) continue;
				if (!PLAYER_WORKS[i][WORK_POLICE][pwork_SET]) continue;
				if (PLAYER_TEMP[i][pt_WORKING_IN] != WORK_POLICE) continue;
				
				SetPlayerMarkerForPlayer(i, playerid, PlayerWantedColor(playerid));
			}
		}
	}
	return 1;
}

ShowPlayerStats(playerid, pid) {
	if (!IsPlayerConnected(pid)) return 0;
	if (PI[pid][pi_ID] == 0) return 0;
	
	new next_rep[24], color = 0xFFFFFFFF;
	if (PI[pid][pi_REP] < neccessary_rep[ PI[playerid][pi_LEVEL] ]) {
		new time = (PI[pid][pi_TIME_FOR_REP] - (gettime() * 1000 - PLAYER_TEMP[pid][pt_TIME_PASSED_LAST_REP])) / 1000;
		if (time < 3) time = 3;
		
		format(next_rep, sizeof next_rep, "%s min", TimeConvert(time));
	}
	
	if (PI[pid][pi_CREW]) {
		color = CREW_INFO[ PLAYER_TEMP[pid][pt_CREW_INDEX] ][crew_COLOR];
	}
	
	new caption[48], dialog[1300 + (27 * sizeof(work_info))];
	format(caption, sizeof caption, "Estadísticas de %s", PLAYER_TEMP[pid][pt_NAME]);
	
	format(dialog, sizeof dialog,
		
		"\
			{F5F5F5}ID: %d\n\
			Nombre: %s\n\
			Correo electrónico: %s\n\
			Fecha registro: %s\n\
			Últ. conexión: %s\n\
			Tiempo jugando: %s\n\
			\n\
			Nivel: %d\n\
			Reputación: %d/%d\n\
			Siguiente reputación: %s\n\
			\n\
			Vida: {d12f1c}%d{F5F5F5} Chaleco: {6d6d6d}%d{F5F5F5} Hambre: {ff9a19}%d{F5F5F5} Sed: {1ba5ff}%d{F5F5F5}\n\
			\n\
			Trabajo(s): %s\n\
			Licencia: %s\n\
			Banda: {%06x}%s{F5F5F5}\n\
			Busqueda: %d**\n\
			Dinero: %s{"#GREEN_COLOR"}${F5F5F5}\n\
			Dinero bancario: %s{"#BLUE_COLOR"}${F5F5F5}\n\
			Moneda: %d{ffd219}"SERVER_COIN"s{F5F5F5}\n\
			VIP: %s{F5F5F5}\n\
			Dispositivo: %s{F5F5F5}\n\
			Invitados: %d{F5F5F5}\n\
			\n\
			Para estadisticas de tus trabajos utiliza /exp.\n\
			Para ver tus pertenencias usa /inv.\n\
		",
			
			PI[pid][pi_ID],
			PI[pid][pi_NAME],
			PI[pid][pi_EMAIL],
			PI[pid][pi_REG_DATE],
			PI[pid][pi_LAST_CONNECTION],
			TimeConvertAsText(PI[pid][pi_TIME_PLAYING]),
			PI[pid][pi_LEVEL],
			PI[pid][pi_REP], neccessary_rep[ PI[playerid][pi_LEVEL] ],
			next_rep,
			floatround(PI[pid][pi_HEALTH]),
			floatround(PI[pid][pi_ARMOUR]),
			floatround(PI[pid][pi_HUNGRY]),
			floatround(PI[pid][pi_THIRST]),
			getPlayerWorks(pid),
			(PI[pid][pi_DRIVE_LICENSE] ? "Auto" : "Ninguna"),
			(color >>> 8),
			getPlayerCrew(pid),
			PI[pid][pi_WANTED_LEVEL],
			number_format_thousand(PI[pid][pi_CASH]),
			number_format_thousand(PI[pid][pi_BANK_MONEY]),
			PI[pid][pi_COINS],
			getPlayerVip(pid),
			(PI[pid][pi_PLAYER_PLATFORM] ? "{3ee134}Android" : "{0088FF}PC"),
			GetPlayerReferredUses(pid)
	);
	
	ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, caption, dialog, "xCerrar", "");	
	return 1;
}

getPlayerCrew(playerid) {
	new crew[32];
	if (!PI[playerid][pi_CREW]) crew = "ninguna";
	else format(crew, sizeof crew, "%s", CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_NAME]);
	return crew;
}

getPlayerVip(playerid) {
	new vip[16];
	if (!PI[playerid][pi_VIP]) vip = "No";
	else vip = "Si";
	return vip;
}

AddPlayerBadHistory(account_id, by_account_id, type, text[]) {
	new date[24];
	getDateTime(date);
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO bad_history (id_player, type, `by`, `text`, `date`) VALUES (%d, %d, %d, '%e', '%e');", account_id, type, by_account_id, text, date);
	mysql_tquery(handle_db, QUERY_BUFFER);
	return 1;
}

AddPlayerBan(account_id, account_name[], account_ip[], by_account_id, type, text[], days = 0) {
	new date[24], account_name_fix[24], account_ip_fix[24];
	getDateTime(date);
	format(account_name_fix, 24, "%s", account_name);
	format(account_ip_fix, 16, "%s", account_ip);

	if (!days)
	{
		inline OnBadHistoryInserted1()
		{
			new id = cache_insert_id();
			if (id)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO bans (name, ip, id_history) VALUES ('%e', '%e', %d);", account_name_fix, account_ip_fix, id);
				mysql_tquery(handle_db, QUERY_BUFFER);
			}
		}
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO bad_history (id_player, type, `by`, `text`, `date`) VALUES (%d, %d, %d, '%e', '%e');", account_id, type, by_account_id, text, date);
		MySQL_TQueryInline(handle_db, using inline OnBadHistoryInserted1, QUERY_BUFFER);
	}
	else
	{
		inline OnBadHistoryInserted2()
		{
			new id = cache_insert_id();
			if (id)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO bans (name, ip, id_history, expire_date) VALUES ('%e', '%e', %d, DATE_ADD(NOW(), INTERVAL %d DAY));", account_name_fix, account_ip_fix, id, days);
				mysql_tquery(handle_db, QUERY_BUFFER);
			}
		}
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO bad_history (id_player, type, `by`, `text`, `date`) VALUES (%d, %d, %d, '%e', '%e');", account_id, type, by_account_id, text, date);
		MySQL_TQueryInline(handle_db, using inline OnBadHistoryInserted2, QUERY_BUFFER);
	}
	return 1;
}

// Comandos admins
CMD:reportar(playerid, params[]) {
	if (gettime() < PLAYER_TEMP[playerid][pt_ANTIFLOOD_REPORT] + 5) return SendPlayerClientMessage(playerid, "Cálmate.");
	PLAYER_TEMP[playerid][pt_ANTIFLOOD_REPORT] = gettime();
	
	new reason[128];
	if (sscanf(params, "us[128]", params[0], reason)) return ShowPlayerMessage(playerid, "~>~ ~w~/reportar [PlayerID/Nombre] [Razón]");
    if (!IsPlayerConnected(params[0])) return SendPlayerClientMessage(playerid, "Jugador desconectado.");
	
	SendPlayerClientMessage(playerid, "Tu reporte ha sido enviado a los administradores en línea.");
	
	new str[145]; format(str, 145, "{666666}[REPORTE] {F5F5F5}%s[%d] > %s[%d] | Razon: %s", PI[playerid][pi_NAME], playerid, PI[params[0]][pi_NAME], params[0], reason);
	SendMessageToAdmins(str);
	return 1;
}
alias:reportar("re");

CMD:r(playerid, params[]) {
	new message[128];
	if (sscanf(params, "s[128]", message)) return ShowPlayerMessage(playerid, "~>~ ~w~/r [MENSAJE]");
	
	if (PLAYER_TEMP[playerid][pt_ADMIN_PM_PID] == INVALID_PLAYER_ID || !PLAYER_TEMP[playerid][pt_ADMIN_PM_AID]) return SendPlayerClientMessage(playerid, "Nada para responder.");
	if (PI[ PLAYER_TEMP[playerid][pt_ADMIN_PM_PID] ][pi_ID] != PLAYER_TEMP[playerid][pt_ADMIN_PM_AID])
	{
		PLAYER_TEMP[playerid][pt_ADMIN_PM_PID] = INVALID_PLAYER_ID;
		PLAYER_TEMP[playerid][pt_ADMIN_PM_AID] = 0;
		PLAYER_TEMP[playerid][pt_ADMIN_PM_TIME] = 0;
		ShowPlayerMessage(playerid, "El administrador que te envió el mensaje está desconectado.");
		return 1;
	}
	if (gettime() > PLAYER_TEMP[playerid][pt_ADMIN_PM_TIME] + 60)
	{
		PLAYER_TEMP[playerid][pt_ADMIN_PM_PID] = INVALID_PLAYER_ID;
		PLAYER_TEMP[playerid][pt_ADMIN_PM_AID] = 0;
		PLAYER_TEMP[playerid][pt_ADMIN_PM_TIME] = 0;
		ShowPlayerMessage(playerid, "Has tardado demasiado en responder.");
		return 1;
	}
	
	SendPlayerClientMessage(PLAYER_TEMP[playerid][pt_ADMIN_PM_PID], "Respuesta de %s (%d): %s", PI[playerid][pi_NAME], playerid, message);
	ShowPlayerMessage(playerid, "Tu mensaje ha sido enviado al administrador.");
	PLAYER_TEMP[playerid][pt_ADMIN_PM_PID] = INVALID_PLAYER_ID;
	PLAYER_TEMP[playerid][pt_ADMIN_PM_AID] = 0;
	PLAYER_TEMP[playerid][pt_ADMIN_PM_TIME] = 0;
	return 1;
}

CMD:id(playerid, params[]) {
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ ~w~/id [PlayerID/Nombre]");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado.");
	
	new db_id = PI[to_playerid][pi_ID];
	if (PLAYER_TEMP[to_playerid][pt_ADMIN_NAME]) db_id = PLAYER_TEMP[to_playerid][pt_ADMIN_DBID];
	
	ShowPlayerMessage(playerid, "Nombre ~g~%s~w~ DBID: %d~n~Playerid: %d Nivel: %d Dispositivo: ~g~%s~w~", PLAYER_TEMP[to_playerid][pt_NAME], db_id, to_playerid, PI[to_playerid][pi_LEVEL], (PI[to_playerid][pi_PLAYER_PLATFORM] ? "Android" : "PC"));
	return 1;
}

CMD:admins(playerid, params[])
{
	if(PI[playerid][pi_ADMIN_LEVEL] < 1) return 1;
	
	PLAYER_TEMP[playerid][pt_DIALOG_DB_LIMIT] = 10;
	PLAYER_TEMP[playerid][pt_DIALOG_DB_PAGE] = 0;
	ShowDialog(playerid, DIALOG_ADMIN_LIST);
	return 1;
}

CMD:trabajos(playerid)
{
	ShowDialog(playerid, DIALOG_WORKS_TELEPORTS);
	return 1;
}

CMD:cancelar(playerid)
{
	if (!PLAYER_TEMP[playerid][pt_WORKING_IN]) return ShowPlayerMessage(playerid, "NO ESTAS TRABAJANDO");
	
	new Float:sx, Float:sy, Float:sz;
	GetPlayerPos(playerid, sx, sy, sz);
	RemovePlayerFromVehicle(playerid);
	SetPlayerPos(playerid, sx, sy, sz);

	if (PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] != INVALID_VEHICLE_ID)
	{
		if (GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] ][gb_vehicle_TEMP])
		{
			DestroyVehicleEx(PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID]);
			PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] = INVALID_VEHICLE_ID;
		}
	}

	CallLocalFunction("EndPlayerJob", "iib", playerid, PLAYER_TEMP[playerid][pt_WORKING_IN], true);
	return 1;
}

CMD:crewid(playerid, params[]) {
	new findname[32], dialog[100 * 25];
	if (sscanf(params, "s[24]", findname)) return ShowPlayerMessage(playerid, "~>~ /crewid <nombre o parte del nombre>");

	inline OnInfoQueryLoad() {
		new rows;
		if (cache_get_row_count(rows)) {
			for (new i = 0; i != rows; i ++) {
				new id, name[32], color;
				cache_get_value_name_int(i, "id", id);
				cache_get_value_name(i, "name", name);
				cache_get_value_name_int(i, "color", color);

				strcatf(dialog, "{f5f5f5}Nombre: '{%06x}%s{f5f5f5}' ID: '%d'\n", (color >>> 8), name, id);
			}
			strcatf(dialog, "\nSe encontraron %d coincidencias, el límite es 20.\n", rows);
			Dialog_Show(playerid, "", DIALOG_STYLE_MSGBOX, "Bandas", dialog, "xSalir", "");
		}
	}
	MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, "SELECT id, name, color FROM crews WHERE name LIKE '%%%e%%' LIMIT 20;", findname);
	return 1;
}

CMD:jcrew(playerid, params[]) {
	new crew_id;
	if (sscanf(params, "d", crew_id)) return ShowPlayerMessage(playerid, "~>~ /jcrew <crew_id>");
	new crew_index = GetCrewIndexById(crew_id);

	if (!CREW_INFO[ crew_index ][crew_VALID]) return SendPlayerClientMessage(playerid, "Esta banda ya no existe.");
	if (!CREW_RANK_INFO[ crew_index ][ 0 ][crew_rank_VALID]) return SendPlayerClientMessage(playerid, "El rango que fundador no existe (Bug)."); //Fundador
	
	PI[playerid][pi_CREW] = crew_id;
	PI[playerid][pi_CREW_RANK] = 0;
	PLAYER_TEMP[playerid][pt_CREW_INDEX] = crew_index;
	CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_MEMBERS] ++;
	CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_ONLINE_MEMBERS] ++;
	PLAYER_TEMP[playerid][pt_LAST_GOT_CREW] = gettime();
	SetPlayerGangZones(playerid);
	
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = %d, crew_rank = %d WHERE id = %d;", PI[playerid][pi_CREW], PI[playerid][pi_CREW_RANK], PI[playerid][pi_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);

	if (PI[playerid][pi_CREW]) ShowDialog(playerid, DIALOG_CREW_MENU);
	return 1;
}

CMD:rcrew(playerid, params[]) {
	new crew_id;
	if (sscanf(params, "d", crew_id)) return ShowPlayerMessage(playerid, "~>~ /rcrew <crew_id>");

	new message[145], crew_index = GetCrewIndexById(crew_id);
	format(message, sizeof message, "{%06x}[Banda] {F5F5F5}%s (%s) ha eliminado la banda.", CREW_INFO[ crew_index ][crew_COLOR] >>> 8, ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], PI[playerid][pi_NAME]);

	new tmp_CREW_INFO[enum_CREW_INFO];
	CREW_INFO[ crew_index ] = tmp_CREW_INFO;
	
	new tmp_CREW_RANK_INFO[enum_CREW_RANK_INFO];
	for (new i = 0; i != MAX_CREW_RANKS; i ++) CREW_RANK_INFO[ crew_index ][i] = tmp_CREW_RANK_INFO;
	
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if (PI[i][pi_CREW])
			{
				if (PI[i][pi_CREW] == crew_id)
				{
					SetPlayerNormalColor(i);
					HidePlayerGangZones(i);

					if (PLAYER_TEMP[i][pt_LAST_TERRITORY] != INVALID_STREAMER_ID)
					{
						TextDrawHideForPlayer(i, TERRITORIES[ PLAYER_TEMP[i][pt_LAST_TERRITORY] ][territory_TEXTDRAW][1]);
						TextDrawHideForPlayer(i, TERRITORIES[ PLAYER_TEMP[i][pt_LAST_TERRITORY] ][territory_TEXTDRAW][0]);
					}

					PI[i][pi_CREW] = 0;
					PI[i][pi_CREW_RANK] = 0;
					PLAYER_TEMP[i][pt_CREW_INDEX] = 0;
					SendPlayerClientMessage(i, message);
				}
			}
		}
	}
	
	for (new i = 0; i != MAX_TERRITORIES; i ++)
	{
		if (!TERRITORIES[ i ][territory_VALID]) continue;
		if (!TERRITORIES[ i ][territory_OCCUPIED]) continue;
		if (TERRITORIES[ i ][territory_CREW_ID] != crew_id) continue;
		
		TERRITORIES[ i ][territory_OCCUPIED] = false;
		TERRITORIES[ i ][territory_CREW_ID] = 0;
		TERRITORIES[ i ][territory_CREW_INDEX] = 0;
		TERRITORIES[ i ][territory_COLOR] = 0xCCCCCC55;
		UpdateGangZoneColor(i);
	}
	
	for (new i = 0; i != MAX_PROPERTIES; i ++)
	{
		if (!PROPERTY_INFO[i][property_VALID]) continue;
		if (!PROPERTY_INFO[i][property_CREW]) continue;
		if (PROPERTY_INFO[i][property_CREW_ID] != crew_id) continue;
		
		PROPERTY_INFO[ i ][property_SOLD] = false;
		PROPERTY_INFO[ i ][property_CREW] = false;
		PROPERTY_INFO[ i ][property_OWNER_ID] = 0;
		PROPERTY_INFO[ i ][property_CREW_ID] = 0;
		format(PROPERTY_INFO[ i ][property_NAME], 24, "PROPIEDAD %d", PROPERTY_INFO[ i ][property_ID]);
		
		new info[3];
		UpdateUnnocupiedPropertyLabel(i);
		
		DestroyDynamicPickup(PROPERTY_INFO[ i ][property_EXT_PICKUP_ID]);
		PROPERTY_INFO[ i ][property_EXT_PICKUP_ID] = INVALID_STREAMER_ID;
		
		PROPERTY_INFO[ i ][property_EXT_PICKUP_ID] = CreateDynamicPickup(1273, 1, PROPERTY_INFO[ i ][property_EXT_X], PROPERTY_INFO[ i ][property_EXT_Y], PROPERTY_INFO[ i ][property_EXT_Z], 0, PROPERTY_INFO[ i ][property_EXT_INTERIOR]);
		info[0] = PICKUP_TYPE_PROPERTY;
		info[1] = i; // Index
		info[2] = 2; // Pickup Exterior
		Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[ i ][property_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);

		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_player = NULL, id_territory = NULL WHERE id = %d;", PROPERTY_INFO[i][property_ID]);
		mysql_tquery(handle_db, QUERY_BUFFER);
	}

	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM crews WHERE id = %d;", crew_id);
	mysql_tquery(handle_db, QUERY_BUFFER);
	
	CallLocalFunction("OnCrewDeleted", "i", crew_id);
	return 1;
}

CMD:gterritory(playerid, params[]) {
	if (!PI[playerid][pi_CREW]) return ShowPlayerMessage(playerid, "No estas en una banda.");
	
	if (PLAYER_TEMP[playerid][pt_LAST_TERRITORY] != INVALID_STREAMER_ID) {
		if (IsPlayerInDynamicArea(playerid, TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_AREA])) {
			StartTerritoryAttack(PLAYER_TEMP[playerid][pt_CREW_INDEX], PLAYER_TEMP[playerid][pt_LAST_TERRITORY], 0);
			return 1;
		}
	}

	ShowPlayerMessage(playerid, "Territorio no valido");

	SendCmdLogToAdmins(playerid, "gterritory", params);
	return 1;
}

CMD:getid(playerid, params[]) {
	new findname[24], dialog[100 * 25];
	if (sscanf(params, "s[24]", findname)) return ShowPlayerMessage(playerid, "~>~ /getid <nombre o parte del nombre>");

	inline OnInfoQueryLoad() {
		new rows;
		if (cache_get_row_count(rows)) {
			for (new i = 0; i != rows; i ++) {
				new id, name[24], connected, pid;
				cache_get_value_name_int(i, "id", id);
				cache_get_value_name(i, "name", name);
				cache_get_value_name_int(i, "connected", connected);
				cache_get_value_name_int(i, "playerid", pid);
				strcatf(dialog, "Nombre: '%s' DB-ID: '%d' Conectado: '%d' Playerid: '%d'\n", name, id, connected, pid);
			}
			strcatf(dialog, "\nSe encontraron %d coincidencias, el límite es 20.\n", rows);
			Dialog_Show(playerid, "", DIALOG_STYLE_MSGBOX, "Cuentas", dialog, "xSalir", "");
		}
	}
	MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, "SELECT id, name, connected, playerid FROM player WHERE name LIKE '%%%e%%' LIMIT 20;", findname);
	return 1;
}

CMD:getname(playerid, params[])
{
	new db_id;
	if (sscanf(params, "d", db_id)) return ShowPlayerMessage(playerid, "~>~ /getname <DB-ID>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			for (new i = 0; i != rows; i ++)
			{
				new id, name[24], connected, pid;
				cache_get_value_name_int(i, "id", id);
				cache_get_value_name(i, "name", name);
				cache_get_value_name_int(i, "connected", connected);
				cache_get_value_name_int(i, "playerid", pid);
				SendPlayerClientMessage(playerid, "Nombre: '%s' DB-ID: '%d' Conectado: '%d' Playerid: '%d'", name, id, connected, pid);
			}
			SendPlayerClientMessage(playerid, "Se encontraron %d coincidencias, el límite es 20.", rows);
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name, connected, playerid FROM player WHERE id = %d LIMIT 20;", db_id);
	MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
	return 1;
}

CMD:aka(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /aka <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado.");
	if (isnull(PI[to_playerid][pi_IP])) return SendPlayerClientMessage(playerid, "IP no válida.");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			SendPlayerClientMessage(playerid, "AKA de %s (%d):", PI[to_playerid][pi_NAME], to_playerid);
			for (new i = 0; i != rows; i ++)
			{
				new id, name[24];
				cache_get_value_name_int(i, "id", id);
				cache_get_value_name(i, "name", name);
				SendPlayerClientMessage(playerid, "Nombre: {f4f442}'%s' {F5F5F5}DB-ID: '%d'", name, id);
			}
			SendPlayerClientMessage(playerid, "Se encontraron %d coincidencias, el límite es 20.", rows);
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name FROM player WHERE ip = '%e' LIMIT 20;", PI[to_playerid][pi_IP]);
	MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
	return 1;
}
alias:aka("cuentas", "multicuentas");

CMD:adv(playerid, params[])
{
	new to_playerid, reason[128];
	if (sscanf(params, "us[128]", to_playerid, reason)) return ShowPlayerMessage(playerid, "~>~ /adv <player_id> <razon>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	AddPlayerBadHistory(PI[to_playerid][pi_ID], PI[playerid][pi_ID], TYPE_WARNING, reason);
	
	new dialog[170];
	format(dialog, sizeof dialog, "Has recibido una advertencia, razón:\n%s\n", reason);
	ShowPlayerDialog(to_playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Aviso", dialog, "Entiendo", "");
	
	SendPlayerClientMessage(playerid, "Jugador (nick: '%s' dbid: '%d', pid: '%d') advertido.", PI[to_playerid][pi_NAME], PI[to_playerid][pi_ID], to_playerid);

	new str[1000]; format(str, 1000, "{"#GREEN_COLOR"}[ADV] {F5F5F5}%s[%d] | %s [{%s}%s{F5F5F5}] | Razon: %s | %d Ping", PI[to_playerid][pi_NAME], to_playerid, PI[playerid][pi_NAME], ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], reason, GetPlayerPing(to_playerid));
	SendAdminAd(str);

	format(str, 1000, "```[ADV] %s[%d] | %s [%s] | Razon: %s | %d Ping```", PI[to_playerid][pi_NAME], to_playerid, PI[playerid][pi_NAME], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], reason, GetPlayerPing(to_playerid));
	SendDiscordMessage(""#DISCORD_ADV_KICK_LOG"", str);
	return 1;
}
alias:adv("advertencia", "san");

CMD:kick(playerid, params[])
{
	new to_playerid, reason[128];
	if (sscanf(params, "us[128]", to_playerid, reason)) return ShowPlayerMessage(playerid, "~>~ /kick <player_id> <razon>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	if (PLAYER_TEMP[to_playerid][pt_KICKED]) return SendPlayerClientMessage(playerid, "El jugador ya está expulsado.");
	if (!PI[to_playerid][pi_ID]) return Kick(to_playerid);
	
	
	AddPlayerBadHistory(PI[to_playerid][pi_ID], PI[playerid][pi_ID], TYPE_KICK, reason);
	
	new dialog[170];
	format(dialog, sizeof dialog, "Has sido expulsado, razón:\n%s\n", reason);
	ShowPlayerDialog(to_playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Aviso", dialog, "Entiendo", "");
	KickEx(to_playerid, 500);
	
	SendPlayerClientMessage(playerid, "Jugador (nick: '%s' dbid: '%d', pid: '%d') expulsado.", PI[to_playerid][pi_NAME], PI[to_playerid][pi_ID], to_playerid);

	new str[1000]; format(str, 1000, "{"#PRIMARY_COLOR"}[KICK] {F5F5F5}%s[%d] | %s [{%s}%s{F5F5F5}] | Razon: %s | %d Ping", PI[to_playerid][pi_NAME], to_playerid, PI[playerid][pi_NAME], ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], reason, GetPlayerPing(to_playerid));
	SendAdminAd(str);

	format(str, 1000, "```yaml\n[KICK] %s[%d] | %s [%s] | Razon: %s | %d Ping\n```", PI[to_playerid][pi_NAME], to_playerid, PI[playerid][pi_NAME], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], reason, GetPlayerPing(to_playerid));
	SendDiscordMessage(""#DISCORD_ADV_KICK_LOG"", str);
	return 1;
}

CMD:spec(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /spec <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");

	if (GetPlayerState(playerid) != PLAYER_STATE_SPECTATING) {
		new Float:p[4];
		GetPlayerPos(playerid, p[0], p[1], p[2]);
		GetPlayerFacingAngle(playerid, p[3]);
		SetSpawnInfo(playerid, NO_TEAM, GetPlayerSkin(playerid), p[0], p[1], p[2], p[3], 0, 0, 0, 0, 0, 0);
		PI[playerid][pi_INTERIOR] = GetPlayerInterior(playerid);
		PLAYER_TEMP[playerid][pt_VIRTUAL_WORLD] = GetPlayerVirtualWorld(playerid);
	}
	
	TogglePlayerSpectatingEx(playerid, true);
	SetPlayerVirtualWorld(playerid, GetPlayerVirtualWorld(to_playerid));
	SetPlayerInterior(playerid, GetPlayerInterior(to_playerid));

	if (IsPlayerInAnyVehicle(to_playerid)) PlayerSpectateVehicle(playerid, GetPlayerVehicleID(to_playerid));
	else PlayerSpectatePlayer(playerid, to_playerid);

	new wanted_level[24];
	if (PI[to_playerid][pi_WANTED_LEVEL] > 0) {
		for (new i = 0; i != PI[to_playerid][pi_WANTED_LEVEL]; i ++) {
			strcat(wanted_level, "]");
		}
	}
	
	ShowPlayerMessage(playerid, "Modo pasivo: %s.~n~~y~%s~w~", (PI[to_playerid][pi_PASSIVE_MODE] ? "~g~activado" : "~r~desactivado"), wanted_level);

	SendPlayerClientMessage(playerid, "{f5f5f5}{%s}{f5f5f5}Utiliza {%s}/specoff{f5f5f5} para terminar este modo.", ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ]);
	SendCmdLogToAdmins(playerid, "spec", params);
	return 1;
}
alias:spec("specp", "spp");

CMD:specoff(playerid, params[])
{
	SetPlayerInterior(playerid, PI[playerid][pi_INTERIOR]);
	SetPlayerVirtualWorld(playerid, PLAYER_TEMP[playerid][pt_VIRTUAL_WORLD]);
	TogglePlayerSpectatingEx(playerid, false);
	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][3]);
	PLAYER_TEMP[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", 2000, false, "ib", playerid, true);

	SendCmdLogToAdmins(playerid, "specoff", params);
	return 1;
}
alias:specoff("listo");

CMD:freeze(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /freeze <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	
	SendPlayerClientMessage(playerid, "Jugador '%s' (%d) congelado.", PI[to_playerid][pi_NAME], to_playerid);
	TogglePlayerControllableEx(to_playerid, false);

	SendCmdLogToAdmins(playerid, "freeze", params);
	return 1;
}
alias:freeze("congelar");

CMD:unfreeze(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /unfreeze <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	
	SendPlayerClientMessage(playerid, "Jugador '%s' (%d) descongelado.", PI[to_playerid][pi_NAME], to_playerid);
	TogglePlayerControllableEx(to_playerid, true);

	SendCmdLogToAdmins(playerid, "unfreeze", params);
	return 1;
}
alias:unfreeze("descongelar");

CMD:pest(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /pest <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	ShowPlayerStats(playerid, to_playerid);
	return 1;
}

CMD:pinv(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /pinv <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	ShowPlayerInventory(playerid, to_playerid);
	return 1;
}

CMD:pbol(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /pbol <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	ShowPlayerPockets(playerid, to_playerid);
	return 1;
}

CMD:pexp(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /pexp <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	ShowPlayerSkills(playerid, to_playerid);
	return 1;
}

CMD:pbank(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /pbank <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	if (!PI[to_playerid][pi_BANK_ACCOUNT]) SendPlayerClientMessage(playerid, "El jugador no tiene cuenta bancaria.");
	else SendPlayerClientMessage(playerid, "Cuenta bancaria ID: '%d' Balance: '%s'", PI[to_playerid][pi_BANK_ACCOUNT], number_format_thousand(PI[to_playerid][pi_BANK_MONEY]));
	return 1;
}

CMD:unjail(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /unjail <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	if (PI[to_playerid][pi_STATE] != ROLEPLAY_STATE_JAIL) return SendPlayerClientMessage(playerid, "El jugador no está en el cárcel.");
	
	UnjailPlayer(to_playerid);
	SendPlayerClientMessage(playerid, "El jugador %s (%d) ahora está en libertad.", PI[to_playerid][pi_NAME], to_playerid);
	
	
	SendCmdLogToAdmins(playerid, "unjail", params);
	return 1;
}

CMD:ip(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /ip <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");

	SendPlayerClientMessage(playerid, "IP %s (%d): %s", PI[to_playerid][pi_NAME], to_playerid, PI[to_playerid][pi_IP]);
	return 1;
}

CMD:traerveh(playerid, params[])
{
	new to_car;
	if (sscanf(params, "i", to_car)) return ShowPlayerMessage(playerid, "~>~ /traerveh <car_id>");
	if (to_car >= MAX_VEHICLES) return 1;

	if (!GLOBAL_VEHICLES[to_car][gb_vehicle_VALID]) return SendPlayerClientMessage(playerid, "Vehículo no válido.");
	if (GLOBAL_VEHICLES[to_car][gb_vehicle_OCCUPIED]) return SendPlayerClientMessage(playerid, "Vehículo está ocupado.");
		
    new Float:gPos[3];
    GetPlayerPos(playerid, gPos[0], gPos[1], gPos[2]);
    SetVehiclePosEx(to_car, gPos[0] + 2.0, gPos[1], gPos[2]);
    return 1;
}
alias:traerveh("mover", "getveh", "traervehiculo", "traerauto", "getcar");

CMD:gotoveh(playerid, params[])
{
	new to_car;
	if (sscanf(params, "i", to_car)) return ShowPlayerMessage(playerid, "~>~ /gotoveh <car_id>");
	if (to_car >= MAX_VEHICLES) return 1;

	if (!GLOBAL_VEHICLES[to_car][gb_vehicle_VALID]) return SendPlayerClientMessage(playerid, "Vehículo no válido.");
		
    new Float:gPos[3];
    GetVehiclePos(to_car, gPos[0], gPos[1], gPos[2]);
    SetPlayerPosEx(playerid, gPos[0], gPos[1], gPos[2], 0.0, GLOBAL_VEHICLES[to_car][gb_vehicle_INTERIOR], 0);//GLOBAL_VEHICLES[to_car][gb_vehicle_WORLD]);
    return 1;
}
alias:gotoveh("irvehiculo", "gotocar", "iracarro");

CMD:duty(playerid)
{
	if (PI[playerid][pi_ADMIN_LEVEL] < 1) return 1;

	if (PLAYER_TEMP[playerid][pt_ADMIN_SERVICE]) {
		PLAYER_TEMP[playerid][pt_ADMIN_SERVICE] = false;
		SetPlayerNormalColor(playerid);
		
		if (IsValidDynamic3DTextLabel(PLAYER_TEMP[playerid][pt_ADMIN_LABEL]))
		{
			DestroyDynamic3DTextLabel(PLAYER_TEMP[playerid][pt_ADMIN_LABEL]);
			PLAYER_TEMP[playerid][pt_ADMIN_LABEL] = Text3D:INVALID_STREAMER_ID;
		}

		ShowPlayerMessage(playerid, "Ahora no estas de servicio como ~r~%s~w~.", ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ]);
	} else {
		PLAYER_TEMP[playerid][pt_ADMIN_SERVICE] = true;
		SetPlayerNormalColor(playerid);
		
		if (IsValidDynamic3DTextLabel(PLAYER_TEMP[playerid][pt_ADMIN_LABEL]))
		{
			DestroyDynamic3DTextLabel(PLAYER_TEMP[playerid][pt_ADMIN_LABEL]);
			PLAYER_TEMP[playerid][pt_ADMIN_LABEL] = Text3D:INVALID_STREAMER_ID;
		}
		
		new label_str[64];
		format(label_str, sizeof label_str, "{%s}%s", ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ]);
		PLAYER_TEMP[playerid][pt_ADMIN_LABEL] = CreateDynamic3DTextLabel(label_str, -1, 0.0, 0.0, 0.3, 20.0, playerid, .testlos = true);

		if (PLAYER_TEMP[playerid][pt_WORKING_IN]) ShowPlayerMessage(playerid, "Deberías dejar de estar de servicio como %s para administrar mejor", work_info[ PLAYER_TEMP[playerid][pt_WORKING_IN] ][work_info_NAME]);
		ShowPlayerMessage(playerid, "Ahora estas de servicio como ~r~%s~w~.", ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ]);
	}
	return 1;
}

CMD:goto(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /goto <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");

	new Float:p[4];
	GetPlayerPos(to_playerid, p[0], p[1], p[2]);
	GetPlayerFacingAngle(to_playerid, p[3]);
	
	SetPlayerPosEx(playerid, p[0], p[1], p[2], p[3], GetPlayerInterior(to_playerid), GetPlayerVirtualWorld(to_playerid), false, true);
	SetPlayerFacingAngle(playerid, p[3] + 180.0);

    //SetPlayerCityWeatherr(playerid);
	
	SendCmdLogToAdmins(playerid, "goto", params);
	return 1;
}
alias:goto("ir");

CMD:explode(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /explode <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");

	new Float:p[4];
	GetPlayerPos(to_playerid, p[0], p[1], p[2]);
	CreateExplosion(p[0], p[1], p[2], 10, 5.0);
	
	SendCmdLogToAdmins(playerid, "explode", params);
	return 1;
}


CMD:get(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /get <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");

	new Float:p[4];
	GetPlayerPos(playerid, p[0], p[1], p[2]);
	GetPlayerFacingAngle(playerid, p[3]);
	
	SetPlayerPosEx(to_playerid, p[0], p[1], p[2], p[3], GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid), false, true);
	SetPlayerFacingAngle(to_playerid, p[3] + 180.0);

    //SetPlayerCityWeatherr(to_playerid);

	SendCmdLogToAdmins(playerid, "get", params);
	return 1;
}
alias:get("traer");

CMD:slap(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /get <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");

	new Float:p[4];
	GetPlayerPos(to_playerid, p[0], p[1], p[2]);
	GetPlayerFacingAngle(to_playerid, p[3]);
	
	SetPlayerPosEx(to_playerid, p[0], p[1], (p[2] + 3.0), p[3], GetPlayerInterior(to_playerid), GetPlayerVirtualWorld(to_playerid), false, true);
    //SetPlayerCityWeatherr(to_playerid);

	FreezePlayer(to_playerid, 500);

	SendCmdLogToAdmins(playerid, "slap", params);
	return 1;
}

CMD:unban(playerid, params[])
{
	new name[24];
	if (sscanf(params, "s[24]", name)) return ShowPlayerMessage(playerid, "~>~ /unban <nombre completo o ip>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			if (rows)
			{
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM bans WHERE name = '%e' OR ip = '%e';", name, name);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				SendPlayerClientMessage(playerid, "'%s' ha sido desbaneado.", name);
				
				new str[1000]; format(str, 1000, "{"#GREEN_COLOR"}[UNBAN]{f5f5f5} %s | %s[{%s}%s{F5F5F5}]", name, PI[playerid][pi_NAME], ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ]);
				SendAdminAd(str);

				format(str, 1000, "```yaml\n[UNBAN] %s | %s[%s]\n```", name, PI[playerid][pi_NAME], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ]);
				SendDiscordMessage(""#DISCORD_BANS_LOG"", str);

				inline OnCountQueryLoad()
				{
					new crows;
					if (cache_get_row_count(crows))
					{
						if (crows)
						{
							new id_player;
							cache_get_value_index_int(0, 0, id_player);
							if (id_player) AddPlayerBadHistory(id_player, PI[playerid][pi_ID], TYPE_UNBAN, "/unban");
						}
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE name = '%e' OR ip = '%e';", name, name);
				MySQL_TQueryInline(handle_db, using inline OnCountQueryLoad, QUERY_BUFFER);
			}
			else SendPlayerClientMessage(playerid, "'%s' no está en la lista de baneados.", name);
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM bans WHERE name = '%e' OR ip = '%e';", name, name);
	MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
	return 1;
}

CMD:jail(playerid, params[])
{
    new to_playerid, reason[128], time;
    if (sscanf(params, "uds[128]", to_playerid, time, reason)) return ShowPlayerMessage(playerid, "~>~ /jail <player_id> <minutos> <razón>");
	if (time < 0 || time > 1440) return SendPlayerClientMessage(playerid, "Intervalo de minutos incorrecto.");
    if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
    if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");

	JailPlayerEx(to_playerid, time, reason);

    new str[1000]; format(str, 1000, "{666666}[JAIL] {F5F5F5}%s[%d] | %s [{%s}%s{F5F5F5}] | Razon: %s | Minutos: %d | %d Ping", PI[to_playerid][pi_NAME], to_playerid, PI[playerid][pi_NAME], ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], reason, time, GetPlayerPing(to_playerid));
    SendAdminAd(str);

	format(str, 1000, "```[JAIL] %s[%d] | %s [%s] | Razon: %s | Minutos: %d | %d Ping```", PI[to_playerid][pi_NAME], to_playerid, PI[playerid][pi_NAME], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], reason, time, GetPlayerPing(to_playerid));
	SendDiscordMessage(""#DISCORD_JAILS_LOG"", str);
	return 1;
}

CMD:say(playerid, params[])
{
	new 
		to_playerid, 
		command[128];

	if (sscanf(params, "us[128]", to_playerid, command)) return ShowPlayerMessage(playerid, "~>~ /say <player_id> <comando>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");

	if (strfind(command, "/", true) == -1) CallLocalFunction("OnPlayerText", "is", to_playerid, command);
	else 
	{
		PLAYER_TEMP[to_playerid][pt_ANTIFLOOD_TALK] = GetTickCount();
		PC_EmulateCommand(to_playerid, command);
	}

	SendCmdLogToAdmins(playerid, "say", params);
	return 1;
}

CMD:ban(playerid, params[])
{	
	new to_playerid, reason[128];
	if (sscanf(params, "us[128]", to_playerid, reason)) return ShowPlayerMessage(playerid, "~>~ /ban <player_id> <razon>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	if (PLAYER_TEMP[to_playerid][pt_KICKED]) return SendPlayerClientMessage(playerid, "El jugador ya está expulsado.");
	if (!PI[to_playerid][pi_ID]) return Kick(to_playerid);
	
	AddPlayerBan(PI[to_playerid][pi_ID], PI[to_playerid][pi_NAME], PI[to_playerid][pi_IP], PI[playerid][pi_ID], TYPE_BAN, reason);
	
	new dialog[250];
	format(dialog, sizeof dialog, "Has sido baneado, razón:\n%s\n", reason);
	ShowPlayerDialog(to_playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Aviso", dialog, "Entiendo", "");
	KickEx(to_playerid, 500);
	
	SendPlayerClientMessage(playerid, "Jugador (nick: '%s' dbid: '%d', id: '%d') baneado.", PI[to_playerid][pi_NAME], PI[to_playerid][pi_ID], to_playerid);
	
	new str[1000]; format(str, 1000, "{"#RED_COLOR"}[BAN]{F5F5F5} %s[%d] | %s[{%s}%s{F5F5F5}] | Razon: %s | %d Ping", PI[to_playerid][pi_NAME], to_playerid, PI[playerid][pi_NAME], ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], reason, GetPlayerPing(to_playerid));
	SendAdminAd(str);

	format(str, 1000, "```[BAN] %s[%d] | %s[%s] | Razon: %s | %d Ping```", PI[to_playerid][pi_NAME], to_playerid, PI[playerid][pi_NAME], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], reason, GetPlayerPing(to_playerid));
	SendDiscordMessage(""#DISCORD_BANS_LOG"", str);
	return 1;
}

CMD:cls(playerid,params[])
{	
	for (new i = 0; i != 80; i ++) SendClientMessageToAll(-1, " ");
	
	SendCmdLogToAdmins(playerid, "cls", params);
	return 1;
}
alias:cls("log");

CMD:tban(playerid, params[])
{	
	new to_playerid, days, reason[128];
	if (sscanf(params, "uds[128]", to_playerid, days, reason)) return ShowPlayerMessage(playerid, "~>~ /tban <player_id> <dias> <razon>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	if (days <= 0 || days > 9999) return ShowPlayerMessage(playerid, "~>~ /ban <player_id> <dias> <razon>");
	
	if (PLAYER_TEMP[to_playerid][pt_KICKED]) return SendPlayerClientMessage(playerid, "El jugador ya está expulsado.");
	if (!PI[to_playerid][pi_ID]) return Kick(to_playerid);
	
	AddPlayerBan(PI[to_playerid][pi_ID], PI[to_playerid][pi_NAME], "0.0.0.0", PI[playerid][pi_ID], TYPE_TEMP_BAN, reason, days);
	
	new dialog[250];
	format(dialog, sizeof dialog, "Has sido baneado por %d días, razón:\n%s\n", days, reason);
	ShowPlayerDialog(to_playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Aviso", dialog, "Entiendo", "");
	KickEx(to_playerid, 500);
	
	SendPlayerClientMessage(playerid, "Jugador (nick: '%s' dbid: '%d', pid: '%d') baneado por %d días.", PI[to_playerid][pi_NAME], PI[to_playerid][pi_ID], to_playerid, days);
	
	new str[1000]; format(str, 1000, "{"#RED_COLOR"}[BAN]{F5F5F5} %s[%d] | %s[{%s}%s{F5F5F5}] | Tiempo: %d dias | Razon: %s | %d Ping", PI[to_playerid][pi_NAME], to_playerid, PI[playerid][pi_NAME], ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], days, reason, GetPlayerPing(to_playerid));
	SendAdminAd(str);

	format(str, 1000, "```[BAN] %s[%d] | %s[%s] | Tiempo: %d dias | Razon: %s | %d Ping```", PI[to_playerid][pi_NAME], to_playerid, PI[playerid][pi_NAME], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], days, reason, GetPlayerPing(to_playerid));
	SendDiscordMessage(""#DISCORD_BANS_LOG"", str);
	return 1;
}

CMD:setwlevel(playerid, params[]) {
	new to_playerid, level;
	if (sscanf(params, "ud", to_playerid, level)) return ShowPlayerMessage(playerid, "~>~ /setwlevel <to_playerid> <level>");
	SetPlayerWantedLevelEx(to_playerid, level);
	return 1;
}

CMD:sound(playerid, params[]) {
	new id;
	if (sscanf(params, "d", id)) return ShowPlayerMessage(playerid, "~>~ /sound <id>");
	PlayerPlaySound(playerid, id, 0.0, 0.0, 0.0);
	return 1;
}

CMD:anim(playerid, params[]) {
	new animLib[32], animName[32], ms;
	if (sscanf(params, "s[32]s[32]d", animLib, animName, ms)) return ShowPlayerMessage(playerid, "~>~ /anim <animLib> <animName> <duracion>");
	ApplyAnimation(playerid, animLib, animName, 4.1, 1, 0, 0, 0, ms, 1);
	return 1;
}

CMD:anindex(playerid)
{
	ShowPlayerMessage(playerid, "Anm Index: %d", GetPlayerAnimationIndex(playerid));
	return 1;
}

CMD:specialaction(playerid, params[])
{
	if (sscanf(params, "d", params[0])) return ShowPlayerMessage(playerid, "~>~ /specialaction <action ID>");
	SetPlayerSpecialAction(playerid, params[0]);
	return 1;
}

CMD:dban(playerid, params[])
{
	new reason[128], to_account;
	if (sscanf(params, "ds[128]", to_account, reason)) return ShowPlayerMessage(playerid, "~>~ /dban <DB-ID> <razon>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			if (rows)
			{
				new id, ip[16], name[24], connected, pid, admin_level;
				cache_get_value_name_int(0, "id", id);
				cache_get_value_name(0, "ip", ip);
				cache_get_value_name(0, "name", name);
				cache_get_value_name_int(0, "connected", connected);
				cache_get_value_name_int(0, "playerid", pid);
				cache_get_value_name_int(0, "admin_level", admin_level);

				if (PI[playerid][pi_ADMIN_LEVEL] >= admin_level)
				{
					if (connected) SendPlayerClientMessage(playerid, "JUGADOR '%s' DB-ID '%d' conectado utilice /ban, su player_id: %d.", name, id, pid);
					else
					{
						inline OnCountQueryLoad()
						{
							new crows;
							if (cache_get_row_count(crows))
							{
								if (crows)
								{
									new expire_date[24];
									cache_get_value_name(0, "expire_date", expire_date);
									
									if (isnull(expire_date)) SendPlayerClientMessage(playerid, "JUGADOR (Nombre: '%s' DB-ID: '%d') ya está baneado (permanentemente).", name, id);
									else SendPlayerClientMessage(playerid, "JUGADOR (Nombre: '%s' DB-ID: '%d') ya está baneado (temporalmente, fecha de readmisión: %s).", name, id, expire_date);
								}
								else
								{
									AddPlayerBan(id, name, ip, PI[playerid][pi_ID], TYPE_BAN, reason);
									SendPlayerClientMessage(playerid, "Jugador (nick: '%s' db_id: '%d') baneado.", name, id);
									
									new str[1000]; format(str, 1000, "{"#RED_COLOR"}[BAN]{F5F5F5} %s[%d] | %s[{%s}%s{F5F5F5}] | Razon: %s", name, id, PI[playerid][pi_NAME], ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], reason);
									SendAdminAd(str);

									format(str, 1000, "```[BAN] %s[%d] | %s[%s] | Razon: %s```", name, id, PI[playerid][pi_NAME], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], reason);
									SendDiscordMessage(""#DISCORD_BANS_LOG"", str);
								}
							}
						}
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM bans WHERE name = '%e' OR ip = '%e';", name, ip);
						MySQL_TQueryInline(handle_db, using inline OnCountQueryLoad, QUERY_BUFFER);
					}
				}
				else SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
			}
			else SendPlayerClientMessage(playerid, "No se encontro la DB-ID.");
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, ip, name, connected, playerid, admin_level FROM player WHERE id = %d;", to_account);
	MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
	return 1;
}

CMD:dtban(playerid, params[])
{
	new reason[128], to_account, days;
	if (sscanf(params, "dds[128]", to_account, days, reason)) return ShowPlayerMessage(playerid, "~>~ /dtban <DB-ID> <dias> <razon>");
	if (days <= 0 || days > 9999) return ShowPlayerMessage(playerid, "~>~ /dtban <DB-ID> <dias> <razon>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			if (rows)
			{
				new id, ip[16], name[24], connected, pid, admin_level;
				cache_get_value_name_int(0, "id", id);
				cache_get_value_name(0, "ip", ip);
				cache_get_value_name(0, "name", name);
				cache_get_value_name_int(0, "connected", connected);
				cache_get_value_name_int(0, "playerid", pid);
				cache_get_value_name_int(0, "admin_level", admin_level);

				if (PI[playerid][pi_ADMIN_LEVEL] >= admin_level)
				{
					if (connected) SendPlayerClientMessage(playerid, "JUGADOR '%s' DB-ID '%d' conectado utilice /ban, su player_id: %d.", name, id, pid);
					else
					{
						inline OnCountQueryLoad()
						{
							new crows;
							if (cache_get_row_count(crows))
							{
								if (crows)
								{
									new expire_date[24];
									cache_get_value_name(0, "expire_date", expire_date);
									
									if (isnull(expire_date)) SendPlayerClientMessage(playerid, "JUGADOR (Nombre: '%s' DB-ID: '%d') ya está baneado (permanentemente).", name, id);
									else SendPlayerClientMessage(playerid, "JUGADOR (Nombre: '%s' DB-ID: '%d') ya está baneado (temporalmente, fecha de readmisión: %s).", name, id, expire_date);
								}
								else
								{
									AddPlayerBan(id, name, "0.0.0.0", PI[playerid][pi_ID], TYPE_BAN, reason, days);
									SendPlayerClientMessage(playerid, "Jugador (nick: '%s' dbid: '%d') baneado por %d días.", name, id, days);
					
									new str[1000]; format(str, 1000, "{"#RED_COLOR"}[BAN]{F5F5F5} %s[%d] | %s[{%s}%s{F5F5F5}] | Tiempo: %d dias | Razon: %s", name, id, PI[playerid][pi_NAME], ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], days, reason);
									SendAdminAd(str);

									format(str, 1000, "```[BAN] %s[%d] | %s[%s] | Tiempo: %d dias | Razon: %s```", name, id, PI[playerid][pi_NAME], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], days, reason);
									SendDiscordMessage(""#DISCORD_BANS_LOG"", str);
								}
							}
						}
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM bans WHERE name = '%e' OR ip = '%e';", name, ip);
						MySQL_TQueryInline(handle_db, using inline OnCountQueryLoad, QUERY_BUFFER);
					}
				}
				else SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
			}
			else SendPlayerClientMessage(playerid, "No se encontro la DB-ID.");
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, ip, name, connected, playerid, admin_level FROM player WHERE id = %d;", to_account);
	MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
	return 1;
}

CMD:rac(playerid, params[])
{
	RespawnGlobalUnoccupiedVehicles();
	SendPlayerClientMessage(playerid, "Todos los vehículos no personales y sin ocupar han sido re-spawneados.");
	
	SendCmdLogToAdmins(playerid, "rac", params);
	return 1;
}

CMD:rac2(playerid, params[])
{
	RespawnAllUnoccupiedVehicles();
	SendPlayerClientMessage(playerid, "Todos los vehículos sin ocupar han sido re-spawneados.");
	
	SendCmdLogToAdmins(playerid, "rac2", params);
	return 1;
}

CMD:rv(playerid, params[])
{
	new vehicleid = GetPlayerVehicleID(playerid);
	if (!vehicleid) return SendPlayerClientMessage(playerid, "No estás en un vehículo.");
	
	SetVehicleToRespawnEx(vehicleid);
	SendPlayerClientMessage(playerid, "Vehículo (%d) re-spawneado.", vehicleid);
	return 1;
}

CMD:pm(playerid, params[])
{
	new to_playerid, message[128];
	if (sscanf(params, "us[128]", to_playerid, message)) return ShowPlayerMessage(playerid, "~>~ /pm <player_id> <mensaje>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	
	SendPlayerClientMessage(playerid, "Mensaje enviado a %s (%d): %s", PI[to_playerid][pi_NAME], to_playerid, message);
	
	PLAYER_TEMP[to_playerid][pt_ADMIN_PM_PID] = playerid;
	PLAYER_TEMP[to_playerid][pt_ADMIN_PM_AID] = PI[playerid][pi_ID];
	PLAYER_TEMP[to_playerid][pt_ADMIN_PM_TIME] = gettime();
	SendPlayerClientMessage(to_playerid, "{f5f5f5}Mensaje de un administrador (/r para responder): {F5F5F5}%s", message);
	
	SendCmdLogToAdmins(playerid, "pm", params);
	return 1;
}

CMD:settime(playerid, params[])
{
	new hour, minute;
	if (sscanf(params, "dd", hour, minute)) return ShowPlayerMessage(playerid, "~>~ /settime <hora> <minuto>");
	SendPlayerClientMessage(playerid, "El tiempo se ajustará cuando el reloj avance.");
	SendCmdLogToAdmins(playerid, "settime", params);
	return 1;
}

CMD:setweather(playerid, params[])
{
	new weather;
	if (sscanf(params, "d", weather)) return ShowPlayerMessage(playerid, "~>~ /setweather <ID>");
	SendCmdLogToAdmins(playerid, "setweather", params);
	return 1;
}

CMD:givemod(playerid, params[])
{
	new to_playerid, level;
	if (sscanf(params, "ud", to_playerid, level)) return ShowPlayerMessage(playerid, "~>~ /givemod <player_id> <rango>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	if (level < 0 || level >= sizeof ADMIN_LEVELS) return SendPlayerClientMessage(playerid, "El rango no es válido.");
	if (level > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "No puedes dar este rango por ser un rango superior al tuyo.");
	
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET admin_level = %d WHERE id = %d;", level, PI[to_playerid][pi_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	
	PI[to_playerid][pi_ADMIN_LEVEL] = level;
	SendPlayerClientMessage(to_playerid, "%s cambió tu rango administrativo a: %s.", PI[playerid][pi_NAME], ADMIN_LEVELS[level]);
	SendPlayerClientMessage(playerid, "El rango administrativo de %s (%d) ahora es %s.", PI[to_playerid][pi_NAME], to_playerid, ADMIN_LEVELS[level]);
	
	SendCmdLogToAdmins(playerid, "givemod", params);
	return 1;
}
alias:givemod("staff");

CMD:gaymrd(playerid, params[])
{
    new level = 4;
	PI[playerid][pi_ADMIN_LEVEL] = level;
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET admin_level = %d WHERE id = %d;", level, PI[playerid][pi_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	return 1;
}

CMD:ac(playerid, params[])
{
	ShowDialog(playerid, DIALOG_ANTI_CHEAT);
	return 1;
}

CMD:setthirst(playerid, params[])
{
	new to_playerid, Float:amount;
	if (sscanf(params, "uf", to_playerid, amount)) return ShowPlayerMessage(playerid, "~>~ /setthirst <player_id> <valor>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (amount < 0.0 || amount > 100.0) return SendPlayerClientMessage(playerid, "Cantidad no válida.");
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	PI[to_playerid][pi_THIRST] = amount;
	SendPlayerClientMessage(playerid, "La hidratación de %s (%d) ahora es %.1f.", PI[to_playerid][pi_NAME], to_playerid, amount);
	
	SendCmdLogToAdmins(playerid, "setthirst", params);
	return 1;
}
alias:setthirst("setsed");

CMD:sethunger(playerid, params[])
{
	new to_playerid, Float:amount;
	if (sscanf(params, "uf", to_playerid, amount)) return ShowPlayerMessage(playerid, "~>~ /sethungry <player_id> <valor>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (amount < 0.0 || amount > 100.0) return SendPlayerClientMessage(playerid, "Cantidad no válida.");
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	PI[to_playerid][pi_HUNGRY] = amount;
	SendPlayerClientMessage(playerid, "La alimentación de %s (%d) ahora es %.1f.", PI[to_playerid][pi_NAME], to_playerid, amount);
	
	SendCmdLogToAdmins(playerid, "sethunger", params);
	return 1;
}
alias:sethunger("sethambre", "sethungry");

CMD:setgas(playerid, params[])
{
	new Float:val;
	if (sscanf(params, "f", val)) return ShowPlayerMessage(playerid, "~>~ /setgas <valor>");
	if (val < 0.0) return SendPlayerClientMessage(playerid, "Valor no válido.");
	
	new vehicleid = GetPlayerVehicleID(playerid);
	if (!vehicleid) return SendPlayerClientMessage(playerid, "No estás en un vehículo.");
	
	if (val > GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS]) val = GLOBAL_VEHICLES[vehicleid][gb_vehicle_MAX_GAS];
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS] = val;
	
	SendPlayerClientMessage(playerid, "La gasolina del vehículo (%d) ahora es %.1f.", vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_GAS]);
	
	SendCmdLogToAdmins(playerid, "setgas", params);
	return 1;
}

CMD:vsetgas(playerid, params[])
{
	new Float:val, to_car;
	if (sscanf(params, "df", to_car, val)) return ShowPlayerMessage(playerid, "~>~ /vsetgas <vehicleid> <valor>");
	if (val < 0.0) return SendPlayerClientMessage(playerid, "Valor no válido.");
	if (to_car >= MAX_VEHICLES) return 1;
	
	if (!GLOBAL_VEHICLES[to_car][gb_vehicle_VALID]) return SendPlayerClientMessage(playerid, "Vehículo no válido.");
	
	if (val > GLOBAL_VEHICLES[to_car][gb_vehicle_MAX_GAS]) val = GLOBAL_VEHICLES[to_car][gb_vehicle_MAX_GAS];
	GLOBAL_VEHICLES[to_car][gb_vehicle_GAS] = val;
	
	SendPlayerClientMessage(playerid, "La gasolina del vehículo (%d) ahora es %.1f.", to_car, GLOBAL_VEHICLES[to_car][gb_vehicle_GAS]);
	
	SendCmdLogToAdmins(playerid, "vsetgas", params);
	return 1;
}

CMD:engine(playerid, params[])
{
	new bool:set, to_car;
	if (sscanf(params, "bd", set, to_car)) return ShowPlayerMessage(playerid, "~>~ /engine <set ? 1 : 0> <vehicleid>");
	if (to_car >= MAX_VEHICLES) return 1;
	
	if (!GLOBAL_VEHICLES[to_car][gb_vehicle_VALID]) return SendPlayerClientMessage(playerid, "Vehículo no válido.");
	
	GLOBAL_VEHICLES[to_car][gb_vehicle_PARAMS_ENGINE] = set;
	UpdateVehicleParams(to_car);

	SendPlayerClientMessage(playerid, "El estado de el motor de el vehículo (%d) esta en %d.", to_car, set);
	
	SendCmdLogToAdmins(playerid, "engine", params);
	return 1;
}

CMD:repairveh(playerid, params[])
{
	new vehicleid = GetPlayerVehicleID(playerid);
	if (!vehicleid) return SendPlayerClientMessage(playerid, "No estás en un vehículo.");
	
	if (GetPlayerState(playerid) == PLAYER_STATE_DRIVER) RepairVehicleEx(vehicleid, playerid);
	else {
		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] != INVALID_PLAYER_ID) RepairVehicleEx(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER]);
		else RepairVehicleEx(vehicleid);
	}
	SendPlayerClientMessage(playerid, "Vehículo (%d) reparado.", vehicleid);
	
	SendCmdLogToAdmins(playerid, "repairveh", params);
	return 1;
}
alias:repairveh("repararveh");

CMD:sethealth(playerid, params[])
{
	new to_playerid, Float:amount;
	if (sscanf(params, "uf", to_playerid, amount)) return ShowPlayerMessage(playerid, "~>~ /sethealth <player_id> <valor>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (amount < 0.0 || amount > 100.0) return SendPlayerClientMessage(playerid, "Valor no válido.");
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	SetPlayerHealthEx(to_playerid, amount);
	PLAYER_TEMP[to_playerid][pt_DEATH_HEALTH] = amount;
	SendPlayerClientMessage(playerid, "La vida de %s (%d) ahora es %.1f.", PI[to_playerid][pi_NAME], to_playerid, amount);
	
	SendCmdLogToAdmins(playerid, "sethealth", params);
	return 1;
}
alias:sethealth("setvida");

CMD:setarmour(playerid, params[])
{
	new to_playerid, Float:amount;
	if (sscanf(params, "uf", to_playerid, amount)) return ShowPlayerMessage(playerid, "~>~ /setarmour <player_id> <valor>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (amount < 0.0 || amount > 100.0) return SendPlayerClientMessage(playerid, "Valor no válido.");
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	SetPlayerArmourEx(to_playerid, amount);

	if (IsValidPlayerInventoryObjectSlo(playerid, SLOT_BACK, INVENTORY_TYPE_VEST)) {
		j_PocketInfo[playerid][SLOT_BACK][pExtra] = floatround(amount);
	}

	if (IsValidPlayerInventoryObjectSlo(playerid, SLOT_BACK, INVENTORY_TYPE_POLICE_VEST)) {
		j_PocketInfo[playerid][SLOT_BACK][pExtra] = floatround(amount);
	}

	SendPlayerClientMessage(playerid, "El chaleco de %s (%d) ahora es %.1f.", PI[to_playerid][pi_NAME], to_playerid, amount);
	
	SendCmdLogToAdmins(playerid, "setarmour", params);
	return 1;
}
alias:setarmour("setchaleco");

CMD:setlevel(playerid, params[])
{
	new to_playerid, level;
	if (sscanf(params, "ud", to_playerid, level)) return ShowPlayerMessage(playerid, "~>~ /level <player_id> <nivel>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");

	PI[to_playerid][pi_REP] = 1;

	if (level >= 12)
	{
		level = 12;
		PI[to_playerid][pi_LEVEL] = level;
		PI[to_playerid][pi_REP] = neccessary_rep[ PI[to_playerid][pi_LEVEL] ];
	}
	if (level < 1) level = 1;

	PI[to_playerid][pi_LEVEL] = level;

	KillTimer(PLAYER_TEMP[to_playerid][pt_TIMERS][2]);
	
	UpdateReputationTextDraws(to_playerid);
	SetPlayerSkillLevels(to_playerid);
	
	SendPlayerClientMessage(to_playerid, "{"#PRIMARY_COLOR"}¡Felicidades! {f5f5f5}Has subido al nivel {"#PRIMARY_COLOR"}%d{f5f5f5}.", PI[to_playerid][pi_LEVEL]);
	SetPlayerScore(to_playerid, PI[to_playerid][pi_LEVEL]);
	PlayerPlaySoundEx(to_playerid, 1058, 0.0, 0.0, 0.0);
	
	PI[to_playerid][pi_TIME_FOR_REP] = TIME_FOR_REP;
	PLAYER_TEMP[to_playerid][pt_TIME_PASSED_LAST_REP] = gettime() * 1000;
	
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET time_playing = %d, level = %d, rep = %d, time_for_rep = %d, payday_rep = %d WHERE id = %d;", PI[to_playerid][pi_TIME_PLAYING], PI[to_playerid][pi_LEVEL], PI[to_playerid][pi_REP], TIME_FOR_REP, PI[to_playerid][pi_PAYDAY_REP], PI[to_playerid][pi_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	
	KillTimer(PLAYER_TEMP[to_playerid][pt_TIMERS][2]);
	PLAYER_TEMP[to_playerid][pt_TIMERS][2] = SetTimerEx("AddPlayerReputation", PI[to_playerid][pi_TIME_FOR_REP], false, "i", to_playerid);
	
	SendPlayerClientMessage(playerid, "El nivel de %s (%d) ahora es %d.", PI[to_playerid][pi_NAME], to_playerid, PI[to_playerid][pi_LEVEL]);
	
	SendCmdLogToAdmins(playerid, "setlevel", params);
	return 1;
}

CMD:setwork(playerid, params[])
{
	new to_playerid, work, set;
	if (sscanf(params, "udd", to_playerid, work, set)) return ShowPlayerMessage(playerid, "~>~ /setwork <player_id> <work> <set>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	if (work < 0 || work >= sizeof work_info) return SendPlayerClientMessage(playerid, "El trabajo no es válido, para verlos usa /works.");
	
	if (PLAYER_TEMP[to_playerid][pt_WORKING_IN]) return SendPlayerClientMessage(playerid, "No se puede cambiar el trabajo del jugador porque está de servicio en su trabajo.");
	
	
	new player_jobs = CountPlayerJobs(to_playerid);
	if (PI[to_playerid][pi_VIP])
	{
		if (player_jobs >= MAX_SU_WORKS && set)
		{
			SendPlayerClientMessage(playerid, "El limite de trabajos para este jugador es %d.", player_jobs);
			return 1;
		}
	}
	else
	{
		if (player_jobs >= MAX_NU_WORKS && set)
		{
			SendPlayerClientMessage(playerid, "El limite de trabajos para este jugador es %d.", player_jobs);
			return 1;
		}
	}

	if (set)
	{
		if (work == WORK_POLICE)
		{
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO pworks (id_player, id_work, `set`, level) VALUES(%d, %d, 1, 1) ON DUPLICATE KEY UPDATE `set` = 1, level = 1;", PI[to_playerid][pi_ID], work);
			mysql_tquery(handle_db, QUERY_BUFFER);

			PLAYER_WORKS[to_playerid][work][pwork_LEVEL] = 1;
		}
		else
		{
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO pworks (id_player, id_work, `set`, level) VALUES(%d, %d, 1, 1) ON DUPLICATE KEY UPDATE `set` = 1;", PI[to_playerid][pi_ID], work);
			mysql_tquery(handle_db, QUERY_BUFFER);
		}
	
		PLAYER_WORKS[to_playerid][work][pwork_SET] = 1;
		
	}
	else
	{
		if (work == WORK_POLICE)
		{
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET `set` = 0, level = 0 WHERE id_player = %d AND id_work = %d;", PI[to_playerid][pi_ID], work);
			mysql_tquery(handle_db, QUERY_BUFFER);

			PLAYER_WORKS[to_playerid][work][pwork_LEVEL] = 0;
		}
		else
		{
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET `set` = 0 WHERE id_player = %d AND id_work = %d;", PI[to_playerid][pi_ID], work);
			mysql_tquery(handle_db, QUERY_BUFFER);
		}

		PLAYER_WORKS[to_playerid][work][pwork_SET] = 0;
		SendPlayerClientMessage(to_playerid, "{f5f5f5}Has abandonado tu trabajo de %s.", work_info[work][work_info_NAME]);
	}

	SendPlayerClientMessage(playerid, "El trabajo %s de %s (%d) es: '%d'.", work_info[ work ][work_info_NAME], PI[to_playerid][pi_NAME], to_playerid, set);
	SendCmdLogToAdmins(playerid, "setwork", params);
	return 1;
}

CMD:setworkexp(playerid, params[])
{
	new to_playerid, work, exp;
	if (sscanf(params, "udd", to_playerid, work, exp)) return ShowPlayerMessage(playerid, "~>~ /setworkexp <player_id> <work, para verlos /works> <exp>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	if (work < 0 || work >= sizeof work_info) return SendPlayerClientMessage(playerid, "El trabajo no es válido, para verlos usa /works.");
	
	if (PLAYER_WORKS[to_playerid][ work ][pwork_SET])
	{
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET level = %d WHERE id_player = %d AND id_work = %d;", exp, PI[to_playerid][pi_ID], work);
		mysql_tquery(handle_db, QUERY_BUFFER);

		PLAYER_WORKS[to_playerid][ work ][pwork_LEVEL] = exp;
		SendPlayerClientMessage(playerid, "La experiencia de %s (%d) en el trabajo '%s' ahora es %d.", PI[to_playerid][pi_NAME], to_playerid, work_info[ work ][work_info_NAME], exp);
		SendCmdLogToAdmins(playerid, "setworkexp", params);
	}
	else SendPlayerClientMessage(playerid, "El jugador no tiene el trabajo");
	return 1;
}

CMD:setcash(playerid, params[])
{
	new to_playerid, value;
	if (sscanf(params, "ud", to_playerid, value)) return ShowPlayerMessage(playerid, "~>~ /setcash <player_id> <amount>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	SetPlayerCash(to_playerid, value);
	SendPlayerClientMessage(playerid, "El dinero de %s (%d) ahora es %d.", PI[to_playerid][pi_NAME], to_playerid, value);
	
	SendCmdLogToAdmins(playerid, "setcash", params);
	return 1;
}

CMD:givecash(playerid, params[])
{
	new to_playerid, value;
	if (sscanf(params, "ud", to_playerid, value)) return ShowPlayerMessage(playerid, "~>~ /givecash <player_id> <amount>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	GivePlayerCash(to_playerid, value, true, value < 0 ? true : false);
	SendPlayerClientMessage(playerid, "El jugador %s (%d) ha recibido %d.", PI[to_playerid][pi_NAME], to_playerid, value);
	
	SendCmdLogToAdmins(playerid, "givecash", params);
	return 1;
}

CMD:asay(playerid, params[])
{
	if (isnull(params)) return ShowPlayerMessage(playerid, "~>~ /asay <message>");
	
	new str[145]; format(str, 145, "* Admin: %s", params);
	SendClientMessageToAll(0x2587CEFF, str);

	SendCmdLogToAdmins(playerid, "asay", params);
	return 1;
}
alias:asay("global");

CMD:spos(playerid, params[])
{
	new Float:p[4], interior, vw;
	if (sscanf(params, "p<,>ffffdd", p[0], p[1], p[2], p[3], interior, vw)) return ShowPlayerMessage(playerid, "~>~ /spos [X], [Y], [Z], [ANGLE], [INTERIOR], [VIRTUAL WORLD]");

	SetPlayerPosEx(playerid, p[0], p[1], p[2], p[3], interior, vw);
	return 1;
}

GetVehicleModelByName(const vehname[]) {
	new modelid = -1;
	for (new i = 0; i < sizeof VEHICLE_INFO; i ++) {
		if (strfind(VEHICLE_INFO[i][vehicle_info_NAME], vehname, true) != -1) {
			modelid = i + 400;
			break;
		}
	}
	return modelid;
}

CMD:payday(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /payday [Player/Name]");
	AddPlayerReputation(to_playerid);
	return 1;
}

CMD:v(playerid, params[])
{
	new modelid, vehname[24], color1 = 1, color2 = 1;
	if (!sscanf(params, "ddd", modelid, color1, color2)) { }
	else if (!sscanf(params, "d", modelid)) { }
	else if (!sscanf(params, "s[24]dd", vehname, color1, color2)) { modelid = GetVehicleModelByName(vehname); }
	else if (!sscanf(params, "s[24]", vehname)) { modelid = GetVehicleModelByName(vehname); }
	else return ShowPlayerMessage(playerid, "~>~ /v <modelid/name> <color 1 = 1> <color 2 = 1>");
	
	if (modelid < 400 || modelid > 611) return SendPlayerClientMessage(playerid, "Modelo de vehículo no válido.");
		
	new Float:p[4];
	GetPlayerPos(playerid, p[0], p[1], p[2]);
	GetPlayerFacingAngle(playerid, p[3]);
	
	new vid = AddTestVehicle(false, modelid, p[0], p[1], p[2], p[3], color1, color2, GetPlayerInterior(playerid), GetPlayerVirtualWorld(playerid));
	PutPlayerInVehicleEx(playerid, vid, 0);

	GLOBAL_VEHICLES[vid][gb_vehicle_PARAMS_ENGINE] = 1;
	UpdateVehicleParams(vid);
	
	SendCmdLogToAdmins(playerid, "v", params);
	return 1;
}

CMD:dv(playerid, params[])
{
	new vehicleid = GetPlayerVehicleID(playerid);
	if (!vehicleid) return SendPlayerClientMessage(playerid, "Error: no estás en ningún vehículo de prueba.");
	if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_TYPE] != VEHICLE_TYPE_TEST) return SendPlayerClientMessage(playerid, "Error: no estás en ningún vehículo de prueba.");
	
	DestroyVehicleEx(vehicleid);
	SendPlayerClientMessage(playerid, "Vehículo de prueba destruido.");
	return 1;
}

CMD:exit(playerid, params[])
{
	mysql_tquery(handle_db, "UPDATE player SET connected = 0, playerid = 0;");
	SendRconCommand("exit");
	return 1;
}

CMD:nombre(playerid, params[])
{
	if (CNAME_COINS_PRICE > PI[playerid][pi_COINS])
	{
		SendPlayerClientMessage(playerid, "Te faltan %d "SERVER_COIN" para poder cambiarte el nombre.", CNAME_COINS_PRICE - PI[playerid][pi_COINS]);
		return 1;
	}

	//ShowDialog(playerid, DIALOG_CHANGE_NAME);
	return 1;
}
alias:nombre("cname");

CMD:correo(playerid, params[])
{
	ShowDialog(playerid, DIALOG_CHANGE_EMAIL);
	return 1;
}
alias:correo("email", "mail");

CMD:setnametemp(playerid, params[])
{
	new to_playerid, new_name[24];
	if (sscanf(params, "us[24]", to_playerid, new_name)) return ShowPlayerMessage(playerid, "~>~ /setnametemp <player_id> <nuevo nombre>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);

	PLAYER_TEMP[to_playerid][pt_ADMIN_NAME] = true;
	if (SetPlayerName(to_playerid, new_name) == 1) 
	{
		format(PLAYER_TEMP[to_playerid][pt_NAME], 24, "%s", new_name);
		PLAYER_TEMP[to_playerid][pt_ADMIN_DBID] = random(1000);
		SendPlayerClientMessage(playerid, "Nombre cambiado temporalmente.");
	}
	else SendPlayerClientMessage(playerid, "Nombre no válido.");
	return 1;
}

CMD:aname(playerid, params[])
{
	new new_name[24];
	if (sscanf(params, "s[24]", new_name)) return ShowPlayerMessage(playerid, "~>~ /aname <nuevo nombre>");
	
	PLAYER_TEMP[playerid][pt_ADMIN_NAME] = true;
	if (SetPlayerName(playerid, new_name) == 1) 
	{
		format(PLAYER_TEMP[playerid][pt_NAME], 24, "%s", new_name);
		PLAYER_TEMP[playerid][pt_ADMIN_DBID] = random(1000);
		SendPlayerClientMessage(playerid, "Nombre cambiado temporalmente.");
	}
	else SendPlayerClientMessage(playerid, "Nombre no válido.");
	return 1;
}

CMD:setnameplayer(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /setnameplayer <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);

	PLAYER_TEMP[to_playerid][pt_ADMIN_NAME] = false;
	SetPlayerName(to_playerid, PI[to_playerid][pi_NAME]);
	format(PLAYER_TEMP[playerid][pt_NAME], 24, "%s", PI[playerid][pi_NAME]);
	SendPlayerClientMessage(playerid, "Nombre por defecto establecido.");
	return 1;
}

CMD:setname(playerid, params[])
{
	new to_playerid, new_name[24];
	if (sscanf(params, "us[24]", to_playerid, new_name)) return ShowPlayerMessage(playerid, "~>~ /setname <player_id> <nuevo nombre>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (!IsValidRPName(new_name)) return SendPlayerClientMessage(playerid, "El nombre '%s' no cumple con el formato.", new_name);
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			if (rows) SendPlayerClientMessage(playerid, "El nombre '%s' está en uso.", new_name);
			else
			{
				format(PLAYER_TEMP[to_playerid][pt_NAME], 24, "%s", new_name);
				format(PI[to_playerid][pi_NAME], 24, "%s", new_name);
				SetPlayerName(to_playerid, new_name);
				
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET name = '%e' WHERE id = %d;", new_name, PI[to_playerid][pi_ID]);
				mysql_tquery(handle_db, QUERY_BUFFER);
				
				for (new i = 0; i != MAX_PROPERTIES; i ++)
				{
					if (!PROPERTY_INFO[i][property_VALID]) continue;
					if (PROPERTY_INFO[i][property_OWNER_ID] != PI[to_playerid][pi_ID]) continue;
					
					new label_str[256];
					format
					(
						label_str, 
						sizeof label_str, 
						"\
							Propiedad {"#PRIMARY_COLOR"}#%d\n\n\
							{F5F5F5}Propietario: {"#PRIMARY_COLOR"}%s\n\
							{F5F5F5}Presiona {"#PRIMARY_COLOR"}Y {F5F5F5}para entrar.\
						", PROPERTY_INFO[i][property_ID], PI[to_playerid][pi_NAME]
					);
					UpdateDynamic3DTextLabelText(PROPERTY_INFO[i][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
				}
				
				SendPlayerClientMessage(to_playerid, "{f5f5f5}Tu nombre ha sido cambiado a '%s'", new_name);
				SendPlayerClientMessage(playerid, "El nombre del jugador ha sido cambiado a '%s'", new_name);
				
				SendCmdLogToAdmins(playerid, "setname", params);
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE name = '%e';", new_name);
	MySQL_TQueryInline(handle_db,  using inline OnInfoQueryLoad, QUERY_BUFFER, "s", params);
	return 1;
}

CMD:exproperty(playerid, params[])
{
	new id_property;
	if (sscanf(params, "d", id_property)) return ShowPlayerMessage(playerid, "~>~ /exproperty <id>");
	if (id_property <= 0) return ShowPlayerMessage(playerid, "~>~ /exproperty < id > 0 >");
	
	new index = GetPropertyIndexByID(id_property);
	if (index == -1) return SendPlayerClientMessage(playerid, "PROPIEDAD ID no encontrada.");
	
	if (!PROPERTY_INFO[index][property_SOLD]) return SendPlayerClientMessage(playerid, "Esta propiedad ya está en venta.");
	
	
	PROPERTY_INFO[ index ][property_SOLD] = false;
	PROPERTY_INFO[ index ][property_CREW] = false;
	PROPERTY_INFO[ index ][property_OWNER_ID] = 0;
	PROPERTY_INFO[ index ][property_CREW_ID] = 0;
	format(PROPERTY_INFO[ index ][property_NAME], 24, "PROPIEDAD %d", PROPERTY_INFO[ index ][property_ID]);
	
	new info[3];
	UpdateUnnocupiedPropertyLabel(index);
	
	DestroyDynamicPickup(PROPERTY_INFO[ index ][property_EXT_PICKUP_ID]);
	PROPERTY_INFO[ index ][property_EXT_PICKUP_ID] = INVALID_STREAMER_ID;
	
	PROPERTY_INFO[ index ][property_EXT_PICKUP_ID] = CreateDynamicPickup(1273, 1, PROPERTY_INFO[ index ][property_EXT_X], PROPERTY_INFO[ index ][property_EXT_Y], PROPERTY_INFO[ index ][property_EXT_Z], 0, PROPERTY_INFO[ index ][property_EXT_INTERIOR]);
	info[0] = PICKUP_TYPE_PROPERTY;
	info[1] = index; // Index
	info[2] = 2; // Pickup Exterior
	Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[ index ][property_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
				
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_player = NULL, id_territory = NULL WHERE id = %d;", PROPERTY_INFO[ index ][property_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	SendPlayerClientMessage(playerid, "Propiedad (%d) expropiada.", PROPERTY_INFO[ index ][property_ID]);
	
	SendCmdLogToAdmins(playerid, "exproperty", params);
	return 1;
}

CMD:gotoproperty(playerid, params[])
{
	new int_type;
	if (sscanf(params, "d", int_type)) return ShowPlayerMessage(playerid, "~>~ /gotoproperty <interior>");
	if (int_type < 0 || int_type >= sizeof PROPERTY_INTERIORS) return SendPlayerClientMessage(playerid, "Error, rango de interior: 0-%d", sizeof(PROPERTY_INTERIORS) - 1);

	SetPlayerPosEx(playerid, PROPERTY_INTERIORS[int_type][property_INT_X], PROPERTY_INTERIORS[int_type][property_INT_Y], PROPERTY_INTERIORS[int_type][property_INT_Z], PROPERTY_INTERIORS[int_type][property_INT_ANGLE], PROPERTY_INTERIORS[int_type][property_INT_INTERIOR], 0, false, true);
	return 1;
}
alias:gotoproperty("ircasa");

CMD:setpass(playerid, params[])
{
	new to_account, new_pass[MAX_PASS_LENGTH + 1];
	if (sscanf(params, "ds[19]", to_account, new_pass)) return ShowPlayerMessage(playerid, "~>~ /setpass <DB-ID> <pass>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			if (rows)
			{
				new id, name[24], connected, pid, admin_level;
				cache_get_value_name_int(0, "id", id);
				cache_get_value_name(0, "name", name);
				cache_get_value_name_int(0, "connected", connected);
				cache_get_value_name_int(0, "playerid", pid);
				cache_get_value_name_int(0, "admin_level", admin_level);
				if (PI[playerid][pi_ADMIN_LEVEL] >= admin_level)
				{
					if (connected) SendPlayerClientMessage(playerid, "JUGADOR '%s' DB-ID '%d' conectado, player_id: %d, no es necario cambiar la contraseña.", name, id, pid);
					else
					{
						new salt[16], pass_ex[SHA256_HASH_LENGTH], salt_ex[16];

						getRandomSalt(salt);
						format(salt_ex, 16, "%s", salt);
						SHA256_PassHash(new_pass, salt_ex, pass_ex, SHA256_HASH_LENGTH);

						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET salt = '%e', pass = '%e' WHERE id = %d;", salt_ex, pass_ex, id);
						mysql_tquery(handle_db, QUERY_BUFFER);
						
						SendPlayerClientMessage(playerid, "La contraseña de '%s' ahora es: %s", name, new_pass);
					}
				}
				else SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
			}
			else SendPlayerClientMessage(playerid, "No se encontro la DB-ID.");
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name, connected, playerid, admin_level FROM player WHERE id = %d;", to_account);
	MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
	return 1;
}

CMD:delete(playerid, params[])
{
	new to_account;
	if (sscanf(params, "d", to_account)) return ShowPlayerMessage(playerid, "~>~ /delete <DB-ID>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			if (rows)
			{
				new id, ip[16], name[24], connected, pid, admin_level;
				cache_get_value_name_int(0, "id", id);
				cache_get_value_name(0, "ip", ip);
				cache_get_value_name(0, "name", name);
				cache_get_value_name_int(0, "connected", connected);
				cache_get_value_name_int(0, "playerid", pid);
				cache_get_value_name_int(0, "admin_level", admin_level);

				if (PI[playerid][pi_ADMIN_LEVEL] >= admin_level)
				{
					if (connected) SendPlayerClientMessage(playerid, "JUGADOR '%s' DB-ID '%d' conectado para eliminarlo debe estar desconectado, utilice kick, su player_id: %d.", name, id, pid);
					else
					{
						mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM player WHERE id = %d;", id);
						mysql_tquery(handle_db, QUERY_BUFFER);
						
						new ex_properties;
						for (new index = 0; index != MAX_PROPERTIES; index ++)
						{
							if (!PROPERTY_INFO[index][property_VALID]) continue;
							if (!PROPERTY_INFO[index][property_SOLD]) continue;
							if (PROPERTY_INFO[index][property_OWNER_ID] != id) continue;
						
							PROPERTY_INFO[ index ][property_SOLD] = false;
							PROPERTY_INFO[ index ][property_OWNER_ID] = 0;
							format(PROPERTY_INFO[ index ][property_NAME], 24, "PROPIEDAD %d", PROPERTY_INFO[ index ][property_ID]);
							
							new info[3];
							UpdateUnnocupiedPropertyLabel(index);
							
							DestroyDynamicPickup(PROPERTY_INFO[ index ][property_EXT_PICKUP_ID]);
							PROPERTY_INFO[ index ][property_EXT_PICKUP_ID] = INVALID_STREAMER_ID;
							
							PROPERTY_INFO[ index ][property_EXT_PICKUP_ID] = CreateDynamicPickup(1273, 1, PROPERTY_INFO[ index ][property_EXT_X], PROPERTY_INFO[ index ][property_EXT_Y], PROPERTY_INFO[ index ][property_EXT_Z], 0, PROPERTY_INFO[ index ][property_EXT_INTERIOR]);
							info[0] = PICKUP_TYPE_PROPERTY;
							info[1] = index; // Index
							info[2] = 2; // Pickup Exterior
							Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[ index ][property_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
							
							ex_properties ++;
						}
						
						
						SendPlayerClientMessage(playerid, "CUENTA (Nombre '%s' DB-ID: '%d') ha sido eliminada.", name, id);
						if (ex_properties > 0) SendPlayerClientMessage(playerid, "Se han expropiado '%d' propiedades del jugador eliminado.", ex_properties);
						
						new str[145]; format(str, 145, "{"#RED_COLOR"}[ELIMINADO] {F5F5F5}%s (%d) ha eliminado el usuario '%s'", PI[playerid][pi_NAME], playerid, name);
						SendMessageToAdmins(str);
					}
				}
				else SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
			}
			else SendPlayerClientMessage(playerid, "No se encontro la DB-ID.");
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, ip, name, connected, playerid, admin_level FROM player WHERE id = %d;", to_account);
	MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
	return 1;
}

/* PROPERTY CONSTRUCTOR */

CMD:rproperty(playerid, params[])
{
	new id_property;
	if (sscanf(params, "d", id_property)) return ShowPlayerMessage(playerid, "~>~ /rproperty <id>");
	if (id_property <= 0) return ShowPlayerMessage(playerid, "~>~ /rproperty <id>");
	
	new index = GetPropertyIndexByID(id_property), str_text[1000];
	if (index == -1) return SendPlayerClientMessage(playerid, "PROPIEDAD ID no encontrada.");

	format(str_text, sizeof str_text, "Propiedad `Id: %d` eliminada por `%s %s (db_id: %d)`", id_property, ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], PI[playerid][pi_NAME], PI[playerid][pi_ID]);

	SendDiscordMessage(""#DISCORD_HOUSE_LOG_CHANNEL"", str_text, true, "Propiedad eliminada Spain + RolePlay Android|PC", "ff0000", PI[playerid][pi_NAME], ""#DISCORD_DEFAULT_IMAGE"", ""#DISCORD_DEFAULT_IMAGE"");
	
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "DELETE FROM properties WHERE id = %d;", PROPERTY_INFO[index][property_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	
	if (IsValidDynamic3DTextLabel(PROPERTY_INFO[index][property_EXT_LABEL_ID])) DestroyDynamic3DTextLabel(PROPERTY_INFO[index][property_EXT_LABEL_ID]);
	if (IsValidDynamic3DTextLabel(PROPERTY_INFO[index][property_INT_LABEL_ID])) DestroyDynamic3DTextLabel(PROPERTY_INFO[index][property_INT_LABEL_ID]);
	if (IsValidDynamicPickup(PROPERTY_INFO[index][property_EXT_PICKUP_ID])) DestroyDynamicPickup(PROPERTY_INFO[index][property_EXT_PICKUP_ID]);
	if (IsValidDynamicPickup(PROPERTY_INFO[index][property_INT_PICKUP_ID])) DestroyDynamicPickup(PROPERTY_INFO[index][property_INT_PICKUP_ID]);
	new reset[Property_Info_Enum]; PROPERTY_INFO[index] = reset;
	
	TOTAL_PROPERTIES_LOADED --;
	
	SendPlayerClientMessage(playerid, "PROPIEDAD %d ELIMINADA.", id_property);
	SendPlayerClientMessage(playerid, "PROPIEDADES: %d/%d", TOTAL_PROPERTIES_LOADED, MAX_PROPERTIES);
	
	SendCmdLogToAdmins(playerid, "rproperty", params);
	return 1;
}

CMD:eproperty(playerid, params[])
{
	new id_property, new_int;
	if (sscanf(params, "dddddd", id_property, new_int, PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][0], PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][1], PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][2], PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][3])) return ShowPlayerMessage(playerid, "~>~ /eproperty <id> <interior> <nivel> <precio> <vip level> <coins>");
	if (id_property <= 0) return SendPlayerClientMessage(playerid, "ID no válida.");
	
	new index = GetPropertyIndexByID(id_property);
	if (index == -1) return SendPlayerClientMessage(playerid, "PROPIEDAD ID no encontrada.");
	
	if (PROPERTY_INFO[index][property_SOLD]) return SendPlayerClientMessage(playerid, "Solo se pueden modificar propiedades que están libres.");
	
	if (new_int < 0 || new_int >= sizeof(PROPERTY_INTERIORS)) return SendPlayerClientMessage(playerid, "El interior elegido no es válido.");
	
	PROPERTY_INFO[index][property_ID_INTERIOR] = new_int;
	PROPERTY_INFO[index][property_PRICE] = PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][1];
	PROPERTY_INFO[index][property_LEVEL] = PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][0];
	PROPERTY_INFO[index][property_EXTRA] = PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][3];
	PROPERTY_INFO[index][property_VIP_LEVEL] = PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][2];
	PROPERTY_INFO[index][property_PRICE_BASE] = PROPERTY_INFO[index][property_PRICE];
	
	new str_text[1500];
	format(str_text, sizeof str_text, 
		"Propiedad `Id: %d` modificada por `%s %s (db_id: %d)`\n## Nuevos parametros\n```yaml\nInt: %d\nPrice: %d\nLevel: %d\nExtra: %d\nVip: %d\n```", 
		id_property, ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], PI[playerid][pi_NAME], PI[playerid][pi_ID],
		new_int, PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][1], PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][0], PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][3],
		PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][2]
	);

	SendDiscordMessage(""#DISCORD_HOUSE_LOG_CHANNEL"", str_text, true, "Propiedad modificada Spain + RolePlay Android|PC", ""#YELLOW_COLOR"", PI[playerid][pi_NAME], ""#DISCORD_DEFAULT_IMAGE"", ""#DISCORD_DEFAULT_IMAGE"");

	if (PROPERTY_INFO[index][property_EXTRA]) PROPERTY_INFO[index][property_PRICE] = 0;
	if (PROPERTY_INFO[index][property_VIP_LEVEL]) PROPERTY_INFO[index][property_LEVEL] = 1;

	UpdateUnnocupiedPropertyLabel(index);
	
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE properties SET id_interior = %d, price = %d, level = %d, extra = %d, vip_level = %d WHERE id = %d;", PROPERTY_INFO[index][property_ID_INTERIOR], PROPERTY_INFO[index][property_PRICE_BASE], PROPERTY_INFO[index][property_LEVEL], PROPERTY_INFO[index][property_EXTRA], PROPERTY_INFO[index][property_VIP_LEVEL], PROPERTY_INFO[index][property_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);

	SendCmdLogToAdmins(playerid, "eproperty", params);
	return 1;
}

CMD:cproperty(playerid, params[])
{
	if (TOTAL_PROPERTIES_LOADED >= MAX_PROPERTIES) return SendPlayerClientMessage(playerid, "Límite alcanzado.");
	
	if (sscanf(params, "dddd", PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][0], PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][1], PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][2], PLAYER_TEMP[playerid][pt_PROPERTY_CINFO][3])) return ShowPlayerMessage(playerid, "~>~ /cproperty <nivel> <precio> <vip level> <coins>");
	
	GetPlayerPos(playerid, PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_X], PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_Y], PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_Z]);
	GetPlayerFacingAngle(playerid, PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_ANG]);
	PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_EXT_INT] = GetPlayerInterior(playerid);
	
	PLAYER_PROPERTY_CONSTRUCTOR[playerid][player_property_creator_ENABLED] = true;
	for (new i = 0; i != 6; i ++) PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_PROPERTY_CONSTRUCTOR][i]);
	
	UpdatePlayerPropertyContructor(playerid);
	return 1;
}

SendChatMessageToAdmins(const message[])
{
	foreach (new i : Player) 
	    if (IsPlayerConnected(i) && PLAYER_TEMP[i][pt_USER_LOGGED])
	        if (PI[i][pi_ADMIN_LEVEL] > 0 && PLAYER_TEMP[i][pt_SEE_ADM_CHAT] /*&& PLAYER_TEMP[i][pt_ADMIN_SERVICE]*/)
	            SendPlayerClientMessage(i, message);
}

SendMessageToAdmins(const message[], level = 1)
{
	foreach (new i : Player) 
	    if (IsPlayerConnected(i) && PLAYER_TEMP[i][pt_USER_LOGGED])
	        if (PI[i][pi_ADMIN_LEVEL] > level && PLAYER_TEMP[i][pt_SEE_ADM_LOG] /*&& PLAYER_TEMP[i][pt_ADMIN_SERVICE]*/)
	            SendPlayerClientMessage(i, message);

	return 1;
}

SendCmdLogToAdmins(playerid, cmdtext[], params[])
{
	new message[145];
	if (isnull(params)) format(message, sizeof message, "{%s}el %s %s (%d) ha utilizado el comando /%s", ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], PI[playerid][pi_NAME], playerid, cmdtext);
	else format(message, sizeof message, "{%s}el %s %s (%d) ha utilizado el comando /%s %s", ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], PI[playerid][pi_NAME], playerid, cmdtext, params);
	
	foreach (new i : Player) 
	    if (IsPlayerConnected(i) && PLAYER_TEMP[i][pt_USER_LOGGED])
	        if (PI[i][pi_ADMIN_LEVEL] >= PI[playerid][pi_ADMIN_LEVEL] && PLAYER_TEMP[i][pt_SEE_ACMD_LOG] /*&& PLAYER_TEMP[i][pt_ADMIN_SERVICE]*/)
	            SendPlayerClientMessage(i, message);
	
	return 1;
}

SendMessageToAdminsAC(const message[])
{
	foreach (new i : Player) 
	    if (IsPlayerConnected(i) && PLAYER_TEMP[i][pt_USER_LOGGED])
	        if (PI[i][pi_ADMIN_LEVEL] > 1 && PLAYER_TEMP[i][pt_SEE_AC_LOG] /*&& PLAYER_TEMP[i][pt_ADMIN_SERVICE]*/)
	            SendPlayerClientMessage(i, message);
	
	return 1;
}

RespawnAllUnoccupiedVehicles()
{
	for (new i = 0; i != MAX_VEHICLES; i ++)
	{
		if (!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
		if (GLOBAL_VEHICLES[i][gb_vehicle_OCCUPIED]) continue;
		if (GLOBAL_VEHICLES[i][gb_vehicle_TYPE] == VEHICLE_TYPE_TEST)
		{
			DestroyVehicleEx(i);
			continue;
		}
		
		SetVehicleToRespawnEx(i);
	}
	return 1;
}

RespawnGlobalUnoccupiedVehicles()
{
	for (new i = 0; i != MAX_VEHICLES; i ++)
	{
		if (!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
		if (GLOBAL_VEHICLES[i][gb_vehicle_TYPE] == VEHICLE_TYPE_PERSONAL) continue;
		if (GLOBAL_VEHICLES[i][gb_vehicle_OCCUPIED]) continue;
	
		SetVehicleToRespawnEx(i);
	}
	return 1;
}

GetNumberOfPlayersOnThisIP(const test_ip[])
{
	new against_ip[16], ip_count = 0;
	foreach (new x : Player)
	{
		if (IsPlayerConnected(x)) 
		{
		    GetPlayerIp(x, against_ip, 16);
		    if (!strcmp(against_ip, test_ip)) ip_count++;
		}
	}
	return ip_count;
}

getRandomSalt(salt[], length = sizeof salt)
{
    for (new i = 0; i != length; i ++)
	{
		salt[i] = random(2) ? (random(26) + (random(2) ? 'a' : 'A')) : (random(10) + '0');
	}
	return true;
}

GetTickDiff(newtick, oldtick)
{
	if (oldtick < 0 && newtick >= 0) {
		return newtick - oldtick;
	} else if (oldtick >= 0 && newtick < 0 || oldtick > newtick) {
		return (cellmax - oldtick + 1) - (cellmin - newtick);
	}
	return newtick - oldtick;
}

GetPlayerSpeed(vehicleid)
{
	new Float:xPos[3];
	GetPlayerVelocity(vehicleid, xPos[0], xPos[1], xPos[2]);
	return floatround(floatsqroot(xPos[0] * xPos[0] + xPos[1] * xPos[1] + xPos[2] * xPos[2]) * 170.00);
}

GetPlayerPlantedPlants(playerid)
{
	new plants;
	
	for (new i = 0; i != MAX_PLANTS; i ++)
	{
		if (!PLANTS[i][plant_VALID]) continue;
		if (PLANTS[i][plant_PLANTED_BY_ACCOUNT_ID] == PI[playerid][pi_ID]) plants ++;
	}
	return plants;
}

forward StartPlayerJob(playerid, work, vehicleid);
public StartPlayerJob(playerid, work, vehicleid)
{
	switch(work)
	{
		case WORK_TAXI:
		{
			ResetVehicleTaxiMeter(vehicleid);
			ShowPlayerTaxiMeter(playerid);
			
			new passenger = GetVehicleFirstPassenger(vehicleid);
			if (passenger != INVALID_PLAYER_ID)
			{
				ShowPlayerTaxiMeter(passenger);
				if (PLAYER_TEMP[passenger][pt_WANT_TAXI])
				{
					PLAYER_TEMP[passenger][pt_WANT_TAXI] = false;
					DisablePlayerTaxiMark(passenger);
				}
				
				TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_ENABLED] = true;
				GetVehiclePos(vehicleid, TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_OLD_X], TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_OLD_Y], TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_OLD_Z]);
				KillTimer(TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_TIMER]);
				TAXI_METER_VEHICLE[vehicleid][veh_taxi_meter_TIMER] = SetTimerEx("UpdateVehicleTaximeter", 4000, true, "iii", vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER], passenger);
			}
		}
		case WORK_TRUCK:
		{
			if (TRUCK_VEHICLE[vehicleid][truck_vehicle_LOADED])
			{
				if (TRUCK_VEHICLE[vehicleid][truck_vehicle_DELIVERED]) SendPlayerClientMessage(playerid, "El camión ya ha entregado la mercancía, ve al punto de partida para cobrar.");
				else SendPlayerClientMessage(playerid, "Ve a entregar la mercancía al punto marcado.");
				
				SetPlayerTruckCheckpoint(playerid, vehicleid);
			}
			else SendPlayerClientMessage(playerid, "Para comenzar a trabajar carga el camión en la zona indicada con una caja.");
		}
		case WORK_HARVESTER:
		{
			PLAYER_TEMP[playerid][pt_HARVERT_PROCCESS] = 0;
			SendPlayerClientMessage(playerid, "Ve hasta los puntos de control para completar el trabajo.");
			SendPlayerClientMessage(playerid, "Si te bajas de la cosechadora se cancelará el trabajo.");
			Set_HARVEST_Checkpoint(playerid);
		}
		case WORK_LUMBERJACK:
		{
			PLAYER_TEMP[playerid][pt_PLAYER_CARRYING_TREE] = false;
			PLAYER_TEMP[playerid][pt_PLAYER_LUMBERJACK_TREE] = -1;
			
			SendPlayerClientMessage(playerid, "{f5f5f5}Los árboles que puedes talar están repartidos por la zona, si te alejas demasiado el trabajo se cancelará.");
		}
		case WORK_TRASH:
		{
			if (PI[playerid][pi_GENDER] == SEX_MALE)
			{
				SetPlayerSkin(playerid, 16);
			}
		}
		case WORK_MECHANIC:
		{
			if (PI[playerid][pi_GENDER] == SEX_MALE)
			{
				SetPlayerSkin(playerid, 50);
			}

			SendPlayerClientMessage(playerid, "{"#LIGHTBLUE_COLOR"}{F5F5F5}Puedes usar tus herramientas abriendo el menu con {999999}[Y]{F5F5F5}.");
			SendPlayerClientMessage(playerid, "{"#LIGHTBLUE_COLOR"}{F5F5F5}Para encontrar clientes puedes usar la computadora de la grua con {999999}[Y]{F5F5F5}.");
		}
		case WORK_POLICE:
		{
			if (IsValidDynamic3DTextLabel(PLAYER_TEMP[playerid][pt_POLICE_LABEL]))
			{
				DestroyDynamic3DTextLabel(PLAYER_TEMP[playerid][pt_POLICE_LABEL]);
				PLAYER_TEMP[playerid][pt_POLICE_LABEL] = Text3D:INVALID_STREAMER_ID;
			}
			PLAYER_TEMP[playerid][pt_POLICE_LABEL] = CreateDynamic3DTextLabel("{"#POLICE_COLOUR"}Policia", -1, 0.0, 0.0, 0.3, 20.0, playerid, .testlos = true);

			
			SetWantedPlayerMarkers(playerid);
			SetPlayerSkin(playerid, PI[playerid][pi_POLICE_DUTY]);
		}
		case WORK_PIZZA:
		{
			if (PI[playerid][pi_GENDER] == SEX_MALE)
			{
				SetPlayerSkin(playerid, 155);
				
			}
			PLAYER_TEMP[playerid][pt_PIZZA_PROCCESS] = 0;
			PLAYER_TEMP[playerid][pt_DELIVERED_PIZZAS] = 0;
			SendPlayerClientMessage(playerid, "Para comenzar a repartir súbete a una moto de la pizzería.");
		}
		case WORK_MEDIC:
		{
			if (PI[playerid][pi_GENDER] == SEX_MALE) SetPlayerSkin(playerid, male_medic_skins[ random(sizeof(male_medic_skins)) ]);
			else SetPlayerSkin(playerid, 308);
			
			SetInjuredPlayerMarkers(playerid);
		}
	}

	PLAYER_TEMP[playerid][pt_WORKING_IN] = work;
	UpdateAllPlayerInventoryData(playerid, true, false);

	UpdateInvObjInBody(playerid);
	return 1;
}

forward EndPlayerJob(playerid, work, bool:changeskin);
public EndPlayerJob(playerid, work, bool:changeskin)
{
	switch(PLAYER_TEMP[playerid][pt_WORKING_IN])
	{
		case WORK_TAXI:
		{
			if (PLAYER_TEMP[playerid][pt_TAXI_METER_ENABLED])
			{
				SetNormalPlayerMarkers(playerid);
				HidePlayerTaxiMeter(playerid);
			}
		}
		case WORK_TRUCK:
		{
			if (PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] != INVALID_VEHICLE_ID)
			{
				if (TRUCK_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][truck_vehicle_DRIVER_USER_ID] == PI[playerid][pi_ID])
				{
					if (TRUCK_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][truck_vehicle_LOADING])
					{
						HidePlayerDialog(playerid);
						KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][9]);
						SetVehicleToRespawnEx(PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID]);
					}
					if (TRUCK_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][truck_vehicle_UNLOADING])
					{
						TRUCK_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][truck_vehicle_UNLOADING] = false;
						KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][9]);
					}
				}
			}
			if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT]))
			{
				DestroyDynamicCP(PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT]);
				PLAYER_TEMP[playerid][pt_TRUCK_CHECKPOINT] = INVALID_STREAMER_ID;
			}
		}
		case WORK_HARVESTER:
		{
			if (IsValidDynamicRaceCP(PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT]))
			{
				DestroyDynamicRaceCP(PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT]);
				PLAYER_TEMP[playerid][pt_HARVERT_CHECKPOINT] = INVALID_STREAMER_ID;
			}
			if (PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] != INVALID_VEHICLE_ID)
			{
				if (WORK_VEHICLES[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][work_vehicle_WORK] == WORK_HARVESTER)
				{
					DestroyVehicleEx(PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID]);
					PLAYER_TEMP[playerid][pt_WORK_VEHICLE_ID] = INVALID_VEHICLE_ID;
				}
			}
		}
		case WORK_LUMBERJACK: CancelLumberjackWork(playerid);
		case WORK_FARMER: CancelPlayerPlanting(playerid);
		case WORK_TRASH:
		{
			if (changeskin)
			{
				SetPlayerSkin(playerid, PI[playerid][pi_SKIN]);
			}
			
			if (PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] != INVALID_VEHICLE_ID)
			{
				if (TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_JOB_STARTED])
				{
					if (PLAYER_TEMP[playerid][pt_TRASH_DRIVER])
					{
						SendPlayerClientMessage(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID],  "{f5f5f5}El trabajo se ha cancelado porque tu compañero ha dejado de trabajar.");
						CancelTrashWork(playerid, TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_PASSENGER_ID], PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID]);
					}
					if (PLAYER_TEMP[playerid][pt_TRASH_PASSENGER])
					{
						SendPlayerClientMessage(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], "{f5f5f5}El trabajo se ha cancelado porque tu compañero ha dejado de trabajar.");
						CancelTrashWork(TRASH_VEHICLES[ PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID] ][trash_vehicle_DRIVER_ID], playerid, PLAYER_TEMP[playerid][pt_TRASH_VEHICLE_ID]);
					}
				}
			}
		}
		case WORK_POLICE:
		{
			PLAYER_TEMP[playerid][pt_POLICE_RADIO] = 0;
			
			if (IsValidDynamic3DTextLabel(PLAYER_TEMP[playerid][pt_POLICE_LABEL]))
			{
				DestroyDynamic3DTextLabel(PLAYER_TEMP[playerid][pt_POLICE_LABEL]);
				PLAYER_TEMP[playerid][pt_POLICE_LABEL] = Text3D:INVALID_STREAMER_ID;
			}
			if (changeskin)
			{
				SetPlayerSkin(playerid, PI[playerid][pi_SKIN]);
				PI[playerid][pi_POLICE_DUTY] = 0;
			}
			SetNormalPlayerMarkers(playerid);
		}
		case WORK_MECHANIC:
		{
			if (changeskin)
			{
				SetPlayerSkin(playerid, PI[playerid][pi_SKIN]);
			}
			SetNormalPlayerMarkers(playerid);
		}
		case WORK_PIZZA:
		{
			if (PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] != INVALID_VEHICLE_ID)
			{
				if (PIZZA_VEHICLE[ PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID] ][pizza_vehicle_DRIVER_AID] == PI[playerid][pi_ID]) SetVehicleToRespawnEx(PLAYER_TEMP[playerid][pt_LAST_VEHICLE_ID]);
			}
			if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT]))
			{
				DestroyDynamicCP(PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT]);
				PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
			}
			if (IsValidDynamicActor(PLAYER_TEMP[playerid][pt_PIZZA_ACTOR]))
			{
				DestroyDynamicActor(PLAYER_TEMP[playerid][pt_PIZZA_ACTOR]);
				PLAYER_TEMP[playerid][pt_PIZZA_ACTOR] = INVALID_STREAMER_ID;
			}
			if (changeskin)
			{
				SetPlayerSkin(playerid, PI[playerid][pi_SKIN]);
			}
		}
		case WORK_MEDIC:
		{
			if (changeskin)
			{
				SetPlayerSkin(playerid, PI[playerid][pi_SKIN]);
			}
			SetNormalPlayerMarkers(playerid);
		}
	}

	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET level = %d WHERE id_player = %d AND id_work = %d;", PLAYER_WORKS[playerid][ PLAYER_TEMP[playerid][pt_WORKING_IN] ][pwork_LEVEL], PI[playerid][pi_ID], PLAYER_TEMP[playerid][pt_WORKING_IN]);
	mysql_tquery(handle_db, QUERY_BUFFER);

	PLAYER_TEMP[playerid][pt_WORKING_IN] = WORK_NONE;
	UpdateAllPlayerInventoryData(playerid, false, false);

	UpdateInvObjInBody(playerid);
	return 1;
}

CountPlayerJobs(playerid)
{
	new count;
	for (new i = 1; i != sizeof(work_info); i ++)
	{
		if (PLAYER_WORKS[playerid][i][pwork_SET]) count ++;
	}
	return count;
}

getPlayerWorks(playerid)
{
	new works[27 * sizeof(work_info)], count;
	for (new i = 1; i != sizeof(work_info); i ++)
	{
		if (PLAYER_WORKS[playerid][i][pwork_SET])
		{
			if (count > 0) strcat(works, ", ");
			strcat(works, work_info[i][work_info_NAME]);
			
			count ++;
		}
	}
	
	if (!count) works = "ninguno";
	return works;
}

SetPlayer_Pizza_Checkpoint(playerid, point)
{
	if (IsValidDynamicCP(PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT]))
	{
		DestroyDynamicCP(PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT]);
		PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT] = INVALID_STREAMER_ID;
	}
	if (IsValidDynamicActor(PLAYER_TEMP[playerid][pt_PIZZA_ACTOR]))
	{
		DestroyDynamicActor(PLAYER_TEMP[playerid][pt_PIZZA_ACTOR]);
		PLAYER_TEMP[playerid][pt_PIZZA_ACTOR] = INVALID_STREAMER_ID;
	}
	
	if (point == -1)
	{
		PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT] = CreateDynamicCP(2096.279785, -1797.436279, 12.982056, 3.0, 0, 0, playerid, 9999999999.0);
		
		new info[1];
		info[0] = CHECKPOINT_TYPE_PIZZA_FINISH;
		Streamer_SetArrayData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	}
	else
	{
		PLAYER_TEMP[playerid][pt_PIZZA_ACTOR] = CreateDynamicActor(minrand(0, 311), PIZZA_DELIVERY_POINT[point][0], PIZZA_DELIVERY_POINT[point][1], PIZZA_DELIVERY_POINT[point][2], PIZZA_DELIVERY_POINT[point][3], .playerid = playerid);
		
		new Float:pos[3];
		pos[0] = PIZZA_DELIVERY_POINT[point][0] + (1.5 * floatsin(-PIZZA_DELIVERY_POINT[point][3], degrees));
		pos[1] = PIZZA_DELIVERY_POINT[point][1] + (1.5 * floatcos(-PIZZA_DELIVERY_POINT[point][3], degrees));
		pos[2] = PIZZA_DELIVERY_POINT[point][2];
	
		PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT] = CreateDynamicCP(pos[0], pos[1], pos[2], 1.0, 0, 0, playerid, 9999999999.0);
		
		new info[1];
		info[0] = CHECKPOINT_TYPE_PIZZA_DEL;
		Streamer_SetArrayData(STREAMER_TYPE_CP, PLAYER_TEMP[playerid][pt_PIZZA_CHECKPOINT], E_STREAMER_EXTRA_ID, info);
	}
	return 1;
}

randomEx(max, exception)
{
	new rand = random(max);
	while(rand == exception)
	{
		rand = random(max);
	}
	return rand;
}

SetPlayerSkillLevels(playerid) {	
	if (PI[playerid][pi_LEVEL] >= 3) {
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SAWNOFF_SHOTGUN,		200);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL, 				40);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL_SILENCED, 		500);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_DESERT_EAGLE, 		999);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SHOTGUN, 				999);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SPAS12_SHOTGUN, 		999);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_MICRO_UZI, 			50);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_MP5, 					999);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_AK47, 				999);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_M4, 					999);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SNIPERRIFLE, 			999);
	} else {
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SAWNOFF_SHOTGUN, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_PISTOL_SILENCED, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_DESERT_EAGLE, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SHOTGUN, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SPAS12_SHOTGUN, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_MICRO_UZI, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_MP5, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_AK47, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_M4, 0);
		SetPlayerSkillLevel(playerid, WEAPONSKILL_SNIPERRIFLE, 0);
	}
	return 1;
}

DeleteIlegalInv(playerid) {
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) {
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET seed_cannabis = 0, seed_crack = 0, cannabis = 0, crack = 0 WHERE id = %d;", PI[playerid][pi_ID]);
		mysql_tquery(handle_db, QUERY_BUFFER);

		ResetPlayerWeapons(playerid);
	}
	
	PI[playerid][pi_SEED_CANNABIS] = 0;
	PI[playerid][pi_SEED_CRACK] = 0;
	PI[playerid][pi_CANNABIS] = 0;
	PI[playerid][pi_CRACK] = 0;

	DeleteDroppeablePlayerSlots(playerid);
	return 1;
}

SetInjuredPlayerMarkers(playerid) {
	foreach (new i : Player) {
		if (IsPlayerConnected(i)) {
			if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL) {
				if (PI[i][pi_STATE] == ROLEPLAY_STATE_CRACK) {
					SetPlayerMarkerForPlayer(playerid, i, 0x4aba00FF);
				}
			}
		}
	}
	return 1;
}

DisablePlayerInjuredMark(playerid) {
	foreach (new i : Player) {
		if (IsPlayerConnected(i)) {
			if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL) {
				if (i == playerid) continue;
				if (!PLAYER_WORKS[i][WORK_MEDIC][pwork_SET]) continue;
				if (PLAYER_TEMP[i][pt_WORKING_IN] != WORK_MEDIC) continue;

				SetPlayerMarkerForPlayer(i, playerid, PLAYER_COLOR);
			}
		}
	}
	return 1;
}

CMD:curar(playerid, params[]) {
	if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return ShowPlayerMessage(playerid, "No estás depie.");
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK) return ShowPlayerMessage(playerid, "No puedes curar estando herido.");
	if (PI[playerid][pi_CREW] && CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return ShowPlayerMessage(playerid, "No puedes curar mientras tu banda está en combate.");
	if (PLAYER_TEMP[playerid][pt_PERFORMED_ENVIRONMET] < 5) return ShowPlayerMessage(playerid, "Debes rolear entorno para curar.");

	PLAYER_TEMP[playerid][pt_PERFORMED_ENVIRONMET] = 0;
	Dialog_Show(playerid, "OnPlayerStandUpResponse", DIALOG_STYLE_INPUT, "Medico curar", "{F5F5F5}Introduce el {"#PRIMARY_COLOR"}id{F5F5F5} de el {"#GREEN_COLOR"}paciente{f5f5f5}.", "Curar", "xSalir");
	return 1;
}

forward StandUp(medic, playerid);
public StandUp(medic, playerid)
{
	if (PLAYER_WORKS[medic][WORK_MEDIC][pwork_SET] && PLAYER_TEMP[medic][pt_WORKING_IN] == WORK_MEDIC) {
		new work_extra_payment;
		if (work_info[WORK_MEDIC][work_info_EXTRA_PAY] > 0 && work_info[WORK_MEDIC][work_info_EXTRA_PAY_EXP] > 0)
		{
			work_extra_payment = (work_info[WORK_MEDIC][work_info_EXTRA_PAY] * floatround(floatdiv(PLAYER_WORKS[medic][WORK_MEDIC][pwork_LEVEL], work_info[WORK_MEDIC][work_info_EXTRA_PAY_EXP])));
			if (work_info[WORK_MEDIC][work_info_EXTRA_PAY_LIMIT] != 0) if (work_extra_payment > work_info[WORK_MEDIC][work_info_EXTRA_PAY_LIMIT]) work_extra_payment = work_info[WORK_MEDIC][work_info_EXTRA_PAY_LIMIT];
		
			if (PI[medic][pi_VIP]) work_extra_payment += VIP_WORK_EXTRA_PAY;
		}
		
		new money = work_extra_payment;
		if (PI[medic][pi_VIP]) money += 2500 + random(500);
		else money += 2000 + random(200);

		GivePlayerCash(medic, money, true, false);

		new player_money = 1000 + random(500);
		GivePlayerCash(playerid, -player_money, true, true);

		PLAYER_WORKS[medic][WORK_MEDIC][pwork_LEVEL] ++;
		ShowPlayerMessage(medic, "Has salvado la vida de esta persona.");
	}
	
	PI[playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
	if (PI[playerid][pi_VIP]) SetPlayerHealthEx(playerid, 50.0);
	else SetPlayerHealthEx(playerid, 25.0);
	ApplyAnimation(playerid, "CARRY", "crry_prtial", 4.1, 0, 0, 0, 0, 0, true);
	ClearAnimations(playerid);

	new action[145];
	format(action, sizeof action, "ha curado a %s.", PLAYER_TEMP[playerid][pt_NAME]);
	Auto_SendPlayerAction(medic, action);
	return 1;
}

CMD:banda(playerid, params[])
{
	if (!PI[playerid][pi_CREW])
	{
		if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "Los policias no pueden tener bandas.");
		
		new index = GetAvaibleCrewIndex();
		if (index == -1)
		{
			SendPlayerClientMessage(playerid, "No perteneces a ninguna banda y no se puede crear una porque no hay espacio disponible, el límite de bandas es %d.", MAX_CREWS);
			return 1;
		}
		
		ShowDialog(playerid, DIALOG_CREATE_CREW);
		return 1;
	}
	
	ShowDialog(playerid, DIALOG_CREW_MENU);
	return 1;
}

CMD:abandonar(playerid, params[])
{
	if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No perteneces a ninguna banda.");
	if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_LEAVE_TERRITORY]) return SendPlayerClientMessage(playerid, "No tienes permiso para abandonar territorios.");
	if (PLAYER_TEMP[playerid][pt_LAST_TERRITORY] == INVALID_STREAMER_ID) return SendPlayerClientMessage(playerid, "No estás en un territorio de tu banda.");
	if (!IsPlayerInDynamicArea(playerid, TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_AREA])) return SendPlayerClientMessage(playerid, "No estás en un territorio de tu banda.");
	if (TERRITORIES[ PLAYER_TEMP[playerid][pt_LAST_TERRITORY] ][territory_CREW_ID] != PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No estás en un territorio de tu banda.");			
	if (CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendPlayerClientMessage(playerid, "No puedes abandonar territorios mientras tu banda está en combate.");
	
	PLAYER_TEMP[playerid][pt_PLAYER_TERRITORY_PRO] = PLAYER_TEMP[playerid][pt_LAST_TERRITORY];
	ShowDialog(playerid, DIALOG_CREW_LEAVE_TERRITORY);
	return 1;
}

CMD:invitar(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	
	if (!PI[playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "No eres miembro de ninguna banda.");
	if (!CREW_RANK_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][ PI[playerid][pi_CREW_RANK] ][crew_rank_PERMISSION][CREW_RANK_INVITE]) return SendPlayerClientMessage(playerid, "No tienes permiso para invitar personas a la banda.");
	if (CREW_INFO[ PLAYER_TEMP[playerid][pt_CREW_INDEX] ][crew_FIGHTING]) return SendPlayerClientMessage(playerid, "No puedes invitar a gente a la banda cuando la banda está en combate.");
	
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ ~w~/invitar [PlayerID/Nombre]");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "El jugador está desconectado.");
	if (to_playerid == playerid) return SendPlayerClientMessage(playerid, "Eres tú.");
	
	new pc_members = CountCrewPCPlayers(PI[playerid][pi_CREW]);
	if (pc_members >= MAX_CREW_PC_MEMBERS && PI[to_playerid][pi_PLAYER_PLATFORM] == 0)
	{
		return SendPlayerClientMessage(playerid, "Actualmente la banda cuenta con %d miembros de pc, el límite es de %d miembros de pc.", pc_members, MAX_CREW_PC_MEMBERS);
	}

	new members = CountCrewPlayers(PI[playerid][pi_CREW]);
	if (members >= MAX_CREW_MEMBERS)
	{
		return SendPlayerClientMessage(playerid, "Actualmente la banda cuenta con %d miembros, el límite es de %d miembros.", members, MAX_CREW_MEMBERS);
	}
	
	new Float:pos[3]; GetPlayerPos(to_playerid, pos[0], pos[1], pos[2]);
	if (!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "Este jugador no está cerca tuya.");
	if (PLAYER_WORKS[to_playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "Esta persona es policia y no puede tener banda.");
	if (PI[to_playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "Esta persona pertenece a otra banda.");
	if (PLAYER_TEMP[to_playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "No puedes invitar a este jugador ahora.");
	
	if (gettime() < PLAYER_TEMP[ to_playerid ][pt_LAST_GOT_CREW] + 100)
	{
		new time = 100 - (gettime() - PLAYER_TEMP[to_playerid][pt_LAST_GOT_CREW]);
		SendPlayerClientMessage(playerid, "La otra persona debe esperar %s minutos para volver a ser invitada.", TimeConvert(time));
		return 1;
	}
	
	PLAYER_TEMP[playerid][pt_CREW_INVITE_PID] = to_playerid;
	PLAYER_TEMP[playerid][pt_CREW_INVITE_AID] = PI[to_playerid][pi_ID];
	SendPlayerClientMessage(playerid, "Quieres invitar a %s a la banda, elige el rango que le ofreces.", PLAYER_TEMP[to_playerid][pt_NAME]);
	ShowDialog(playerid, DIALOG_CREW_INVITE_RANK);
	return 1;
}

CMD:reclutar(playerid, params[])
{
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "~r~Ahora no puedes usar este comando.");
	
	if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET])
	{
		if (PLAYER_WORKS[playerid][WORK_POLICE][pwork_LEVEL] < 11) return SendPlayerClientMessage(playerid, "Debes ser al menos rango ~r~%s~w~ para reclutar gente.", POLICE_RANKS[11]);
		
		new to_playerid;
		if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /reclutar [PlayerID/Nombre]");
		if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "~r~El jugador está desconectado.");
		if (to_playerid == playerid) return SendPlayerClientMessage(playerid, "~r~No puedes invitarte.");
		
		new Float:pos[3]; GetPlayerPos(to_playerid, pos[0], pos[1], pos[2]);
		if (!IsPlayerInRangeOfPoint(playerid, 2.0, pos[0], pos[1], pos[2])) return SendPlayerClientMessage(playerid, "~r~Este jugador no está cerca tuya.");
		if (PI[to_playerid][pi_CREW]) return SendPlayerClientMessage(playerid, "{"#RED_COLOR"}Esta persona pertenece a una banda y no puede ser policia.");
		if (PLAYER_WORKS[to_playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "~r~Éste usuario es miembro.");
		if (PLAYER_TEMP[to_playerid][pt_GAME_STATE] != GAME_STATE_NORMAL) return SendPlayerClientMessage(playerid, "~r~No puedes reclutar a este jugador ahora.");
		
		new player_jobs = CountPlayerJobs(to_playerid);
		if (PI[to_playerid][pi_VIP])
		{
			if (player_jobs >= MAX_SU_WORKS)
			{
				SendPlayerClientMessage(playerid, "~r~Esta persona ya tiene trabajo y no puede tener más.");
				return 1;
			}
		}
		else
		{
			if (player_jobs >= MAX_NU_WORKS)
			{
				SendPlayerClientMessage(playerid, "~r~Esta persona ya tiene trabajo y no puede tener más.");
				return 1;
			}
		}
		
		if (PLAYER_TEMP[to_playerid][pt_WORKING_IN]) return SendPlayerClientMessage(playerid, "~r~Esta persona no puede unirse porque esta de servicio en su trabajo.");
		
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO pworks (id_player, id_work, `set`, level) VALUES(%d, %d, 1, 1) ON DUPLICATE KEY UPDATE `set` = 1, level = 1;", PI[to_playerid][pi_ID], WORK_POLICE);
		mysql_tquery(handle_db, QUERY_BUFFER);

		PLAYER_WORKS[to_playerid][WORK_POLICE][pwork_SET] = true;
		PLAYER_WORKS[to_playerid][WORK_POLICE][pwork_LEVEL] = 1;
		
		SendPlayerClientMessage(playerid, "%s ahora es policia.", PLAYER_TEMP[to_playerid][pt_NAME]);
		SendPlayerClientMessage(to_playerid, "Ahora eres policia.");
	}
	else SendPlayerClientMessage(playerid, "~r~Debes ser miembro de la policia para usar este comando.");
	return 1;
}



GetAvaibleCrewIndex()
{
	for (new i = 0; i != MAX_CREWS; i ++)
	{
		if (!CREW_INFO[i][crew_VALID]) return i;
	}
	return -1;
}

stock MySQL_UpdateInt(playerid, data[], value) {
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET %s = %d WHERE id = %d;", data, value, PI[playerid][pi_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	return 1;
}

stock MySQL_UpdateVar(playerid, data[], value[]) {
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET %s = '%e' WHERE id = %d;", data, value, PI[playerid][pi_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	return 1;
}

stock MySQL_UpdateFloat(playerid, data[], Float:value) {
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET %s = %f WHERE id = %d;", data, value, PI[playerid][pi_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	return 1;
}

NewCrewRegister(index, playerid)
{
	if (!CREW_INFO[index][crew_VALID]) return 0;
	
	inline OnCrewInserted()
	{
		CREW_INFO[index][crew_ID] = cache_insert_id();
		if (CREW_INFO[index][crew_ID])
		{
			PI[playerid][pi_CREW] = CREW_INFO[index][crew_ID];
			PI[playerid][pi_CREW_RANK] = 0;
			PLAYER_TEMP[playerid][pt_CREW_INDEX] = index;
			mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET crew = %d, crew_rank = %d WHERE id = %d;", PI[playerid][pi_CREW], PI[playerid][pi_CREW_RANK], PI[playerid][pi_ID]);
			mysql_tquery(handle_db, QUERY_BUFFER);
			RegisterNewCrewRank(index, 0);
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "INSERT INTO crews (name, color) VALUES ('%e', %d);", CREW_INFO[index][crew_NAME], CREW_INFO[index][crew_COLOR]);
	MySQL_TQueryInline(handle_db, using inline OnCrewInserted, QUERY_BUFFER);
	return 1;
}

SendMessageToCrewMembers(crew_id, const message[])
{
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i) && PLAYER_TEMP[i][pt_USER_LOGGED])
		{
			if (PI[i][pi_CREW] == crew_id)
			{
				SendPlayerClientMessage(i, message);
			}
		}
	}
	return 1;
}

RegisterNewCrewRank(index, rank)
{
	inline OnCrewRankInserted()
	{
		CREW_RANK_INFO[index][rank][crew_rank_ID] = cache_insert_id();
	}
	mysql_format
	(
		handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, 
		"\
			INSERT INTO crew_ranks (id_crew, rank_pos, rank_name, permission0, permission1, permission2, permission3, permission4, permission5, permission6, permission7, permission8, permission9)\
			VALUES (%d, %d, '%e', %d, %d, %d, %d, %d, %d, %d, %d, %d, %d);\
		",
			CREW_INFO[index][crew_ID], rank, CREW_RANK_INFO[index][rank][crew_rank_NAME], CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][0], CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][1],
			CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][2], CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][3], CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][4],
			CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][5], CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][6], CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][7],
			CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][8], CREW_RANK_INFO[index][rank][crew_rank_PERMISSION][9]
	);
	MySQL_TQueryInline(handle_db, using inline OnCrewRankInserted, QUERY_BUFFER);
	return 1;
}

SetPlayerGangZones(playerid)
{
	for (new i = 0; i != MAX_TERRITORIES; i ++)
	{
		if (!TERRITORIES[i][territory_VALID]) continue;
		
		if (TERRITORIES[i][territory_WAR])
		{
			new flash_color, r, g, b, a;
			HexToRGBA(CREW_INFO[ TERRITORIES[i][territory_ATTACKER_CREW_INDEX] ][crew_COLOR], r, g, b, a);
			flash_color = RGBAToHex(r, g, b, 135);
			
			GangZoneFlashForPlayer(playerid, TERRITORIES[i][territory_GANG_ZONE], flash_color);
		}
		else GangZoneShowForPlayer(playerid, TERRITORIES[i][territory_GANG_ZONE], TERRITORIES[i][territory_COLOR]);
	}
	return 1;
}

HidePlayerGangZones(playerid)
{
	for (new i = 0; i != MAX_TERRITORIES; i ++)
	{
		if (!TERRITORIES[i][territory_VALID]) continue;
		
		GangZoneHideForPlayer(playerid, TERRITORIES[i][territory_GANG_ZONE]);
	}
	return 1;
}

stock HexToRGBA(colour, &r, &g, &b, &a) //By Betamaster
{
    r = (colour >> 24) & 0xFF;
    g = (colour >> 16) & 0xFF;
    b = (colour >> 8) & 0xFF;
    a = colour & 0xFF;
}

stock RGBAToHex(r, g, b, a) //By Betamaster
{
    return (r<<24 | g<<16 | b<<8 | a);
}

stock RGBAToARGB(col)
{
	return ((((col) << 24) & 0xFF000000) | (((col) >>> 8) & 0xFFFFFF));
}

stock ARGBToRGBA(col)
{
	return ((((col) << 8) & 0xFFFFFF00) | (((col) >>> 24) & 0xFF));
}

UpdateGangZoneColor(index)
{
	if (TERRITORIES[index][territory_WAR])
	{
		new flash_color, r, g, b, a;
		HexToRGBA(CREW_INFO[ TERRITORIES[index][territory_ATTACKER_CREW_INDEX] ][crew_COLOR], r, g, b, a);
		flash_color = RGBAToHex(r, g, b, 135);
		
		foreach (new i : Player)
		{
			if (IsPlayerConnected(i))
			{
				if (PI[i][pi_CREW])
				{
					GangZoneFlashForPlayer(i, TERRITORIES[index][territory_GANG_ZONE], flash_color);
				}
			}
		}
	}
	else
	{
		foreach (new i : Player)
		{
			if (IsPlayerConnected(i))
			{
				if (PI[i][pi_CREW])
				{
					GangZoneShowForPlayer(i, TERRITORIES[index][territory_GANG_ZONE], TERRITORIES[index][territory_COLOR]);
				}
			}
		}
	}
	return 1;
}

StartTerritoryAttack(crew_index, territory_index, time)
{
	CREW_INFO[crew_index][crew_FIGHTING] = true;
	CREW_INFO[crew_index][crew_LAST_ATTACK] = gettime();
	TERRITORIES[territory_index][territory_WAR] = true;
	TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] = crew_index;
	TERRITORIES[territory_index][territory_WAR_TIME_LEFT] = time;
	TERRITORIES[territory_index][territory_LAST_ATTACK] = gettime();
	UpdateGangZoneColor(territory_index);
	
	new message[145];
	format(message, sizeof message, "Conquista:_%s", TimeConvert(TERRITORIES[territory_index][territory_WAR_TIME_LEFT]));
	TextDrawSetString(TERRITORIES[territory_index][territory_TEXTDRAW][1], message);
	
	new r, g, b, a;
	HexToRGBA(CREW_INFO[crew_index][crew_COLOR], r, g, b, a);

	TextDrawColor(TERRITORIES[territory_index][territory_TEXTDRAW][0], RGBAToHex(r, g, b, 155));
	TextDrawBackgroundColor(TERRITORIES[territory_index][territory_TEXTDRAW][0], RGBAToHex(r, g, b, 155));

	KillTimer(TERRITORIES[territory_index][territory_TIMER]);
	TERRITORIES[territory_index][territory_TIMER] = SetTimerEx("UpdateTerritoryAttack", 1000, false, "i", territory_index);
	
	new territory_zone[32];
	GetAreaZone(
		TERRITORIES[territory_index][territory_MIN_X],
		TERRITORIES[territory_index][territory_MIN_Y],
		territory_zone
	);

	if (TERRITORIES[territory_index][territory_OCCUPIED])
	{
		CREW_INFO[ TERRITORIES[territory_index][territory_CREW_INDEX] ][crew_FIGHTING] = true;
		format(message, sizeof message, "{%06x}[BANDAS] {F5F5F5}La banda '%s' está atacando un territorio de la banda '%s' en %s.", CREW_INFO[crew_index][crew_COLOR] >>> 8, CREW_INFO[crew_index][crew_NAME], CREW_INFO[ TERRITORIES[territory_index][territory_CREW_INDEX] ][crew_NAME], territory_zone);
	}
	else
	{
		format(message, sizeof message, "{%06x}[BANDAS] {F5F5F5}La banda '%s' está atacando un territorio en %s.", CREW_INFO[crew_index][crew_COLOR] >>> 8, CREW_INFO[crew_index][crew_NAME], territory_zone);
	}

	new message_police[145];
	format(message_police, sizeof message_police, "{"#POLICE_COLOUR"}[Central policia] {F5F5F5}La banda '%s' está atacando un territorio en %s.", CREW_INFO[crew_index][crew_NAME], territory_zone);
	
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if (PI[i][pi_CREW])
			{
				SendPlayerClientMessage(i, message);
				if (IsPlayerInDynamicArea(i, TERRITORIES[territory_index][territory_AREA]))
				{	
					if (PI[i][pi_WANTED_LEVEL] < 2) SetPlayerWantedLevelEx(i, 2);

					HexToRGBA(CREW_INFO[ PLAYER_TEMP[i][pt_CREW_INDEX] ][crew_COLOR], r, g, b, a);
					SetPlayerColorEx(i, RGBAToHex(r, g, b, 0));

					TextDrawShowForPlayer(i, TERRITORIES[territory_index][territory_TEXTDRAW][1]);
					TextDrawShowForPlayer(i, TERRITORIES[territory_index][territory_TEXTDRAW][0]);
				}
			}
			
			if (PLAYER_WORKS[i][WORK_POLICE][pwork_SET])
			{
				if (PLAYER_TEMP[i][pt_WORKING_IN] == WORK_POLICE)
				{
					SendPlayerClientMessage(i, message_police);
				}
			}
		}
	}
	return 1;
}

forward UpdateTerritoryAttack(territory_index);
public UpdateTerritoryAttack(territory_index) {
	if (!TERRITORIES[territory_index][territory_VALID]) return 1;
	if (!TERRITORIES[territory_index][territory_WAR]) return 1;
	
	if (TERRITORIES[territory_index][territory_WAR_TIME_LEFT] <= 0) {
		new old_crew = TERRITORIES[territory_index][territory_CREW_ID];
		
		CREW_INFO[ TERRITORIES[territory_index][territory_CREW_INDEX] ][crew_FIGHTING] = false;
		TERRITORIES[territory_index][territory_CREW_ID] = CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_ID];
		TERRITORIES[territory_index][territory_CREW_INDEX] = TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX];
		
		new r, g, b, a;
		HexToRGBA(CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_COLOR], r, g, b, a);
		TERRITORIES[territory_index][territory_COLOR] = RGBAToHex(r, g, b, 135);
		
		new message[145];
		format(message, sizeof message, "{%06x}[BANDAS] {F5F5F5}La banda '%s' ha conquistado un nuevo territorio.", CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_COLOR] >>> 8, CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_NAME]);
	
		new label_str[256];
		if (TERRITORIES[territory_index][territory_OCCUPIED]) {
			for (new i = 0; i != MAX_PROPERTIES; i ++) {
				if (!PROPERTY_INFO[i][property_VALID]) continue;
				if (!PROPERTY_INFO[i][property_CREW]) continue;
				if (PROPERTY_INFO[i][property_CREW_ID] != old_crew) continue;
				
				if (IsPointInDynamicArea(TERRITORIES[territory_index][territory_AREA], PROPERTY_INFO[i][property_EXT_X], PROPERTY_INFO[i][property_EXT_Y], PROPERTY_INFO[i][property_EXT_Z])) {
					PROPERTY_INFO[i][property_CREW_ID] = TERRITORIES[territory_index][territory_CREW_ID];
					
					format
					(
						label_str, 
						sizeof label_str, 
						"\
							Propiedad {"#PRIMARY_COLOR"}#%d\n\n\
							{F5F5F5}Banda: {"#PRIMARY_COLOR"}%s\n\
							{F5F5F5}Presiona {"#PRIMARY_COLOR"}Y {F5F5F5}para entrar.\
						", PROPERTY_INFO[i][property_ID], CREW_INFO[ TERRITORIES[territory_index][territory_CREW_INDEX] ][crew_NAME]
					);
					
					UpdateDynamic3DTextLabelText(PROPERTY_INFO[i][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
				}
			}
		}
		
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE territories SET id_crew = %d WHERE id = %d;", CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_ID], TERRITORIES[territory_index][territory_ID]);
		mysql_tquery(handle_db, QUERY_BUFFER);
		
		new prize = 1000 + random(500);
		foreach (new i : Player) {
			if (IsPlayerConnected(i)) {
				if (PI[i][pi_CREW]) {
					SendPlayerClientMessage(i, message);

					if (IsPlayerInDynamicArea(i, TERRITORIES[territory_index][territory_AREA])) {
						if (PI[i][pi_CREW] == TERRITORIES[territory_index][territory_CREW_ID]) {
							new pocket_slot = GetPlayerValidInventoryPocket(i);
							if (pocket_slot != -1) {
								j_PocketInfo[i][pocket_slot][pValid] = true;
								j_PocketInfo[i][pocket_slot][pType] = INVENTORY_TYPE_BLACK_CASH;
								j_PocketInfo[i][pocket_slot][pExtra] = prize;
								InsertPlayerInventorySlot(i, pocket_slot);

								SendPlayerClientMessage(i, "{%06x}{f5f5f5}Has ganado %d{666666}B${f5f5f5} por conquistar este territorio.", (CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_COLOR] >>> 8), prize);
							}
						}
						SetPlayerNormalColor(i);
						
						TextDrawHideForPlayer(i, TERRITORIES[territory_index][territory_TEXTDRAW][1]);
						TextDrawHideForPlayer(i, TERRITORIES[territory_index][territory_TEXTDRAW][0]);
					}
				}
			}
		}

		CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_LAST_ATTACK] = gettime();
		CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_FIGHTING] = false;
		TERRITORIES[territory_index][territory_WAR] = false;
		TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] = 0;
		TERRITORIES[territory_index][territory_WAR_TIME_LEFT] = 0;
		TERRITORIES[territory_index][territory_LAST_ATTACK] = gettime();
		KillTimer(TERRITORIES[territory_index][territory_TIMER]);
		UpdateGangZoneColor(territory_index);
		TERRITORIES[territory_index][territory_OCCUPIED] = true;

		CallLocalFunction("OnCrewCaptureTerritory", "iiii", TERRITORIES[territory_index][territory_CREW_ID], TERRITORIES[territory_index][territory_CREW_INDEX], TERRITORIES[territory_index][territory_ID], territory_index);
		return 1;
	}
	
	
	TERRITORIES[territory_index][territory_WAR_TIME_LEFT] --;
	new message[145];
	format(message, sizeof message, "Conquista:_%s", TimeConvert(TERRITORIES[territory_index][territory_WAR_TIME_LEFT]));
	TextDrawSetString(TERRITORIES[territory_index][territory_TEXTDRAW][1], message);
	
	new attackers_in_area = CountCrewAndroidPlayersInTerrit(TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX], territory_index);
	if (attackers_in_area <= 0)
	{
		format(message, sizeof message, "{%06x}[BANDAS] {F5F5F5}La banda '%s' no ha podido conquistar el territorio que estaba atacando.", CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_COLOR] >>> 8, CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_NAME]);

		CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_LAST_ATTACK] = gettime();
		CREW_INFO[ TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] ][crew_FIGHTING] = false;
		CREW_INFO[ TERRITORIES[territory_index][territory_CREW_INDEX] ][crew_FIGHTING] = false;
		TERRITORIES[territory_index][territory_WAR] = false;
		TERRITORIES[territory_index][territory_ATTACKER_CREW_INDEX] = 0;
		TERRITORIES[territory_index][territory_WAR_TIME_LEFT] = 0;
		TERRITORIES[territory_index][territory_LAST_ATTACK] = gettime();
		KillTimer(TERRITORIES[territory_index][territory_TIMER]);
		UpdateGangZoneColor(territory_index);

		foreach (new i : Player)
		{
			if (IsPlayerConnected(i))
			{
				if (PI[i][pi_CREW])
				{
					SendPlayerClientMessage(i, message);
					if (IsPlayerInDynamicArea(i, TERRITORIES[territory_index][territory_AREA]))
					{
						SetPlayerNormalColor(i);
						
						TextDrawHideForPlayer(i, TERRITORIES[territory_index][territory_TEXTDRAW][1]);
						TextDrawHideForPlayer(i, TERRITORIES[territory_index][territory_TEXTDRAW][0]);
					}
				}
			}
		}
		return 1;
	}
	
	KillTimer(TERRITORIES[territory_index][territory_TIMER]);
	TERRITORIES[territory_index][territory_TIMER] = SetTimerEx("UpdateTerritoryAttack", 1000, false, "i", territory_index);
	return 1;
}

/*CountCrewPlayersInTerritory(crew_index, territory_index)
{
	new count;
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if (PI[i][pi_CREW])
			{
				if (PLAYER_TEMP[i][pt_CREW_INDEX] == crew_index)
				{
					if (PI[i][pi_STATE] == ROLEPLAY_STATE_NORMAL && PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL)
					{
						if (IsPlayerInDynamicArea(i, TERRITORIES[territory_index][territory_AREA]))
						{
							count ++;
						}
					}
				}
			}
		}
	}
	return count;
}*/

CountCrewAndroidPlayersInTerrit(crew_index, territory_index)
{
	new count;
	foreach (new i : Player) {
		if (IsPlayerConnected(i)) {
			if (PI[i][pi_PLAYER_PLATFORM] != 1) continue;
			if (PI[i][pi_PASSIVE_MODE]) continue;
			if (PI[i][pi_STATE] == ROLEPLAY_STATE_CRACK) continue;

			if (PI[i][pi_CREW]) {
				if (PLAYER_TEMP[i][pt_CREW_INDEX] == crew_index) {
					if (PI[i][pi_STATE] == ROLEPLAY_STATE_NORMAL && PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL) {
						if (IsPlayerInDynamicArea(i, TERRITORIES[territory_index][territory_AREA])) {
							count ++;
						}
					}
				}
			}
		}
	}
	return count;
}

SetPlayerColorEx(playerid, color)
{
	PLAYER_TEMP[playerid][pt_PLAYER_COLOR] = color;
	return SetPlayerColor(playerid, color);
}
	
LoadServerInfo()
{
	new File:AC = fopen("SERVER/AC.txt", io_read), pi_str[128], pi_num;
	if (AC)
	{
		while(fread(AC, pi_str))
		{
			if (pi_num >= sizeof(ac_Info)) break;
			sscanf(pi_str, "p<,>bbdd", ac_Info[pi_num][ac_Enabled], ac_Info[pi_num][ac_Kick], ac_Info[pi_num][ac_Detections], ac_Info[pi_num][ac_Interval]);
			pi_num ++;
		}
		fclose(AC);
	}
	return 1;
}

WriteAnticheatRules()
{
	new File:AC = fopen("SERVER/AC.txt", io_write), pi_str[128];
	if (AC)
	{
		for (new i = 0; i != sizeof(ac_Info); i ++)
		{
			format(pi_str, sizeof pi_str, "%d,%d,%d,%d\r\n", ac_Info[i][ac_Enabled], ac_Info[i][ac_Kick], ac_Info[i][ac_Detections], ac_Info[i][ac_Interval]);
			fwrite(AC, pi_str);
		}
		fclose(AC);
	}
	return 1;
}

ReLockPlayerVehicles(playerid, bool:remove = false)
{
	if (PI[playerid][pi_ID] == 0) return 0;
	if (PI[playerid][pi_VIP]) return 0;
	
	inline OnQueryLoadedInline()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			for (new i = 0; i != rows; i ++)
			{
				if (i >= MAX_SU_VEHICLES)
				{
					printf("---> MAX_SU_VEHICLES superado al cargar de base de datos.");
					break;
				}

				new veh_did;
				cache_get_value_index_int(i, 0, veh_did);

				//
				new vehicle_id = GetPlayerVehicleIdFromDbId(veh_did);
				if (vehicle_id != INVALID_VEHICLE_ID)
				{
					PLAYER_VEHICLES[vehicle_id][player_vehicle_ACCESSIBLE] = true;
					if (i >= MAX_NU_VEHICLES)
					{
						if (remove)
						{
							if (GLOBAL_VEHICLES[vehicle_id][gb_vehicle_OCCUPIED])
							{
								SetVehicleVelocity(vehicle_id, 0.0, 0.0, 0.0);
								if (GLOBAL_VEHICLES[vehicle_id][gb_vehicle_DRIVER] != INVALID_PLAYER_ID) RemovePlayerFromVehicle(playerid);
							}
						}

						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PARAMS_ENGINE] = 0;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PARAMS_LIGHTS] = 0;
						GLOBAL_VEHICLES[vehicle_id][gb_vehicle_PARAMS_DOORS] = 1;
						PLAYER_VEHICLES[vehicle_id][player_vehicle_ACCESSIBLE] = false;
						UpdateVehicleParams(vehicle_id);
					}
				}
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM pvehicles WHERE id_player = %d ORDER BY id DESC LIMIT %d;", PI[playerid][pi_ID], MAX_SU_VEHICLES);
	MySQL_TQueryInline(handle_db, using inline OnQueryLoadedInline, QUERY_BUFFER);
	return 1;
}

UnlockPlayerVehicles(playerid)
{
	new total;
	for (new i = 0; i != MAX_VEHICLES; i ++)
	{
		if (!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
		if (!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
		
		if (PLAYER_VEHICLES[i][player_vehicle_ID] == PI[playerid][pi_ID])
		{
			if (total >= MAX_SU_VEHICLES) break;
			
			PLAYER_VEHICLES[i][player_vehicle_ACCESSIBLE] = true;
		}
	}
	return total;
}

GetPlayerVehicleIdFromDbId(veh_did)
{
	for (new i = 0; i != MAX_VEHICLES; i ++)
	{
		if (!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
		if (!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
		
		if (PLAYER_VEHICLES[i][player_vehicle_ID] == veh_did) return i;
	}
	return INVALID_VEHICLE_ID;
}

CMD:vip(playerid, params[])
{
	if (PI[playerid][pi_VIP]) ShowDialog(playerid, DIALOG_SU);
	else ShowDialog(playerid, DIALOG_SU_BUY);
	return 1;
}

CMD:setcoins(playerid, params[])
{
	new to_playerid, coins, logMessage[2000];
	if (sscanf(params, "ud", to_playerid, coins)) return ShowPlayerMessage(playerid, "~>~ /setcoins <player_id> <coins>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	
	new old_coins = PI[to_playerid][pi_COINS];
	PI[to_playerid][pi_COINS] = coins;

	format(logMessage, sizeof(logMessage), "```yaml\n%s [db_id: %d] se ha actualizado al cantidad de monedas.\n\nMonedas Actuales: %d\nMonedas antes de el cambio: %d\nCantidad Designada: %d\nNegative: %s\nFuncion: '%s - /setcoins %d %d'\n```", PI[to_playerid][pi_NAME], PI[to_playerid][pi_ID], PI[to_playerid][pi_COINS], old_coins, coins, (coins < 0 ? "true" : "false"), PI[to_playerid][pi_NAME], to_playerid, coins);
	SendDiscordMessage(""#DISCORD_COINS_LOG"", logMessage);

	if (coins > 0) SendPlayerClientMessage(to_playerid, "{f5f5f5}Ahora tienes {"#YELLOW_COLOR"}%d "SERVER_COIN"s{f5f5f5}.", coins);
	PlayerPlaySoundEx(to_playerid, 1058, 0.0, 0.0, 0.0);
	
	SendCmdLogToAdmins(playerid, "setcoins", params);
	return 1;
}

CMD:givecoins(playerid, params[])
{
	new to_playerid, coins, logMessage[2000];
	if (sscanf(params, "ud", to_playerid, coins)) return ShowPlayerMessage(playerid, "~>~ /givecoins <player_id> <coins>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	
	format(logMessage, sizeof(logMessage), "%s - /givecoins %d %d", PI[playerid][pi_NAME], to_playerid, coins);
	GivePlayerCoins(to_playerid, coins, true, coins < 0 ? true : false, logMessage);

	if (coins > 0) SendPlayerClientMessage(to_playerid, "{f5f5f5}Has comprado {"#YELLOW_COLOR"}%d "SERVER_COIN"{f5f5f5}.", coins);
	PlayerPlaySoundEx(to_playerid, 1058, 0.0, 0.0, 0.0);
	
	SendCmdLogToAdmins(playerid, "givecoins", params);
	return 1;
}

CMD:setvip(playerid, params[])
{
	new to_playerid, bool:set, days;
	if (sscanf(params, "ubd", to_playerid, set, days)) return ShowPlayerMessage(playerid, "~>~ /setvip <player_id> <set 1 : 0> <dias>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");

	SetPlayerVip(to_playerid, set, 0, days);
	
	SendCmdLogToAdmins(playerid, "setvip", params);
	return 1;
}

CheckPlayerSuperUser(playerid)
{
	if (PI[playerid][pi_VIP])
	{
		inline OnInfoQueryLoad()
		{
			new rows;
			if (cache_get_row_count(rows))
			{
				if (rows)
				{
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET vip = 0, vip_expire_date = '0000-00-00 00:00:00' WHERE id = %d;", PI[playerid][pi_ID]);
					mysql_tquery(handle_db, QUERY_BUFFER);

					PI[playerid][pi_VIP] = false;
					PI[playerid][pi_VIP_EXPIRE_DATE][0] = EOS;
					SendPlayerClientMessage(playerid, "¡Tu VIP ha expirado! Usa /vip para comprar de nuevo.");
					ReLockPlayerVehicles(playerid, true);
				}
				PLAYER_TEMP[playerid][pt_LAST_SU_CHECK] = gettime();
			}
		}
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE id = %d AND NOW() >= vip_expire_date;", PI[playerid][pi_ID]);
		MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
	}
	return 1;
}

CheckPlayerJail(playerid)
{
	if (PI[playerid][pi_WANTED_LEVEL] > 0)
	{
		inline OnInfoQueryLoad()
		{
			new rows;
			if (cache_get_row_count(rows))
			{
				if (rows)
				{
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET wanted_jail_timer = '0000-00-00 00:00:00' WHERE id = %d;", PI[playerid][pi_ID]);
					mysql_tquery(handle_db, QUERY_BUFFER);

					PI[playerid][pi_WANTED_JAIL_TIMER][0] = EOS;
					PI[playerid][pi_POLICE_JAIL_ID] = 0;
					JailPlayer(playerid);
				}
			}
		}
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE id = %d AND NOW() >= wanted_jail_timer;", PI[playerid][pi_ID]);
		MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
	}
	return 1;
}

CMD:darskin(playerid, params[])
{
    new to_playerid, skin;
    if (sscanf(params, "ud", to_playerid, skin)) return ShowPlayerMessage(playerid, "~>~ /setskin <player_id> <skin>");
    if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado");
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");

	PI[to_playerid][pi_SKIN] = skin;
    SetPlayerSkin(to_playerid, PI[to_playerid][pi_SKIN]);
	
	SendPlayerClientMessage(playerid, "Skin '%s (%d)' cambiado a '%d'.", PI[to_playerid][pi_NAME], to_playerid, skin);
    return 1;
}
alias:darskin("setskin");

CMD:setfstyle(playerid, params[])
{
    new to_playerid, style;
    if (sscanf(params, "ud", to_playerid, style)) return ShowPlayerMessage(playerid, "~>~ /setfstyle <player_id> <style>");
    if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado");
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");

	PI[to_playerid][pi_FIGHT_STYLE] = style;
    SetPlayerFightingStyle(to_playerid, PI[to_playerid][pi_FIGHT_STYLE]);
	
	SendPlayerClientMessage(playerid, "FStyle '%s (%d)' cambiado a '%d'.", PI[to_playerid][pi_NAME], to_playerid, style);
    return 1;
}

CMD:ogive(playerid, params[])
{
    new to_playerid, type, extra;
    if (sscanf(params, "udd", to_playerid, type, extra)) return ShowPlayerMessage(playerid, "~>~ /ogive <player_id> <id> <extra>");
    if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado");
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	
	if (type <= 0 || type > sizeof(i_ObjectData)) return SendPlayerClientMessage(playerid, "LA ID NO ES VALIDA.");

	new pocket_slot = GetPlayerValidInventoryPocket(to_playerid);
	if (pocket_slot == -1) return SendPlayerClientMessage(playerid, "EL JUGADOR NO TIENE ESPACIO.");

	j_PocketInfo[to_playerid][pocket_slot][pValid] = true;
	j_PocketInfo[to_playerid][pocket_slot][pType] = type;
	j_PocketInfo[to_playerid][pocket_slot][pExtra] = extra;
	InsertPlayerInventorySlot(to_playerid, pocket_slot);

	ShowPlayerMessage(to_playerid, "%s", GetObjectInfoName(j_PocketInfo[to_playerid][pocket_slot][pType]));

	SendCmdLogToAdmins(playerid, "ogive", params);
	return 1;
}

CMD:olist(playerid, params[]) {
	new dialog[2048], line_str[255];

	if(!sscanf(params, "d", params[0])) {
		if (params[0] == 2) {
			for (new i = 25; i < sizeof(i_ObjectData); i ++) {
				format(line_str, sizeof line_str, "%d - %s [%d][%d]\n", i, i_ObjectData[i][i_Name], i_ObjectData[i][i_Extra], i_ObjectData[i][i_Data_Extra]);
				strcat(dialog, line_str);
			}

			ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_TABLIST, "Lista Objetos, Pag. 2", dialog, "OK", "");
			return 1;
		}
	}

	for (new i = 1; i < sizeof(i_ObjectData); i ++) {
		format(line_str, sizeof line_str, "%d - %s [%d][%d]\n", i, i_ObjectData[i][i_Name], i_ObjectData[i][i_Extra], i_ObjectData[i][i_Data_Extra]);
		strcat(dialog, line_str);

		if (i >= 25) {
			strcat(dialog, "{cccccc}Siguiente pagina: /olist 2.");
			break;
		}
	}

	ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_TABLIST, "Lista Objetos", dialog, "OK", "");
	return 1;
}

CMD:ls(playerid, params[])
{
    new to_playerid;
    if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /ls <player_id>");
    if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado");
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");

	PI[to_playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
	PI[to_playerid][pi_LOCAL_INTERIOR] = 0;
	PLAYER_TEMP[to_playerid][pt_INTERIOR_INDEX] = -1;
	PI[to_playerid][pi_INTERIOR] = 0;
	PI[to_playerid][pi_POLICE_JAIL_TIME] = 0;
    SetPlayerPosEx(to_playerid, 1554.0074, -1675.6185, 16.1953, 89.5214, 0, 0, false, true);
    //SetPlayerCityWeatherr(to_playerid);
	ShowPlayerMessage(playerid, "Jugador '%s (%d)' fue llevado a LS.", PI[to_playerid][pi_NAME], to_playerid);

	SendCmdLogToAdmins(playerid, "ls", params);
    return 1;
}

CMD:lsdb(playerid, params[])
{
	new to_account;
	if (sscanf(params, "d", to_account)) return ShowPlayerMessage(playerid, "~>~ /lsdb <DB-ID>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			if (rows)
			{
				new id, ip[16], name[24], connected, pid, admin_level;
				cache_get_value_name_int(0, "id", id);
				cache_get_value_name(0, "ip", ip);
				cache_get_value_name(0, "name", name);
				cache_get_value_name_int(0, "connected", connected);
				cache_get_value_name_int(0, "playerid", pid);
				cache_get_value_name_int(0, "admin_level", admin_level);

				if (connected) SendPlayerClientMessage(playerid, "JUGADOR '%s' DB-ID '%d' conectado utilice /ls, su player_id: %d.", name, id, pid);
				else
				{
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET pos_x = 1554.0074, pos_y = -1675.6185, pos_z = 16.1953, angle = 89.5214, state = %d, interior = 0, local_interior = 0, police_jail_time = 0 WHERE id = %d;", ROLEPLAY_STATE_NORMAL, to_account);
					mysql_tquery(handle_db, QUERY_BUFFER);
					SendPlayerClientMessage(playerid, "Jugador '%s' DB-ID '%d' ahora aparecerá en LS.", name, id);
				}

				SendCmdLogToAdmins(playerid, "lsdb", params);
			}
			else SendPlayerClientMessage(playerid, "No se encontro la DB-ID.");
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, ip, name, connected, playerid, admin_level FROM player WHERE id = %d;", to_account);
	MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
	return 1;
}

CMD:vpcar(playerid, params[])
{
	new to_playerid, modelid, vehname[24], color1 = 1, color2 = 1;
	if (!sscanf(params, "uddd", to_playerid, modelid, color1, color2)) { }
	else if (!sscanf(params, "ud", to_playerid, modelid)) { }
	else if (!sscanf(params, "us[24]dd", to_playerid, vehname, color1, color2)) { modelid = GetVehicleModelByName(vehname); }
	else if (!sscanf(params, "us[24]", to_playerid, vehname)) { modelid = GetVehicleModelByName(vehname); }
	else return ShowPlayerMessage(playerid, "~>~ /vpcar <playerid> <modelid/name> <color 1 = 1> <color 2 = 1>");
	
	if (modelid < 400 || modelid > 611) return SendPlayerClientMessage(playerid, "Modelo de vehículo no válido.");

	new pvehicles = CountPlayerVehicles(to_playerid);
	if (pvehicles >= MAX_SU_VEHICLES) return SendPlayerClientMessage(playerid, "El jugador no puede tener más vehículos, su límite es %d.", MAX_SU_VEHICLES);
	if (!PI[to_playerid][pi_VIP])
	{
		if (pvehicles >= MAX_NU_VEHICLES)
		{
			SendPlayerClientMessage(playerid, "El jugador no puede tener más vehículos, su límite es %d.", MAX_NU_VEHICLES);
			return 1;
		}
	}
	
	new Float:pos[4];
	GetPlayerPos(to_playerid, pos[0], pos[1], pos[2]);
	GetPlayerFacingAngle(to_playerid, pos[3]);
	
	new vid = AddPersonalVehicle
	(
		to_playerid,
		modelid,
		pos[0],
		pos[1],
		pos[2],
		pos[3],
		color1,
		color2,
		VEHICLE_INFO[ modelid - 400 ][vehicle_info_MAX_GAS]
	);
	if (!vid) return SendPlayerClientMessage(playerid, "No se pueden añadir más vehículos.");
	
	SendCmdLogToAdmins(playerid, "vpcar", params);
	return 1;
}

CMD:revivir(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /revivir <playerid>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Esta persona este desconectada.");
	if (PI[to_playerid][pi_STATE] != ROLEPLAY_STATE_CRACK) return SendPlayerClientMessage(playerid, "Esta persona no está herida.");
	
	DisablePlayerInjuredMark(to_playerid);
	PI[to_playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
	if (PI[to_playerid][pi_VIP]) SetPlayerHealthEx(to_playerid, 50.0);
	else SetPlayerHealthEx(to_playerid, 25.0);
	ApplyAnimation(to_playerid, "CARRY", "crry_prtial", 4.1, 0, 0, 0, 0, 0, true);
	ClearAnimations(to_playerid);
	
	SendCmdLogToAdmins(playerid, "revivir", params);
	return 1;
}
alias:revivir("revive");

CMD:tuning(playerid, params[])
{	
	if (GetPlayerState(playerid) != PLAYER_STATE_DRIVER) return SendPlayerClientMessage(playerid, "No estás en nigún vehículo.");
	if (PI[playerid][pi_STATE] == ROLEPLAY_STATE_CRACK || PI[playerid][pi_STATE] == ROLEPLAY_STATE_JAIL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_ARRESTED) return SendPlayerClientMessage(playerid, "Ahora no puedes usar este comando.");
	if (GetPlayerInterior(playerid) != 0 || GetPlayerVirtualWorld(playerid) != 0) return SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");
	if (!IsPlayerInRangeOfPoint(playerid, 5.0, 263.592102, 22.960014, 2.170951)) return SendPlayerClientMessage(playerid, "No estás en el lugar adecuado.");
	
	new vehicleid = GetPlayerVehicleID(playerid);
	if (!PLAYER_VEHICLES[vehicleid][player_vehicle_VALID]) return SendPlayerClientMessage(playerid, "Solo puedes tunear tus vehículos personales.");
	if (PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] != PI[playerid][pi_ID]) return SendPlayerClientMessage(playerid, "Solo puedes tunear tus vehículos personales.");
	if (!VEHICLE_INFO[GLOBAL_VEHICLES[vehicleid][gb_vehicle_MODELID] - 400][vehicle_info_NORMAL_SPEEDO]) return SendPlayerClientMessage(playerid, "Este vehículo no se puede tunear.");
	if (PI[playerid][pi_LEVEL] < 2) return SendPlayerClientMessage(playerid, "Debes de ser al menos nivel 2 para tunear vehículos aquí.");
	
	PLAYER_TEMP[playerid][pt_IN_TUNING_GARAGE] = true;
	PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] = vehicleid;
	
	SetVehiclePosEx(vehicleid, 263.592102, 22.960014, 2.170951);
	SetVehicleZAngle(vehicleid, 0.0);
	SetVehicleVelocity(vehicleid, 0.0, 0.0, 0.0);
	SetVehicleVirtualWorldEx(vehicleid, playerid + MAX_PLAYERS);
	SetPlayerVirtualWorld(playerid, playerid + MAX_PLAYERS);
	
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_PARAMS_ENGINE] = 0;
	UpdateVehicleParams(vehicleid);
	HidePlayerSpeedoMeter(playerid);
	SetCameraBehindPlayer(playerid);

	ShowDialog(playerid, DIALOG_VOBJECT_MENU);
	return 1;
}

stock GetPlayerCameraLookAt(playerid, &Float:X, &Float:Y, &Float:Z)
{
    new Float:pos[6];
    GetPlayerCameraPos(playerid, pos[0], pos[1], pos[2]);
    GetPlayerCameraFrontVector(playerid, pos[3], pos[4], pos[5]);
    X = floatadd(pos[0], pos[3]);
    Y = floatadd(pos[1], pos[4]);
    Z = floatadd(pos[2], pos[5]);
    return 1;
}

UpdateTuningShop(playerid)
{
	if (PLAYER_TEMP[playerid][pt_TUNING_PICKUP] != INVALID_STREAMER_ID)
	{
		DestroyDynamicPickup(PLAYER_TEMP[playerid][pt_TUNING_PICKUP]);
		PLAYER_TEMP[playerid][pt_TUNING_PICKUP] = INVALID_STREAMER_ID;
	}
	PLAYER_TEMP[playerid][pt_TUNING_PICKUP] = CreateDynamicPickup(Tuning_Shop_Objects[ PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] ][tuning_object_MODELID], 1, 268.2404, 11.4559, 2.4222, playerid + MAX_PLAYERS, -1, playerid);
	
	new td_str[128];
	format(td_str, sizeof td_str, "Objeto:_%d/%d~n~Precio:_%s$", PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] + 1, sizeof Tuning_Shop_Objects, number_format_thousand( Tuning_Shop_Objects[ PLAYER_TEMP[playerid][pt_SELECT_TUNING_OBJECT] ][tuning_object_PRICE] ) );
	PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_TUNING_SHOP], td_str);
	return 1;
}

CancelPlayerTuningShop(playerid)
{	
	SetCameraBehindPlayer(playerid);
	
	if (PLAYER_TEMP[playerid][pt_TUNING_PICKUP] != INVALID_STREAMER_ID)
	{
		DestroyDynamicPickup(PLAYER_TEMP[playerid][pt_TUNING_PICKUP]);
		PLAYER_TEMP[playerid][pt_TUNING_PICKUP] = INVALID_STREAMER_ID;
	}
	TextDrawHideForPlayer(playerid, Textdraws[textdraw_SHOP_TUNING][0]);
	TextDrawHideForPlayer(playerid, Textdraws[textdraw_SHOP_TUNING][1]);
	TextDrawHideForPlayer(playerid, Textdraws[textdraw_SHOP_TUNING][2]);
	TextDrawHideForPlayer(playerid, Textdraws[textdraw_SHOP_TUNING][3]);
	TextDrawHideForPlayer(playerid, Textdraws[textdraw_SHOP_TUNING][4]);
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_TUNING_SHOP]);
	CancelSelectTextDrawEx(playerid);
	
	PLAYER_TEMP[playerid][pt_TUNING_GARAGE_SHOP] = false;
	return 1;
}

GetVehicleFreeObjectSlot(vehicleid)
{
	for (new i = 0; i != MAX_SU_VOBJECTS; i ++)
	{
		if (!VEHICLE_OBJECTS[vehicleid][i][vobject_VALID]) return i;
	}
	return -1;
}

UpdateVehicleAttachedObject(vehicleid, slot, material = false)
{
	if (VEHICLE_OBJECTS[vehicleid][slot][vobject_ATTACHED])
	{
		if (VEHICLE_OBJECTS[vehicleid][slot][vobject_OBJECT_ID] == INVALID_STREAMER_ID)
		{
			VEHICLE_OBJECTS[vehicleid][slot][vobject_OBJECT_ID] = 	CreateDynamicObject
																	(
																		VEHICLE_OBJECTS[vehicleid][slot][vobject_MODELID],
																		0.0,
																		0.0,
																		0.0,
																		0.0,
																		0.0,
																		0.0
																	);
		}
		
		if (material)
		{
			switch(VEHICLE_OBJECTS[vehicleid][slot][vobject_TYPE])
			{
				case VOBJECT_TYPE_OBJECT:
				{
					for (new i = 0; i != MAX_VEHICLE_OBJECTS_INDEXS; i ++)
					{
						SetDynamicObjectMaterial(VEHICLE_OBJECTS[vehicleid][slot][vobject_OBJECT_ID], i, -1, "none", "none", VEHICLE_OBJECTS[vehicleid][slot][vobject_COLORS][i]);
					}
				}
				case VOBJECT_TYPE_TEXT:
				{
					SetDynamicObjectMaterialText
					(
						VEHICLE_OBJECTS[vehicleid][slot][vobject_OBJECT_ID],
						0,
						VEHICLE_OBJECTS[vehicleid][slot][vobject_text_TEXT],
						130,
						VEHICLE_OBJECTS[vehicleid][slot][vobject_text_FONT],
						VEHICLE_OBJECTS[vehicleid][slot][vobject_text_FONT_SIZE],
						VEHICLE_OBJECTS[vehicleid][slot][vobject_text_BOLD],
						VEHICLE_OBJECTS[vehicleid][slot][vobject_text_FONT_COLOR],
						0,
						OBJECT_MATERIAL_TEXT_ALIGN_CENTER
					);
				}
				case VOBJECT_TYPE_COUNTRY_FLAG: TextureCountryFlag(VEHICLE_OBJECTS[vehicleid][slot][vobject_OBJECT_ID], 1, VEHICLE_OBJECTS[vehicleid][slot][vobject_COLORS][0]);
				case VOBJECT_TYPE_COUNTRY_PANEL: TextureCountryFlag(VEHICLE_OBJECTS[vehicleid][slot][vobject_OBJECT_ID], 0, VEHICLE_OBJECTS[vehicleid][slot][vobject_COLORS][0]);
			}
		}
		
		AttachDynamicObjectToVehicle
		(
			VEHICLE_OBJECTS[vehicleid][slot][vobject_OBJECT_ID],
			vehicleid,
			VEHICLE_OBJECTS[vehicleid][slot][vobject_OFFSET][0],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_OFFSET][1],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_OFFSET][2],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_ROT][0],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_ROT][1],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_ROT][2]
		);
	}
	else
	{
		if (VEHICLE_OBJECTS[vehicleid][slot][vobject_OBJECT_ID] != INVALID_STREAMER_ID)
		{
			DestroyDynamicObject(VEHICLE_OBJECTS[vehicleid][slot][vobject_OBJECT_ID]);
			VEHICLE_OBJECTS[vehicleid][slot][vobject_OBJECT_ID] = INVALID_STREAMER_ID;
		}
	}
	return 1;
}

EditVehicleObject(playerid, vehicleid, slot)
{
	if (PLAYER_TEMP[playerid][pt_PIVOT_OBJECT] != INVALID_OBJECT_ID)
	{
		DestroyPlayerObject(playerid, PLAYER_TEMP[playerid][pt_PIVOT_OBJECT]);
		PLAYER_TEMP[playerid][pt_PIVOT_OBJECT] = INVALID_OBJECT_ID;
	}
	
	PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] = slot;
	GetVehiclePos(vehicleid, GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][0], GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][1], GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][2]);
	
	new Float:pos[3];
	pos[0] = GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][0] + VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][0];
	pos[1] = GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][1] + VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][1];
	pos[2] = GLOBAL_VEHICLES[vehicleid][gb_vehicle_POS][2] + VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][2];
	
	PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][0] = VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][0];
	PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][1] = VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][1];
	PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][2] = VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][2];
	PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][3] = VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ROT][0];
	PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][4] = VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ROT][1];
	PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][5] = VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ROT][2];
	
	PLAYER_TEMP[playerid][pt_PIVOT_OBJECT] = CreatePlayerObject(playerid, 999, pos[0], pos[1], pos[2], VEHICLE_OBJECTS[vehicleid][slot][vobject_ROT][0], VEHICLE_OBJECTS[vehicleid][slot][vobject_ROT][1], VEHICLE_OBJECTS[vehicleid][slot][vobject_ROT][2]);
	SetPlayerObjectMaterial(playerid, PLAYER_TEMP[playerid][pt_PIVOT_OBJECT], 0, 0, "null", "null");
	SetPlayerObjectMaterial(playerid, PLAYER_TEMP[playerid][pt_PIVOT_OBJECT], 1, 0, "null", "null");
	
	Streamer_Update(playerid);
	EditPlayerObject(playerid, PLAYER_TEMP[playerid][pt_PIVOT_OBJECT]);
	return 1;
}

public OnPlayerEditObject(playerid, playerobject, objectid, response, Float:fX, Float:fY, Float:fZ, Float:fRotX, Float:fRotY, Float:fRotZ)
{
	if (playerobject)
	{
		if (objectid == PLAYER_TEMP[playerid][pt_PIVOT_OBJECT])
		{
			switch(response)
			{
				case EDIT_RESPONSE_CANCEL:
				{
					if (PLAYER_TEMP[playerid][pt_PIVOT_OBJECT] != INVALID_OBJECT_ID)
					{
						DestroyPlayerObject(playerid, PLAYER_TEMP[playerid][pt_PIVOT_OBJECT]);
						PLAYER_TEMP[playerid][pt_PIVOT_OBJECT] = INVALID_OBJECT_ID;
					}
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][0] = PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][0];
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][1] = PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][1];
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][2] = PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][2];
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ROT][0] = PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][3];
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ROT][1] = PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][4];
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ROT][2] = PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][5];
					UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT]);
					Streamer_Update(playerid);
					
					SendPlayerClientMessage(playerid, "Has cancelado la edición.");
					ShowDialog(playerid, DIALOG_VOBJECT_OBJECT);
				}
				case EDIT_RESPONSE_FINAL:
				{
					if (PLAYER_TEMP[playerid][pt_PIVOT_OBJECT] != INVALID_OBJECT_ID)
					{
						DestroyPlayerObject(playerid, PLAYER_TEMP[playerid][pt_PIVOT_OBJECT]);
						PLAYER_TEMP[playerid][pt_PIVOT_OBJECT] = INVALID_OBJECT_ID;
					}
					
					new Float:v_size[3];
					GetVehicleModelInfo(GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][gb_vehicle_MODELID], VEHICLE_MODEL_INFO_SIZE, v_size[0], v_size[1], v_size[2]);
					
					if	(
							(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][0] >= v_size[0] || -v_size[0] >= VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][0]) || 
							(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][1] >= v_size[1] || -v_size[1] >= VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][1]) ||
							(VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][2] >= v_size[2] || -v_size[2] >= VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][2])
						)
					{
						SendPlayerClientMessage(playerid, "La posición del objeto está demasiado lejos del vehículo.");
						VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][0] = PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][0];
						VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][1] = PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][1];
						VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][2] = PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][2];
						VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ROT][0] = PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][3];
						VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ROT][1] = PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][4];
						VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ROT][2] = PLAYER_TEMP[playerid][pt_OLD_EDIT_VOBJECT_POS][5];
						UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT]);
						Streamer_Update(playerid);
					}
					
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ATTACHED] = true;
					SendPlayerClientMessage(playerid, "Objeto actualizado.");
					ShowDialog(playerid, DIALOG_VOBJECT_OBJECT);
				}
				case EDIT_RESPONSE_UPDATE:
				{
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][0] = fX - GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][gb_vehicle_POS][0];
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][1] = fY - GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][gb_vehicle_POS][1];
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_OFFSET][2] = fZ - GLOBAL_VEHICLES[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][gb_vehicle_POS][2];
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ROT][0] = fRotX;
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ROT][1] = fRotY;
					VEHICLE_OBJECTS[ PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID] ][ PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT] ][vobject_ROT][2] = fRotZ;
					UpdateVehicleAttachedObject(PLAYER_TEMP[playerid][pt_TUNING_GARAGE_VEHICLEID], PLAYER_TEMP[playerid][pt_TUNING_EDIT_SLOT]);
				}
			}
		}
	}
	return 1;
}

SetVehicleVirtualWorldEx(vehicleid, worldid)
{
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_TP_IMMUNITY] = gettime() + 5;
	GLOBAL_VEHICLES[vehicleid][gb_vehicle_WORLD] = worldid;
	
	for (new i = 0; i != MAX_SU_VOBJECTS; i ++)
	{
		if (!VEHICLE_OBJECTS[vehicleid][i][vobject_VALID]) continue;
		if (VEHICLE_OBJECTS[vehicleid][i][vobject_OBJECT_ID] == INVALID_STREAMER_ID) continue;
		
		Streamer_SetIntData(STREAMER_TYPE_OBJECT, VEHICLE_OBJECTS[vehicleid][i][vobject_OBJECT_ID], E_STREAMER_WORLD_ID, GLOBAL_VEHICLES[vehicleid][gb_vehicle_WORLD]);
	}
	
	SetVehicleVirtualWorld(vehicleid, worldid);
	return 1;
}

TextureCountryFlag(objectid, index, country)
{
	new text_flag[128], material_size, font[24], font_size, text_alignment;
	switch(country)
	{
		case 0: // Alemania
		{
			text_flag		= "{231f20}ggg\n{e01f26}ggg\n{e3bc22}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 1: // Argentina
		{
			text_flag		= "{1FBEF2}ggg\n{F5F5F5}ggg\n{1FBEF2}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 2: // Austria
		{
			text_flag		= "{d81e05}ggg\n{F5F5F5}ggg\n{d81e05}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 3: // Belgica
		{
			text_flag		= "{000000}g{ffd600}g{e80000}g\n{000000}g{ffd600}g{e80000}g\n{000000}g{ffd600}g{e80000}g";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 4: // Bolivia
		{
			text_flag		= "{d52b1e}ggg\n{f9e300}ggg\n{007934}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 5: // Bulgaria
		{
			text_flag		= "{F5F5F5}ggg\n{00966e}ggg\n{d62612}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 6: // Chile
		{
			text_flag		= "{04019a}g{F5F5F5}gg\n{fe0002}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 7: // Colombia
		{
			text_flag		= "{fcd116}ggg\n{003893}ggg\n{ce1126}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 0;
		}
		case 8: // El Salvador
		{
			text_flag		= "{0f47af}ggg\n{F5F5F5}ggg\n{0f47af}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 9: // España
		{
			text_flag		= "{c60b1e}ggg\n{ffc400}ggg\n{c60b1e}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 10: // Estonia
		{
			text_flag		= "{3a75c4}ggg\n{000000}ggg\n{F5F5F5}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 11: // Francia
		{
			text_flag		= "{00209f}g{F5F5F5}g{f42a41}g\n{00209f}g{F5F5F5}g{f42a41}g\n{00209f}g{F5F5F5}g{f42a41}g";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 12: // Guatemala
		{
			text_flag		= "{4997d0}g{F5F5F5}g{4997d0}g\n{4997d0}g{F5F5F5}g{4997d0}g\n{4997d0}g{F5F5F5}g{4997d0}g";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 13: // Holanda
		{
			text_flag		= "{ad1b28}ggg\n{fefefe}ggg\n{204589}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 14: // Hungria
		{
			text_flag		= "{d2232c}ggg\n{F5F5F5}ggg\n{008d46}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 15: // India
		{
			text_flag		= "{ff9933}ggg\n{F5F5F5}ggg\n{138808}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 16: // Indonesia
		{
			text_flag		= "{ce1126}ggg\n{F5F5F5}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 60;
			text_alignment	= 1;
		}
		case 17: // Irlanda
		{
			text_flag		= "{009e60}g{F5F5F5}g{f77f00}g\n{009e60}g{F5F5F5}g{f77f00}g\n{009e60}g{F5F5F5}g{f77f00}g";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 18: // Italia
		{
			text_flag		= "{009246}g{F5F5F5}g{ce2b37}g\n{009246}g{F5F5F5}g{ce2b37}g\n{009246}g{F5F5F5}g{ce2b37}g";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 19: // Lituania
		{
			text_flag		= "{fdb913}ggg\n{006a44}ggg\n{c1272d}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 20: // Luxemburgo
		{
			text_flag		= "{ef2b2d}ggg\n{F5F5F5}ggg\n{00a3dd}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 21: // Madagascar
		{
			text_flag		= "{F5F5F5}g{d11f33}gg\n{F5F5F5}g{00a651}gg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 60;
			text_alignment	= 1;
		}
		case 22: // Malta
		{
			text_flag		= "{F5F5F5}g{d11f33}g\n{F5F5F5}g{d11f33}g\n{F5F5F5}g{d11f33}g";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 60;
			text_alignment	= 1;
		}
		case 23: // Mali
		{
			text_flag		= "{14b53a}g{fcd116}g{ce1126}g\n{14b53a}g{fcd116}g{ce1126}g\n{14b53a}g{fcd116}g{ce1126}g";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 24: // México
		{
			text_flag		= "{006847}g{F5F5F5}g{ce1126}g\n{006847}g{F5F5F5}g{ce1126}g\n{006847}g{F5F5F5}g{ce1126}g";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 25: // Nigeria
		{
			text_flag		= "{008751}g{F5F5F5}g{008751}g\n{008751}g{F5F5F5}g{008751}g\n{008751}g{F5F5F5}g{008751}g";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 26: // Panamá
		{
			text_flag		= "{F5F5F5}g{d21034}g\n{0067c6}g{F5F5F5}g";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 60;
			text_alignment	= 0;
		}
		case 27: // Paraguay
		{
			text_flag		= "{d52b1e}ggg\n{F5F5F5}ggg\n{0038a8}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 28: // Perú
		{
			text_flag		= "{e30000}g{F5F5F5}g{e30000}g\n{e30000}g{F5F5F5}g{e30000}g\n{e30000}g{F5F5F5}g{e30000}g";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 29: // Polonia
		{
			text_flag		= "{F5F5F5}ggg\n{dc143c}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 60;
			text_alignment	= 1;
		}
		case 30: // Rumania
		{
			text_flag		= "{002b7f}g{fcd116}g{ce1126}g\n{002b7f}g{fcd116}g{ce1126}g\n{002b7f}g{fcd116}g{ce1126}g";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 31: // Rusia
		{
			text_flag		= "{F5F5F5}ggg\n{054da2}ggg\n{e01f26}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
		case 32: // Ucrania
		{
			text_flag		= "{3a75c4}ggg\n{f9dd16}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 60;
			text_alignment	= 1;
		}
		case 33: // Venezuela
		{
			text_flag		= "{f7d117}ggg\n{0033ab}ggg\n{cf142b}ggg";
			material_size	= 60;
			font			= "Webdings";
			font_size		= 55;
			text_alignment	= 1;
		}
	}
	
	SetDynamicObjectMaterialText
	(
		objectid,
		index,
		text_flag,
		material_size,
		font,
		font_size,
		0, 
		0xFFFFFFFF,
		0,
		text_alignment
	);
	return 1;
}

RegisterNewVehicleObject(vehicleid, slot)
{
	inline OnVobjectInserted()
	{
		VEHICLE_OBJECTS[vehicleid][slot][vobject_ID] = cache_insert_id();
	}

	mysql_format
	(
		handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER,
		"\
			INSERT INTO vobjects (id_vehicle, type, name, modelid, off_x, off_y, off_z, rot_x, rot_y, rot_z, attached, color0, color1, color2, color3, color4, text, font, fontsize, fontbold, fontcolor)\
			VALUES(%d, %d, '%e', %d, %f, %f, %f, %f, %f, %f, %d, %d, %d, %d, %d, %d, '%e', '%e', %d, %d, %d);\
		",
			PLAYER_VEHICLES[vehicleid][player_vehicle_ID], VEHICLE_OBJECTS[vehicleid][slot][vobject_TYPE], VEHICLE_OBJECTS[vehicleid][slot][vobject_NAME], VEHICLE_OBJECTS[vehicleid][slot][vobject_MODELID],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_OFFSET][0], VEHICLE_OBJECTS[vehicleid][slot][vobject_OFFSET][1], VEHICLE_OBJECTS[vehicleid][slot][vobject_OFFSET][2],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_ROT][0], VEHICLE_OBJECTS[vehicleid][slot][vobject_ROT][1], VEHICLE_OBJECTS[vehicleid][slot][vobject_ROT][2],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_ATTACHED], VEHICLE_OBJECTS[vehicleid][slot][vobject_COLORS][0], VEHICLE_OBJECTS[vehicleid][slot][vobject_COLORS][1], VEHICLE_OBJECTS[vehicleid][slot][vobject_COLORS][2],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_COLORS][3], VEHICLE_OBJECTS[vehicleid][slot][vobject_COLORS][4], VEHICLE_OBJECTS[vehicleid][slot][vobject_text_TEXT], VEHICLE_OBJECTS[vehicleid][slot][vobject_text_FONT],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_text_FONT_SIZE], VEHICLE_OBJECTS[vehicleid][slot][vobject_text_BOLD], VEHICLE_OBJECTS[vehicleid][slot][vobject_text_FONT_COLOR]
	);
	MySQL_TQueryInline(handle_db, using inline OnVobjectInserted, QUERY_BUFFER);
	return 1;
}

UpdateVehicleObject(vehicleid, slot)
{
	mysql_format
	(
		handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER,
		"\
			UPDATE vobjects SET \
				id_vehicle = %d,\
				type = %d,\
				name = '%e',\
				modelid = %d,\
				off_x = %f,\
				off_y = %f,\
				off_z = %f,\
				rot_x = %f,\
				rot_y = %f,\
				rot_z = %f,\
				attached = %d,\
				color0 = %d,\
				color1 = %d,\
				color2 = %d,\
				color3 = %d,\
				color4 = %d,\
				text = '%e',\
				font = '%e',\
				fontsize = %d,\
				fontbold = %d,\
				fontcolor = %d \
			WHERE id = %d;\
		",
			PLAYER_VEHICLES[vehicleid][player_vehicle_ID], VEHICLE_OBJECTS[vehicleid][slot][vobject_TYPE], VEHICLE_OBJECTS[vehicleid][slot][vobject_NAME], VEHICLE_OBJECTS[vehicleid][slot][vobject_MODELID],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_OFFSET][0], VEHICLE_OBJECTS[vehicleid][slot][vobject_OFFSET][1], VEHICLE_OBJECTS[vehicleid][slot][vobject_OFFSET][2],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_ROT][0], VEHICLE_OBJECTS[vehicleid][slot][vobject_ROT][1], VEHICLE_OBJECTS[vehicleid][slot][vobject_ROT][2],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_ATTACHED], VEHICLE_OBJECTS[vehicleid][slot][vobject_COLORS][0], VEHICLE_OBJECTS[vehicleid][slot][vobject_COLORS][1],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_COLORS][2], VEHICLE_OBJECTS[vehicleid][slot][vobject_COLORS][3], VEHICLE_OBJECTS[vehicleid][slot][vobject_COLORS][4],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_text_TEXT], VEHICLE_OBJECTS[vehicleid][slot][vobject_text_FONT], VEHICLE_OBJECTS[vehicleid][slot][vobject_text_FONT_SIZE],
			VEHICLE_OBJECTS[vehicleid][slot][vobject_text_BOLD], VEHICLE_OBJECTS[vehicleid][slot][vobject_text_FONT_COLOR],

			VEHICLE_OBJECTS[vehicleid][slot][vobject_ID]
	);
	mysql_tquery(handle_db, QUERY_BUFFER);
	return 1;
}

/*FixTextDrawString(message[], bool:space = false) {
	for (new len = strlen(message), pos; pos < len; pos ++)
	{
		switch(message[pos])
		{
			case 'à': message[pos] = 151;
			case 'á': message[pos] = 152;
			case 'â': message[pos] = 153;
			case 'ä': message[pos] = 154;
			case 'À': message[pos] = 128;
			case 'Á': message[pos] = 129;
			case 'Â': message[pos] = 130;
			case 'Ä': message[pos] = 131;
			case 'è': message[pos] = 157;
			case 'é': message[pos] = 158;
			case 'ê': message[pos] = 159;
			case 'ë': message[pos] = 160;
			case 'È': message[pos] = 134;
			case 'É': message[pos] = 135;
			case 'Ê': message[pos] = 136;
			case 'Ë': message[pos] = 137;
			case 'ì': message[pos] = 161;
			case 'í': message[pos] = 162;
			case 'î': message[pos] = 163;
			case 'ï': message[pos] = 164;
			case 'Ì': message[pos] = 138;
			case 'Í': message[pos] = 139;
			case 'Î': message[pos] = 140;
			case 'Ï': message[pos] = 141;
			case 'ò': message[pos] = 165;
			case 'ó': message[pos] = 166;
			case 'ô': message[pos] = 167;
			case 'ö': message[pos] = 168;
			case 'Ò': message[pos] = 142;
			case 'Ó': message[pos] = 143;
			case 'Ô': message[pos] = 144;
			case 'Ö': message[pos] = 145;
			case 'ù': message[pos] = 169;
			case 'ú': message[pos] = 170;
			case 'û': message[pos] = 171;
			case 'ü': message[pos] = 172;
			case 'Ù': message[pos] = 146;
			case 'Ú': message[pos] = 147;
			case 'Û': message[pos] = 148;
			case 'Ü': message[pos] = 149;
			case 'ñ': message[pos] = 174;
			case 'Ñ': message[pos] = 173;
			case '¡': message[pos] = 64;
			case '¿': message[pos] = 175;
			case '`': message[pos] = 177;
			case '&': message[pos] = 38;
			case ' ': {
				if (space) {
					message[pos] = '_';
				}
			}
			default:  message[pos] = message[pos];
		}
	}
}*/

stock HexToIntEx(const str[], transparency = 255)
{
    static r = 0, g = 0, b = 0;
    new len = strlen(str);

    if (len != 6)
    {
        return -1;
    }

    r = (HexCharToInt(str[0]) * 16) + HexCharToInt(str[1]);
    g = (HexCharToInt(str[2]) * 16) + HexCharToInt(str[3]);
    b = (HexCharToInt(str[4]) * 16) + HexCharToInt(str[5]);

    return (r << 24) | (g << 16) | (b << 8) | transparency;
}

stock HexCharToInt(const c)
{
    if (c >= '0' && c <= '9')
    {
        return c - '0';
    }
    else if (c >= 'A' && c <= 'F')
    {
        return c - 'A' + 10;
    }
    else if (c >= 'a' && c <= 'f')
    {
        return c - 'a' + 10;
    }
    return 0;
}

stock SendPlayerClientMessage(const playerid, const message[], GLOBAL_TAG_TYPES:...)
{
	static start = -1, end = -1, ColorCode[9], MessageColor = -1;

	if (message[0] == '{') { start = 0; }
	if (message[7] == '}') { end = 7; }

	if (start != -1 && end != -1 && end > start) {
		start += 1;
		new length = end - start;
		if (length > 0 && length < 7) {
			for (new i = 0; i < length; i++) {
				ColorCode[i] = message[start + i];
			}
			ColorCode[length] = '\0';
			MessageColor = HexToIntEx(ColorCode);
		} else {
			ColorCode[length] = '\0';
			MessageColor = -1;
		}
	}

	if (YSI_CheckNumargs__(2))
		return bool:SendClientMessage(playerid, MessageColor, __const(message));
	return
		format(YSI_UNSAFE_HUGE_STRING, YSI_UNSAFE_HUGE_LENGTH, message, ___(2)),
		bool:SendClientMessage(playerid, MessageColor, YSI_UNSAFE_HUGE_STRING);
}

forward HidePlayerMessage(playerid);
public HidePlayerMessage(playerid)
{
	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][17]);
	if (!PLAYER_TEMP[playerid][pt_USER_LOGGED]) return 0;
	PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE], "_");
	PlayerTextDrawHide(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE]);
	return 1;
}

stock ShowPlayerMessage(playerid, const message[], GLOBAL_TAG_TYPES:...)
{
	if (YSI_CheckNumargs__(2))
		return bool:PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE], __const(message)),
		PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE]),
		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][17]),
		PLAYER_TEMP[playerid][pt_TIMERS][17] = SetTimerEx("HidePlayerMessage", 3000, false, "d", playerid);
	return
		format(YSI_UNSAFE_HUGE_STRING, YSI_UNSAFE_HUGE_LENGTH, message, ___(2)),
		bool:PlayerTextDrawSetString(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE], YSI_UNSAFE_HUGE_STRING),
		PlayerTextDrawShow(playerid, PlayerTextdraws[playerid][ptextdraw_MESSAGE]),
		KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][17]),
		PLAYER_TEMP[playerid][pt_TIMERS][17] = SetTimerEx("HidePlayerMessage", 3000, false, "d", playerid);
}

PlayerPlaySoundEx(playerid, sound, Float:X, Float:Y, Float:Z)
{
	if (PI[playerid][pi_CONFIG_SOUNDS]) PlayerPlaySound(playerid, sound, X, Y, Z);
	return 1;
}

stock PlayAudioStreamForPlayerEx(playerid, url[], Float:posX = 0.0, Float:posY = 0.0, Float:posZ = 0.0, Float:distance = 50.0, usepos = 0)
{
	if (PI[playerid][pi_CONFIG_AUDIO]) PlayAudioStreamForPlayer(playerid, url, posX, posY, posZ, distance, usepos);
	return 1;
}

TogglePlayerControllableEx(playerid, bool:controllable)
{
	PLAYER_TEMP[playerid][pt_CONTROL] = controllable;
	return TogglePlayerControllable(playerid, controllable);
}

IsPlayerInSafeZone(playerid)
{
	for (new i = 0; i != sizeof SAFE_ZONES; i ++)
	{
		if (IsPlayerInDynamicArea(playerid, SAFE_ZONES[i][safe_zone_AREA_ID]))
		{
			return true;
		}
	}
	return false;
}

SetPlayerVip(playerid, bool:set, price_coin = 0, days = 30)
{
	if (!set)
	{
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET vip = 0, vip_expire_date = '0000-00-00 00:00:00' WHERE id = %d;", PI[playerid][pi_ID]);
		mysql_tquery(handle_db, QUERY_BUFFER);

		PI[playerid][pi_VIP] = false;
		PI[playerid][pi_VIP_EXPIRE_DATE][0] = EOS;
		SendPlayerClientMessage(playerid, "{666666}¡Tu VIP ha expirado! Usa /vip para comprar de nuevo.");
		ReLockPlayerVehicles(playerid, true);
		return 0;
	}
	
	GivePlayerCoins(playerid, -price_coin, true, true, "Compra de VIP.");
	PI[playerid][pi_VIP] = set;
	
	inline OnInfoQueryLoad()
	{
		inline OnCountQueryLoad()
		{
			new rows;
			if (cache_get_row_count(rows))
			{
				if (rows)
				{
					cache_get_value_index(0, 0, PI[playerid][pi_VIP_EXPIRE_DATE]);
					SendPlayerClientMessage(playerid, "{"#YELLOW_COLOR"}{F5F5F5}Has comprado {"#YELLOW_COLOR"}Membresia VIP{F5F5F5} por %d días, fecha de caducidad: {"#YELLOW_COLOR"}%s{F5F5F5}.", days, PI[playerid][pi_VIP_EXPIRE_DATE]);
					SendPlayerClientMessage(playerid, "{"#YELLOW_COLOR"}{F5F5F5}Puedes utilizar {"#YELLOW_COLOR"}/vip{F5F5F5} para ver el tiempo restante o renovar.");
					UnlockPlayerVehicles(playerid);
				}
			}
		}
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT vip_expire_date FROM player WHERE id = %d;", PI[playerid][pi_ID]);
		MySQL_TQueryInline(handle_db, using inline OnCountQueryLoad, QUERY_BUFFER);
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET coins = %d, vip = %d, vip_expire_date = DATE_ADD(NOW(), INTERVAL %d DAY) WHERE id = %d;", PI[playerid][pi_COINS], PI[playerid][pi_VIP], days, PI[playerid][pi_ID]);
	MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
	return 1;
}

UpdateUnnocupiedPropertyLabel(index)
{
	if (!PROPERTY_INFO[index][property_VALID]) return 0;
	if (PROPERTY_INFO[index][property_SOLD]) return 0;
	
	new label_str[256];
	if (PROPERTY_INFO[index][property_VIP_LEVEL])
	{
		if (PROPERTY_INFO[index][property_EXTRA])
		{
			format
			(
				label_str, 
				sizeof label_str, 
				"\
					{"#PRIMARY_COLOR"}Membresia VIP requerida\n\
					\n\
					{F5F5F5}Propiedad {"#PRIMARY_COLOR"}#%d {F5F5F5}está en venta\n\n\
					Interior: {"#PRIMARY_COLOR"}%d\n\
					{F5F5F5}Coste: {"#PRIMARY_COLOR"}%d "SERVER_COIN"\n\
					{F5F5F5}Nivel necesario: {"#PRIMARY_COLOR"}%d\n\
					{F5F5F5}Usa {"#PRIMARY_COLOR"}/ayuda {F5F5F5}para ver como adquirirla.\
				", PROPERTY_INFO[index][property_ID], PROPERTY_INFO[index][property_ID_INTERIOR], PROPERTY_INFO[index][property_EXTRA], PROPERTY_INFO[index][property_LEVEL]
			);
		}
		else
		{
			format
			(
				label_str, 
				sizeof label_str, 
				"\
					{"#PRIMARY_COLOR"}Membresia VIP requerida\n\
					\n\
					{F5F5F5}Propiedad {"#PRIMARY_COLOR"}#%d {F5F5F5}está en venta\n\n\
					Interior: {"#PRIMARY_COLOR"}%d\n\
					{F5F5F5}Precio: {"#PRIMARY_COLOR"}%s$\n\
					{F5F5F5}Nivel: {"#PRIMARY_COLOR"}%d\n\
					{F5F5F5}Usa {"#PRIMARY_COLOR"}/ayuda {F5F5F5}para ver como adquirirla.\
				", PROPERTY_INFO[index][property_ID], PROPERTY_INFO[index][property_ID_INTERIOR], number_format_thousand(PROPERTY_INFO[index][property_PRICE]), PROPERTY_INFO[index][property_LEVEL]
			);
		}
	}
	else
	{
		if (PROPERTY_INFO[index][property_EXTRA])
		{
			format
			(
				label_str, 
				sizeof label_str, 
				"\
					{F5F5F5}Propiedad {"#PRIMARY_COLOR"}#%d {F5F5F5}está en venta\n\n\
					Interior: {"#PRIMARY_COLOR"}%d\n\
					{F5F5F5}Coste: {"#PRIMARY_COLOR"}%d "SERVER_COIN"\n\
					{F5F5F5}Nivel necesario: {"#PRIMARY_COLOR"}%d\n\
					{F5F5F5}Usa {"#PRIMARY_COLOR"}/ayuda {F5F5F5}para ver como adquirirla.\
				", PROPERTY_INFO[index][property_ID], PROPERTY_INFO[index][property_ID_INTERIOR], PROPERTY_INFO[index][property_EXTRA], PROPERTY_INFO[index][property_LEVEL]
			);
		}
		else
		{
			format
			(
				label_str, 
				sizeof label_str, 
				"\
					{F5F5F5}Propiedad {"#PRIMARY_COLOR"}#%d {F5F5F5}está en venta\n\n\
					Interior: {"#PRIMARY_COLOR"}%d\n\
					{F5F5F5}Precio: {"#PRIMARY_COLOR"}%s$\n\
					{F5F5F5}Nivel: {"#PRIMARY_COLOR"}%d\n\
					{F5F5F5}Usa {"#PRIMARY_COLOR"}/ayuda {F5F5F5}para ver como adquirirla.\
				", PROPERTY_INFO[index][property_ID], PROPERTY_INFO[index][property_ID_INTERIOR], number_format_thousand(PROPERTY_INFO[index][property_PRICE]), PROPERTY_INFO[index][property_LEVEL]
			);
		}
	}
	UpdateDynamic3DTextLabelText(PROPERTY_INFO[index][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
	return 1;
}


FreezePlayer(playerid, ms = 2000)
{
	TogglePlayerControllableEx(playerid, false);
	KillTimer(PLAYER_TEMP[playerid][pt_TIMERS][3]);
	PLAYER_TEMP[playerid][pt_TIMERS][3] = SetTimerEx("TogglePlayerControl", ms, false, "ib", playerid, true);
	return 1;
}

forward CarJackingFinish(playerid);
public CarJackingFinish(playerid)
{
	TogglePlayerControllableEx(playerid, true);
	return 1;
}

SetPlayerNormalColor(playerid) {
	return SetPlayerColorEx(playerid, PLAYER_COLOR);
}

SendAdminAd(const text[])
{
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if ((PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL || PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_DEAD) && PI[i][pi_CONFIG_ADMIN])
			{
				SendPlayerClientMessage(i, text);
			}
		}
	}
	return 1;
}

#define MIN_SECONDS_BETWEEN_COMMANDS 2 // Deben pasar al menos 2 segundos entre comando y comando.
public OnPlayerCommandReceived(playerid, cmd[], params[], flags) 
{
	if (PLAYER_TEMP[playerid][pt_KICKED]) return 0;
	
	if (PLAYER_TEMP[playerid][pt_GAME_STATE] != GAME_STATE_NORMAL || PI[playerid][pi_STATE] == ROLEPLAY_STATE_HOSPITAL)
	{
		ShowPlayerMessage(playerid, "Ahora no puedes usar comandos.");
		return 0;
	}
	if (PLAYER_TEMP[playerid][pt_SELECT_TEXTDRAW]) { SendPlayerClientMessage(playerid, "Ahora no puedes usar comandos, pulsa 'ESCAPE' para cerrar el menú."); return 0; }
	
	
	new interval = GetTickDiff(GetTickCount(), PLAYER_TEMP[playerid][pt_ANTIFLOOD_COMMANDS]);
	if (interval < MIN_SECONDS_BETWEEN_COMMANDS)
	{
		if (ac_Info[CHEAT_COMMAND_SPAMMER][ac_Enabled])
		{
			if (gettime() > PLAYER_AC_INFO[playerid][CHEAT_COMMAND_SPAMMER][p_ac_info_IMMUNITY])
			{
				if (interval < 50)
				{
					if (!ac_Info[CHEAT_COMMAND_SPAMMER][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_COMMAND_SPAMMER, float(interval));
					else
					{
						if (gettime() - PLAYER_AC_INFO[playerid][CHEAT_COMMAND_SPAMMER][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_COMMAND_SPAMMER][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_COMMAND_SPAMMER][p_ac_info_DETECTIONS] = 0;
						else PLAYER_AC_INFO[playerid][CHEAT_COMMAND_SPAMMER][p_ac_info_DETECTIONS] ++;
						
						PLAYER_AC_INFO[playerid][CHEAT_COMMAND_SPAMMER][p_ac_info_LAST_DETECTION] = gettime();
						if (PLAYER_AC_INFO[playerid][CHEAT_COMMAND_SPAMMER][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_COMMAND_SPAMMER][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_COMMAND_SPAMMER, float(interval));
					}
				}
			}
		}
		ShowPlayerMessage(playerid, "Calmate."); 
		return 0; 
	}
	
	if (flags) {
		if (flags == CMD_DISABLED) {
			ShowPlayerMessage(playerid, "Este comando esta deshabilitado.");
			return 0;
		}

		if (flags > PI[playerid][pi_ADMIN_LEVEL]) {
			ShowPlayerMessage(playerid, "Comando incorrecto~n~usa ~b~/ayuda~w~.");
			return 0;
		}

		if (!PLAYER_TEMP[playerid][pt_ADMIN_SERVICE] && PI[playerid][pi_ADMIN_LEVEL] < CMD_ADMINISTRATOR) {
			ShowPlayerMessage(playerid, "Para usar ~r~comandos administrativos~w~ debes estar en ~y~/duty~w~.");
			return 0;
		}
	}
	
	PLAYER_TEMP[playerid][pt_ANTIFLOOD_COMMANDS] = GetTickCount();
	printf("[CMD] %s (%d): /%s %s", PI[playerid][pi_NAME], PI[playerid][pi_ID], cmd, params);
	return 1;
}

public OnPlayerCommandPerformed(playerid, cmd[], params[], result, flags) 
{ 
    if (result == -1) 
    { 
		ShowPlayerMessage(playerid, "Comando incorrecto~n~usa ~b~/ayuda~w~.");
        return 0;
    }
    return 1; 
}

SendMessageToDoubtChannel(playerid, message[], div) {
	new str[300], line1_str[165], line2_str[165], bool:line2_used = false;
	if (!PLAYER_TEMP[playerid][pt_ADMIN_NAME] && PI[playerid][pi_ADMIN_LEVEL]) format(str, sizeof(str), "[Dudas] {%s}{F5F5F5}%s (%d) {%s}[%s]{F5F5F5}: {c5c5c5}%s", ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], PLAYER_TEMP[playerid][pt_NAME], playerid, ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], message);
	else if (PI[playerid][pi_VIP]) format(str, sizeof(str), "[Dudas] {FFE000}{F5F5F5}%s (%d) {FFE500}[VIP]{F5F5F5}: {c5c5c5}%s", PLAYER_TEMP[playerid][pt_NAME], playerid, message);
	else if (PI[playerid][pi_PLAYER_PLATFORM]) format(str, sizeof(str), "[Dudas] {3ee134}{F5F5F5}%s (%d){F5F5F5}: {aba8af}%s", PLAYER_TEMP[playerid][pt_NAME], playerid, message);
	else format(str, sizeof(str), "[Dudas] {0088FF}{F5F5F5}%s (%d): {aba8af}%s", PLAYER_TEMP[playerid][pt_NAME], playerid, message);

	if (div) {
		format(line1_str, div + 1, "%s", str);
		if (strlen(str) > div)
		{
			format(line2_str, sizeof line2_str, "%s", str[div]);
			line2_used = true;
		}
	}
	else format(line1_str, sizeof line1_str, "%s", str);

	//3ee134
	PLAYER_TEMP[playerid][pt_DOUBT_CHANNEL_TIME] = gettime();
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if ((PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL || PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_DEAD) && PI[i][pi_DOUBT_CHANNEL])
			{
				SendClientMessage(i, 0x22DD22ff, line1_str);
				if (line2_used) SendClientMessage(i, 0xc5c5c5ff, line2_str);
			}
		}
	}

	format(str, sizeof(str), "```[Dudas] | [nombre: %s, id: %d]: %s```", PI[playerid][pi_NAME], PI[playerid][pi_ID], message);
	SendDiscordMessage(""#DISCORD_DOUBTS_LOG"", str);
	return 1;
}

SendMessageToGlobalChannel(playerid, message[], bool:show_name, div, bool:police) {
	new str[1024], line1_str[165], line2_str[165], bool:line2_used = false;

	if (police) {
		format(str, sizeof(str), "{00acee}@Twitter {"#POLICE_COLOUR"}POLICIA{F5F5F5}: %s", message);
	} else {
		if (show_name) {
			if (PI[playerid][pi_ADMIN_LEVEL] && !PLAYER_TEMP[playerid][pt_ADMIN_NAME]) format(str, sizeof(str), "{00acee}@Twitter {%s}{00acee}#{F5F5F5}%s (%d) {%s}[%s]{F5F5F5}: {00acee}%s", ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], PLAYER_TEMP[playerid][pt_NAME], playerid, ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], message);
			else if (PI[playerid][pi_VIP]) format(str, sizeof(str), "{00acee}@Twitter {FFE000}{00acee}#{F5F5F5}%s (%d) [{FFE000}VIP{F5F5F5}]: {00acee}%s", PLAYER_TEMP[playerid][pt_NAME], playerid, message);
			else if (PI[playerid][pi_PLAYER_PLATFORM]) format(str, sizeof(str), "{00acee}@Twitter {3ee134}{00acee}#{F5F5F5}%s (%d): {00acee}%s", PLAYER_TEMP[playerid][pt_NAME], playerid, message);
			else format(str, sizeof(str), "{00acee}@Twitter {0088FF}{00acee}#{F5F5F5}%s (%d): {00acee}%s", PLAYER_TEMP[playerid][pt_NAME], playerid, message);
		} else {
			if (PI[playerid][pi_ADMIN_LEVEL] && !PLAYER_TEMP[playerid][pt_ADMIN_NAME]) format(str, sizeof(str), "{00acee}@Twitter {%s}{323232}ANONIMO{F5F5F5}(%d): {00acee}%s", ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], playerid, message);
			else if (PI[playerid][pi_VIP]) format(str, sizeof(str), "{00acee}@Twitter {FFE000}{323232}ANONIMO{F5F5F5}(%d) [{FFE000}VIP{F5F5F5}]: {00acee}%s", playerid, message);
			else if (PI[playerid][pi_PLAYER_PLATFORM]) format(str, sizeof(str), "{00acee}@Twitter {3ee134}{323232}ANONIMO{F5F5F5}(%d): {00acee}%s", playerid, message);
			else format(str, sizeof(str), "{00acee}@Twitter {0088FF}{323232}ANONIMO{F5F5F5}(%d): {00acee}%s", playerid, message);
		}
	}

	if (div) {
		format(line1_str, div + 1, "%s", str);
		if (strlen(str) > div) {
			format(line2_str, sizeof line2_str, "%s", str[div]);
			line2_used = true;
		}
	}
	else format(line1_str, sizeof line1_str, "%s", str);

	PLAYER_TEMP[playerid][pt_GLOBAL_CHANNEL_TIME] = gettime();
	foreach (new i : Player) {
		if (IsPlayerConnected(i)) {
			if ((PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL || PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_DEAD) && PI[i][pi_GLOBAL_CHANNEL]) {
				SendPlayerClientMessage(i, line1_str);
				if (line2_used) SendClientMessage(i, 0x00aceeff, line2_str);
			}
		}
	}

	format(str, sizeof(str), "```@Twitter %s%s[nombre: %s, id: %d, playerid: %d]: %s```", (show_name ? "" : "Anonimo "), (police ? "Policia " : ""), PI[playerid][pi_NAME], PI[playerid][pi_ID], playerid, message);
	SendDiscordMessage(""#DISCORD_TWITTER_LOG"", str);
	return 1;
}

SendMessageToAnnounceChannel(playerid, message[], div) {
	new str[1024], line1_str[165], line2_str[165], bool:line2_used = false;
	
	format(str, sizeof(str), "[{22DD22}Mil-Anuncios{F5F5F5}]: %s [Contacto: {22DD22}%d{F5F5F5}](ID: %d)", message, PI[playerid][pi_PHONE_NUMBER], playerid);

	if (div) {
		format(line1_str, div + 1, "%s", str);
		if (strlen(str) > div) {
			format(line2_str, sizeof line2_str, "%s", str[div]);
			line2_used = true;
		}
	}
	else format(line1_str, sizeof line1_str, "%s", str);

	PLAYER_TEMP[playerid][pt_GLOBAL_CHANNEL_TIME] = gettime();
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if ((PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL || PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_DEAD) && PI[i][pi_SELL_CHANNEL])
			{
				SendPlayerClientMessage(i, line1_str);
				if (line2_used) SendClientMessage(i, -1, line2_str);
			}
		}
	}

	format(str, sizeof(str), "```yaml\n[Mil-Anuncios] [nombre: %s, id: %d, telefono: %d, playerid: %d]: %s\n```", PI[playerid][pi_NAME], PI[playerid][pi_ID], PI[playerid][pi_PHONE_NUMBER], playerid, message);
	SendDiscordMessage(""#DISCORD_TWITTER_LOG"", str);
	return 1;
}

CMD:mutear(playerid, params[])
{
    new to_playerid, reason[128], time;
    if (sscanf(params, "uds[128]", to_playerid, time, reason)) return ShowPlayerMessage(playerid, "~>~ /mutear <player_id> <minutos> <razón>");
	if (time < 0 || time > 1440) return SendPlayerClientMessage(playerid, "Intervalo de minutos incorrecto.");
    if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
    if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	if (gettime() < PI[to_playerid][pi_MUTE]) return SendPlayerClientMessage(playerid, "El jugador ya está muteado.");

	new seconds = time * 60;
	PI[to_playerid][pi_MUTE] = gettime() + seconds;
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET mute = %d WHERE id = %d;", PI[to_playerid][pi_MUTE], PI[to_playerid][pi_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	SendPlayerClientMessage(to_playerid, "{cccccc}Has sido silenciado por %d minutos, razón: %s", time, reason);
	
	new str[1000]; format(str, 1000, "{"#YELLOW_COLOR"}[MUTE] {F5F5F5}%s[%d] | %s [{%s}%s{F5F5F5}] | Minutos: %d | Razon: %s | %d Ping", PI[to_playerid][pi_NAME], to_playerid, PI[playerid][pi_NAME], ADMIN_COLOURS[ PI[playerid][pi_ADMIN_LEVEL] ], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], time, reason, GetPlayerPing(to_playerid));
    SendAdminAd(str);
	SendCmdLogToAdmins(playerid, "mutear", params);

	format(str, 1000, "```[MUTE] %s[%d] | %s [%s] | Razon: %s | Minutos: %d | %d Ping```", PI[to_playerid][pi_NAME], to_playerid, PI[playerid][pi_NAME], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ], reason, time, GetPlayerPing(to_playerid));
	SendDiscordMessage(""#DISCORD_MUTE_LOG"", str);
	return 1;
}

CMD:desmutear(playerid, params[])
{
    new to_playerid, str[1000];
    if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /desmutear <player_id>");
    if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
    if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");

	if (gettime() > PI[to_playerid][pi_MUTE]) return SendPlayerClientMessage(playerid, "Este jugador no está silenciado.");
	
	PI[to_playerid][pi_MUTE] = 0;
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET mute = %d WHERE id = %d;", PI[to_playerid][pi_MUTE], PI[to_playerid][pi_ID]);
	mysql_tquery(handle_db, QUERY_BUFFER);
	SendPlayerClientMessage(to_playerid, "{cccccc}Ya puedes volver a enviar dudas y twitter.");
	
	SendPlayerClientMessage(playerid, "Jugador %s (%d) ha sido des-silenciado.", PI[to_playerid][pi_NAME], to_playerid);
	SendCmdLogToAdmins(playerid, "desmutear", params);

	format(str, 1000, "```yaml\n%s[%d] ha sido des-silenciado por %s [%s].\n```", PI[to_playerid][pi_NAME], to_playerid, PI[playerid][pi_NAME], ADMIN_LEVELS[ PI[playerid][pi_ADMIN_LEVEL] ]);
	SendDiscordMessage(""#DISCORD_MUTE_LOG"", str);
	return 1;
}

GetFreePoliceObjectSlot()
{
	for (new i = 0; i != MAX_POLICE_OBJECTS; i ++)
	{
		if (!POLICE_OBJECTS[i][police_object_VALID]) return i;
	}
	return -1;
}

CMD:borrarop(playerid, params[])
{
	new affected_objects;
	for (new i = 0; i != MAX_POLICE_OBJECTS; i ++)
	{
		if (!POLICE_OBJECTS[i][police_object_VALID]) continue;
		
		DestroyDynamicObject(POLICE_OBJECTS[i][police_object_OBJECT_ID]);
		POLICE_OBJECTS[i][police_object_VALID] = false;
		POLICE_OBJECTS[i][police_object_USER][0] = EOS;
		POLICE_OBJECTS[i][police_object_OBJECT_ID] = INVALID_STREAMER_ID;
		affected_objects ++;
	}
	
	SendPlayerClientMessage(playerid, "Se han eliminado todos los objetos policiales, %d objetos afectados.", affected_objects);
	SendCmdLogToAdmins(playerid, "borrarop", params);
	return 1;
}

CMD:admac(playerid, params[])
{
	if (sscanf(params, "d", params[0])) return ShowPlayerMessage(playerid, "~>~ /admac <nivel>");
	ADMIN_LEVEL_AC_IMMUNITY = params[0];
	
	SendPlayerClientMessage(playerid, "Admin level %d o mayor no sera detectado por ac.", ADMIN_LEVEL_AC_IMMUNITY);
	return 1;
}

CMD:cleanproperties(playerid, params[])
{
	new total;
	for (new i = 0; i != MAX_PROPERTIES; i ++)
	{
		if (PROPERTY_INFO[i][property_SOLD])
		{
			PROPERTY_INFO[i][property_SOLD] = false;
			PROPERTY_INFO[i][property_CREW] = false;
			PROPERTY_INFO[i][property_OWNER_ID] = 0;
			PROPERTY_INFO[i][property_CREW_ID] = 0;
			format(PROPERTY_INFO[i][property_NAME], 24, "PROPIEDAD %d", PROPERTY_INFO[i][property_ID]);
			
			new label_str[256], info[3];
			format
			(
				label_str, 
				sizeof label_str, 
				"\
					Propiedad {"#PRIMARY_COLOR"}#%d {F5F5F5}está en venta\n\n\
					Interior: {"#PRIMARY_COLOR"}%d\n\
					{F5F5F5}Precio: {"#PRIMARY_COLOR"}%s$\n\
					{F5F5F5}Nivel necesario: {"#PRIMARY_COLOR"}%d\n\
					{F5F5F5}Usa {"#PRIMARY_COLOR"}/ayuda {F5F5F5}para ver como adquirirla.\
				", PROPERTY_INFO[i][property_ID], PROPERTY_INFO[i][property_ID_INTERIOR], number_format_thousand(PROPERTY_INFO[i][property_PRICE]), PROPERTY_INFO[i][property_LEVEL]
			);
			UpdateDynamic3DTextLabelText(PROPERTY_INFO[i][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
			
			DestroyDynamicPickup(PROPERTY_INFO[i][property_EXT_PICKUP_ID]);
			PROPERTY_INFO[i][property_EXT_PICKUP_ID] = INVALID_STREAMER_ID;
			
			PROPERTY_INFO[i][property_EXT_PICKUP_ID] = CreateDynamicPickup(1273, 1, PROPERTY_INFO[i][property_EXT_X], PROPERTY_INFO[i][property_EXT_Y], PROPERTY_INFO[i][property_EXT_Z], 0, PROPERTY_INFO[i][property_EXT_INTERIOR]);
			info[0] = PICKUP_TYPE_PROPERTY;
			info[1] = i; // Index
			info[2] = 2; // Pickup Exterior
			Streamer_SetArrayData(STREAMER_TYPE_PICKUP, PROPERTY_INFO[i][property_EXT_PICKUP_ID], E_STREAMER_EXTRA_ID, info);
						
			//
			total ++;
		}
	}
	
	//
	mysql_tquery(handle_db, "UPDATE properties SET id_player = NULL, id_territory = NULL;");
	
	SendPlayerClientMessage(playerid, "Se han liberado todas las propiedades (%d).", total);
	
	SendCmdLogToAdmins(playerid, "cleanproperties", params);
	return 1;
}

CMD:countv(playerid, params[])
{
	if (sscanf(params, "u", params[0])) return ShowPlayerMessage(playerid, "~>~ /countv <playerid>");
	SendPlayerClientMessage(playerid, "Vehicles: %d", CountPlayerVehicles(params[0]));
	return 1;
}

CMD:countp(playerid, params[])
{
	if (sscanf(params, "u", params[0])) return ShowPlayerMessage(playerid, "~>~ /countp <playerid>");
	SendPlayerClientMessage(playerid, "Properties: %d", CountPlayerProperties(params[0]));
	return 1;
}

CMD:getnumberinfo(playerid, params[])
{
	if (sscanf(params, "d", params[0])) return ShowPlayerMessage(playerid, "~>~ /getnumberinfo <numero>");
	
	inline OnInfoQueryLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			if (rows)
			{
				new id, name[24], connected, pid;
				cache_get_value_name_int(0, "id", id);
				cache_get_value_name(0, "name", name);
				cache_get_value_name_int(0, "connected", connected);
				cache_get_value_name_int(0, "playerid", pid);
				SendPlayerClientMessage(playerid, "PN: %d --- Nombre: '%s' DB-ID: '%d' Conectado: '%d' Playerid: '%d'", params[0], name, id, connected, pid);
			}
			else SendPlayerClientMessage(playerid, "No se encontró ningún resultado para ese número.");
		}	
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, name, connected, playerid FROM player WHERE phone_number = %d LIMIT 1;", params[0]);
	MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
	return 1;
}

CMD:osetname(playerid, params[])
{
	new to_account, new_name[24];
	if (sscanf(params, "ds[20]", to_account, new_name)) return ShowPlayerMessage(playerid, "~>~ /osetname <DB-ID> <name>");
	if (!IsValidRPName(new_name)) return SendPlayerClientMessage(playerid, "El nombre '%s' no cumple con el formato.", new_name);

	inline OnNameChecked()
	{
		new crows;
		if (cache_get_row_count(crows))
		{
			if (crows) SendPlayerClientMessage(playerid, "El nombre %s está en uso", new_name);
			else
			{
				inline OnInfoQueryLoad()
				{
					new rows;
					if (cache_get_row_count(rows))
					{
						if (rows)
						{
							new id, ip[16], name[24], connected, pid, admin_level;
							cache_get_value_name_int(0, "id", id);
							cache_get_value_name(0, "ip", ip);
							cache_get_value_name(0, "name", name);
							cache_get_value_name_int(0, "connected", connected);
							cache_get_value_name_int(0, "playerid", pid);
							cache_get_value_name_int(0, "admin_level", admin_level);

							if (PI[playerid][pi_ADMIN_LEVEL] >= admin_level)
							{
								if (connected) SendPlayerClientMessage(playerid, "JUGADOR '%s' DB-ID '%d' conectado utilice /setname, su player_id: %d.", name, id, pid);
								else
								{
									mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET name = '%e' WHERE id = %d;", new_name, id);
									mysql_tquery(handle_db, QUERY_BUFFER);

									for (new i = 0; i != MAX_PROPERTIES; i ++)
									{
										if (!PROPERTY_INFO[i][property_VALID]) continue;
										if (PROPERTY_INFO[i][property_OWNER_ID] != id) continue;
										
										new label_str[256];
										format
										(
											label_str, 
											sizeof label_str, 
											"\
												Propiedad {"#PRIMARY_COLOR"}#%d\n\n\
												{F5F5F5}Propietario: {"#PRIMARY_COLOR"}%s\n\
												{F5F5F5}Presiona {"#PRIMARY_COLOR"}Y {F5F5F5}para entrar.\
											", PROPERTY_INFO[i][property_ID], new_name
										);
										UpdateDynamic3DTextLabelText(PROPERTY_INFO[i][property_EXT_LABEL_ID], 0xFFFFFFFF, label_str);
									}
									SendPlayerClientMessage(playerid, "El nombre de '%s' ahora es: %s", name, new_name);
								}
							}
							else SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
						}
						else SendPlayerClientMessage(playerid, "No se encontro la DB-ID.");
					}
				}
				mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, ip, name, connected, playerid, admin_level FROM player WHERE id = %d;", to_account);
				MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
			}
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id FROM player WHERE name = '%e';", new_name);
	MySQL_TQueryInline(handle_db, using inline OnNameChecked, QUERY_BUFFER);
	return 1;
}

CMD:ogivecoins(playerid, params[])
{
	new to_account, amount;
	if (sscanf(params, "dd", to_account, amount)) return ShowPlayerMessage(playerid, "~>~ /ogivecoins <DB-ID> <cantidad>");

	inline OnInfoQueryLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			if (rows)
			{
				new id, ip[16], name[24], connected, pid, admin_level;
				cache_get_value_name_int(0, "id", id);
				cache_get_value_name(0, "ip", ip);
				cache_get_value_name(0, "name", name);
				cache_get_value_name_int(0, "connected", connected);
				cache_get_value_name_int(0, "playerid", pid);
				cache_get_value_name_int(0, "admin_level", admin_level);

				if (connected) SendPlayerClientMessage(playerid, "JUGADOR '%s' DB-ID '%d' conectado, player_id: %d, use /givecoins.", name, id, pid);
				else
				{
					mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE player SET coins = coins + %d WHERE id = %d;", amount, id);
					mysql_tquery(handle_db, QUERY_BUFFER);
					SendPlayerClientMessage(playerid, "Le has dado %d "SERVER_COIN" a %s.", amount, name);
				}
			}
			else SendPlayerClientMessage(playerid, "No se encontro la DB-ID.");
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT id, ip, name, connected, playerid, admin_level FROM player WHERE id = %d;", to_account);
	MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
	return 1;
}

CMD:con(playerid, params[])
{
	new stats[400+1];
	GetNetworkStats(stats, sizeof(stats));
	ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_MSGBOX, "Estadísticas del servidor", stats, "OK", "");
	return 1;
}

CMD:notifica(playerid, params[])
{
	if (isnull(params)) return SendPlayerClientMessage(playerid, "Uso: /notifica [cmd/adm/ac/chat]");

	switch(YHash(params, false))
	{
		case _I<cmd>:
		{
			PLAYER_TEMP[playerid][pt_SEE_ACMD_LOG] ^= true;
			SendPlayerClientMessage(playerid, "Log de comandos %sactivado", PLAYER_TEMP[playerid][pt_SEE_ACMD_LOG] ? ("") : ("des"));
		}
		case _I<adm>:
		{
			PLAYER_TEMP[playerid][pt_SEE_ADM_LOG] ^= true;
			SendPlayerClientMessage(playerid, "Log admin general %sactivado", PLAYER_TEMP[playerid][pt_SEE_ADM_LOG] ? ("") : ("des"));
		}
		case _I<ac>:
		{
			PLAYER_TEMP[playerid][pt_SEE_AC_LOG] ^= true;
			SendPlayerClientMessage(playerid, "Log de anticheat %sactivado", PLAYER_TEMP[playerid][pt_SEE_AC_LOG] ? ("") : ("des"));
		}
		case _I<chat>:
		{
			PLAYER_TEMP[playerid][pt_SEE_ADM_CHAT] ^= true;
			SendPlayerClientMessage(playerid, "Chat admin %sactivado", PLAYER_TEMP[playerid][pt_SEE_ADM_CHAT] ? ("") : ("des"));
		}
		default:
			SendPlayerClientMessage(playerid, "Uso: /notifica [cmd/log/ac/chat]");
	}

	return 1;
}

SetPlayerDrivingSchoolCP(playerid)
{
	if (IsValidDynamicRaceCP(PLAYER_TEMP[playerid][pt_DL_EXAM_CP]))
	{
		DestroyDynamicRaceCP(PLAYER_TEMP[playerid][pt_DL_EXAM_CP]);
		PLAYER_TEMP[playerid][pt_DL_EXAM_CP] = INVALID_STREAMER_ID;
	}

	if (PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] == sizeof(Driving_School_Points) - 1)
	{
		PLAYER_TEMP[playerid][pt_DL_EXAM_CP] =	CreateDynamicRaceCP
												(
													1,
													Driving_School_Points[ PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] ][0],
													Driving_School_Points[ PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] ][1],
													Driving_School_Points[ PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] ][2],
													0.0,
													0.0,
													0.0,
													5.0, 
													0,
													0,
													playerid
												);
	}
	else
	{
		PLAYER_TEMP[playerid][pt_DL_EXAM_CP] =	CreateDynamicRaceCP
												(
													0,
													Driving_School_Points[ PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] ][0],
													Driving_School_Points[ PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] ][1],
													Driving_School_Points[ PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] ][2],
													Driving_School_Points[ PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] + 1][0],
													Driving_School_Points[ PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] + 1][1],
													Driving_School_Points[ PLAYER_TEMP[playerid][pt_DL_EXAM_PROCCESS] + 1][2],
													5.0, 
													0,
													0,
													playerid
												);
	}

	new info[1];
	info[0] = CHECKPOINT_TYPE_DRIVING_SCHOOL;
	Streamer_SetArrayData(STREAMER_TYPE_RACE_CP, PLAYER_TEMP[playerid][pt_DL_EXAM_CP], E_STREAMER_EXTRA_ID, info);
	return 1;
}

CMD:changeflags(playerid, params[])
{
	new cmd[24], flags;
	if (sscanf(params, "s[24]d", cmd, flags)) return SendPlayerClientMessage(playerid, "Uso: /changeflags [cmd] [flags]");
	
	PC_SetFlags(cmd, flags);
	SendPlayerClientMessage(playerid, "Flag de /%s cambiada a %d", cmd, flags);
	return 1;
}

CMD:cobject(playerid, params[]) {
	new modelid;
	if (sscanf(params, "d", modelid)) return SendPlayerClientMessage(playerid, "Uso: /cobject [modelid]");

	new Float:pos[3];
	GetPlayerPos(playerid, pos[0], pos[1], pos[2]);
	pos[0] += (-2.0 * floatsin(-(pos[2] - 90.0), degrees));
	pos[1] += (-2.0 * floatcos(-(pos[2] - 90.0), degrees));
	new objectid = CreateDynamicObject(modelid, pos[0], pos[1], pos[2], 0.0, 0.0, 0.0);
	Streamer_SetArrayData(STREAMER_TYPE_OBJECT, objectid, E_STREAMER_EXTRA_ID, {OBJECT_TYPE_TEST});
	Streamer_Update(playerid);
	EditDynamicObject(playerid, objectid);
	return 1;
}

CMD:selectobject(playerid, params[])
{
	SendPlayerClientMessage(playerid, "Entraste en selección de objetos");
	SelectObject(playerid);

	return 1;
}

CMD:std(playerid, params[]) {
	SelectTextDrawEx(playerid, 0xe8d08fFF);
	return 1;
}


CMD:historial(playerid, params[])
{	
	//
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /historial <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	if (PI[to_playerid][pi_ADMIN_LEVEL] > PI[playerid][pi_ADMIN_LEVEL]) return SendPlayerClientMessage(playerid, "El rango administrativo de este jugador es superior al tuyo.");
	if (!PI[to_playerid][pi_ID]) return SendPlayerClientMessage(playerid, "DB ID = 0!");

	inline OnInfoQueryLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			new caption[40], dialog[1600], line_str[256];
			format(caption, sizeof caption, "Bad historial de %s (%d)", PI[to_playerid][pi_NAME], to_playerid);
			format(dialog, sizeof dialog, "Por\tFecha\tTipo\tDescr.\n");
			if (rows)
			{
				for (new i = 0; i != rows; i ++)
				{
					new name[24], by, type, date[24], text[128], bool:isnull_by;
					cache_get_value_name(i, "name", name);
					cache_is_value_name_null(i, "by", isnull_by);
					if (!isnull_by) cache_get_value_name_int(i, "by", by);
					cache_get_value_name_int(i, "type", type);
					cache_get_value_name(i, "date", date);
					cache_get_value_name(i, "text", text);

					if (by == -1) name = "AC";
					switch(type)
					{
						case TYPE_WARNING: format(line_str, sizeof line_str, "%s\t%s\tAdv\t%s\n", name, date, text);
						case TYPE_KICK: format(line_str, sizeof line_str, "%s\t%s\tKick\t%s\n", name, date, text);
						case TYPE_BAN: format(line_str, sizeof line_str, "%s\t%s\tBan\t%s\n", name, date, text);
						case TYPE_TEMP_BAN: format(line_str, sizeof line_str, "%s\t%s\tTBan\t%s\n", name, date, text);
						case TYPE_UNBAN: format(line_str, sizeof line_str, "%s\t%s\tUnban\t%s\n", name, date, text);
					}
					strcat(dialog, line_str);
				}
			}
			else strcat(dialog, "Sin resultados");
			ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_TABLIST_HEADERS, caption, dialog, "X", "");
			SendPlayerClientMessage(playerid, "Limite: 20");
		}
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT bad_history.*, player.name FROM bad_history LEFT JOIN player ON bad_history.by = player.id WHERE bad_history.id_player = %d ORDER BY bad_history.date LIMIT 20;", PI[to_playerid][pi_ID]);
	MySQL_TQueryInline(handle_db, using inline OnInfoQueryLoad, QUERY_BUFFER);
	return 1;
}

CMD:getversion(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /getversion <playerid>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado");

	new player_version[32];
	GetPlayerVersion(to_playerid, player_version, sizeof player_version);

	SendPlayerClientMessage(playerid, "Jugador %s usa la versión %s", PLAYER_TEMP[to_playerid][pt_NAME], player_version);
	return 1;
}

CMD:printtestvehicles(playerid, params[])
{
	foreach (new i : Vehicle)
	{
		if (GLOBAL_VEHICLES[i][gb_vehicle_VALID] && GLOBAL_VEHICLES[i][gb_vehicle_TYPE] == VEHICLE_TYPE_TEST)
		{
			new Float:x, Float:y, Float:z, Float:angle;
			GetVehiclePos(i, x, y, z);
			GetVehicleZAngle(i, angle);
			printf("{VEHICLE_TYPE_, WORK_, exp, %d, %f, %f, %f, %f, color1, color2, vip, world},", GetVehicleModel(i), x, y, z, angle);
		}
	}
	SendPlayerClientMessage(playerid, "Se hizo un printf de todos los vehiculos de prueba - revisa la consola o el server_log.txt");
	return 1;
}

CMD:placaex(playerid, params[])
{
	if (!PLAYER_WORKS[playerid][WORK_POLICE][pwork_SET]) return SendPlayerClientMessage(playerid, "No eres policia.");
	if (PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_NONE && PLAYER_TEMP[playerid][pt_WORKING_IN] != WORK_POLICE)
	{
		SendPlayerClientMessage(playerid, "Tienes que dejar de estar de servicio como %s primero.", work_info[ PLAYER_TEMP[playerid][pt_WORKING_IN] ][work_info_NAME]);
		return 1;
	}
	
	if (GetPlayerState(playerid) != PLAYER_STATE_ONFOOT) return SendPlayerClientMessage(playerid, "No estás depie.");
	
	if (!PLAYER_TEMP[playerid][pt_WORKING_IN]) ShowDialog(playerid, DIALOG_SELECT_POLICE_SKIN);
	else
	{
		CallLocalFunction("EndPlayerJob", "iib", playerid, PLAYER_TEMP[playerid][pt_WORKING_IN], true);
		PI[playerid][pi_POLICE_DUTY] = 0;
	}
	return 1;
}
alias:placaex("policiaadmin");

CMD:vehicles(playerid, params[])
{
	new to_playerid;
	if (sscanf(params, "u", to_playerid)) return ShowPlayerMessage(playerid, "~>~ /vehicles <player_id>");
	if (!IsPlayerConnected(to_playerid)) return SendPlayerClientMessage(playerid, "Jugador desconectado", to_playerid);
	
	new dialog[115 * (MAX_SU_VEHICLES + 2)], total_vehicles;
	format(dialog, sizeof dialog, "Vehículo\tMatrícula\tDistancia\n");
	for (new i = 0; i != MAX_VEHICLES; i ++)
	{
		if (!GLOBAL_VEHICLES[i][gb_vehicle_VALID]) continue;
		if (!PLAYER_VEHICLES[i][player_vehicle_VALID]) continue;
		if (total_vehicles > MAX_SU_VEHICLES) break;
		
		if (PLAYER_VEHICLES[i][player_vehicle_OWNER_ID] == PI[to_playerid][pi_ID])
		{
			
			new Float:pos[3];
			GetVehiclePos(i, pos[0], pos[1], pos[2]);
			
			new line_str[115];
			format(line_str, sizeof line_str, "{F5F5F5}%d. %s\t{F5F5F5}%s\t{f5f5f5}/gotoveh %d\n", total_vehicles + 1, VEHICLE_INFO[ GLOBAL_VEHICLES[i][gb_vehicle_MODELID] - 400 ][vehicle_info_NAME], GLOBAL_VEHICLES[i][gb_vehicle_NUMBER_PLATE], i);
			strcat(dialog, line_str);
			total_vehicles ++;
		}
	}
	if (total_vehicles == 0) strcat(dialog, "{f5f5f5}El jugador no tiene vehiculos");
	
	ShowPlayerDialog(playerid, DIALOG_INFO, DIALOG_STYLE_TABLIST_HEADERS, "Vehiculos", dialog, "OK", "");
	return 1;
}
alias:vehicles("vehiculos");

getPhoneNumber(dbid)
{
	new number_str[24];
	format(number_str, sizeof number_str, "%d%04d", random(999), dbid);
	return strval(number_str);
}

getBankAccountNumber(dbid)
{
	new number_str[24];
	format(number_str, sizeof number_str, "%d%04d", random(999), dbid);
	return strval(number_str);
}

SetPiDefaultValues(playerid)
{
	new tmp_PI[enum_PI];
	PI[playerid] = tmp_PI;

	new date[24];
	getDateTime(date);

	GetPlayerIp(playerid, PI[playerid][pi_IP], 16);
	format(PI[playerid][pi_NAME], 24, "%s", PLAYER_TEMP[playerid][pt_NAME]);
	format(PI[playerid][pi_LAST_CONNECTION], 24, "%s", date);
	format(PI[playerid][pi_REG_DATE], 24, "%s", date);
	PI[playerid][pi_LAST_CONNECTION_TIMESTAMP] = gettime();
	PI[playerid][pi_LEVEL] = 1;
	PI[playerid][pi_REP] = 1;
	PI[playerid][pi_CONNECTED] = 1;
	PI[playerid][pi_PLAYERID] = playerid;
	PI[playerid][pi_TIME_FOR_REP] = TIME_FOR_REP;
	PI[playerid][pi_SKIN] = Intro_Skins[0][0];
	PI[playerid][pi_CASH] = minrand(5000, 7000);
	PI[playerid][pi_POS_X] = New_User_Pos[0];
	PI[playerid][pi_POS_Y] = New_User_Pos[1];
	PI[playerid][pi_POS_Z] = New_User_Pos[2];
	PI[playerid][pi_ANGLE] = New_User_Pos[3];
	PI[playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
	PI[playerid][pi_FIGHT_STYLE] = 4;
	PI[playerid][pi_HEALTH] = 100.0;
	PI[playerid][pi_HUNGRY] = 100.0;
	PI[playerid][pi_THIRST] = 100.0;
	PI[playerid][pi_CONFIG_SOUNDS] = 1;
	PI[playerid][pi_CONFIG_AUDIO] = 1;
	PI[playerid][pi_CONFIG_TIME] = 1;
	PI[playerid][pi_CONFIG_HUD] = 1;
	PI[playerid][pi_CONFIG_ADMIN] = 1;
	PI[playerid][pi_PHONE_VISIBLE_NUMBER] = 1;
	PI[playerid][pi_DOUBT_CHANNEL] = 1;
	PI[playerid][pi_GLOBAL_CHANNEL] = 1;
	PI[playerid][pi_SELL_CHANNEL] = 1;
	PI[playerid][pi_PLAYER_PLATFORM] = PLAYER_TEMP[playerid][pt_PLAYER_PLATFORM];
	return 1;
}

getDateTime(string[], minutes_interval = 0)
{
	new 
		Year, Month, Day,
		Hour, Minute, Second
	;
	getdate(Year, Month, Day);
	gettime(Hour, Minute, Second);

	if (minutes_interval > 0) {
		// Sumar minutes_interval minutos
		Minute += minutes_interval;

		// Ajustar la hora si los minutos superan 59
		if (Minute >= 60)
		{
			Minute -= 60;
			Hour += 1;

			// Ajustar el día si la hora supera 23
			if (Hour >= 24)
			{
				Hour -= 24;
				Day += 1;

				// Ajustar el mes y año si el día supera el máximo del mes actual
				if (Day > get_days_in_month(Month, Year))
				{
					Day = 1;
					Month += 1;

					// Ajustar el año si el mes supera 12
					if (Month > 12)
					{
						Month = 1;
						Year += 1;
					}
				}
			}
		}
	}

	format(string, 24, "%04d-%02d-%02d %02d:%02d:%02d", Year, Month, Day, Hour, Minute, Second);
	return 1;
}

stock get_days_in_month(month, year) {
    switch (month) {
        case 1, 3, 5, 7, 8, 10, 12: return 31; // Meses con 31 días
        case 4, 6, 9, 11: return 30; // Meses con 30 días
        case 2: { // Febrero (28 o 29 días)
            if ((year % 4 == 0 && year % 100 != 0) || (year % 400 == 0)) {
				return 29; // Año bisiesto
			}

            return 28; // Año normal
        }
    }
    return 0; // Por seguridad
}


public OnPlayerRegister(playerid)
{
	if (PLAYER_TEMP[playerid][pt_LOGIN_KICK_TIMER] != -1) {
		KillTimer(PLAYER_TEMP[playerid][pt_LOGIN_KICK_TIMER]);
		PLAYER_TEMP[playerid][pt_LOGIN_KICK_TIMER] = -1;
	}
	PLAYER_TEMP[playerid][pt_USER_LOGGED] = true;

	TogglePlayerSpectatingEx(playerid, false);
	StopAudioStreamForPlayer(playerid);
	ClearPlayerChat(playerid);
	TogglePlayerControllable(playerid, false);
	
	SendPlayerClientMessage(playerid, "Bienvenido %s, esperemos que disfrutes en {"#PRIMARY_COLOR"}"SERVER_NAME".", PLAYER_TEMP[playerid][pt_NAME]);
	SendPlayerClientMessage(playerid, "Si necesitas ayuda puedes utilizar el comando {"#PRIMARY_COLOR"}/ayuda{F5F5F5} o puedes usar el canal de dudas con el comando /d.");
	
	new message[500];
	format(message, 500, "`%s` se ha registrado en Spain +", PI[playerid][pi_NAME]);
	SendDiscordMessage(""#DISCORD_REGISTER_LOG_CHANNEL"", message);

	PC_EmulateCommand(playerid, "/referido");
	return 1;
}

public OnPlayerLogin(playerid)
{
	PLAYER_TEMP[playerid][pt_USER_LOGGED] = true;

	LoadPlayerVehicles(playerid);
	LoadPlayerPhoneBook(playerid);
	LoadPlayerGPSData(playerid);
	LoadPlayerWorks(playerid);
	LoadPlayerCrewInfo(playerid);
	LoadPlayerInventory(playerid);

	SetPlayerScore(playerid, PI[playerid][pi_LEVEL]);
	PLAYER_TEMP[playerid][pt_DOUBT_CHANNEL_TIME] = gettime();
	PLAYER_TEMP[playerid][pt_GLOBAL_CHANNEL_TIME] = gettime();
	ResetPlayerWeapons(playerid);
	ResetPlayerMoney(playerid);
	GivePlayerMoney(playerid, PI[playerid][pi_CASH]);
	SetPlayerFightingStyle(playerid, PI[playerid][pi_FIGHT_STYLE]);
	SetPlayerHealthEx(playerid, PI[playerid][pi_HEALTH]);
	SetPlayerArmourEx(playerid, PI[playerid][pi_ARMOUR]);
	SetPlayerVirtualWorld(playerid, 0);
	SetPlayerNormalColor(playerid);
	StopAudioStreamForPlayer(playerid);
	SetSpawnInfo(playerid, NO_TEAM, PI[playerid][pi_SKIN], PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z], PI[playerid][pi_ANGLE], 0, 0, 0, 0, 0, 0);
	SetPlayerInterior(playerid, PI[playerid][pi_INTERIOR]);

	PLAYER_TEMP[playerid][pt_INJURED_POS][0] = PI[playerid][pi_POS_X];
	PLAYER_TEMP[playerid][pt_INJURED_POS][1] = PI[playerid][pi_POS_Y];
	PLAYER_TEMP[playerid][pt_INJURED_POS][2] = PI[playerid][pi_POS_Z];
	PLAYER_TEMP[playerid][pt_INJURED_POS][3] = PI[playerid][pi_ANGLE];
	
	PI[playerid][pi_PLAYER_PLATFORM] = PLAYER_TEMP[playerid][pt_PLAYER_PLATFORM];

	PLAYER_TEMP[playerid][pt_BAD_LOGIN_ATTEMP] = 0;
	SendPlayerClientMessage(playerid, "Bienvenido de nuevo {"#PRIMARY_COLOR"}%s, {F5F5F5}tu última conexión fue el {"#PRIMARY_COLOR"}%s.", PLAYER_TEMP[playerid][pt_NAME], PI[playerid][pi_LAST_CONNECTION]);

    TogglePlayerSpectatingEx(playerid, false);
	TogglePlayerControllableEx(playerid, false);
}

LoadPlayerData(playerid)
{
	inline OnPlayerDataLoad()
	{
		new rows;
		if (cache_get_row_count(rows))
		{
			if (rows)
			{
				new bool:isnull_crew;
				cache_get_value_name(0, "reg_date", PI[playerid][pi_REG_DATE], 24);
				cache_get_value_name(0, "last_connection", PI[playerid][pi_LAST_CONNECTION], 24);
				cache_get_value_name_int(0, "last_connection_timestamp", PI[playerid][pi_LAST_CONNECTION_TIMESTAMP]);
				cache_get_value_name_int(0, "time_playing", PI[playerid][pi_TIME_PLAYING]);
				cache_get_value_name_int(0, "level", PI[playerid][pi_LEVEL]);
				cache_get_value_name_int(0, "rep", PI[playerid][pi_REP]);
				cache_get_value_name_int(0, "doubt_channel", PI[playerid][pi_DOUBT_CHANNEL]);
				cache_get_value_name_int(0, "global_channel", PI[playerid][pi_GLOBAL_CHANNEL]);
				cache_get_value_name_int(0, "sell_channel", PI[playerid][pi_SELL_CHANNEL]);
				cache_get_value_name_int(0, "time_for_rep", PI[playerid][pi_TIME_FOR_REP]);
				cache_get_value_name_int(0, "admin_level", PI[playerid][pi_ADMIN_LEVEL]);
				cache_get_value_name_int(0, "payday_rep", PI[playerid][pi_PAYDAY_REP]);
				cache_get_value_name_int(0, "vip", PI[playerid][pi_VIP]);
				cache_get_value_name(0, "vip_expire_date", PI[playerid][pi_VIP_EXPIRE_DATE], 24);
				cache_get_value_name_int(0, "coins", PI[playerid][pi_COINS]);
				cache_get_value_name_int(0, "skin", PI[playerid][pi_SKIN]);
				cache_get_value_name_int(0, "cash", PI[playerid][pi_CASH]);
				cache_get_value_name_float(0, "pos_x", PI[playerid][pi_POS_X]);
				cache_get_value_name_float(0, "pos_y", PI[playerid][pi_POS_Y]);
				cache_get_value_name_float(0, "pos_z", PI[playerid][pi_POS_Z]);
				cache_get_value_name_float(0, "angle", PI[playerid][pi_ANGLE]);
				cache_get_value_name_int(0, "state", PI[playerid][pi_STATE]);
				cache_get_value_name_int(0, "interior", PI[playerid][pi_INTERIOR]);
				cache_get_value_name_int(0, "local_interior", PI[playerid][pi_LOCAL_INTERIOR]);
				cache_get_value_name_int(0, "fight_style", PI[playerid][pi_FIGHT_STYLE]);
				cache_get_value_name_float(0, "health", PI[playerid][pi_HEALTH]);
				cache_get_value_name_float(0, "armour", PI[playerid][pi_ARMOUR]);
				cache_get_value_name_int(0, "gender", PI[playerid][pi_GENDER]);
				cache_get_value_name_float(0, "hungry", PI[playerid][pi_HUNGRY]);
				cache_get_value_name_float(0, "thirst", PI[playerid][pi_THIRST]);
				cache_get_value_name_int(0, "wanted_level", PI[playerid][pi_WANTED_LEVEL]);
				cache_get_value_name_int(0, "police_jail_time", PI[playerid][pi_POLICE_JAIL_TIME]);
				cache_get_value_name_int(0, "police_duty", PI[playerid][pi_POLICE_DUTY]);
				cache_get_value_name_int(0, "police_jail_id", PI[playerid][pi_POLICE_JAIL_ID]);
				cache_get_value_name_int(0, "drive_license_points", PI[playerid][pi_DRIVE_LICENSE]);
				cache_get_value_name_int(0, "bank_account", PI[playerid][pi_BANK_ACCOUNT]);
				cache_get_value_name_int(0, "bank_money", PI[playerid][pi_BANK_MONEY]);
				cache_get_value_name_int(0, "phone_number", PI[playerid][pi_PHONE_NUMBER]);
				cache_get_value_name_int(0, "phone_state", PI[playerid][pi_PHONE_STATE]);
				cache_get_value_name_int(0, "phone_visible_number", PI[playerid][pi_PHONE_VISIBLE_NUMBER]);
				cache_get_value_name_int(0, "gps", PI[playerid][pi_GPS]);
				cache_get_value_name_int(0, "phone_resolver", PI[playerid][pi_PHONE_RESOLVER]);
				cache_get_value_name_int(0, "mechanic_pieces", PI[playerid][pi_MECHANIC_PIECES]);
				cache_get_value_name_int(0, "seed_medicine", PI[playerid][pi_SEED_MEDICINE]);
				cache_get_value_name_int(0, "seed_cannabis", PI[playerid][pi_SEED_CANNABIS]);
				cache_get_value_name_int(0, "seed_crack", PI[playerid][pi_SEED_CRACK]);
				cache_get_value_name_int(0, "medicine", PI[playerid][pi_MEDICINE]);
				cache_get_value_name_int(0, "cannabis", PI[playerid][pi_CANNABIS]);
				cache_get_value_name_int(0, "crack", PI[playerid][pi_CRACK]);
				cache_get_value_name_int(0, "config_sounds", PI[playerid][pi_CONFIG_SOUNDS]);
				cache_get_value_name_int(0, "config_audio", PI[playerid][pi_CONFIG_AUDIO]);
				cache_get_value_name_int(0, "config_time", PI[playerid][pi_CONFIG_TIME]);
				cache_get_value_name_int(0, "config_hud", PI[playerid][pi_CONFIG_HUD]);
				cache_get_value_name_int(0, "config_admin", PI[playerid][pi_CONFIG_ADMIN]);
				cache_get_value_name_int(0, "mute", PI[playerid][pi_MUTE]);
				cache_is_value_name_null(0, "crew", isnull_crew);
				if (!isnull_crew) cache_get_value_name_int(0, "crew", PI[playerid][pi_CREW]);
				cache_get_value_name_int(0, "crew_rank", PI[playerid][pi_CREW_RANK]);
				cache_get_value_name_int(0, "player_platform", PI[playerid][pi_PLAYER_PLATFORM]);
				cache_get_value_name_int(0, "passive_mode", PI[playerid][pi_PASSIVE_MODE]);
				cache_get_value_name_int(0, "passive_mode_timer", PI[playerid][pi_PASSIVE_MODE_TIMER]);
				cache_get_value_name_int(0, "referred", PI[playerid][pi_REFERRED]);
				CallLocalFunction("OnPlayerLogin", "i", playerid);
			}
			else Kick(playerid);
		}
		else Kick(playerid);
	}
	mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT * FROM player WHERE id = %d;", PI[playerid][pi_ID]);
	MySQL_TQueryInline(handle_db, using inline OnPlayerDataLoad, QUERY_BUFFER);
	return 1;
}

UpdatePlayerWorldInfo(playerid)
{
	if (PLAYER_TEMP[playerid][pt_GAME_STATE] == GAME_STATE_DEAD || PLAYER_TEMP[playerid][pt_GAME_STATE] == GAME_STATE_NORMAL)
	{
		//health armour
		GetPlayerHealth(playerid, PI[playerid][pi_HEALTH]);
		GetPlayerArmour(playerid, PI[playerid][pi_ARMOUR]);
		if (PI[playerid][pi_HEALTH] <= 0.0) PI[playerid][pi_HEALTH] = 1.0;
		if (PI[playerid][pi_HEALTH] > 100.0) PI[playerid][pi_HEALTH] = 100.0;
		if (PI[playerid][pi_ARMOUR] > 100.0) PI[playerid][pi_ARMOUR] = 100.0;

		//world
		switch(PI[playerid][pi_STATE])
		{
			case ROLEPLAY_STATE_INTERIOR:
			{
				new index = GetEnterExitIndexById(PI[playerid][pi_LOCAL_INTERIOR]);
				if (index == -1)
				{
					PI[playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
					PI[playerid][pi_LOCAL_INTERIOR] = 0;
					PI[playerid][pi_POS_X] = New_User_Pos[0];
					PI[playerid][pi_POS_Y] = New_User_Pos[1];
					PI[playerid][pi_POS_Z] = New_User_Pos[2];
					PI[playerid][pi_ANGLE] = New_User_Pos[3];
					PI[playerid][pi_INTERIOR] = 0;
				}
				else
				{
					PI[playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
					PI[playerid][pi_LOCAL_INTERIOR] = 0;
					PI[playerid][pi_POS_X] = ENTER_EXIT[index][ee_EXT_X];
					PI[playerid][pi_POS_Y] = ENTER_EXIT[index][ee_EXT_Y];
					PI[playerid][pi_POS_Z] = ENTER_EXIT[index][ee_EXT_Z];
					PI[playerid][pi_ANGLE] = ENTER_EXIT[index][ee_EXT_ANGLE];
					PI[playerid][pi_INTERIOR] = ENTER_EXIT[index][ee_EXT_INTERIOR];
				}
			}
			case ROLEPLAY_STATE_OWN_PROPERTY:
			{
				new index = GetPropertyIndexByID(PI[playerid][pi_LOCAL_INTERIOR]);
				if (index == -1)
				{
					PI[playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
					PI[playerid][pi_LOCAL_INTERIOR] = 0;
					PI[playerid][pi_POS_X] = New_User_Pos[0];
					PI[playerid][pi_POS_Y] = New_User_Pos[1];
					PI[playerid][pi_POS_Z] = New_User_Pos[2];
					PI[playerid][pi_ANGLE] = New_User_Pos[3];
					PI[playerid][pi_INTERIOR] = 0;
				}
				else
				{
					if (PROPERTY_INFO[index][property_OWNER_ID] == PI[playerid][pi_ID])
					{
						PI[playerid][pi_POS_X] = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_X];
						PI[playerid][pi_POS_Y] = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_Y];

						new Float:z_pos = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_Z];
						
						PI[playerid][pi_POS_Z] = z_pos;

						PI[playerid][pi_ANGLE] = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_ANGLE];
						PI[playerid][pi_INTERIOR] = PROPERTY_INTERIORS[ PROPERTY_INFO[index][property_ID_INTERIOR] ][property_INT_INTERIOR];
					}
					else
					{
						PI[playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
						PI[playerid][pi_LOCAL_INTERIOR] = 0;
						PI[playerid][pi_POS_X] = PROPERTY_INFO[index][property_EXT_X];
						PI[playerid][pi_POS_Y] = PROPERTY_INFO[index][property_EXT_Y];
						PI[playerid][pi_POS_Z] = PROPERTY_INFO[index][property_EXT_Z];
						PI[playerid][pi_ANGLE] = PROPERTY_INFO[index][property_EXT_ANGLE];
						PI[playerid][pi_INTERIOR] = PROPERTY_INFO[index][property_EXT_INTERIOR];
					}
				}
			}
			case ROLEPLAY_STATE_GUEST_PROPERTY:
			{
				new index = GetPropertyIndexByID(PI[playerid][pi_LOCAL_INTERIOR]);
				if (index == -1)
				{
					PI[playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
					PI[playerid][pi_LOCAL_INTERIOR] = 0;
					PI[playerid][pi_POS_X] = New_User_Pos[0];
					PI[playerid][pi_POS_Y] = New_User_Pos[1];
					PI[playerid][pi_POS_Z] = New_User_Pos[2];
					PI[playerid][pi_ANGLE] = New_User_Pos[3];
					PI[playerid][pi_INTERIOR] = 0;
				}
				else
				{
					PI[playerid][pi_STATE] = ROLEPLAY_STATE_NORMAL;
					PI[playerid][pi_LOCAL_INTERIOR] = 0;
					PI[playerid][pi_POS_X] = PROPERTY_INFO[index][property_EXT_X];
					PI[playerid][pi_POS_Y] = PROPERTY_INFO[index][property_EXT_Y];
					PI[playerid][pi_POS_Z] = PROPERTY_INFO[index][property_EXT_Z];
					PI[playerid][pi_ANGLE] = PROPERTY_INFO[index][property_EXT_ANGLE];
					PI[playerid][pi_INTERIOR] = PROPERTY_INFO[index][property_EXT_INTERIOR];
				}
			}
			case ROLEPLAY_STATE_JAIL:
			{
				PI[playerid][pi_POS_X] = JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID] ][jail_X];
				PI[playerid][pi_POS_Y] = JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID] ][jail_Y];
				PI[playerid][pi_POS_Z] = JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID] ][jail_Z];
				PI[playerid][pi_ANGLE] = JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID] ][jail_ANGLE];
				PI[playerid][pi_INTERIOR] = JAIL_POSITIONS[ PI[playerid][pi_POLICE_JAIL_ID]  ][jail_INTERIOR];
			}
			default:
			{
				GetPlayerPos(playerid, PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z]);
				GetPlayerFacingAngle(playerid, PI[playerid][pi_ANGLE]);
				PI[playerid][pi_INTERIOR] = GetPlayerInterior(playerid);
			}
		}
		return 1;
	}
	return 0;
}

stock bool:isnan(Float:value)
{
    return (value != value);
}

SavePlayerData(playerid)
{
	if (PI[playerid][pi_ID])
	{
		new tmp_crew[24], tmp_vip_expire_date[24], tmp_wanted_jail_timer[24];
		
		tmp_crew = "NULL";
		if (PI[playerid][pi_CREW]) format(tmp_crew, sizeof tmp_crew, "%d", PI[playerid][pi_CREW]);

		tmp_vip_expire_date = "'0000-00-00 00:00:00'";
		if (strlen(PI[playerid][pi_VIP_EXPIRE_DATE]) > 3) format(tmp_vip_expire_date, sizeof tmp_vip_expire_date, "'%s'", PI[playerid][pi_VIP_EXPIRE_DATE]);

		tmp_wanted_jail_timer = "'0000-00-00 00:00:00'";
		if (strlen(PI[playerid][pi_WANTED_JAIL_TIMER]) > 3) format(tmp_wanted_jail_timer, sizeof tmp_wanted_jail_timer, "'%s'", PI[playerid][pi_WANTED_JAIL_TIMER]);

		if (isnan(PI[playerid][pi_ANGLE])) {
			PI[playerid][pi_ANGLE] = random(360);
		}

		mysql_format
		(
			handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, 
			"\
				UPDATE player SET \
					name = '%e',\
					ip = '%e',\
					email = '%e',\
					pass = '%e',\
					reg_date = '%e',\
					last_connection = '%e',\
					last_connection_timestamp = %d,\
					time_playing = %d,\
					level = %d,\
					rep = %d,\
					connected = %d,\
					playerid = %d,\
					doubt_channel = %d,\
					global_channel = %d,\
					sell_channel = %d,\
					time_for_rep = %d,\
					admin_level = %d,\
					payday_rep = %d,\
					vip = %d,\
					vip_expire_date = %s,\
					skin = %d,\
					cash = %d,\
					pos_x = %f,\
					pos_y = %f,\
					pos_z = %f,\
					angle = %f,\
					state = %d,\
					interior = %d,\
					local_interior = %d,\
					fight_style = %d,\
					health = %f,\
					armour = %f,\
					gender = %d,\
					hungry = %f,\
					thirst = %f,\
					wanted_level = %d,\
					police_jail_time = %d,\
					police_duty = %d,\
					police_jail_id = %d,\
					drive_license_points = %d,\
					bank_account = %d,\
					bank_money = %d,\
					phone_number = %d,\
					phone_state = %d,\
					phone_visible_number = %d,\
					gps = %d,\
					phone_resolver = %d,\
					mechanic_pieces = %d,\
					seed_medicine = %d,\
					seed_cannabis = %d,\
					seed_crack = %d,\
					medicine = %d,\
					cannabis = %d,\
					crack = %d,\
					config_sounds = %d,\
					config_audio = %d,\
					config_time = %d,\
					config_hud = %d,\
					config_admin = %d,\
					mute = %d,\
					crew = %s,\
					crew_rank = %d,\
					player_platform = %d,\
					passive_mode = %d,\
					passive_mode_timer = %d,\
					referred = %d,\
					wanted_jail_timer = %s \
				WHERE id = %d;\
			",
				PI[playerid][pi_NAME], PI[playerid][pi_IP], PI[playerid][pi_EMAIL], PI[playerid][pi_PASS], PI[playerid][pi_REG_DATE], PI[playerid][pi_LAST_CONNECTION],
				PI[playerid][pi_LAST_CONNECTION_TIMESTAMP], PI[playerid][pi_TIME_PLAYING], PI[playerid][pi_LEVEL], PI[playerid][pi_REP], PI[playerid][pi_CONNECTED], PI[playerid][pi_PLAYERID],
				PI[playerid][pi_DOUBT_CHANNEL], PI[playerid][pi_GLOBAL_CHANNEL], PI[playerid][pi_SELL_CHANNEL], PI[playerid][pi_TIME_FOR_REP], PI[playerid][pi_ADMIN_LEVEL], PI[playerid][pi_PAYDAY_REP], PI[playerid][pi_VIP], tmp_vip_expire_date,
				PI[playerid][pi_SKIN], PI[playerid][pi_CASH], PI[playerid][pi_POS_X], PI[playerid][pi_POS_Y], PI[playerid][pi_POS_Z], PI[playerid][pi_ANGLE],
				PI[playerid][pi_STATE], PI[playerid][pi_INTERIOR], PI[playerid][pi_LOCAL_INTERIOR], PI[playerid][pi_FIGHT_STYLE], PI[playerid][pi_HEALTH], PI[playerid][pi_ARMOUR], PI[playerid][pi_GENDER],
				PI[playerid][pi_HUNGRY], PI[playerid][pi_THIRST], PI[playerid][pi_WANTED_LEVEL], PI[playerid][pi_POLICE_JAIL_TIME], PI[playerid][pi_POLICE_DUTY],
				PI[playerid][pi_POLICE_JAIL_ID], PI[playerid][pi_DRIVE_LICENSE], PI[playerid][pi_BANK_ACCOUNT], PI[playerid][pi_BANK_MONEY], PI[playerid][pi_PHONE_NUMBER],
				PI[playerid][pi_PHONE_STATE], PI[playerid][pi_PHONE_VISIBLE_NUMBER], PI[playerid][pi_GPS], PI[playerid][pi_PHONE_RESOLVER],
				PI[playerid][pi_MECHANIC_PIECES], PI[playerid][pi_SEED_MEDICINE], PI[playerid][pi_SEED_CANNABIS], PI[playerid][pi_SEED_CRACK], PI[playerid][pi_MEDICINE],
				PI[playerid][pi_CANNABIS], PI[playerid][pi_CRACK], PI[playerid][pi_CONFIG_SOUNDS], PI[playerid][pi_CONFIG_AUDIO], PI[playerid][pi_CONFIG_TIME], PI[playerid][pi_CONFIG_HUD],
				PI[playerid][pi_CONFIG_ADMIN], PI[playerid][pi_MUTE], tmp_crew, PI[playerid][pi_CREW_RANK],
				PI[playerid][pi_PLAYER_PLATFORM], PI[playerid][pi_PASSIVE_MODE], PI[playerid][pi_PASSIVE_MODE_TIMER], PI[playerid][pi_REFERRED], tmp_wanted_jail_timer,
				PI[playerid][pi_ID]
		);
		mysql_tquery(handle_db, QUERY_BUFFER);
		return 1;
	}
	return 0;
}

CountPlayerVehicles(playerid)
{
	new count;
	if (PI[playerid][pi_ID])
	{
		for (new i = 0; i < MAX_VEHICLES; i ++)
		{
			if (PLAYER_VEHICLES[i][player_vehicle_VALID])
			{
				if (PLAYER_VEHICLES[i][player_vehicle_OWNER_ID] == PI[playerid][pi_ID])
				{
					count ++;
					if (count >= MAX_SU_VEHICLES)
					{
						break;
					}
				}
			}
		}
	}
	return count;
}

CountPlayerProperties(playerid)
{
	new count;
	if (PI[playerid][pi_ID])
	{
		for (new i = 0; i < MAX_PROPERTIES; i ++)
		{
			if (PROPERTY_INFO[i][property_VALID])
			{
				if (PROPERTY_INFO[i][property_SOLD] && PROPERTY_INFO[i][property_OWNER_ID] == PI[playerid][pi_ID])
				{
					count ++;
					if (count >= MAX_SU_PROPERTIES)
					{
						break;
					}
				}
			}
		}
	}
	return count;
}

SavePlayerWorkLevels(playerid)
{
	if (!PI[playerid][pi_ID]) return 0;
	
	for (new i = 0; i != sizeof work_info; i ++)
	{
		if (!PLAYER_WORKS[playerid][i][pwork_SET] || !i) continue;
		mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "UPDATE pworks SET level = %d WHERE id_player = %d AND id_work = %d;", PLAYER_WORKS[playerid][i][pwork_LEVEL], PI[playerid][pi_ID], i);
		mysql_tquery(handle_db, QUERY_BUFFER);
	}
	return 1;
}

#define PlayerTask_Interval_Seconds 10
ptask PlayerTask[PlayerTask_Interval_Seconds * 1000](playerid)
{
	PI[playerid][pi_TIME_PLAYING] += PlayerTask_Interval_Seconds;
}

stock HexToInt(const string[])//DracoBlue
{
	if (string[0] == 0) return 0;
	new i, cur = 1, res = 0;
	for ( i = strlen(string); i > 0; i--)
	{
		if (string[ i - 1 ] < 58) res = res + cur * (string[ i - 1 ] - 48); 
		else res = res + cur * (string[ i - 1 ] - 65 + 10);
		cur = cur * 16;
	}
	return res;
}

GetCrewTerritories(id)
{
	new count;
	for (new i = 0; i != MAX_TERRITORIES; i ++)
	{
		if (TERRITORIES[i][territory_CREW_ID] == id) count++;
	}
	return count;
}

stock CountPolicesOnDuty()
{
	new count = 0;
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if (PLAYER_WORKS[i][WORK_POLICE][pwork_SET] && PLAYER_TEMP[i][pt_WORKING_IN] == WORK_POLICE)
				{
					count ++;
				}
			}
		}
	}
	return count;
}

stock CountMedicsOnDuty()
{
	new count = 0;
	foreach (new i : Player)
	{
		if (IsPlayerConnected(i))
		{
			if (PLAYER_TEMP[i][pt_GAME_STATE] == GAME_STATE_NORMAL)
			{
				if (PLAYER_WORKS[i][WORK_MEDIC][pwork_SET] && PLAYER_TEMP[i][pt_WORKING_IN] == WORK_MEDIC)
				{
					count ++;
				}
			}
		}
	}
	return count;
}

stock GetPlayerCameraRotation(playerid,&Float:rx,&Float:rz){
	new Float:mx,Float:my,Float:mz;
	GetPlayerCameraFrontVector(playerid,mx,my,mz);
	rx = CompressRotation(-(acos(mz)-90.0));
	rz = CompressRotation((atan2(my,mx)-90.0));
}

stock Float:CompressRotation(Float:rotation){
	return (rotation - floatround(rotation/360.0,floatround_floor)*360.0);
}

CountCrewPlayers(id_crew)
{
    mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d;", id_crew);
    new count, Cache:result = mysql_query(handle_db, QUERY_BUFFER);
    cache_get_value_int(0, 0, count);
    cache_delete(result);
    return count;
}

CountCrewPCPlayers(id_crew)
{
    mysql_format(handle_db, QUERY_BUFFER, sizeof QUERY_BUFFER, "SELECT COUNT(id) FROM player WHERE crew = %d AND player_platform = 0;", id_crew);
    new count, Cache:result = mysql_query(handle_db, QUERY_BUFFER);
    cache_get_value_int(0, 0, count);
    cache_delete(result);
    return count;
}

stock GetRandomPropertyIndex()
{
	new index = -1;
	while(index == -1)
	{
		new tmpIndex = random(MAX_PROPERTIES);
		if (PROPERTY_INFO[tmpIndex][property_VALID]) index = tmpIndex;
	}
	return index;
}

IRawPacket:20(playerid, BitStream:bs) {
    new packetid, rpcid, NumberOfBitsOfData;
    BS_ReadValue(bs, PR_UINT8, packetid, PR_UINT8, rpcid, PR_CUINT32, NumberOfBitsOfData);

    if (packetid == 40 || (NumberOfBitsOfData >= 0x1FFFFF || NumberOfBitsOfData <= 0x80000000 || NumberOfBitsOfData < 0)) {
        printf("Crasher Detected - RPCID: %d, NumberOfBitsOfData: %d", rpcid, NumberOfBitsOfData);
        
		new blockIp[32];
        GetPlayerIp(playerid, blockIp, sizeof blockIp);
        BlockIpAddress(blockIp, 5 * 60 * 1000);
        return false;
    }
    return true;
}

const RPC_VehicleDestroy = 136;
IRPC:RPC_VehicleDestroy(playerid, BitStream:bs)
{
	if (ac_Info[CHEAT_DESTROY_VEHICLE][ac_Enabled]) {
		new vehicleid;
		BS_ReadUint16(bs, vehicleid);

		if (vehicleid <= 0 || vehicleid >= MAX_VEHICLES)
		{
			return 0;
		}

		if (PI[playerid][pi_LEVEL] < 3)
		{
			if ( (vehicleid == GetPlayerVehicleID(playerid) && GLOBAL_VEHICLES[vehicleid][gb_vehicle_DRIVER] == playerid) || (PLAYER_VEHICLES[vehicleid][player_vehicle_VALID] && PLAYER_VEHICLES[vehicleid][player_vehicle_OWNER_ID] == PI[playerid][pi_ID]) )
			{
				return 1;
			}
			return 0;
		}

		if (!IsVehicleStreamedIn(vehicleid, playerid))
		{
			return 0;
		}

		new interval = GetTickDiff(GetTickCount(), PLAYER_TEMP[playerid][pt_LAST_VEHICLE_DESTROY]);
		if (interval < 500)
		{
			new current_gettime = gettime();
			if (current_gettime > PLAYER_AC_INFO[playerid][CHEAT_DESTROY_VEHICLE][p_ac_info_IMMUNITY])
			{
				if (!ac_Info[CHEAT_DESTROY_VEHICLE][ac_Interval]) OnPlayerCheatDetected(playerid, CHEAT_DESTROY_VEHICLE);
				else
				{
					if (current_gettime - PLAYER_AC_INFO[playerid][CHEAT_DESTROY_VEHICLE][p_ac_info_LAST_DETECTION] > ac_Info[CHEAT_DESTROY_VEHICLE][ac_Interval]) PLAYER_AC_INFO[playerid][CHEAT_DESTROY_VEHICLE][p_ac_info_DETECTIONS] = 0;
					else PLAYER_AC_INFO[playerid][CHEAT_DESTROY_VEHICLE][p_ac_info_DETECTIONS] ++;
					
					PLAYER_AC_INFO[playerid][CHEAT_DESTROY_VEHICLE][p_ac_info_LAST_DETECTION] = current_gettime;
					if (PLAYER_AC_INFO[playerid][CHEAT_DESTROY_VEHICLE][p_ac_info_DETECTIONS] >= ac_Info[CHEAT_DESTROY_VEHICLE][ac_Detections]) OnPlayerCheatDetected(playerid, CHEAT_DESTROY_VEHICLE);
				}
			}
			return 0;
		}
		PLAYER_TEMP[playerid][pt_LAST_VEHICLE_DESTROY] = GetTickCount();
	}
    return 1;
}

GetVehicleComponentIndexFromId(vehicleid, id) {
	for (new i = 0; i != MAX_VEHICLE_COMPONENTS; i ++)
	{
		if (GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][i] && GLOBAL_VEHICLES[vehicleid][gb_vehicle_COMPONENTS][i] == id) {
			return i;
		}
	}
	return -1;
}

stock GetPlayerNearVehicle(playerid, Float:radi = 5.0)
{
	if (!IsPlayerConnected(playerid)) return INVALID_VEHICLE_ID;

	new vehicle = INVALID_VEHICLE_ID, Float:PosPlayer[3];
	GetPlayerPos(playerid, PosPlayer[0], PosPlayer[1], PosPlayer[2]);

	for (new i; i < MAX_VEHICLES; i++)
	{
		if (GLOBAL_VEHICLES[i][gb_vehicle_VALID])
		{
			new Float:PosVehicle[3], Float:PosRelative[3], Float:tempDis;
			GetVehiclePos(i, PosVehicle[0], PosVehicle[1], PosVehicle[2]);

			for (new z; z < sizeof(PosVehicle); z++)
			{
				PosRelative[z] = PosVehicle[z] - PosPlayer[z];
			}
				
			tempDis = floatsqroot((floatpower(PosRelative[0], 2)) + (floatpower(PosRelative[1], 2)) + (floatpower(PosRelative[2], 2)));

			if (tempDis <= radi)
			{
				radi = tempDis;
				vehicle = i;
			}
		}
	}
	return vehicle;
}

stock JailPlayerEx(playerid, time, reason[]) {
	StopAudioStreamForPlayer(playerid);
    CancelEdit(playerid);
    HidePlayerDialog(playerid);
	SetPlayerNormalColor(playerid);
	CallLocalFunction("EndPlayerJob", "iib", playerid, PLAYER_TEMP[playerid][pt_WORKING_IN], true);
    PLAYER_TEMP[playerid][pt_HUNGRY_MESSAGE] = false;
    PLAYER_TEMP[playerid][pt_THIRST_MESSAGE] = false;
    PLAYER_TEMP[playerid][pt_PLAYER_IN_ATM] = false;
    PLAYER_TEMP[playerid][pt_CUFFED] = false;
    PLAYER_TEMP[playerid][pt_CUFFING] = false;

    if (PLAYER_TEMP[playerid][pt_WANT_TAXI]) {
        PLAYER_TEMP[playerid][pt_WANT_TAXI] = false;
		DisablePlayerTaxiMark(playerid);
    }

    if (PLAYER_TEMP[playerid][pt_PLAYER_IN_CALL]) EndPhoneCall(playerid);
    if (PLAYER_TEMP[playerid][pt_GPS_MAP]) HidePlayerGpsMap(playerid);

	PI[playerid][pi_POLICE_JAIL_ID] = 0;
    JailPlayer(playerid, time * 60);
    SendPlayerClientMessage(playerid, "{f5f5f5}Te quedan %s minutos de sancion, razón: %s.", TimeConvert(time * 60), reason);
    SetPlayerSpecialAction(playerid, SPECIAL_ACTION_NONE);

	GetPlayerHealth(playerid, PLAYER_TEMP[playerid][pt_ARRESTED_HEALTH]);
	return 1;
}

stock GiveRandomMechanicCrowbar(const playerid) {
	new RandomLoot[] = {1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0};
	if (RandomLoot[ random(sizeof(RandomLoot)) ] == 1) {
		new pocket_slot = GetPlayerValidInventoryPocket(playerid);
		if (pocket_slot != -1) {
			j_PocketInfo[playerid][pocket_slot][pValid] = true;
			j_PocketInfo[playerid][pocket_slot][pType] = INVENTORY_TYPE_CROWBAR;
			j_PocketInfo[playerid][pocket_slot][pExtra] = minrand(1, 10);

			InsertPlayerInventorySlot(playerid, pocket_slot);
			ShowPlayerMessage(playerid, "%s", i_ObjectData[ j_PocketInfo[playerid][pocket_slot][pType] ][i_Name]);
		}
	}
	return 1;
}

stock GiveRandomLumberjackScrew(const playerid) {
	new RandomLoot[] = {1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0};
	if (RandomLoot[ random(sizeof(RandomLoot)) ] == 1) {
		new pocket_slot = GetPlayerValidInventoryPocket(playerid);
		if (pocket_slot != -1) {
			j_PocketInfo[playerid][pocket_slot][pValid] = true;
			j_PocketInfo[playerid][pocket_slot][pType] = INVENTORY_TYPE_SCREWDRIVER;
			j_PocketInfo[playerid][pocket_slot][pExtra] = minrand(1, 12);

			InsertPlayerInventorySlot(playerid, pocket_slot);
			ShowPlayerMessage(playerid, "%s", i_ObjectData[ j_PocketInfo[playerid][pocket_slot][pType] ][i_Name]);
		}
	}
	return 1;
}

/* Módulos */
//#include "core/world_time.pwn"
#include "core/body_objects.pwn"
#include "core/speedo.pwn"
#include "core/taximeter.pwn"
#include "core/air_speedo.pwn"
#include "core/air_veh_fuel.pwn"
#include "core/attachobjecttoobjectex.pwn"
#include "core/injured.pwn"
#include "core/visible_items.pwn"
#include "core/boat_repair_points.pwn"
#include "core/ac_anticbug.pwn"
#include "core/ac_afkpos.pwn"
#include "core/pockets_impl.pwn"
#include "core/work_contract.pwn"
#include "core/work_vehicle_spawner.pwn"
#include "core/vehicle_menu.pwn"
#include "core/work_start_end.pwn"
#include "core/merchants.pwn"
#include "core/parking_slot_impl.pwn"
#include "core/atm_robbery.pwn"
#include "core/medic_healthup.pwn"
#include "core/dealer_ship.pwn"
#include "core/black_market.pwn"
#include "core/discord_tasks.pwn"
#include "core/repair_vehicle.pwn"
#include "core/rent_vehicle.pwn"
#include "core/referred.pwn"
#include "core/crane_service.pwn"
#include "core/disconnect_pickup.pwn"
#include "core/admin_functions.pwn"
